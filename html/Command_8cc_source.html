<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GNUAPL: src/Command.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GNUAPL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Command_8cc_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Command.cc</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    This file is part of GNU APL, a free implementation of the</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    ISO/IEC Standard 13751, &quot;Programming Language APL, Extended&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    Copyright (C) 2008-2016  Dr. JÃ¼rgen Sauermann</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    (at your option) any later version.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    GNU General Public License for more details.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">    You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;dirent.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;limits.h&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;sys/resource.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;</div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &quot;CharCell.hh&quot;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;<span class="preprocessor">#include &quot;ComplexCell.hh&quot;</span></div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;Command.hh&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;Doxy.hh&quot;</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;Executable.hh&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;FloatCell.hh&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;IndexExpr.hh&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;IntCell.hh&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;IO_Files.hh&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;LineInput.hh&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;Nabla.hh&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;NativeFunction.hh&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;Output.hh&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;Parser.hh&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;Prefix.hh&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;Quad_FX.hh&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;Quad_TF.hh&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;StateIndicator.hh&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;Svar_DB.hh&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;Symbol.hh&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;Tokenizer.hh&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;UserFunction.hh&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;UserPreferences.hh&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;ValueHistory.hh&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;Workspace.hh&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;</div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;<span class="preprocessor">#include &quot;Value.hh&quot;</span></div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;<span class="keywordtype">int</span> <a class="code" href="classCommand.html#a7d3314fc076188ed081d4667ca4cb0b7">Command::boxing_format</a> = 0;</div><div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;ShapeItem <a class="code" href="classCommand.html#aa6a83dd9577fb9c0f12ed3562baa9ead">Command::APL_expression_count</a> = 0;</div><div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00060"></a><span class="lineno"><a class="line" href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">   60</a></span>&#160;<a class="code" href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">Command::process_line</a>()</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;{</div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> accu;   <span class="comment">// for new-style multiline strings</span></div><div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> prompt = <a class="code" href="classWorkspace.html#ae7c0cc7419eedbf2c519dc1c202b901b">Workspace::get_prompt</a>();</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;       {</div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;         <a class="code" href="classUCS__string.html">UCS_string</a> line;</div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;         <span class="keywordtype">bool</span> eof = <span class="keyword">false</span>;</div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;         <a class="code" href="classInputMux.html#a8a79cbe5207cde162fb36133ad9defdd">InputMux::get_line</a>(LIM_ImmediateExecution, prompt,</div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                      line, eof, <a class="code" href="classLineInput.html#a7ce871a5af18773d431be4e0746a18eb">LineInput::get_history</a>());</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;         <span class="keywordflow">if</span> (eof) CERR &lt;&lt; <span class="stringliteral">&quot;EOF at &quot;</span> &lt;&lt; LOC &lt;&lt; endl;</div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;</div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;         <span class="keywordflow">if</span> (line.<a class="code" href="classUCS__string.html#a03aed5b59ab15793af300f63abf20de6">ends_with</a>(<span class="stringliteral">&quot;\&quot;\&quot;\&quot;&quot;</span>))   </div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;            {</div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;               <span class="keywordflow">if</span> (accu.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)    <span class="comment">// start of multi-line</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                  {</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                    accu = line;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;                    prompt.<a class="code" href="classUCS__string.html#a5ee12a6873e023f9ad76ffafd7aa9c20">prepend</a>(UNI_RIGHT_ARROW);</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                    accu.resize(line.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() - 3);   <span class="comment">// discard &quot;&quot;&quot;</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;                    accu.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_SPACE);</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;                  }</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;               <span class="keywordflow">else</span>                     <span class="comment">// end of multi-line</span></div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;                  {</div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;                    accu.<a class="code" href="classUCS__string.html#a67ea87cb92e687105b21917ffb4a2a6f">pop_back</a>();   <span class="comment">// trailing &quot; &quot;</span></div><div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                    <a class="code" href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">process_line</a>(accu);</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                    <span class="keywordflow">return</span>;</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                  }</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;            }</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (accu.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="comment">// inside multi-line</span></div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;            {</div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;              accu.<a class="code" href="classUCS__string.html#ad14d08312e34ad5d733360eccf9a745a">append_ASCII</a>(<span class="stringliteral">&quot;\&quot;&quot;</span>);</div><div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;              accu.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(line.<a class="code" href="classUCS__string.html#afd4c5d6cd5482ce0979527de1f3699b5">do_escape</a>(<span class="keyword">true</span>));</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;              accu.<a class="code" href="classUCS__string.html#ad14d08312e34ad5d733360eccf9a745a">append_ASCII</a>(<span class="stringliteral">&quot;\&quot; &quot;</span>);</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;            }</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;         <span class="keywordflow">else</span>                   <span class="comment">// normal input line</span></div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;            {</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;              <a class="code" href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">process_line</a>(line);</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;            }</div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;       }</div><div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;}</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00104"></a><span class="lineno"><a class="line" href="classCommand.html#ae26693534d4df16372f51e55e505b8d7">  104</a></span>&#160;<a class="code" href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">Command::process_line</a>(<a class="code" href="classUCS__string.html">UCS_string</a> &amp; line)</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;{</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   line.<a class="code" href="classUCS__string.html#a07e8673ec73ad31228be88053aeff1b1">remove_leading_whitespaces</a>();</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;   <span class="keywordflow">if</span> (line.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)           <span class="keywordflow">return</span>;   <span class="comment">// empty input line</span></div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;</div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;   <span class="keywordflow">switch</span>(line[0])</div><div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;      {</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;         <span class="keywordflow">case</span> UNI_ASCII_R_PARENT:      <span class="comment">// regular command, e.g. )SI</span></div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;              <a class="code" href="classCommand.html#ac143785ae5217051a7ef49bcbde1893c">do_APL_command</a>(COUT, line);</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;              <span class="keywordflow">if</span> (line.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="keywordflow">break</span>;</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;         <span class="keywordflow">case</span> UNI_ASCII_R_BRACK:       <span class="comment">// debug command, e.g. ]LOG</span></div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;              <a class="code" href="classCommand.html#ac143785ae5217051a7ef49bcbde1893c">do_APL_command</a>(CERR, line);</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;              <span class="keywordflow">if</span> (line.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="keywordflow">break</span>;</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;         <span class="keywordflow">case</span> UNI_NABLA:               <span class="comment">// e.g. âFUN</span></div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;              <a class="code" href="classNabla.html#a5571a862b4a619a9c6404dcb7fcf385f">Nabla::edit_function</a>(line);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;</div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;         <span class="keywordflow">case</span> UNI_ASCII_NUMBER_SIGN:   <span class="comment">// e.g. # comment</span></div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;         <span class="keywordflow">case</span> UNI_COMMENT:             <span class="comment">// e.g. â comment</span></div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;      }</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;</div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;   ++<a class="code" href="classCommand.html#aa6a83dd9577fb9c0f12ed3562baa9ead">APL_expression_count</a>;</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;   <a class="code" href="classCommand.html#af36741357bfd4e183b34ee8b747bc7c5">do_APL_expression</a>(line);</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;}</div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00137"></a><span class="lineno"><a class="line" href="classCommand.html#ac143785ae5217051a7ef49bcbde1893c">  137</a></span>&#160;<a class="code" href="classCommand.html#ac143785ae5217051a7ef49bcbde1893c">Command::do_APL_command</a>(ostream &amp; out, <a class="code" href="classUCS__string.html">UCS_string</a> &amp; line)</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;{</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> line1(line);   <span class="comment">// the original line</span></div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   <span class="comment">// split line into command and arguments</span></div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> cmd;   <span class="comment">// the command without arguments</span></div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;<span class="keywordtype">int</span> len = 0;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   line.<a class="code" href="classUCS__string.html#a21c71f20fbd921dd1933404a2674c3cb">copy_black</a>(cmd, len);</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> arg(line, len, line.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() - len);</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> args = <a class="code" href="classCommand.html#a3c8718c78546d294a18e5793329e9df0">split_arg</a>(arg);</div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;   line.clear();</div><div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;   <span class="keywordflow">if</span> (!cmd.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;)MORE&quot;</span>)) </div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;      {</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;        <span class="comment">// clear )MORE info unless command is )MORE</span></div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>().clear();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;      }</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="preprocessor">#define cmd_def(cmd_str, code, garg, _hint)                          \</span></div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;<span class="preprocessor">   if (cmd.starts_iwith(cmd_str))                                    \</span></div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;<span class="preprocessor">      { if (check_params(out, cmd_str, args.size(), garg))   return true; \</span></div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;<span class="preprocessor">        code; return false; }</span></div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;<span class="preprocessor">#include &quot;Command.def&quot;</span></div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;   <span class="comment">// check for user defined commands...</span></div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   loop(u, <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;       {</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;         <span class="keywordflow">if</span> (cmd.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].prefix))</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;            {</div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;              <a class="code" href="classCommand.html#a2f17c91a8b65e540a207da7c3be94dec">do_USERCMD</a>(out, line, line1, cmd, args, u);</div><div class="line"><a name="l00170"></a><span class="lineno">  170</span>&#160;              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;            }</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;       }</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;     out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;     <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;}</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00179"></a><span class="lineno"><a class="line" href="classCommand.html#a78b8f6d900683d8c1392c3f87fd4d4ac">  179</a></span>&#160;<a class="code" href="classCommand.html#a78b8f6d900683d8c1392c3f87fd4d4ac">Command::check_params</a>(ostream &amp; out, <span class="keyword">const</span> <span class="keywordtype">char</span> * command, <span class="keywordtype">int</span> argc,</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;                      <span class="keyword">const</span> <span class="keywordtype">char</span> * args)</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;{</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   <span class="comment">// allow everything for ]USERCMD</span></div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;   <span class="keywordflow">if</span> (!strcmp(command, <span class="stringliteral">&quot;]USERCMD&quot;</span>))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;   <span class="comment">// analyze args to figure the number of parametes expected.</span></div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;<span class="keywordtype">int</span> mandatory_args = 0;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;<span class="keywordtype">int</span> opt_args = 0;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;<span class="keywordtype">int</span> brackets = 0;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;<span class="keywordtype">bool</span> in_param = <span class="keyword">false</span>;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;<span class="keywordtype">bool</span> many = <span class="keyword">false</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> args_ucs(args);</div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;   loop (a, args_ucs.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="keywordflow">switch</span>(args_ucs[a])</div><div class="line"><a name="l00196"></a><span class="lineno">  196</span>&#160;       {</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;[&#39;</span>: ++brackets;   in_param = <span class="keyword">false</span>;   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;]&#39;</span>: --brackets;   in_param = <span class="keyword">false</span>;   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;|&#39;</span>:               in_param = <span class="keyword">false</span>;</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;              <span class="keywordflow">if</span> (brackets)   --opt_args;</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;              <span class="keywordflow">else</span>            --mandatory_args;</div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;.&#39;</span>:</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;              <span class="keywordflow">if</span> (a &lt; (args_ucs.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() - 2) &amp;&amp;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;                  args_ucs[a + 1] == <span class="charliteral">&#39;.&#39;</span>    &amp;&amp;</div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                  args_ucs[a + 2] == <span class="charliteral">&#39;.&#39;</span>)   many = <span class="keyword">true</span>;</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;0&#39;</span> ... <span class="charliteral">&#39;9&#39;</span>:</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;_&#39;</span>:</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span> ... <span class="charliteral">&#39;Z&#39;</span>:</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;a&#39;</span> ... <span class="charliteral">&#39;z&#39;</span>:</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;         <span class="keywordflow">case</span> UNI_OVERBAR:</div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>:</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;              <span class="keywordflow">if</span> (!in_param)   <span class="comment">// start of a name or range</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                 {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                   <span class="keywordflow">if</span> (brackets)   ++opt_args;</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                   <span class="keywordflow">else</span>            ++mandatory_args;</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                   in_param = <span class="keyword">true</span>;</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                 }</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;         <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>: in_param = <span class="keyword">false</span>;</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;         <span class="keywordflow">default</span>: Q1(args_ucs[a])   Q1(<span class="keywordtype">int</span>(args_ucs[a]))</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;       }</div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;   <span class="keywordflow">if</span> (argc &lt; mandatory_args)   <span class="comment">// too few parameters</span></div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;      {</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;missing parameter(s) in command &quot;</span> &lt;&lt; command</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;. Usage:\n&quot;</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; command &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; args;</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;      }</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;   <span class="keywordflow">if</span> (many)   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;   <span class="keywordflow">if</span> (argc &gt; (mandatory_args + opt_args))   <span class="comment">// too many parameters</span></div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;      {</div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;too many (&quot;</span> &lt;&lt; argc&lt;&lt; <span class="stringliteral">&quot;) parameter(s) in command &quot;</span></div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                     &lt;&lt; command &lt;&lt; <span class="stringliteral">&quot;. Usage:\n&quot;</span></div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; command &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; args;</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;      }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// OK</span></div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;}</div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00252"></a><span class="lineno"><a class="line" href="classCommand.html#af36741357bfd4e183b34ee8b747bc7c5">  252</a></span>&#160;<a class="code" href="classCommand.html#af36741357bfd4e183b34ee8b747bc7c5">Command::do_APL_expression</a>(<a class="code" href="classUCS__string.html">UCS_string</a> &amp; line)</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;{</div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;   <a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>().clear();</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;<a class="code" href="classExecutable.html">Executable</a> * statements = 0;</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;   <span class="keywordflow">try</span></div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;      {</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;        statements = <a class="code" href="classStatementList.html#a20b0b6ca4bd952856e75bdecc7fc110a">StatementList::fix</a>(line, LOC);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;      }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;   <span class="keywordflow">catch</span> (<a class="code" href="classError.html">Error</a> err)</div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;      {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;        UERR &lt;&lt; <a class="code" href="classError.html#a9dbfb665cecfad231189862c5f414c48">Error::error_name</a>(err.<a class="code" href="classError.html#a73c1f4ab40f4e313f504562d52bb001e">get_error_code</a>());</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>().<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   UERR &lt;&lt; UNI_ASCII_PLUS;</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;        UERR &lt;&lt; endl;</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;        <span class="keywordflow">if</span> (*err.<a class="code" href="classError.html#a780179b6629a91e2aff82f6165e6d4bd">get_error_line_2</a>())</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;           {</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;             COUT &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; err.<a class="code" href="classError.html#a780179b6629a91e2aff82f6165e6d4bd">get_error_line_2</a>() &lt;&lt; endl</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; err.<a class="code" href="classError.html#a782d3b90b8d5e00842b9aa46b510de77">get_error_line_3</a>() &lt;&lt; endl;</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;           }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;        err.<a class="code" href="classError.html#ac3d41db87a1c0aa40928ed6d2c12bc33">print</a>(UERR, LOC);</div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;        <span class="keyword">delete</span> statements;</div><div class="line"><a name="l00274"></a><span class="lineno">  274</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;      }</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;   <span class="keywordflow">catch</span> (...)</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;      {</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;*** Command::process_line() caught other exception ***&quot;</span></div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;             &lt;&lt; endl;</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;        <span class="keyword">delete</span> statements;</div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;        <a class="code" href="classCommand.html#aafd8a7df22d24109a5ea7de47267f241">cmd_OFF</a>(0);</div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;      }</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordflow">if</span> (statements == 0)</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;      {</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;        COUT &lt;&lt; <span class="stringliteral">&quot;main: Parse error.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;      }</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;   <span class="comment">// At this point, the user command was parsed correctly.</span></div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   <span class="comment">// check for Escape (â)</span></div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   {</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;     <span class="keyword">const</span> <a class="code" href="classToken__string.html">Token_string</a> &amp; body = statements-&gt;<a class="code" href="classExecutable.html#a5085ae774705082dc077ed81863a8469">get_body</a>();</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;     <span class="keywordflow">if</span> (body.size() == 3                &amp;&amp;</div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;         body[0].get_tag() == TOK_ESCAPE &amp;&amp;</div><div class="line"><a name="l00297"></a><span class="lineno">  297</span>&#160;         body[1].get_Class() == TC_END   &amp;&amp;</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;         body[2].get_tag() == TOK_RETURN_STATS)</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;        {</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;          <span class="comment">// remove all SI entries up to (including) the next immediate</span></div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;          <span class="comment">// execution context</span></div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;          <span class="comment">//</span></div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;          <span class="keywordflow">for</span> (<span class="keywordtype">bool</span> goon = <span class="keyword">true</span>; goon;)</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;              {</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;                <a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>();</div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;                <span class="keywordflow">if</span> (si == 0)   <span class="keywordflow">break</span>;   <span class="comment">// SI empty</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;</div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;                goon = si-&gt;<a class="code" href="classStateIndicator.html#aa6584f8a9afaf76a334fb33517e36987">get_parse_mode</a>() != PM_STATEMENT_LIST;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;                si-&gt;<a class="code" href="classStateIndicator.html#afca13502d9ce16b01d8b7ec95da872fd">escape</a>();   <span class="comment">// pop local vars of user defined functions</span></div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;                <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;              }</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;</div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;          <span class="keyword">delete</span> statements;</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;          <span class="keywordflow">return</span>;</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        }</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;   }</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;<span class="comment">// statements-&gt;print(CERR);</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;   <span class="comment">// push a new context for the statements.</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <a class="code" href="classWorkspace.html#a1d227be0952fda0d4c1e9f45e60e83e0">Workspace::push_SI</a>(statements, LOC);</div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;   <a class="code" href="classCommand.html#a879617e7645bea2e4052154f16999634">finish_context</a>();</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;}</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00327"></a><span class="lineno"><a class="line" href="classCommand.html#a879617e7645bea2e4052154f16999634">  327</a></span>&#160;<a class="code" href="classCommand.html#a879617e7645bea2e4052154f16999634">Command::finish_context</a>()</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;{</div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l00330"></a><span class="lineno">  330</span>&#160;       {</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;         <span class="comment">// NOTE that the entire SI may change while executing this loop.</span></div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;         <span class="comment">// We should therefore avoid references to SI entries.</span></div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;         <a class="code" href="classToken.html">Token</a> token = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#a8923e217fa9bf331dd84cc15487dd177">get_executable</a>()-&gt;<a class="code" href="classExecutable.html#a56bddb63158eedc401fe8ec3ce04f787">execute_body</a>();</div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;<span class="comment">// Q1(token)</span></div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;         <span class="comment">// start over if execution has pushed a new SI entry</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;         <span class="keywordflow">if</span> (token.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>() == TOK_SI_PUSHED)   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;check_EOC:</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classQuad__FIO.html#ad9d0099fb5d1ebe9a2ec8a8dd2b3b68d">Quad_FIO::benchmark_cycles_from</a>)   <span class="comment">// a benchmark is ongoing</span></div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;            {</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">get_parent</a>())</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;                 {</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;                   <span class="keywordflow">if</span> (si-&gt;is_safe_execution_start())</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;                      {</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;                        <span class="comment">// at this point token is the result of a defined</span></div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;                        <span class="comment">// function which is being benchmarked. Replace the</span></div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;                        <span class="comment">// result by the number of CPU cycles executed since</span></div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;                        <span class="comment">// the start of the benchmark.</span></div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;                        <span class="comment">//</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;                        <span class="keyword">const</span> uint64_t to = cycle_counter();</div><div class="line"><a name="l00356"></a><span class="lineno">  356</span>&#160;                        <span class="keyword">const</span> uint64_t from = <a class="code" href="classQuad__FIO.html#ad9d0099fb5d1ebe9a2ec8a8dd2b3b68d">Quad_FIO::benchmark_cycles_from</a>;</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;                        <span class="keyword">const</span> uint64_t diff = to - from;</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;                        <a class="code" href="classValue__P.html">Value_P</a> val = IntScalar(diff, LOC);</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;                        token.<a class="code" href="classToken.html#a3d7d59eaac1535df1433357d5d372f84">~Token</a>();   <span class="comment">// free the value (if any)</span></div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;                        <span class="keyword">new</span> (&amp;token) <a class="code" href="classToken.html">Token</a>(TOK_APL_VALUE1, val);</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;                        si-&gt;clear_safe_execution();</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;                      }</div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;                 }</div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;            }</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;is_safe_execution_start())</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;            {</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classQuad__FIO.html#ad9d0099fb5d1ebe9a2ec8a8dd2b3b68d">Quad_FIO::benchmark_cycles_from</a>)</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;                 {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;                   <span class="comment">// âFIO[-1] has started a cycle measurement. Read the CPU</span></div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;                   <span class="comment">// cycle counter, compute the cycle difference, stop the</span></div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;                   <span class="comment">// measurement, and return the the cycle difference as int</span></div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;                   <span class="comment">// scalar...</span></div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;                   <span class="comment">//</span></div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;                   <span class="keyword">const</span> uint64_t to = cycle_counter();</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;                   <span class="keyword">const</span> uint64_t diff = to - <a class="code" href="classQuad__FIO.html#ad9d0099fb5d1ebe9a2ec8a8dd2b3b68d">Quad_FIO::benchmark_cycles_from</a>;</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;                   token = <a class="code" href="classToken.html">Token</a>(TOK_APL_VALUE1, IntScalar(diff, LOC));</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;                   Quad_FIO::benchmark_cycles_from = 0;</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;                 }</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;                 {</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;                   <a class="code" href="classQuad__EC.html#a44e3cc95f4d9c98ced01bf1810c32208">Quad_EC::eoc</a>(token);</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;                 }</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;            }</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;</div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;         <span class="comment">// the far most frequent cases are TC_VALUE and TOK_VOID</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;         <span class="comment">// so we handle them first.</span></div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;         <span class="keywordflow">if</span> (token.<a class="code" href="classToken.html#a049cd3eb72ae0c6427e523d399876b86">get_Class</a>() == TC_VALUE || token.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>() == TOK_VOID )</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;            {</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#aa6584f8a9afaf76a334fb33517e36987">get_parse_mode</a>() == PM_STATEMENT_LIST)</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;                 {</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;                   <span class="keywordflow">if</span> (attention_is_raised())</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;                      {</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;                        clear_attention_raised(LOC);</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;                        clear_interrupt_raised(LOC);</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;                        ATTENTION;</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;                      }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;                   <span class="keywordflow">break</span>;   <span class="comment">// will return to calling context</span></div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;                 }</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;              <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;              <span class="comment">// we are back in the calling SI. There should be a TOK_SI_PUSHED</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;              <span class="comment">// token at the top of stack. Replace it with the result from</span></div><div class="line"><a name="l00406"></a><span class="lineno">  406</span>&#160;              <span class="comment">//  the called (just poped) SI.</span></div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;              {</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;                <a class="code" href="classPrefix.html">Prefix</a> &amp; prefix =</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;                         <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#a192beb8b85f88094f6ec841821166939">get_prefix</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;                Assert(prefix.<a class="code" href="classPrefix.html#a84943b5d0ba357555e3c03c244382777">at0</a>().<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>() == TOK_SI_PUSHED);</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;                <span class="keyword">new</span> (&amp;prefix.<a class="code" href="classPrefix.html#addb6f527f608e25888c207d5428e8242">tos</a>().<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(token);</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;              }</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;              <span class="keywordflow">if</span> (attention_is_raised())</div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;                 {</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;                   clear_attention_raised(LOC);</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;                   clear_interrupt_raised(LOC);</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;                   ATTENTION;</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;                 }</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;            }</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;         <span class="keywordflow">if</span> (token.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>() == TOK_BRANCH)</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;            {</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;              <span class="keyword">const</span> Function_Line line = Function_Line(token.<a class="code" href="classToken.html#a9721c23968d7272edd1abae91ba77193">get_int_val</a>());</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;              <span class="keywordflow">if</span> (line == Function_Retry                                     &amp;&amp;</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;                  <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#aa6584f8a9afaf76a334fb33517e36987">get_parse_mode</a>() == PM_STATEMENT_LIST &amp;&amp;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;                  <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">get_parent</a>())</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                 {</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                   <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;                   <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;<a class="code" href="classStateIndicator.html#a4989125b7d6f01ac0979a8f747c019a5">retry</a>(LOC);</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                 }</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;              <a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a4f16b318ce57e107a03017eb87c80983">Workspace::SI_top_fun</a>();</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;              <span class="keywordflow">if</span> (si == 0)</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                 {</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                    <span class="stringliteral">&quot;branch back into function (âN) without suspended function&quot;</span>;</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;                    SYNTAX_ERROR;   <span class="comment">// âN without function,</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                 }</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;              <span class="comment">// pop contexts above defined function</span></div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;              <span class="keywordflow">while</span> (si != <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>())   <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;              si-&gt;<a class="code" href="classStateIndicator.html#abe48451c67c413334c2f9b1bb43014aa">goon</a>(line, LOC);</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;            }</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;         <span class="keywordflow">if</span> (token.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>() == TOK_ESCAPE)</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;            {</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;              <span class="comment">// remove all SI entries up to (including) the next immediate</span></div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;              <span class="comment">// execution context</span></div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;              <span class="keywordflow">for</span> (<span class="keywordtype">bool</span> goon = <span class="keyword">true</span>; goon;)</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;                  {</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;                    <a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>();</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;                    <span class="keywordflow">if</span> (si == 0)   <span class="keywordflow">break</span>;   <span class="comment">// SI empty</span></div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;                    goon = si-&gt;<a class="code" href="classStateIndicator.html#aa6584f8a9afaf76a334fb33517e36987">get_parse_mode</a>() != PM_STATEMENT_LIST;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;                    si-&gt;<a class="code" href="classStateIndicator.html#afca13502d9ce16b01d8b7ec95da872fd">escape</a>();   <span class="comment">// pop local vars of user defined functions</span></div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;                    <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;                  }</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;            }</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;</div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;         <span class="keywordflow">if</span> (token.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>() == TOK_ERROR)</div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;            {</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;              <span class="keywordflow">if</span> (token.<a class="code" href="classToken.html#a9721c23968d7272edd1abae91ba77193">get_int_val</a>() == E_COMMAND_PUSHED)</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;                 {</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;                   <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;                   <a class="code" href="classUCS__string.html">UCS_string</a> pushed_command = <a class="code" href="classWorkspace.html#ab1c7cb2634d945d28166c30ecc6e1506">Workspace::get_pushed_Command</a>();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;                   <a class="code" href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">process_line</a>(pushed_command);</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;                   pushed_command.clear();</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;                   <a class="code" href="classWorkspace.html#ae10c8a897ceb5a9f4a161cdfa2e33b3b">Workspace::push_Command</a>(pushed_command);   <span class="comment">// clear in</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;                   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00481"></a><span class="lineno">  481</span>&#160;                 }</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;              <span class="comment">// clear attention and interrupt flags</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;              clear_attention_raised(LOC);</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;              clear_interrupt_raised(LOC);</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;</div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;              <span class="comment">// check for safe execution mode. Unroll all SI entries that</span></div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;              <span class="comment">// have the same safe_execution_count, except the last</span></div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;              <span class="comment">// unroll the SI stack.</span></div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;get_safe_execution())</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;                 {</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;                   <span class="comment">// SI_top() is in save execution mode. Pop it and all</span></div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;                   <span class="comment">// callers with the same get_safe_execution() level.</span></div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;                   <span class="comment">//</span></div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;                   <span class="comment">// after pop&#39;ing the SI entries only the original SI</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;                   <span class="comment">// (which has set the save execution mode) shall remain</span></div><div class="line"><a name="l00499"></a><span class="lineno">  499</span>&#160;                   <span class="comment">// the SI stack.</span></div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;                   <span class="comment">//</span></div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;                   <a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>();</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;                   <span class="keyword">const</span> <span class="keywordtype">int</span> sex_level = si-&gt;<a class="code" href="classStateIndicator.html#aed5cced5e7997bb7b12d4e4cf948f165">get_safe_execution</a>();</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;                   <span class="keywordflow">while</span> (si-&gt;<a class="code" href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">get_parent</a>() &amp;&amp; sex_level ==</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;                          si-&gt;<a class="code" href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">get_parent</a>()-&gt;<a class="code" href="classStateIndicator.html#aed5cced5e7997bb7b12d4e4cf948f165">get_safe_execution</a>())</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;                      {</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;                        si = si-&gt;<a class="code" href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">get_parent</a>();</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;                        <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;                      }</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;                    <span class="keywordflow">goto</span> check_EOC;</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;                  }</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;              <span class="comment">// if suspend is not allowed then pop all SI entries that</span></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;              <span class="comment">// don&#39;t allow suspend</span></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;get_executable()-&gt;cannot_suspend())</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;                 {</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;                    <a class="code" href="classError.html">Error</a> err = <a class="code" href="classStateIndicator.html#ab5a1edc34e723251bd11b4767d7c49b2">StateIndicator::get_error</a>(<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>());</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;                    <span class="keywordflow">while</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;get_executable()</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;                                              -&gt;cannot_suspend())</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;                       {</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;                         <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;                       }</div><div class="line"><a name="l00524"></a><span class="lineno">  524</span>&#160;</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;                   <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>())</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;                      {</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;                        <a class="code" href="classStateIndicator.html#ab5a1edc34e723251bd11b4767d7c49b2">StateIndicator::get_error</a>(<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()) = err;</div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;                      }</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;                 }</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a7ebb52057f806a09742a97d2befacdf7">Workspace::get_error</a>()-&gt;get_print_loc() == 0)   <span class="comment">// not printed</span></div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;                 {</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;                   <a class="code" href="classWorkspace.html#a7ebb52057f806a09742a97d2befacdf7">Workspace::get_error</a>()-&gt;<a class="code" href="classError.html#ac3d41db87a1c0aa40928ed6d2c12bc33">print</a>(CERR, LOC);</div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;                 }</div><div class="line"><a name="l00535"></a><span class="lineno">  535</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;                 {</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;                    <span class="comment">// CERR &lt;&lt; &quot;ERROR printed twice&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;                 }</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>()-&gt;get_level() == 0)</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;                 {</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                   <a class="code" href="classValue.html#a38979fd196c826557e1614fa0514bbaa">Value::erase_stale</a>(LOC);</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                   <a class="code" href="classIndexExpr.html#af6ce132f19fe86699668a8cd523ffd01">IndexExpr::erase_stale</a>(LOC);</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;                 }</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;            }</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;         <span class="comment">// we should not come here.</span></div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;         Q1(token)  Q1(token.<a class="code" href="classToken.html#a049cd3eb72ae0c6427e523d399876b86">get_Class</a>())  Q1(token.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>())  FIXME;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;       }</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;   <span class="comment">// pop the context for the statements</span></div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;   <a class="code" href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a>(LOC);</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;}</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00559"></a><span class="lineno"><a class="line" href="classCommand.html#a44d50f4ab683653103d3adad9d767826">  559</a></span>&#160;<a class="code" href="classCommand.html#a44d50f4ab683653103d3adad9d767826">Command::cmd_XTERM</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;{</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * term = getenv(<span class="stringliteral">&quot;TERM&quot;</span>);</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;   <span class="keywordflow">if</span> (!strncmp(term, <span class="stringliteral">&quot;dumb&quot;</span>, 4) &amp;&amp; arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;ON&quot;</span>))</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;      {</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;impossible on dumb terminal&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;      }</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;OFF&quot;</span>) || arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;ON&quot;</span>))</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;      {</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;        <a class="code" href="classOutput.html#a366b2a6643a87e6c1f4d46eb01b9948f">Output::toggle_color</a>(arg);</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;      }</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;      {</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;]COLOR/XTERM &quot;</span>;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classOutput.html#a5fbec469bdc1d4ed4cd951ba98784118">Output::color_enabled</a>()) out &lt;&lt; <span class="stringliteral">&quot;ON&quot;</span>; <span class="keywordflow">else</span> out &lt;&lt; <span class="stringliteral">&quot;OFF&quot;</span>;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;        out &lt;&lt; endl;</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;      }</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;      {</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;      }</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;}</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a></div><div class="line"><a name="l00584"></a><span class="lineno"><a class="line" href="classCommand.html#a3c8718c78546d294a18e5793329e9df0">  584</a></span>&#160;<a class="code" href="classCommand.html#a3c8718c78546d294a18e5793329e9df0">Command::split_arg</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;{</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> result;</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">int</span> idx = 0; ; )</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;      {</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;        <a class="code" href="classUCS__string.html">UCS_string</a> next;</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;        arg.<a class="code" href="classUCS__string.html#a21c71f20fbd921dd1933404a2674c3cb">copy_black</a>(next, idx);</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;        <span class="keywordflow">if</span> (next.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)   <span class="keywordflow">return</span> result;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;        result.push_back(next);</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;      }</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;}</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00598"></a><span class="lineno"><a class="line" href="classCommand.html#a209e6b7262396300ee80f7764fc21da3">  598</a></span>&#160;<a class="code" href="classCommand.html#a209e6b7262396300ee80f7764fc21da3">Command::cmd_BOXING</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;{</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;<span class="keywordtype">int</span> format = arg.<a class="code" href="classUCS__string.html#a0caf2e53ce43a721d5207fbf174956c1">atoi</a>();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;      {</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;]BOXING &quot;</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCommand.html#a7d3314fc076188ed081d4667ca4cb0b7">boxing_format</a> == 0) out &lt;&lt; <span class="stringliteral">&quot;OFF&quot;</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;        <span class="keywordflow">else</span> out &lt;&lt; <a class="code" href="classCommand.html#a7d3314fc076188ed081d4667ca4cb0b7">boxing_format</a>;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        out &lt;&lt; endl;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;OFF&quot;</span>))   format = 0;</div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;   <span class="keywordflow">switch</span> (format)</div><div class="line"><a name="l00613"></a><span class="lineno">  613</span>&#160;      {</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;        <span class="keywordflow">case</span> -29:</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;        <span class="keywordflow">case</span> -25: <span class="keywordflow">case</span> -24: <span class="keywordflow">case</span> -23:</div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;        <span class="keywordflow">case</span> -22: <span class="keywordflow">case</span> -21: <span class="keywordflow">case</span> -20:</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;        <span class="keywordflow">case</span> -9: <span class="keywordflow">case</span>  -8: <span class="keywordflow">case</span>  -7:</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;        <span class="keywordflow">case</span> -4: <span class="keywordflow">case</span>  -3: <span class="keywordflow">case</span>  -2:</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">case</span>  0:</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;        <span class="keywordflow">case</span>  2: <span class="keywordflow">case</span>   3: <span class="keywordflow">case</span>   4:</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;        <span class="keywordflow">case</span>  7: <span class="keywordflow">case</span>   8: <span class="keywordflow">case</span>   9:</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;        <span class="keywordflow">case</span> 20: <span class="keywordflow">case</span>  21: <span class="keywordflow">case</span>  22:</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;        <span class="keywordflow">case</span> 23: <span class="keywordflow">case</span>  24: <span class="keywordflow">case</span>  25:</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">case</span> 29:</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;                 <a class="code" href="classCommand.html#a7d3314fc076188ed081d4667ca4cb0b7">boxing_format</a> = format;</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;                 <span class="keywordflow">return</span>;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;      }</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;BAD ]BOXING PARAMETER+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;   MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;Parameter &quot;</span> &lt;&lt; arg &lt;&lt; <span class="stringliteral">&quot; is not valid for command ]BOXING.\n&quot;</span></div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;      <span class="stringliteral">&quot;  Valid parameters are OFF, N, and -N with\n&quot;</span></div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;      <span class="stringliteral">&quot;  N â { 2, 3, 4, 7, 8, 9, 20, 21, 22, 23, 24, 25, 29 }&quot;</span>;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;}</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00636"></a><span class="lineno"><a class="line" href="structCommand_1_1val__val.html#abb89126c909576cce79b1df821334ced">  636</a></span>&#160;<a class="code" href="structCommand_1_1val__val.html#abb89126c909576cce79b1df821334ced">Command::val_val::compare_val_val</a>(<span class="keyword">const</span> <a class="code" href="structCommand_1_1val__val.html">val_val</a> &amp; A,</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;                                  <span class="keyword">const</span> <a class="code" href="structCommand_1_1val__val.html">val_val</a> &amp; B, <span class="keyword">const</span> <span class="keywordtype">void</span> *)</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;{</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;   <span class="keywordflow">return</span> A.<a class="code" href="structCommand_1_1val__val.html#a6b0a1eb1b530fcc312eb9e07f2c3abb0">child</a> &gt; B.<a class="code" href="structCommand_1_1val__val.html#a6b0a1eb1b530fcc312eb9e07f2c3abb0">child</a>;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;}</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l00643"></a><span class="lineno"><a class="line" href="structCommand_1_1val__val.html#ac1d794e618e7599f1ee7df7adf6748f0">  643</a></span>&#160;<a class="code" href="structCommand_1_1val__val.html#ac1d794e618e7599f1ee7df7adf6748f0">Command::val_val::compare_val_val1</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * key, <span class="keyword">const</span> <span class="keywordtype">void</span> * B)</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;{</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;<span class="keyword">const</span> <span class="keywordtype">void</span> * Bv = <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="structCommand_1_1val__val.html">val_val</a> *<span class="keyword">&gt;</span>(B)-&gt;child;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;   <span class="keywordflow">return</span> charP(key) - charP(Bv);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;}</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00650"></a><span class="lineno"><a class="line" href="classCommand.html#af5d73db57801b2363c954b402f19186d">  650</a></span>&#160;<a class="code" href="classCommand.html#af5d73db57801b2363c954b402f19186d">Command::cmd_CHECK</a>(ostream &amp; out)</div><div class="line"><a name="l00651"></a><span class="lineno">  651</span>&#160;{</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;   <span class="comment">// erase stale functions from failed âEX</span></div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   {</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;     <span class="keywordtype">bool</span> erased = <span class="keyword">false</span>;</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;     <span class="keywordtype">int</span> stale = <a class="code" href="classWorkspace.html#a9f82e947e506f90bc39561c2a26f5fec">Workspace::cleanup_expunged</a>(CERR, erased);</div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;     <span class="keywordflow">if</span> (stale)</div><div class="line"><a name="l00658"></a><span class="lineno">  658</span>&#160;        {</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;          out &lt;&lt; <span class="stringliteral">&quot;WARNING - &quot;</span> &lt;&lt; stale &lt;&lt; <span class="stringliteral">&quot; stale functions (&quot;</span></div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;               &lt;&lt; (erased ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;not &quot;</span>) &lt;&lt; <span class="stringliteral">&quot;erased)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;        }</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;     <span class="keywordflow">else</span> out &lt;&lt; <span class="stringliteral">&quot;OK      - no stale functions&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;   }</div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;</div><div class="line"><a name="l00665"></a><span class="lineno">  665</span>&#160;   {</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">int</span> stale = <a class="code" href="classValue.html#a80c3e1a7208f4f97985e5c742ec93b2d">Value::print_stale</a>(CERR);</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;     <span class="keywordflow">if</span> (stale)</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;        {</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;          out &lt;&lt; <span class="stringliteral">&quot;ERROR   - &quot;</span> &lt;&lt; stale &lt;&lt; <span class="stringliteral">&quot; stale values&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;          <a class="code" href="classIO__Files.html#ac7a14dfc38263d79ac39142ac269dfe0">IO_Files::apl_error</a>(LOC);</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;        }</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;     <span class="keywordflow">else</span> out &lt;&lt; <span class="stringliteral">&quot;OK      - no stale values&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;   }</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   {</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">int</span> stale = <a class="code" href="classIndexExpr.html#aa16a458ef14025e0bd3af2c7d8513fcb">IndexExpr::print_stale</a>(CERR);</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;     <span class="keywordflow">if</span> (stale)</div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;        {</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;          out &lt;&lt; <span class="stringliteral">&quot;ERROR   - &quot;</span> &lt;&lt; stale &lt;&lt; <span class="stringliteral">&quot; stale indices&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;          <a class="code" href="classIO__Files.html#ac7a14dfc38263d79ac39142ac269dfe0">IO_Files::apl_error</a>(LOC);</div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;        }</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;     <span class="keywordflow">else</span> out &lt;&lt; <span class="stringliteral">&quot;OK      - no stale indices&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;   }</div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;</div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;   <span class="comment">// discover duplicate parents</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;std::vector&lt;val_val&gt; values;</div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;ShapeItem duplicate_parents = 0;</div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classDynamicObject.html">DynamicObject</a> * obj = <a class="code" href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a>()-&gt;get_next();</div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;        obj != <a class="code" href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a>(); obj = obj-&gt;get_next())</div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;       {</div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;         <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * val = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classValue.html">Value</a> *<span class="keyword">&gt;</span>(obj);</div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;</div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;         <a class="code" href="structCommand_1_1val__val.html">val_val</a> vv = { 0, val };   <span class="comment">// no parent</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;         values.push_back(vv);</div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;       }</div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;</div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;   <a class="code" href="classHeapsort.html#a9b74961df9e87b6a9888924a6a1e2d85">Heapsort&lt;val_val&gt;::sort</a>(&amp;values[0], values.size(), 0,</div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;                           &amp;<a class="code" href="structCommand_1_1val__val.html#abb89126c909576cce79b1df821334ced">val_val::compare_val_val</a>);</div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;   loop(v, (values.size() - 1))</div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;       Assert(&amp;values[v].child &lt; &amp;values[v + 1].child);</div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;</div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;   loop(v, values.size())   <span class="comment">// for every .child (acting as parent here)</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;      {</div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;        <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * val = values[v].child;</div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;        <span class="keyword">const</span> ShapeItem ec = val-&gt;<a class="code" href="classValue.html#ac5b54e3a13cab0837442f1575b3299a5">nz_element_count</a>();</div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;        loop(e, ec)   <span class="comment">// for every ravel cell of the (parent-) value</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;            {</div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;              <span class="keyword">const</span> <a class="code" href="classCell.html">Cell</a> &amp; cP = val-&gt;<a class="code" href="classValue.html#a89120a742c078918d1a5d84ec742e69c">get_ravel</a>(e);</div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;              <span class="keywordflow">if</span> (!cP.<a class="code" href="classCell.html#ae98b3988a7fa52c6c157b4911b043dde">is_pointer_cell</a>())   <span class="keywordflow">continue</span>;   <span class="comment">// not a parent</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;</div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;              <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * sub = cP.<a class="code" href="classCell.html#a3af019707c56a0fb40fce2d370af8307">get_pointer_value</a>().<a class="code" href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">get</a>();</div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;              Assert1(sub);</div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;</div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;              <a class="code" href="structCommand_1_1val__val.html">val_val</a> * vvp = <span class="keyword">reinterpret_cast&lt;</span><a class="code" href="structCommand_1_1val__val.html">val_val</a> *<span class="keyword">&gt;</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;                    (bsearch(sub, &amp;values[0], values.size(), <span class="keyword">sizeof</span>(<a class="code" href="structCommand_1_1val__val.html">val_val</a>),</div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;                            <a class="code" href="structCommand_1_1val__val.html#ac1d794e618e7599f1ee7df7adf6748f0">val_val::compare_val_val1</a>));</div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;              Assert(vvp);</div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;              <span class="keywordflow">if</span> (vvp-&gt;<a class="code" href="structCommand_1_1val__val.html#a6c44960807bfefff55401ad200cf2a3b">parent</a> == 0)   <span class="comment">// child has no parent</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;                 {</div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;                   vvp-&gt;<a class="code" href="structCommand_1_1val__val.html#a6c44960807bfefff55401ad200cf2a3b">parent</a> = val;</div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;                 }</div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;              <span class="keywordflow">else</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;                 {</div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;                   ++duplicate_parents;</div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;                   out &lt;&lt; <span class="stringliteral">&quot;Value * vvp=&quot;</span> &lt;&lt; voidP(vvp) &lt;&lt; <span class="stringliteral">&quot; already has parent &quot;</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;                       &lt;&lt; voidP(vvp-&gt;<a class="code" href="structCommand_1_1val__val.html#a6c44960807bfefff55401ad200cf2a3b">parent</a>) &lt;&lt; <span class="stringliteral">&quot; when checking Value * val=&quot;</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;                       &lt;&lt; voidP(vvp) &lt;&lt; endl;</div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;</div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;                   out &lt;&lt; <span class="stringliteral">&quot;History of the child:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;                   <a class="code" href="classVH__entry.html#ae422e396e1a7268221697abfd927ead0">VH_entry::print_history</a>(out, vvp-&gt;<a class="code" href="structCommand_1_1val__val.html#a6b0a1eb1b530fcc312eb9e07f2c3abb0">child</a>, LOC);</div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;                   out &lt;&lt; <span class="stringliteral">&quot;History of the first parent:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;                   <a class="code" href="classVH__entry.html#ae422e396e1a7268221697abfd927ead0">VH_entry::print_history</a>(out, vvp-&gt;<a class="code" href="structCommand_1_1val__val.html#a6c44960807bfefff55401ad200cf2a3b">parent</a>, LOC);</div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;                   out &lt;&lt; <span class="stringliteral">&quot;History of the second parent:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;                   <a class="code" href="classVH__entry.html#ae422e396e1a7268221697abfd927ead0">VH_entry::print_history</a>(out, val, LOC);</div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;                   out &lt;&lt; endl;</div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;                 }</div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;           }</div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;      }</div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;</div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;   <span class="keywordflow">if</span> (duplicate_parents)</div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;        {</div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;          out &lt;&lt; <span class="stringliteral">&quot;ERROR   - &quot;</span> &lt;&lt; duplicate_parents</div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;              &lt;&lt; <span class="stringliteral">&quot; duplicate parents&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;          <a class="code" href="classIO__Files.html#ac7a14dfc38263d79ac39142ac269dfe0">IO_Files::apl_error</a>(LOC);</div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;        }</div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;   <span class="keywordflow">else</span> out &lt;&lt; <span class="stringliteral">&quot;OK      - no duplicate parents&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;}</div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00751"></a><span class="lineno"><a class="line" href="classCommand.html#ad61e749290966d00856ce1dd4f6abe42">  751</a></span>&#160;<a class="code" href="classCommand.html#ad61e749290966d00856ce1dd4f6abe42">Command::cmd_CONTINUE</a>(ostream &amp; out)</div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;{</div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> wsname(<span class="stringliteral">&quot;CONTINUE&quot;</span>);</div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;   <a class="code" href="classWorkspace.html#ad8aedac4ca9e22cc8881d07eef87dcfe">Workspace::wsid</a>(out, wsname, LIB0, <span class="keyword">false</span>);     <span class="comment">// )WSID CONTINUE</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;   <a class="code" href="classWorkspace.html#a8a4f1d898d523818dbd9d7efa6f2cf92">Workspace::save_WS</a>(out, LIB0, wsname, <span class="keyword">true</span>);   <span class="comment">// )SAVE</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;   <a class="code" href="classCommand.html#aafd8a7df22d24109a5ea7de47267f241">cmd_OFF</a>(0);                                    <span class="comment">// )OFF</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;}</div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00760"></a><span class="lineno"><a class="line" href="classCommand.html#a51b8fbdb5d65baf2fddfc930b9b142cf">  760</a></span>&#160;<a class="code" href="classCommand.html#a51b8fbdb5d65baf2fddfc930b9b142cf">Command::cmd_COPY</a>(ostream &amp; out, <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args, <span class="keywordtype">bool</span> protection)</div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;{</div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;LibRef libref = LIB0;</div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="keyword">const</span> Unicode l = args[0][0];</div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;      <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a>(l))</div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;      {</div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;        libref = LibRef(l - <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;        args.erase(args.begin());</div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;      }</div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;</div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;   <span class="keywordflow">if</span> (args.size() == 0)   <span class="comment">// at least workspace name is required</span></div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;      {</div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;missing workspace name in command )COPY or )PCOPY&quot;</span>;</div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;      }</div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;</div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> wsname = args[0];</div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;   args.erase(args.begin());</div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;   <a class="code" href="classWorkspace.html#a20b0659f2d3987a4bb21d6c399e0a436">Workspace::copy_WS</a>(out, libref, wsname, args, protection);</div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;}</div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00783"></a><span class="lineno"><a class="line" href="classCommand.html#a834eac0e797a5d1c992018b7d0c049a4">  783</a></span>&#160;<a class="code" href="classCommand.html#a834eac0e797a5d1c992018b7d0c049a4">Command::cmd_DOXY</a>(ostream &amp; out, <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;{</div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> root(<span class="stringliteral">&quot;/tmp&quot;</span>);</div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;   <span class="keywordflow">if</span> (args.size())   root = <a class="code" href="classUTF8__string.html">UTF8_string</a>(args[0]);</div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;</div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;   <span class="keywordflow">try</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;     {</div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;       <a class="code" href="classDoxy.html">Doxy</a> doxy(out, root);</div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;       doxy.<a class="code" href="classDoxy.html#ad8abe2e8a1b686a7b35e582c369d41ae">gen</a>();</div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;</div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;       <span class="keywordflow">if</span> (doxy.<a class="code" href="classDoxy.html#a572fcbc935713113cd422c4d46789c8a">get_errors</a>())</div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;          out &lt;&lt; <span class="stringliteral">&quot;Command ]DOXY failed (&quot;</span> &lt;&lt; doxy.<a class="code" href="classDoxy.html#a572fcbc935713113cd422c4d46789c8a">get_errors</a>() &lt;&lt; <span class="stringliteral">&quot; errors)&quot;</span></div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;              &lt;&lt; endl;</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;      <span class="keywordflow">else</span></div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;         out &lt;&lt; <span class="stringliteral">&quot;Command ]DOXY finished successfully.&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;    The generated documentation was stored in directory &quot;</span></div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;             &lt;&lt; doxy.<a class="code" href="classDoxy.html#ab1c9ced7c6526de696e9bf105745b408">get_root_dir</a>() &lt;&lt; endl</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;    You may now browse it from file://&quot;</span></div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;             &lt;&lt; doxy.<a class="code" href="classDoxy.html#ab1c9ced7c6526de696e9bf105745b408">get_root_dir</a>()</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;/index.html&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;     }</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;   <span class="keywordflow">catch</span> (...) {}</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;}</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00808"></a><span class="lineno"><a class="line" href="classCommand.html#a427a447f00c0b3b928b87b74ebd467ea">  808</a></span>&#160;<a class="code" href="classCommand.html#a427a447f00c0b3b928b87b74ebd467ea">Command::cmd_DROP</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; lib_ws)</div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;{</div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;   <span class="comment">// )DROP wsname</span></div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   <span class="comment">// )DROP libnum wsname</span></div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;   <span class="comment">// lib_ws.size() is 1 or 2. If 2 then the first is the lib number</span></div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;LibRef libref = LIB_NONE;</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> wname = lib_ws.back();</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;   <span class="keywordflow">if</span> (lib_ws.size() == 2)   libref = LibRef(lib_ws[0][0] - <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> filename = <a class="code" href="classLibPaths.html#a0da8dd5e9a90282d75239ec86ebb15d4">LibPaths::get_lib_filename</a>(libref, wname, <span class="keyword">true</span>,</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;                                                  <span class="stringliteral">&quot;.xml&quot;</span>, <span class="stringliteral">&quot;.apl&quot;</span>);</div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> result = unlink(filename.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>());</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;   <span class="keywordflow">if</span> (result)</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;      {</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;        out &lt;&lt; wname &lt;&lt; <span class="stringliteral">&quot; NOT DROPPED: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;could not unlink file &quot;</span> &lt;&lt; filename;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;      }</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        <a class="code" href="classWorkspace.html#a34c064c6760d7bfcc10e68700defe327">Workspace::get_v_Quad_TZ</a>().<a class="code" href="classQuad__TZ.html#ab06810e45e19d69ad466f0b0cd184179">print_timestamp</a>(out, now()) &lt;&lt; endl;</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;}</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00837"></a><span class="lineno"><a class="line" href="classCommand.html#a98e7d1dd0c01014d79f2120292588a70">  837</a></span>&#160;<a class="code" href="classCommand.html#a98e7d1dd0c01014d79f2120292588a70">Command::cmd_DUMP</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args,</div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;                  <span class="keywordtype">bool</span> html, <span class="keywordtype">bool</span> silent)</div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;{</div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;   <span class="comment">// )DUMP</span></div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;   <span class="comment">// )DUMP workspace</span></div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;   <span class="comment">// )DUMP lib workspace</span></div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;   <span class="keywordflow">if</span> (args.size() &gt; 0)   <span class="comment">// workspace or lib workspace</span></div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;      {</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;        LibRef lib;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;        <a class="code" href="classUCS__string.html">UCS_string</a> wsname;</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCommand.html#a39c11577c5e25765fbf5c848607a915a">resolve_lib_wsname</a>(out, args, lib, wsname))   <span class="keywordflow">return</span>;   <span class="comment">// error</span></div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;        <a class="code" href="classWorkspace.html#a15d8cb5c62016f547b9718e820c94efd">Workspace::dump_WS</a>(out, lib, wsname, html, silent);</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;      }</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;   <span class="comment">// )DUMP: use )WSID unless CLEAR WS</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;LibRef wsid_lib = LIB0;</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> wsid_name = <a class="code" href="classWorkspace.html#ace4fff7bb6714da724d964c5aa9c5503">Workspace::get_WS_name</a>();</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a>(wsid_name[0]))   <span class="comment">// wsid contains a libnum</span></div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;      {</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;        wsid_lib = LibRef(wsid_name[0] - <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;        wsid_name.<a class="code" href="classUCS__string.html#a52cd4088451200cd78eb2db03b44a8ac">erase</a>(0);</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;        wsid_name.<a class="code" href="classUCS__string.html#a07e8673ec73ad31228be88053aeff1b1">remove_leading_whitespaces</a>();</div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;      }</div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;</div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <span class="keywordflow">if</span> (wsid_name.<a class="code" href="classUCS__string.html#a9a80a1621c030d847983275d62902411">compare</a>(<a class="code" href="classUCS__string.html">UCS_string</a>(<span class="stringliteral">&quot;CLEAR WS&quot;</span>)) == 0)   <span class="comment">// don&#39;t dump CLEAR WS</span></div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;      {</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;        COUT &lt;&lt; <span class="stringliteral">&quot;NOT DUMPED: THIS WS IS CLEAR WS&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;        MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;        <span class="stringliteral">&quot;the workspace was not dumped because &#39;CLEAR WS&#39; is a special\n&quot;</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;        <span class="stringliteral">&quot;workspace name that cannot be dumped. &quot;</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;        <span class="stringliteral">&quot;First create WS name with )WSID &lt;name&gt;.&quot;</span>; </div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;      }</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;</div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;   <a class="code" href="classWorkspace.html#a15d8cb5c62016f547b9718e820c94efd">Workspace::dump_WS</a>(out, wsid_lib, wsid_name, html, silent);</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;}</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00880"></a><span class="lineno"><a class="line" href="classCommand.html#a11ccda9c4eea7546be450e30a029650a">  880</a></span>&#160;<a class="code" href="classCommand.html#a11ccda9c4eea7546be450e30a029650a">Command::cmd_ERASE</a>(ostream &amp; out, <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;{</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;   <a class="code" href="classWorkspace.html#a28f04b4a3bfcdc52f82d24c060475c61">Workspace::erase_symbols</a>(out, args);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;}</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00886"></a><span class="lineno"><a class="line" href="classCommand.html#a27d91074be8c72a8876a0d557ceb5333">  886</a></span>&#160;<a class="code" href="classCommand.html#a27d91074be8c72a8876a0d557ceb5333">Command::cmd_KEYB</a>(ostream &amp; out)</div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;{</div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;   <span class="comment">// maybe print user-supplied keyboard layout file</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;   <span class="keywordflow">if</span> (uprefs.<a class="code" href="structUserPreferences.html#a058b17d5427be7ae69a8ae91b7ee597a">keyboard_layout_file</a>.size())</div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;      {</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;        FILE * layout = fopen(uprefs.<a class="code" href="structUserPreferences.html#a058b17d5427be7ae69a8ae91b7ee597a">keyboard_layout_file</a>.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;        <span class="keywordflow">if</span> (layout == 0)</div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;           {</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;Could not open &quot;</span> &lt;&lt; uprefs.<a class="code" href="structUserPreferences.html#a058b17d5427be7ae69a8ae91b7ee597a">keyboard_layout_file</a></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl</div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;Showing default layout instead&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;           }</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;           {</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;User-defined Keyboard Layout:\n&quot;</span>;</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;             <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                 {</div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;                    <span class="keyword">const</span> <span class="keywordtype">int</span> cc = fgetc(layout);</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;                    <span class="keywordflow">if</span> (cc == EOF)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;                    out &lt;&lt; char(cc);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;                 }</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;             out &lt;&lt; endl;</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;           }</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;      }</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;</div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;US Keyboard Layout:\n&quot;</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;                              <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;<span class="stringliteral">&quot;ââââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦âââââ¦ââââââââââ\n&quot;</span></div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;<span class="stringliteral">&quot;â ~  â !â¶ â @â« â #â â $â â %â½ â ^â â &amp;â â *â â (â± â )â² â _! â +â¹ â         â\n&quot;</span></div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;<span class="stringliteral">&quot;â `â â 1Â¨ â 2Â¯ â 3&lt; â 4â¤ â 5= â 6â¥ â 7&gt; â 8â  â 9â¨ â 0â§ â -Ã â =Ã· â BACKSP  â\n&quot;</span></div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;<span class="stringliteral">&quot;â âââââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦ââ©âââ¦âââââââ£\n&quot;</span></div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;<span class="stringliteral">&quot;â       â Q  â Wâ¹ â Eâ¸ â R  â Tâ¨ â YÂ¥ â U  â Iâ¸ â Oâ¥ â Pâ£ â {â â }â¬ â  |â£  â\n&quot;</span></div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;<span class="stringliteral">&quot;â  TAB  â q? â wâµ â eâ â râ´ â tâ¼ â yâ â uâ â iâ³ â oâ â pâ â [â â ]â â  \\â¢  â\n&quot;</span></div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;<span class="stringliteral">&quot;â ââââââââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©ââ¦âââ©âââââââ£\n&quot;</span></div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;<span class="stringliteral">&quot;â (CAPS   â Aâ¶ â S  â D  â F  â G  â H  â Jâ¤ â K  â Lâ· â :â¡ â \&quot;â¢ â         â\n&quot;</span></div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;<span class="stringliteral">&quot;â  LOCK)  â aâº â sâ â dâ â f_ â gâ â hâ â jâ â k&#39; â lâ â ;â â &#39;â â RETURN  â\n&quot;</span></div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;<span class="stringliteral">&quot;â ââââââââââ©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââ¦â©ââââââââââ£\n&quot;</span></div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;<span class="stringliteral">&quot;â             â Z  â XÏ â CÂ¢ â V  â BÂ£ â N  â M  â &lt;âª â &gt;â â ?â  â          â\n&quot;</span></div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;<span class="stringliteral">&quot;â  SHIFT      â zâ â xâ â câ© â vâª â bâ¥ â nâ¤ â m| â ,â â .â â /â¿ â  SHIFT   â\n&quot;</span></div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;<span class="stringliteral">&quot;âââââââââââââââ©âââââ©âââââ©âââââ©âââââ©âââââ©âââââ©âââââ©âââââ©âââââ©âââââ©âââââââââââ\n&quot;</span></div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   &lt;&lt; endl;</div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;}</div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l00932"></a><span class="lineno"><a class="line" href="classCommand.html#a0b7131627e1a36bee1370e5a7572063f">  932</a></span>&#160;<a class="code" href="classCommand.html#a0b7131627e1a36bee1370e5a7572063f">Command::cmd_PSTAT</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;{</div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;<span class="preprocessor">#ifndef PERFORMANCE_COUNTERS_WANTED</span></div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;&lt;&lt; <span class="stringliteral">&quot;Command ]PSTAT is not available, since performance counters were not\n&quot;</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;<span class="stringliteral">&quot;configured for this APL interpreter. To enable performance counters (which\n&quot;</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;<span class="stringliteral">&quot;will slightly decrease performance), recompile the interpreter as follows:&quot;</span></div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;&lt;&lt; <span class="stringliteral">&quot;\n\n&quot;</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;<span class="stringliteral">&quot;   ./configure PERFORMANCE_COUNTERS_WANTED=yes (... &quot;</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;&lt;&lt; <span class="stringliteral">&quot;other configure options&quot;</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;&lt;&lt; <span class="stringliteral">&quot;)\n&quot;</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="stringliteral">&quot;   make\n&quot;</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;<span class="stringliteral">&quot;   make install (or try: src/apl)\n&quot;</span></div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;</div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;&lt;&lt; <span class="stringliteral">&quot;above the src directory.&quot;</span></div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;&lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;</div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;CLEAR&quot;</span>))</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;      {</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;Performance counters cleared&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;        <a class="code" href="classPerformance.html#ade9bde2f5f04a4c720c58331dcfa907e">Performance::reset_all</a>();</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;      }</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;SAVE&quot;</span>))</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;      {</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> * filename = <span class="stringliteral">&quot;./PerformanceData.def&quot;</span>;</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;        ofstream outf(filename, ofstream::out);</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;        <span class="keywordflow">if</span> (!outf.is_open())</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;           {</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;opening &quot;</span> &lt;&lt; filename</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; failed: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;           }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;Writing performance data to file &quot;</span> &lt;&lt; filename &lt;&lt; endl;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;        <a class="code" href="classPerformance.html#a6b9599c8f6fab73e11fafdf634f11c21">Performance::save_data</a>(out, outf);</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;      }</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;Pfstat_ID iarg = PFS_ALL;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &gt; 0)   iarg = Pfstat_ID(arg.<a class="code" href="classUCS__string.html#a0caf2e53ce43a721d5207fbf174956c1">atoi</a>());</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   <a class="code" href="classPerformance.html#a07efbb4a65f608d91f13be0388763b0c">Performance::print</a>(iarg, out);</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;}</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00984"></a><span class="lineno"><a class="line" href="classCommand.html#a7580944830e9eae94b800e4921b4865f">  984</a></span>&#160;<a class="code" href="classCommand.html#a7580944830e9eae94b800e4921b4865f">Command::primitive_help</a>(ostream &amp; out, <span class="keyword">const</span> <span class="keywordtype">char</span> * arg, <span class="keywordtype">int</span> arity,</div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> * prim, <span class="keyword">const</span> <span class="keywordtype">char</span> * name,</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">char</span> * brief, <span class="keyword">const</span> <span class="keywordtype">char</span> * descr)</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;{</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">if</span> (strcmp(arg, prim))   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;   <span class="keywordflow">switch</span>(arity)</div><div class="line"><a name="l00991"></a><span class="lineno">  991</span>&#160;      {</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;        <span class="keywordflow">case</span> -5: out &lt;&lt; <span class="stringliteral">&quot;   quasi-dyadic operator:   Z â A (â &quot;</span></div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;                     &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot; G) B&quot;</span>;                                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;        <span class="keywordflow">case</span> -4: out &lt;&lt; <span class="stringliteral">&quot;   dyadic operator:   Z â A (F &quot;</span></div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;                     &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot; G) B&quot;</span>;                                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;        <span class="keywordflow">case</span> -3: out &lt;&lt; <span class="stringliteral">&quot;   dyadic operator:   Z â (F &quot;</span></div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;                     &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot; G) B&quot;</span>;                                  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;        <span class="keywordflow">case</span> -2: out &lt;&lt; <span class="stringliteral">&quot;   monadic operator:  Z â A (F &quot;</span></div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;                     &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot;) B&quot;</span>;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;        <span class="keywordflow">case</span> -1: out &lt;&lt; <span class="stringliteral">&quot;   monadic operator:  Z â (F &quot;</span></div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;                     &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot;) B&quot;</span>;                                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;        <span class="keywordflow">case</span> 0:  out &lt;&lt; <span class="stringliteral">&quot;    niladic function: Z â &quot;</span> &lt;&lt; prim;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;        <span class="keywordflow">case</span> 1:  out &lt;&lt; <span class="stringliteral">&quot;    monadic function: Z â &quot;</span> &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot; B&quot;</span>;     <span class="keywordflow">break</span>;</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;        <span class="keywordflow">case</span> 2:  out &lt;&lt; <span class="stringliteral">&quot;    dyadic function:  Z â A &quot;</span> &lt;&lt; prim &lt;&lt; <span class="stringliteral">&quot; B&quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;        <span class="keywordflow">default</span>: FIXME;</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;      }</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;  (&quot;</span> &lt;&lt; name  &lt;&lt;  <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; brief &lt;&lt; endl;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="keywordflow">if</span> (descr)   out &lt;&lt; descr &lt;&lt; endl;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;}</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;<span class="keyword">static</span> <span class="keyword">inline</span> <span class="keywordtype">int</span></div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;len_diff(<span class="keyword">const</span> <span class="keywordtype">char</span> * txt)</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;{</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;<span class="keywordtype">int</span> ret = 0;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;   <span class="keywordflow">while</span> (<span class="keyword">const</span> <span class="keywordtype">char</span> cc = *txt++)   <span class="keywordflow">if</span> ((cc &amp; 0xC0) == 0x80)   ++ret;</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;   <span class="keywordflow">return</span> ret;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;}</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01025"></a><span class="lineno"><a class="line" href="classCommand.html#a925cc5f77af57e1705b8c96a522e6a55"> 1025</a></span>&#160;<a class="code" href="classCommand.html#a925cc5f77af57e1705b8c96a522e6a55">Command::cmd_HELP</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;{</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &gt; 0 &amp;&amp; <a class="code" href="classAvec.html#af31e35e3049f3bc48cb1ff8d70262dd7">Avec::is_first_symbol_char</a>(arg[0]))</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;      {</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="comment">// help for a user defined name</span></div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;symbol &quot;</span> &lt;&lt; arg &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;        <a class="code" href="classSymbol.html">Symbol</a> * sym = <a class="code" href="classWorkspace.html#ad59928bcb6527147b5c5ca3e34106fe3">Workspace::lookup_existing_symbol</a>(arg);</div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;        <span class="keywordflow">if</span> (sym == 0)</div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;           {</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;does not exist&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;           }</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;        <span class="keywordflow">if</span> (sym-&gt;<a class="code" href="classSymbol.html#a34b203a4879ba48c148f0c271cd029a2">is_erased</a>())</div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;           {</div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;is erased.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;           }</div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;</div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <a class="code" href="classValueStackItem.html">ValueStackItem</a> * vs = sym-&gt;<a class="code" href="classSymbol.html#af70e09e9ca7ec63a0fc8344a9468c70a">top_of_stack</a>();</div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        <span class="keywordflow">if</span> (vs == 0)</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;           {</div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot; has no stack.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;           }</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;</div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;        <span class="keywordflow">switch</span>(vs-&gt;<a class="code" href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">name_class</a>)</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;           {</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;             <span class="keywordflow">case</span> NC_INVALID:</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;                  CERR &lt;&lt; <span class="stringliteral">&quot;has no valid name class&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;             <span class="keywordflow">case</span> NC_UNUSED_USER_NAME:</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;                  CERR &lt;&lt; <span class="stringliteral">&quot;is an unused name&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01061"></a><span class="lineno"> 1061</span>&#160;</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;             <span class="keywordflow">case</span> NC_LABEL:</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;                  CERR &lt;&lt; <span class="stringliteral">&quot;is a label (line &quot;</span> &lt;&lt; vs-&gt;<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#a315fb71a75aeb00281e49d799d38b917">label</a></div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;</div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;             <span class="keywordflow">case</span> NC_VARIABLE:</div><div class="line"><a name="l01068"></a><span class="lineno"> 1068</span>&#160;                  {</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;                    CERR &lt;&lt; <span class="stringliteral">&quot;is a variable:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;                    <a class="code" href="classValue__P.html">Value_P</a> val = sym-&gt;<a class="code" href="classSymbol.html#a696eb14234b5cc83a5eab198a867a594">get_value</a>();</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;                    <span class="keywordflow">if</span> (!!val)</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;                       {</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;                         val-&gt;print_properties(CERR, 4, <span class="keyword">true</span>);</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;                       }</div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;                  }</div><div class="line"><a name="l01076"></a><span class="lineno"> 1076</span>&#160;                  CERR &lt;&lt; endl;</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;             <span class="keywordflow">case</span> NC_FUNCTION:</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;                  {</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;                    <a class="code" href="classFunction.html">Function</a> * fun = sym-&gt;<a class="code" href="classSymbol.html#a1d1320dbabb544d3bafcc360d1ddd76e">get_function</a>();</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;                    Assert(fun);</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;                    <span class="keywordflow">if</span> (fun-&gt;<a class="code" href="classFunction.html#ac4a44eddbd86c8278f240ec95c5f1553">is_native</a>())</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;                       {</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classNativeFunction.html">NativeFunction</a> *nf =</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;                               <span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="classNativeFunction.html">NativeFunction</a> *<span class="keyword">&gt;</span>(fun);</div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;                         CERR &lt;&lt; <span class="stringliteral">&quot;is a native function implemented in &quot;</span></div><div class="line"><a name="l01088"></a><span class="lineno"> 1088</span>&#160;                              &lt;&lt; nf-&gt;<a class="code" href="classNativeFunction.html#a6bb00ef4d40c68c149352a3b793deda8">get_so_path</a>() &lt;&lt; endl</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;                              &lt;&lt; <span class="stringliteral">&quot;    load state: &quot;</span> &lt;&lt; (nf-&gt;<a class="code" href="classNativeFunction.html#aa3c7c980f71b2b498067dd31b969b4f0">is_valid</a>() ?</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;                                 <span class="stringliteral">&quot;OK (loaded)&quot;</span> : <span class="stringliteral">&quot;error&quot;</span>) &lt;&lt; endl;</div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;                         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;                       }</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;                    CERR &lt;&lt; <span class="stringliteral">&quot;is a &quot;</span>;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;                    <span class="keywordflow">if</span>      (fun-&gt;<a class="code" href="classFunction.html#a1e98de20de09c81c7b5e257880eb2c89">get_fun_valence</a>() == 2)   CERR &lt;&lt; <span class="stringliteral">&quot;dyadic&quot;</span>;</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;                    <span class="keywordflow">else</span> <span class="keywordflow">if</span> (fun-&gt;<a class="code" href="classFunction.html#a1e98de20de09c81c7b5e257880eb2c89">get_fun_valence</a>() == 1)   CERR &lt;&lt; <span class="stringliteral">&quot;monadic&quot;</span>;</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;                    <span class="keywordflow">else</span>                                    CERR &lt;&lt; <span class="stringliteral">&quot;niladic&quot;</span>;</div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;                    CERR &lt;&lt; <span class="stringliteral">&quot; defined function:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01099"></a><span class="lineno"> 1099</span>&#160;</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classUserFunction.html">UserFunction</a> * ufun = fun-&gt;<a class="code" href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">get_ufun1</a>();</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;                    Assert(ufun);</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;                    ufun-&gt;<a class="code" href="classUserFunction.html#af4a520e7ab3a61ca3c3f4be32f463810">help</a>(CERR);</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;                  }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;             <span class="keywordflow">case</span> NC_OPERATOR:</div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;                  {</div><div class="line"><a name="l01108"></a><span class="lineno"> 1108</span>&#160;                    <a class="code" href="classFunction.html">Function</a> * fun = sym-&gt;<a class="code" href="classSymbol.html#a1d1320dbabb544d3bafcc360d1ddd76e">get_function</a>();</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;                    Assert(fun);</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;                    CERR &lt;&lt; <span class="stringliteral">&quot;is a &quot;</span>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;                    <span class="keywordflow">if</span>      (fun-&gt;<a class="code" href="classFunction.html#ac69b8cfa3ac1577ef8cf98500002e6ef">get_oper_valence</a>() == 2)   CERR &lt;&lt; <span class="stringliteral">&quot;dyadic&quot;</span>;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;                    <span class="keywordflow">else</span>                                    CERR &lt;&lt; <span class="stringliteral">&quot;monadic&quot;</span>;</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;                    CERR &lt;&lt; <span class="stringliteral">&quot; defined operator:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classUserFunction.html">UserFunction</a> * ufun = fun-&gt;<a class="code" href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">get_ufun1</a>();</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;                    Assert(ufun);</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;                    ufun-&gt;<a class="code" href="classUserFunction.html#af4a520e7ab3a61ca3c3f4be32f463810">help</a>(CERR);</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;                  }</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;             <span class="keywordflow">case</span> NC_SHARED_VAR:</div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;                  CERR &lt;&lt; <span class="stringliteral">&quot;is a shared variable&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01123"></a><span class="lineno"> 1123</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;           }</div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;      }</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 1)   <span class="comment">// help for an APL primitive</span></div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;      {</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;        <a class="code" href="classUTF8__string.html">UTF8_string</a> arg_utf(arg);</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> * arg_cp = arg_utf.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>();</div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;</div><div class="line"><a name="l01135"></a><span class="lineno"> 1135</span>&#160;<span class="preprocessor">#define help_def(ar, prim, name, title, descr)              \</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="preprocessor">   primitive_help(out, arg_cp, ar, prim, name, title, descr);</span></div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;<span class="preprocessor">#include &quot;Help.def&quot;</span></div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;      }</div><div class="line"><a name="l01141"></a><span class="lineno"> 1141</span>&#160;</div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;   <span class="keyword">enum</span> { COL2 = 40 };   </div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> commands;</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;   commands.reserve(60);</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;   out &lt;&lt; left &lt;&lt; <span class="stringliteral">&quot;APL Commands:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;<span class="preprocessor">#define cmd_def(cmd_str, _cod, arg, _hint) \</span></div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;<span class="preprocessor">   { UCS_string c(cmd_str &quot; &quot; arg);   commands.push_back(c); }</span></div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;<span class="preprocessor">#include &quot;Command.def&quot;</span></div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="keywordtype">bool</span> left_col = <span class="keyword">true</span>;</div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;   loop(c, commands.size())</div><div class="line"><a name="l01154"></a><span class="lineno"> 1154</span>&#160;      {</div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;        <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; cmd = commands[c];</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;        <span class="keywordflow">if</span> (left_col)</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;           {</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;              out &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; setw(COL2 - 2) &lt;&lt; cmd;</div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;              left_col = <span class="keyword">false</span>;</div><div class="line"><a name="l01160"></a><span class="lineno"> 1160</span>&#160;           }</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;           {</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;              out &lt;&lt; cmd &lt;&lt; endl;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;              left_col = <span class="keyword">true</span>;</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;           }</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;      }</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;     {</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;       out &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;User defined commands:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;       loop(u, <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;           {</div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].prefix</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; [args]  calls:  &quot;</span>;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;             <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].mode)</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;                out &lt;&lt; <span class="stringliteral">&quot;tokenized-args &quot;</span>;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160; </div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;             out &lt;&lt; <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].apl_function</div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot; quoted-args&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;           }</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;     }</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;   out &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;System variables:&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; setw(COL2)</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;â       Character Input/Output&quot;</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;â       Evaluated Input/Output&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;   left_col = <span class="keyword">true</span>;</div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;<span class="preprocessor">#define ro_sv_def(x, _str, txt)                                            \</span></div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<span class="preprocessor">   { const UCS_string &amp; ucs = Workspace::get_v_ ## x().get_name();         \</span></div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;<span class="preprocessor">     if (left_col)   out &lt;&lt; &quot;      &quot; &lt;&lt; setw(8) &lt;&lt; ucs &lt;&lt; setw(30) &lt;&lt; txt; \</span></div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="preprocessor">     else            out &lt;&lt; setw(8) &lt;&lt; ucs &lt;&lt; txt &lt;&lt; endl;                 \</span></div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;<span class="preprocessor">        left_col = !left_col; }</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;<span class="preprocessor">#define rw_sv_def(x, str, txt) ro_sv_def(x, str, txt)</span></div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="preprocessor">#include &quot;SystemVariable.def&quot;</span></div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;   out &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;System functions:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;   left_col = <span class="keyword">true</span>;</div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<span class="preprocessor">#define ro_sv_def(x, _str, _txt)</span></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<span class="preprocessor">#define rw_sv_def(x, _str, _txt)</span></div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;<span class="preprocessor">#define sf_def(_q, str, txt)                                              \</span></div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="preprocessor">   if (left_col)   out &lt;&lt; &quot;      â&quot; &lt;&lt; setw(7) &lt;&lt; str &lt;&lt; setw(30 +        \</span></div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="preprocessor">                                        len_diff(txt)) &lt;&lt; txt;            \</span></div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;<span class="preprocessor">   else            out &lt;&lt; &quot;â&quot; &lt;&lt; setw(7) &lt;&lt; str &lt;&lt; txt &lt;&lt; endl;           \</span></div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;<span class="preprocessor">   left_col = !left_col;</span></div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="preprocessor">#include &quot;SystemVariable.def&quot;</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;}</div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01209"></a><span class="lineno"><a class="line" href="classCommand.html#a1e93c9bde851ee11f10b840c5cf72821"> 1209</a></span>&#160;<a class="code" href="classCommand.html#a1e93c9bde851ee11f10b840c5cf72821">Command::cmd_HISTORY</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;{</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)                  <a class="code" href="classLineInput.html#a67380e434a21599b5ac579e542b27379">LineInput::print_history</a>(out);</div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;CLEAR&quot;</span>))   <a class="code" href="classLineInput.html#ad491f420acc05aad15024db06deadd3f">LineInput::clear_history</a>(out);</div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <span class="keywordflow">else</span>                                  out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;}</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01217"></a><span class="lineno"><a class="line" href="classCommand.html#a9d079b240efe9dfd37038cc2de6828e7"> 1217</a></span>&#160;<a class="code" href="classCommand.html#a9d079b240efe9dfd37038cc2de6828e7">Command::cmd_HOST</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;{</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;   <span class="keywordflow">if</span> (uprefs.<a class="code" href="structUserPreferences.html#a1886c0f2e46fdae283b915a20f40312d">safe_mode</a>)</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;      {</div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;        out &lt;&lt; </div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;<span class="stringliteral">&quot;This interpreter was started in \&quot;safe mode\&quot; (command line option --safe,\n&quot;</span></div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;<span class="stringliteral">&quot;see âARG). The APL command )HOST is not permitted in safe mode.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;      }</div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;</div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> host_cmd(arg);</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;FILE * pipe = popen(host_cmd.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <span class="keywordflow">if</span> (pipe == 0)   <span class="comment">// popen() failed</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;      {</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;)HOST command failed: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;      }</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;</div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;       {</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">int</span> cc = fgetc(pipe);</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;         <span class="keywordflow">if</span> (cc == EOF)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;         out &lt;&lt; char(cc);</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;       }</div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;</div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;<span class="keywordtype">int</span> result = pclose(pipe);</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;   Log(LOG_verbose_error)</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;      {</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;        <span class="keywordflow">if</span> (result)   CERR &lt;&lt; <span class="stringliteral">&quot;pclose(&quot;</span> &lt;&lt; arg &lt;&lt; <span class="stringliteral">&quot;) says: &quot;</span></div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;                           &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;      }</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;   out &lt;&lt; endl &lt;&lt; <a class="code" href="classIntCell.html">IntCell</a>(result) &lt;&lt; endl;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;}</div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01252"></a><span class="lineno"><a class="line" href="classCommand.html#aa0764d08a6ae9c8270907ab7d5dc37cf"> 1252</a></span>&#160;<a class="code" href="classCommand.html#aa0764d08a6ae9c8270907ab7d5dc37cf">Command::cmd_IN</a>(ostream &amp; out, <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args, <span class="keywordtype">bool</span> protection)</div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;{</div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;   <span class="comment">// IN filename [objects...]</span></div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;</div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> fname = args[0];</div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;   args[0] = args.back();</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;   args.pop_back();</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> filename = <a class="code" href="classLibPaths.html#a0da8dd5e9a90282d75239ec86ebb15d4">LibPaths::get_lib_filename</a>(LIB_NONE, fname, <span class="keyword">true</span>,</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;                                                  <span class="stringliteral">&quot;.atf&quot;</span>, 0);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;FILE * in = fopen(filename.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(), <span class="stringliteral">&quot;r&quot;</span>);</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;   <span class="keywordflow">if</span> (in == 0)   <span class="comment">// open failed: try filename.atf unless already .atf</span></div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;      {</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;        <a class="code" href="classUTF8__string.html">UTF8_string</a> fname_utf8(fname);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;)IN &quot;</span> &lt;&lt; fname_utf8.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>()</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; failed: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;        <span class="keywordtype">char</span> cc[200];</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;        snprintf(cc, <span class="keyword">sizeof</span>(cc),</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;                 <span class="stringliteral">&quot;command )IN: could not open file %s for reading: %s&quot;</span>,</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;                 fname_utf8.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(), strerror(errno));</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;        <a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>() &lt;&lt; cc;</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;      }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;UTF8 buffer[80];</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;<span class="keywordtype">int</span> idx = 0;</div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;<a class="code" href="structCommand_1_1transfer__context.html">transfer_context</a> tctx(protection);</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;</div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      {</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> cc = fgetc(in);</div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;        <span class="keywordflow">if</span> (cc == EOF)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        <span class="keywordflow">if</span> (idx == 0 &amp;&amp; cc == 0x0A)   <span class="comment">// optional LF</span></div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;           {</div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;             <span class="comment">// CERR &lt;&lt; &quot;CRLF&quot; &lt;&lt; endl;</span></div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;             <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;           }</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;        <span class="keywordflow">if</span> (idx &lt; 80)</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;           {</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;              <span class="keywordflow">if</span> (idx &lt; 72)   buffer[idx++] = cc;</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;              <span class="keywordflow">else</span>            buffer[idx++] = 0;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;             <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;           }</div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;        <span class="keywordflow">if</span> (cc == 0x0D || cc == 0x15)   <span class="comment">// ASCII or EBCDIC</span></div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;           {</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;             tctx.<a class="code" href="structCommand_1_1transfer__context.html#a2734289cea0484ac68e854fab12688ea">is_ebcdic</a> = (cc == 0x15);</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;             tctx.<a class="code" href="structCommand_1_1transfer__context.html#a9c4651f90f36f6cc728e7146a3a4a0aa">process_record</a>(buffer, args);</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;             idx = 0;</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;             ++tctx.<a class="code" href="structCommand_1_1transfer__context.html#afa78ecfc3166828869325160b2bf37ed">recnum</a>;</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;             <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;           }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;BAD record charset (neither ASCII nor EBCDIC)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;      }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;   fclose(in);</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;}</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01320"></a><span class="lineno"><a class="line" href="classCommand.html#ad222a6de11eb55501624a4d0dea3a464"> 1320</a></span>&#160;<a class="code" href="classCommand.html#ad222a6de11eb55501624a4d0dea3a464">Command::cmd_LOAD</a>(ostream &amp; out, <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args,</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                  <a class="code" href="classUCS__string.html">UCS_string</a> &amp; quad_lx, <span class="keywordtype">bool</span> silent)</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;{</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;   <span class="comment">// LOAD wsname</span></div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;   <span class="comment">// LOAD libnum wsname</span></div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;LibRef lib;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> wsname;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classCommand.html#a39c11577c5e25765fbf5c848607a915a">resolve_lib_wsname</a>(out, args, lib, wsname))   <span class="keywordflow">return</span>;   <span class="comment">// error</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;</div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;   <a class="code" href="classWorkspace.html#a77c7b25908cf2479dc087cc3bcf44dcb">Workspace::load_WS</a>(out, lib, wsname, quad_lx, silent);</div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;}</div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01336"></a><span class="lineno"><a class="line" href="classCommand.html#ade7fa861e534f953d5439040e78fe433"> 1336</a></span>&#160;<a class="code" href="classCommand.html#ade7fa861e534f953d5439040e78fe433">Command::cmd_LIBS</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;{</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;   <span class="comment">// )LIB N path         (set libdir N to path)</span></div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;   <span class="comment">// )LIB path           (set libroot to path)</span></div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   <span class="comment">// )LIB                (display root and path states)</span></div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;   <span class="keywordflow">if</span> (args.size() == 2)   <span class="comment">// set individual dir</span></div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;      {</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;        <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; libref_ucs = args[0];</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> libref = libref_ucs[0] - <span class="charliteral">&#39;0&#39;</span>;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;        <span class="keywordflow">if</span> (libref_ucs.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() != 1 || libref &lt; 0 || libref &gt; 9)</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;           {</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;Invalid library reference &quot;</span> &lt;&lt; libref_ucs &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;           }</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;        <a class="code" href="classUTF8__string.html">UTF8_string</a> path(args[1]);</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;        <a class="code" href="classLibPaths.html#a6c671db38ef40ad989618b9138689573">LibPaths::set_lib_dir</a>(LibRef(libref), path.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(),</div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;                              <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a285cc96c12fd86e4013fb64fb00553e1">LibPaths::LibDir::CSRC_CMD</a>);</div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;LIBRARY REFERENCE &quot;</span> &lt;&lt; libref &lt;&lt; <span class="stringliteral">&quot; SET TO &quot;</span> &lt;&lt; path &lt;&lt; endl;</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;      }</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;   <span class="keywordflow">if</span> (args.size() == 1)   <span class="comment">// set root</span></div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;      {</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;        <a class="code" href="classUTF8__string.html">UTF8_string</a> utf(args[0]);</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;        <a class="code" href="classLibPaths.html#a12cc7234d6e91efb271bef954b95806f">LibPaths::set_APL_lib_root</a>(utf.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>());</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;LIBRARY ROOT SET TO &quot;</span> &lt;&lt; args[0] &lt;&lt; endl;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      }</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;Library root: &quot;</span> &lt;&lt; <a class="code" href="classLibPaths.html#ac148131bcc9dc69d298ed62b866bdcd5">LibPaths::get_APL_lib_root</a>() &lt;&lt; </div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="stringliteral">&quot;Library reference number mapping:\n&quot;</span></div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;<span class="stringliteral">&quot;---------------------------------------------------------------------------\n&quot;</span></div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;<span class="stringliteral">&quot;Ref Conf  Path                                                State   Err\n&quot;</span></div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;<span class="stringliteral">&quot;---------------------------------------------------------------------------\n&quot;</span>;</div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;         </div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;   loop(d, 10)</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;       {</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;          <a class="code" href="classUTF8__string.html">UTF8_string</a> path = <a class="code" href="classLibPaths.html#a4316cbd8878626733273cb0db73cfd82">LibPaths::get_lib_dir</a>(LibRef(d));</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;          out &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; d &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;          <span class="keywordflow">switch</span>(<a class="code" href="classLibPaths.html#a38284f405676e112eda549c3114343d1">LibPaths::get_cfg_src</a>(LibRef(d)))</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;             {</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142aa109b248c869e933b6f6176c5ab5502b">LibPaths::LibDir::CSRC_NONE</a>:      out &lt;&lt; <span class="stringliteral">&quot;NONE&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;                                                     <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a676f791b1236dfc1128ee67981e3fab1">LibPaths::LibDir::CSRC_ENV</a>:       out &lt;&lt; <span class="stringliteral">&quot;ENV   &quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a47e43826fd12ef7526c76a72606582a6">LibPaths::LibDir::CSRC_PWD</a>:       out &lt;&lt; <span class="stringliteral">&quot;PWD   &quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142aeb4e15be8f57d531f9993b9b0325de15">LibPaths::LibDir::CSRC_PREF_SYS</a>:  out &lt;&lt; <span class="stringliteral">&quot;PSYS  &quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142adcaec822f695d295c042265bda09f52c">LibPaths::LibDir::CSRC_PREF_HOME</a>: out &lt;&lt; <span class="stringliteral">&quot;PUSER &quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a285cc96c12fd86e4013fb64fb00553e1">LibPaths::LibDir::CSRC_CMD</a>:       out &lt;&lt; <span class="stringliteral">&quot;CMD   &quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;             }</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;        out &lt;&lt; left &lt;&lt; setw(52) &lt;&lt; path.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>();</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;        DIR * dir = opendir(path.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>());</div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;        <span class="keywordflow">if</span> (dir)   { out &lt;&lt; <span class="stringliteral">&quot; present&quot;</span> &lt;&lt; endl;   closedir(dir); }</div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;        <span class="keywordflow">else</span>       { out &lt;&lt; <span class="stringliteral">&quot; missing (&quot;</span> &lt;&lt; errno &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl; }</div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;      }</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;   out &lt;&lt;</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;<span class="stringliteral">&quot;===========================================================================\n&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;}</div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;DIR *</div><div class="line"><a name="l01405"></a><span class="lineno"><a class="line" href="classCommand.html#ae0699916c54054bb56d0dccc46d2b767"> 1405</a></span>&#160;<a class="code" href="classCommand.html#ae0699916c54054bb56d0dccc46d2b767">Command::open_LIB_dir</a>(<a class="code" href="classUTF8__string.html">UTF8_string</a> &amp; path, ostream &amp; out,</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;                      <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;{</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;   <span class="comment">// args can be one of:</span></div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;   <span class="comment">//                              example:</span></div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;   <span class="comment">// 1.                           )LIB</span></div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;   <span class="comment">// 2.  N                        )LIB 1</span></div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;   <span class="comment">// 3.  )LIB directory-name      )LIB /usr/lib/...</span></div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> arg(<span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;   <span class="keywordflow">if</span> (args.size())   arg = args[0];</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;   <span class="keywordflow">if</span> (args.size() == 0)                       <span class="comment">// case 1.</span></div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;      {</div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;        path = <a class="code" href="classLibPaths.html#a4316cbd8878626733273cb0db73cfd82">LibPaths::get_lib_dir</a>(LIB0);</div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;      }</div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 1 &amp;&amp;</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;            <a class="code" href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a>(Unicode(arg[0])))   <span class="comment">// case 2.</span></div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;      {</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;        path = <a class="code" href="classLibPaths.html#a4316cbd8878626733273cb0db73cfd82">LibPaths::get_lib_dir</a>(LibRef(arg[0] - <span class="charliteral">&#39;0&#39;</span>));</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;      }</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <span class="keywordflow">else</span>                                        <span class="comment">// case 3.</span></div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;      {</div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        path = <a class="code" href="classUTF8__string.html">UTF8_string</a>(arg);</div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;      }</div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;</div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;   <span class="comment">// follow symbolic links, but not too often (because symbolic links may</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;   <span class="comment">// form an endless loop)...</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;   loop(depth, 20)</div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;       {</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;         <span class="keywordtype">char</span> buffer[FILENAME_MAX + 1];</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;         <span class="keyword">const</span> ssize_t len = readlink(path.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(), buffer, FILENAME_MAX);</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;         <span class="keywordflow">if</span> (len &lt;= 0)   <span class="keywordflow">break</span>;   <span class="comment">// not a symlink</span></div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;         buffer[len] = 0;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;         <span class="keywordflow">if</span> (buffer[0] == <span class="charliteral">&#39;/&#39;</span>)   <span class="comment">// absolute path</span></div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;            {</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;              path = <a class="code" href="classUTF8__string.html">UTF8_string</a>(buffer);</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;            }</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;          <span class="keywordflow">else</span>                   <span class="comment">// relative path</span></div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;            {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;              path += <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;              path.<a class="code" href="classUTF8__string.html#ae512c0617f7a13fe5011655d898ca6c1">append_UTF8</a>(<a class="code" href="classUTF8__string.html">UTF8_string</a>(buffer));</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;            }</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;       }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;DIR * dir = opendir(path.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>());</div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;</div><div class="line"><a name="l01455"></a><span class="lineno"> 1455</span>&#160;   <span class="keywordflow">if</span> (dir == 0)</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;      {</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> * why = strerror(errno);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;IMPROPER LIBRARY REFERENCE &#39;&quot;</span> &lt;&lt; arg &lt;&lt; <span class="stringliteral">&quot;&#39;: &quot;</span> &lt;&lt; why &lt;&lt; endl;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;        MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;        <span class="stringliteral">&quot;path &#39;&quot;</span> &lt;&lt; path &lt;&lt; <span class="stringliteral">&quot;&#39; could not be opened as directory: &quot;</span> &lt;&lt; why;</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;        <span class="keywordflow">return</span> 0;   <span class="comment">// error</span></div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;      }</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keywordflow">return</span> dir;</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;}</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01469"></a><span class="lineno"><a class="line" href="classCommand.html#af95676cbc57e2564feb00e5166d07512"> 1469</a></span>&#160;<a class="code" href="classCommand.html#af95676cbc57e2564feb00e5166d07512">Command::is_directory</a>(dirent * entry, <span class="keyword">const</span> <a class="code" href="classUTF8__string.html">UTF8_string</a> &amp; path)</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;{</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<span class="preprocessor">#ifdef _DIRENT_HAVE_D_TYPE</span></div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   <span class="keywordflow">return</span> entry-&gt;d_type == DT_DIR;</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> filename = path;</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> entry_name(entry-&gt;d_name);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;   filename += <span class="charliteral">&#39;/&#39;</span>;</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;   filename.<a class="code" href="classUTF8__string.html#ae512c0617f7a13fe5011655d898ca6c1">append_UTF8</a>(entry_name);</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;DIR * dir = opendir(filename.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>());</div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="keywordflow">if</span> (dir) closedir(dir);</div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   <span class="keywordflow">return</span> dir != 0;</div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;}</div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01486"></a><span class="lineno"><a class="line" href="classCommand.html#aeb8671f785d828bbfac0d9b9ff46437d"> 1486</a></span>&#160;<a class="code" href="classCommand.html#aeb8671f785d828bbfac0d9b9ff46437d">Command::lib_common</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args_range,</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;                    <span class="keywordtype">int</span> variant)</div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;{</div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;   <span class="comment">// 1. check for (and then extract) an optional range parameter...</span></div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> args;</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> * range = 0;</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;   loop(a, args_range.size())</div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;      {</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;        <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg = args_range[a];</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;        <span class="keywordtype">bool</span> is_range = <span class="keyword">false</span>;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        <span class="keywordtype">bool</span> is_path = <span class="keyword">false</span>;</div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        loop(aa, arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;            {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;              <span class="keyword">const</span> Unicode uni = arg[aa];</div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;              <span class="keywordflow">if</span> (uni == UNI_ASCII_MINUS)</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                 {</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                   is_range = <span class="keyword">true</span>;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;                 }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;              <span class="keywordflow">if</span> (!<a class="code" href="classAvec.html#a76a72fdcb1782be1c490b3670c45504f">Avec::is_symbol_char</a>(uni))</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;                 {</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;                   is_path = <span class="keyword">true</span>;</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;                   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;                 }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;            }</div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;         <span class="keywordflow">if</span> (is_path)   <span class="comment">// normal (non-range) arg</span></div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;            {</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;              args.push_back(arg);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;            }</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!is_range)   <span class="comment">// normal (non-range) arg</span></div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;            {</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;              args.push_back(arg);</div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;            }</div><div class="line"><a name="l01522"></a><span class="lineno"> 1522</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (range)   <span class="comment">// second non-range arg</span></div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;            {</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;              MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;              <span class="stringliteral">&quot;multiple range parameters in )LIB or ]LIB command&quot;</span>;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;              <span class="keywordflow">return</span>;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;            }</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;            {</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;              range = &amp;arg;</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;            }</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;      }</div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;</div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> from;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> to;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;   <span class="keywordflow">if</span> (range)</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;      {</div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">bool</span> bad_from_to = <a class="code" href="classCommand.html#a429d0c585e845bf29a504a24889cb761">parse_from_to</a>(from, to, *range);</div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;        <span class="keywordflow">if</span> (bad_from_to)</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;           {</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;bad range argument&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;             MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;bad range argument &quot;</span> &lt;&lt; *range</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;, expecting from-to&quot;</span>;</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;           }</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;      }</div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;   <span class="comment">// 2. open directory</span></div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> path;</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;DIR * dir = <a class="code" href="classCommand.html#ae0699916c54054bb56d0dccc46d2b767">open_LIB_dir</a>(path, out, args);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;   <span class="keywordflow">if</span> (dir == 0)   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;   <span class="comment">// 3. collect files and directories</span></div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> files;</div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> directories;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;       {</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;         dirent * entry = readdir(dir);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;         <span class="keywordflow">if</span> (entry == 0)   <span class="keywordflow">break</span>;   <span class="comment">// directory done</span></div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;         <a class="code" href="classUTF8__string.html">UTF8_string</a> filename_utf8(entry-&gt;d_name);</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;         <a class="code" href="classUCS__string.html">UCS_string</a> filename(filename_utf8);</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;</div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;         <span class="comment">// check range (if any)...</span></div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;         <span class="keywordflow">if</span> (from.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; filename.<a class="code" href="classUCS__string.html#ae748097bb3a84f52c658900006587e5b">lexical_before</a>(from))   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;         <span class="keywordflow">if</span> (to.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; to.<a class="code" href="classUCS__string.html#ae748097bb3a84f52c658900006587e5b">lexical_before</a>(filename))       <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classCommand.html#af95676cbc57e2564feb00e5166d07512">is_directory</a>(entry, path))</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;            {</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;              <span class="keywordflow">if</span> (filename_utf8[0] == <span class="charliteral">&#39;.&#39;</span>)   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;              filename.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_SLASH);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;              directories.push_back(filename);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;            }</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">int</span> dlen = strlen(entry-&gt;d_name);</div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;         <span class="keywordflow">if</span> (variant == 1)</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;            {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;              <span class="keywordflow">if</span> (filename_utf8.<a class="code" href="classUTF8__string.html#a75b4e440d7576c690934bc7b5f863ac6">ends_with</a>(<span class="stringliteral">&quot;.apl&quot;</span>))</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;                 {</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;                   filename.resize(filename.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() - 4);   <span class="comment">// skip extension</span></div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;                   files.push_back(filename);</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;                 }</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (filename_utf8.<a class="code" href="classUTF8__string.html#a75b4e440d7576c690934bc7b5f863ac6">ends_with</a>(<span class="stringliteral">&quot;.xml&quot;</span>))</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;                 {</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;                   filename.resize(filename.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() - 4);   <span class="comment">// skip extension</span></div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;                   files.push_back(filename);</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;                 }</div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;            }</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;            {</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;              <span class="keywordflow">if</span> (filename[0] == <span class="charliteral">&#39;.&#39;</span>)          <span class="keywordflow">continue</span>;  <span class="comment">// skip dot files</span></div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;              <span class="keywordflow">if</span> (filename[dlen - 1] == <span class="charliteral">&#39;~&#39;</span>)   <span class="keywordflow">continue</span>;  <span class="comment">// and editor backups</span></div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;              files.push_back(filename);</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;            }</div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;       }</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;   closedir(dir);</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;   <span class="comment">// 4. sort directories and filenames alphabetically and append files</span></div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;   <span class="comment">//    to directories</span></div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;   directories.<a class="code" href="classUCS__string__vector.html#a4c548acafd0c03ebbe43ad8643dc07d0">sort</a>();</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;   files.<a class="code" href="classUCS__string__vector.html#a4c548acafd0c03ebbe43ad8643dc07d0">sort</a>();</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;   loop(f, files.size())</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;      {</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;        <span class="keywordflow">if</span> (directories.size()  &amp;&amp; directories.back() == files[f])</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;           {</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;             <span class="comment">// there were some file.apl and file.xml. Skip the second</span></div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;             <span class="comment">//</span></div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;             <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;           }</div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;        directories.push_back(files[f]);</div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;      }</div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;</div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;   <span class="comment">// 5. list directories first, then files</span></div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;        </div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;   <span class="comment">// figure column widths</span></div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;   <span class="keyword">enum</span> { tabsize = 4 };</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;</div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;std::vector&lt;int&gt; col_widths;</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;   directories.<a class="code" href="classUCS__string__vector.html#affd2be085b10c39ad48659a884cf2ab1">compute_column_width</a>(tabsize, col_widths);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;   loop(c, directories.size())</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;      {</div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">size_t</span> col = c % col_widths.size();</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;        out &lt;&lt; directories[c];</div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;        <span class="keywordflow">if</span> (col == <span class="keywordtype">size_t</span>(col_widths.size() - 1) ||</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;              c == ShapeItem(directories.size() - 1))</div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;           {</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;             <span class="comment">// last column or last item: print newline</span></div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;             <span class="comment">//</span></div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;             out &lt;&lt; endl;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;           }</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;           {</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;             <span class="comment">// intermediate column: print spaces</span></div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;             <span class="comment">//</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;             <span class="keyword">const</span> <span class="keywordtype">int</span> len = tabsize*col_widths[col] - directories[c].size();</div><div class="line"><a name="l01645"></a><span class="lineno"> 1645</span>&#160;             Assert(len &gt; 0);</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;             loop(l, len)   out &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;           }</div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;      }</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;}</div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01652"></a><span class="lineno"><a class="line" href="classCommand.html#ae2c14c874844701377a0e716021229c7"> 1652</a></span>&#160;<a class="code" href="classCommand.html#ae2c14c874844701377a0e716021229c7">Command::cmd_LIB1</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;{</div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;   <span class="comment">// )LIB                (same as )LIB 0)</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;   <span class="comment">// )LIB N              (show workspaces in library N without extensions)</span></div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;   <span class="comment">// )LIB from-to        (show workspaces named from-to in library 0</span></div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;   <span class="comment">// )LIB N from-to      (show workspaces named from-to in library N</span></div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;   <a class="code" href="classCommand.html#aeb8671f785d828bbfac0d9b9ff46437d">Command::lib_common</a>(out, args, 1);</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;}</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01665"></a><span class="lineno"><a class="line" href="classCommand.html#a7d3c3284d54674356d89f268949109c6"> 1665</a></span>&#160;<a class="code" href="classCommand.html#a7d3c3284d54674356d89f268949109c6">Command::cmd_LIB2</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;{</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;   <span class="comment">// Command is:</span></div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;   <span class="comment">// ]LIB                (same as )LIB 0)</span></div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;   <span class="comment">// ]LIB N              (show workspaces in library N with extensions)</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;   <span class="comment">// ]LIB from-to        (show workspaces named from-to in library 0</span></div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;   <span class="comment">// ]LIB N from-to      (show workspaces named from-to in library N</span></div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;   <a class="code" href="classCommand.html#aeb8671f785d828bbfac0d9b9ff46437d">Command::lib_common</a>(out, args, 2);</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;}</div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01678"></a><span class="lineno"><a class="line" href="classCommand.html#a9903751e0c1e4659a85434234b27491e"> 1678</a></span>&#160;<a class="code" href="classCommand.html#a9903751e0c1e4659a85434234b27491e">Command::cmd_LOG</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;{</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;<span class="preprocessor">#ifdef DYNAMIC_LOG_WANTED</span></div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;   <a class="code" href="classCommand.html#ac70a0a220bae16cdb98b389f4872c85d">log_control</a>(arg);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;   out &lt;&lt;</div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;<span class="stringliteral">&quot;Command ]LOG is not available, since dynamic logging was not\n&quot;</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;<span class="stringliteral">&quot;configured for this APL interpreter. To enable dynamic logging (which\n&quot;</span></div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;<span class="stringliteral">&quot;will slightly decrease performance), recompile the interpreter as follows:\n&quot;</span></div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;<span class="stringliteral">&quot;   ./configure DYNAMIC_LOG_WANTED=yes (... other configure options)\n&quot;</span></div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;<span class="stringliteral">&quot;   make\n&quot;</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;<span class="stringliteral">&quot;   make install (or try: src/apl)\n&quot;</span></div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;<span class="stringliteral">&quot;above the src directory.&quot;</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;<span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;</div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;}</div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01703"></a><span class="lineno"><a class="line" href="classCommand.html#a942f9d187d7dcb5b05c8b57eac6552a7"> 1703</a></span>&#160;<a class="code" href="classCommand.html#a942f9d187d7dcb5b05c8b57eac6552a7">Command::cmd_MORE</a>(ostream &amp; out)</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;{</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>().size() == 0)</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;      {</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;NO MORE ERROR INFO&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;      }</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;</div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;   out &lt;&lt; <a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>() &lt;&lt; endl;</div><div class="line"><a name="l01712"></a><span class="lineno"> 1712</span>&#160;   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;}</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01716"></a><span class="lineno"><a class="line" href="classCommand.html#aafd8a7df22d24109a5ea7de47267f241"> 1716</a></span>&#160;<a class="code" href="classCommand.html#aafd8a7df22d24109a5ea7de47267f241">Command::cmd_OFF</a>(<span class="keywordtype">int</span> exit_val)</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;{</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;   cleanup(<span class="keyword">true</span>);</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   COUT &lt;&lt; endl;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;   <span class="keywordflow">if</span> (!uprefs.<a class="code" href="structUserPreferences.html#ab953f017038113a7b004f2487f2852f2">silent</a>)</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;      {</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;        timeval end;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;        gettimeofday(&amp;end, 0);</div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;        end.tv_sec -= uprefs.<a class="code" href="structUserPreferences.html#ac86f3d6c74cc87a5f06c41f01b3dba6d">session_start</a>.tv_sec;</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        end.tv_usec -= uprefs.<a class="code" href="structUserPreferences.html#ac86f3d6c74cc87a5f06c41f01b3dba6d">session_start</a>.tv_usec;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;        <span class="keywordflow">if</span> (end.tv_usec &lt; 1000000)   { end.tv_usec += 1000000;   --end.tv_sec; }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;        COUT &lt;&lt; <span class="stringliteral">&quot;Goodbye.&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;Session duration: &quot;</span> &lt;&lt; (end.tv_sec + 0.000001*end.tv_usec)</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; seconds &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;      }</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;   <span class="comment">// restore the initial memory rlimit</span></div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;<span class="preprocessor">#ifndef RLIMIT_AS // BSD does not define RLIMIT_AS</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;<span class="preprocessor"># define RLIMIT_AS RLIMIT_DATA</span></div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;</div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;rlimit rl;</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;   getrlimit(RLIMIT_AS, &amp;rl);</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;   rl.rlim_cur = <a class="code" href="classQuad__WA.html#af6d9143e603553fdbb6ac5040d498cc3">Quad_WA::initial_rlimit</a>;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;   setrlimit(RLIMIT_AS, &amp;rl);</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   exit(exit_val);</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;}</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01749"></a><span class="lineno"><a class="line" href="classCommand.html#a4afcbbdbee3fd2f536db12651861110b"> 1749</a></span>&#160;<a class="code" href="classCommand.html#a4afcbbdbee3fd2f536db12651861110b">Command::cmd_OUT</a>(ostream &amp; out, <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;{</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> fname = args[0];</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;   args.erase(args.begin());</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;</div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> filename = <a class="code" href="classLibPaths.html#a0da8dd5e9a90282d75239ec86ebb15d4">LibPaths::get_lib_filename</a>(LIB_NONE, fname, <span class="keyword">false</span>,</div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;                                                  <span class="stringliteral">&quot;.atf&quot;</span>, 0);</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;FILE * atf = fopen(filename.<a class="code" href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">c_str</a>(), <span class="stringliteral">&quot;w&quot;</span>);</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;   <span class="keywordflow">if</span> (atf == 0)</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;      {</div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> * why = strerror(errno);</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;)OUT &quot;</span> &lt;&lt; fname &lt;&lt; <span class="stringliteral">&quot; failed: &quot;</span> &lt;&lt; why &lt;&lt; endl;</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;command )OUT: could not open file &quot;</span> &lt;&lt; fname</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot; for writing: &quot;</span> &lt;&lt; why;</div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;      }</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;uint64_t seq = 1;   <span class="comment">// sequence number for records written</span></div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   <a class="code" href="classWorkspace.html#a7ffca45a4446b644e7caf093a1699ba2">Workspace::write_OUT</a>(atf, seq, args);</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   fclose(atf);</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;}</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01774"></a><span class="lineno"><a class="line" href="classCommand.html#a8969f1bd26bbcb4e6dd9e556dc9d83fb"> 1774</a></span>&#160;<a class="code" href="classCommand.html#a8969f1bd26bbcb4e6dd9e556dc9d83fb">Command::check_name_conflict</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; cnew,</div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;                             <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> cold)</div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;{</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;<span class="keywordtype">int</span> len = cnew.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>();</div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;        <span class="keywordflow">if</span> (len &gt; cold.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   len = cold.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>();</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   loop(l, len)</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;      {</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;        <span class="keywordtype">int</span> c1 = cnew[l];</div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;        <span class="keywordtype">int</span> c2 = cold[l];</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        <span class="keywordflow">if</span> (c1 &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c1 &lt;= <span class="charliteral">&#39;z&#39;</span>)   c1 -= 0x20;   <span class="comment">// uppercase</span></div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;        <span class="keywordflow">if</span> (c2 &gt;= <span class="charliteral">&#39;a&#39;</span> &amp;&amp; c2 &lt;= <span class="charliteral">&#39;z&#39;</span>)   c2 -= 0x20;   <span class="comment">// uppercase</span></div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">if</span> (l &amp;&amp; (c1 != c2))   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// OK: different</span></div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;     }</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;   MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;conflict with existing command name in command ]USERCMD&quot;</span>;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;}</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01796"></a><span class="lineno"><a class="line" href="classCommand.html#a13b5e986bc7eae259343aca362870bba"> 1796</a></span>&#160;<a class="code" href="classCommand.html#a13b5e986bc7eae259343aca362870bba">Command::check_redefinition</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; cnew,</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;                            <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> fnew, <span class="keyword">const</span> <span class="keywordtype">int</span> mnew)</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;{</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;   loop(u, <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;     {</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;       <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> cold = <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].prefix;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;       <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> fold = <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].apl_function;</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;       <span class="keyword">const</span> <span class="keywordtype">int</span> mold = <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].mode;</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;</div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;       <span class="keywordflow">if</span> (cnew != cold)   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;       <span class="comment">// user command name matches; so must mode and function</span></div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;       <span class="keywordflow">if</span> (mnew != mold || fnew != fold)</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;         {</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;           out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;           MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;           <span class="stringliteral">&quot;conflict with existing user command definition in command ]USERCMD&quot;</span>;</div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;         }</div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;       <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;     }</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;}</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;<span class="keywordtype">void</span> </div><div class="line"><a name="l01821"></a><span class="lineno"><a class="line" href="classCommand.html#aec0c4c6efbb9df9a34220b510f58905a"> 1821</a></span>&#160;<a class="code" href="classCommand.html#aec0c4c6efbb9df9a34220b510f58905a">Command::cmd_SAVE</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;{</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;   <span class="comment">// )SAVE</span></div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;   <span class="comment">// )SAVE workspace</span></div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;   <span class="comment">// )SAVE lib workspace</span></div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;   <span class="keywordflow">if</span> (args.size() &gt; 0)   <span class="comment">// workspace or lib workspace</span></div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;      {</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;        LibRef lib;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;        <a class="code" href="classUCS__string.html">UCS_string</a> wsname;</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classCommand.html#a39c11577c5e25765fbf5c848607a915a">resolve_lib_wsname</a>(out, args, lib, wsname))   <span class="keywordflow">return</span>;   <span class="comment">// error</span></div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;        <a class="code" href="classWorkspace.html#a8a4f1d898d523818dbd9d7efa6f2cf92">Workspace::save_WS</a>(out, lib, wsname, <span class="keyword">false</span>);</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;      }</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;   <span class="comment">// )SAVE without arguments: use )WSID unless CLEAR WS</span></div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;LibRef wsid_lib = LIB0;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> wsid_name = <a class="code" href="classWorkspace.html#ace4fff7bb6714da724d964c5aa9c5503">Workspace::get_WS_name</a>();</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a>(wsid_name[0]))   <span class="comment">// wsid contains a libnum</span></div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;      {</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        wsid_lib = LibRef(wsid_name[0] - <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;        wsid_name.<a class="code" href="classUCS__string.html#a52cd4088451200cd78eb2db03b44a8ac">erase</a>(0);</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;        wsid_name.<a class="code" href="classUCS__string.html#a07e8673ec73ad31228be88053aeff1b1">remove_leading_whitespaces</a>();</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;      }</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;   <span class="keywordflow">if</span> (wsid_name.<a class="code" href="classUCS__string.html#a9a80a1621c030d847983275d62902411">compare</a>(<a class="code" href="classUCS__string.html">UCS_string</a>(<span class="stringliteral">&quot;CLEAR WS&quot;</span>)) == 0)   <span class="comment">// don&#39;t save CLEAR WS</span></div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;      {</div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;        COUT &lt;&lt; <span class="stringliteral">&quot;NOT SAVED: THIS WS IS CLEAR WS&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;        MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;        <span class="stringliteral">&quot;the workspace was not saved because &#39;CLEAR WS&#39; is a special\n&quot;</span></div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;        <span class="stringliteral">&quot;workspace name that cannot be saved. &quot;</span></div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;        <span class="stringliteral">&quot;First create WS name with )WSID &lt;name&gt;.&quot;</span>; </div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;</div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;   <a class="code" href="classWorkspace.html#a8a4f1d898d523818dbd9d7efa6f2cf92">Workspace::save_WS</a>(out, wsid_lib, wsid_name, <span class="keyword">true</span>);</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;}</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01861"></a><span class="lineno"><a class="line" href="classCommand.html#a39c11577c5e25765fbf5c848607a915a"> 1861</a></span>&#160;<a class="code" href="classCommand.html#a39c11577c5e25765fbf5c848607a915a">Command::resolve_lib_wsname</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args,</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;                            LibRef &amp;lib, <a class="code" href="classUCS__string.html">UCS_string</a> &amp; wsname)</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;{</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;   Assert(args.size() &gt; 0);</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;   <span class="keywordflow">if</span> (args.size() == 1)   <span class="comment">// name without libnum</span></div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;      {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;        lib = LIB0;</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;        wsname = args[0];</div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// OK</span></div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;      }</div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;   <span class="keywordflow">if</span> (!(args[0].size() == 1 &amp;&amp; <a class="code" href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a>(args[0][0])))</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;      {</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;invalid library reference &#39;&quot;</span> &lt;&lt; args[0] &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span>;</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">true</span>;   <span class="comment">// error</span></div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;      }</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;   lib = LibRef(args[0][0] - <span class="charliteral">&#39;0&#39;</span>);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;   wsname = args[1];</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// OK</span></div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;}</div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01885"></a><span class="lineno"><a class="line" href="classCommand.html#a03b38c251f9bd3a543dc33377a091b6d"> 1885</a></span>&#160;<a class="code" href="classCommand.html#a03b38c251f9bd3a543dc33377a091b6d">Command::cmd_USERCMD</a>(ostream &amp; out, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; cmd,</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;                     <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args)</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;{</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;   <span class="comment">// ]USERCMD</span></div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;   <span class="comment">// ]USERCMD REMOVE-ALL</span></div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;   <span class="comment">// ]USERCMD REMOVE        ]existing-command</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;   <span class="comment">// ]USERCMD ]new-command  APL-fun</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;   <span class="comment">// ]USERCMD ]new-command  APL-fun  mode</span></div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;   <span class="comment">// ]USERCMD ]new-command  { ... }</span></div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <span class="keywordflow">if</span> (args.size() == 0)</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;      {</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;           {</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;             loop(u, <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;                {</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;                  out &lt;&lt; <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].prefix &lt;&lt; <span class="stringliteral">&quot; â &quot;</span>;</div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;                  <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].mode)   out &lt;&lt; <span class="stringliteral">&quot;A &quot;</span>;</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;                  out &lt;&lt; <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].apl_function &lt;&lt; <span class="stringliteral">&quot; B&quot;</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; (mode &quot;</span> &lt;&lt; <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].mode</div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;                }</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;           }</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;      }</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;  <span class="keywordflow">if</span> (args.size() == 1 &amp;&amp; args[0].starts_iwith(<span class="stringliteral">&quot;REMOVE-ALL&quot;</span>))</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;     {</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;       <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().clear();</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;       out &lt;&lt; <span class="stringliteral">&quot;    All user-defined commands removed.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;       <span class="keywordflow">return</span>;</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;     }</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;  <span class="keywordflow">if</span> (args.size() == 2 &amp;&amp; args[0].starts_iwith(<span class="stringliteral">&quot;REMOVE&quot;</span>))</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;     {</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;       loop(u, <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().size())</div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;           {</div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;             <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].prefix</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;                                                  .starts_iwith(args[1]) &amp;&amp;</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;                 args[1].starts_iwith(<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u]</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;                                                          .prefix))   <span class="comment">// same</span></div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;                {</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;                  <span class="comment">// print first and remove then!</span></div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;                  <span class="comment">//</span></div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;                  out &lt;&lt; <span class="stringliteral">&quot;    User-defined command &quot;</span></div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;                      &lt;&lt; <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[u].prefix</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot; removed.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;                  <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;                     erase(<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().begin() + u);</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;                  <span class="keywordflow">return</span>;</div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;                }</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;           }</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;       out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;       MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;user command in command ]USERCMD REMOVE does not exist&quot;</span>;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;       <span class="keywordflow">return</span>;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;     }</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;</div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;  <span class="comment">// check if the user command is not followed by the string</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;  <span class="keywordflow">if</span> (args.size() == 1)</div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;     {</div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;user command syntax in ]USERCMD:&quot;</span></div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;                        <span class="stringliteral">&quot; ]new-command  APL-fun  [mode]&quot;</span>;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;     }</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;   <a class="code" href="classUCS__string.html">UCS_string</a> command_name = args[0];</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;   <a class="code" href="classUCS__string.html">UCS_string</a> apl_fun = args[1];</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;   <span class="keywordtype">int</span> mode = 0;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;</div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   <span class="comment">// check if lambda</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;   <span class="keywordtype">bool</span> is_lambda = <span class="keyword">false</span>;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;   <span class="keywordflow">if</span> (apl_fun[0] == <span class="charliteral">&#39;{&#39;</span>)</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      {</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;         <span class="comment">// looks like the user command is a lambda function.</span></div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;         <a class="code" href="classUCS__string.html">UCS_string</a> result;</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;         <span class="comment">// lambdas could contain spaces, collect all arguments in one string</span></div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;         <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; args.size(); ++i)</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;            {</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;               result &lt;&lt; args[i];</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;            }</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;         <span class="comment">// check if lamda-function closed properly</span></div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;         <span class="keywordflow">if</span> (result.<a class="code" href="classUCS__string.html#a186a76c22c3ac840f1e607ba49e253a0">back</a>() == <span class="charliteral">&#39;}&#39;</span>)</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;            {</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;               is_lambda = <span class="keyword">true</span>;</div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;               apl_fun = result;</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;               <span class="comment">// determine the mode: if both alpha and omega present then</span></div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;               <span class="comment">// assume dyadic, otherwise monadic usage</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;               mode = (apl_fun.<a class="code" href="classUCS__string.html#af9dec3e5327356e34a16ebfa604498c1">contains</a>(UNI_OMEGA) &amp;&amp;</div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;                       apl_fun.<a class="code" href="classUCS__string.html#af9dec3e5327356e34a16ebfa604498c1">contains</a>(UNI_ALPHA)) ? 1 : 0;</div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;            }</div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;         <span class="keywordflow">else</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;            {</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;               out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;               MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;closing } in lambda function not found&quot;</span>;</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;               <span class="keywordflow">return</span>;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;            }</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      }</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;</div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;   <span class="keywordflow">if</span> (args.size() &gt; 3 &amp;&amp; !is_lambda)</div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;      {</div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;too many parameters in command ]USERCMD&quot;</span>;</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;      }</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;   <span class="comment">// check mode</span></div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;   <span class="keywordflow">if</span> (!is_lambda &amp;&amp; args.size() == 3)   mode = args[2].atoi();</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;   <span class="keywordflow">if</span> (mode &lt; 0 || mode &gt; 1)</div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;      {</div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot;unsupported mode &quot;</span> &lt;&lt; mode</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;                     &lt;&lt; <span class="stringliteral">&quot; in command ]USERCMD (0 or 1 expected)&quot;</span>;</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;      }</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;   <span class="comment">// check command name</span></div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;   loop(c, command_name.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;      {</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;        <span class="keywordtype">bool</span> error = <span class="keyword">false</span>;</div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;        <span class="keywordflow">if</span> (c == 0)   error = error || command_name[c] != <span class="charliteral">&#39;]&#39;</span>;</div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;        <span class="keywordflow">else</span>          error = error || !<a class="code" href="classAvec.html#a76a72fdcb1782be1c490b3670c45504f">Avec::is_symbol_char</a>(command_name[c]);</div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;        <span class="keywordflow">if</span> (error)</div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;           {</div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;             MORE_ERROR() &lt;&lt; <span class="stringliteral">&quot; bad user command name in command ]USERCMD&quot;</span>;</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;           }</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;      }</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;   <span class="comment">// check conflicts with existing commands</span></div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;<span class="preprocessor">#define cmd_def(cmd_str, _cod, _arg, _hint) \</span></div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;<span class="preprocessor">   if (check_name_conflict(out, cmd_str, command_name))   return;</span></div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;<span class="preprocessor">#include &quot;Command.def&quot;</span></div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classCommand.html#a13b5e986bc7eae259343aca362870bba">check_redefinition</a>(out, command_name, apl_fun, mode))</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;     {</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;       out &lt;&lt; <span class="stringliteral">&quot;    User-defined command &quot;</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;           &lt;&lt; command_name &lt;&lt; <span class="stringliteral">&quot; installed.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;       <span class="keywordflow">return</span>;</div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;     }</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;   <span class="comment">// check APL function name</span></div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;   <span class="comment">// Only needed when not a lambda function</span></div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;   <span class="keywordflow">if</span> (!is_lambda)</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      {</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;         loop(c, apl_fun.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;            {</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;               <span class="keywordflow">if</span> (!<a class="code" href="classAvec.html#a76a72fdcb1782be1c490b3670c45504f">Avec::is_symbol_char</a>(apl_fun[c]))</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;                  {</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;                     out &lt;&lt; <span class="stringliteral">&quot;BAD COMMAND+&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;                     MORE_ERROR() &lt;&lt;</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;                          <span class="stringliteral">&quot;bad APL function name in command ]USERCMD&quot;</span>;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;                     <span class="keywordflow">return</span>;</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;                  }</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;            }</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;      }</div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;</div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;<a class="code" href="structCommand_1_1user__command.html">user_command</a> new_user_command = { command_name, apl_fun, mode };</div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().push_back(new_user_command);</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;    User-defined command &quot;</span></div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;       &lt;&lt; new_user_command.<a class="code" href="structCommand_1_1user__command.html#a464103ea3f5203247f3bedeace167ed4">prefix</a> &lt;&lt; <span class="stringliteral">&quot; installed.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;}</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02053"></a><span class="lineno"><a class="line" href="classCommand.html#a2f17c91a8b65e540a207da7c3be94dec"> 2053</a></span>&#160;<a class="code" href="classCommand.html#a2f17c91a8b65e540a207da7c3be94dec">Command::do_USERCMD</a>(ostream &amp; out, <a class="code" href="classUCS__string.html">UCS_string</a> &amp; apl_cmd,</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;                    <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; line, <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; cmd,</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;                    <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; args, <span class="keywordtype">int</span> uidx)</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;{</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;  <span class="keywordflow">if</span> (<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[uidx].mode &gt; 0)   <span class="comment">// dyadic</span></div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;     {</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;        apl_cmd.<a class="code" href="classUCS__string.html#aaa6ebd4a175a47347101721aa86322dd">append_quoted</a>(cmd);</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;        apl_cmd.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_SPACE);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;        loop(a, args.size())</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;           {</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;             apl_cmd.<a class="code" href="classUCS__string.html#aaa6ebd4a175a47347101721aa86322dd">append_quoted</a>(args[a]);</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;             apl_cmd.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_SPACE);</div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;           }</div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;     }</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;   apl_cmd.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>()[uidx].apl_function);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;   apl_cmd.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_SPACE);</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;   apl_cmd.<a class="code" href="classUCS__string.html#aaa6ebd4a175a47347101721aa86322dd">append_quoted</a>(line);</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;}</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;<span class="preprocessor">#ifdef DYNAMIC_LOG_WANTED</span></div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;<a class="code" href="classCommand.html#ac70a0a220bae16cdb98b389f4872c85d">Command::log_control</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; arg)</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;{</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;<a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> args = <a class="code" href="classCommand.html#a3c8718c78546d294a18e5793329e9df0">split_arg</a>(arg);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;   <span class="keywordflow">if</span> (args.size() == 0 || arg[0] == UNI_ASCII_QUESTION)  <span class="comment">// no arg or &#39;?&#39;</span></div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;      {</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;        <span class="keywordflow">for</span> (LogId l = LID_MIN; l &lt; LID_MAX; l = LogId(l + 1))</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;            {</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">char</span> * info = Log_info(l);</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;              Assert(info);</div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;</div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">bool</span> val = Log_status(l);</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;              CERR &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; setw(2) &lt;&lt; right &lt;&lt; l &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> </div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;                   &lt;&lt; (val ? <span class="stringliteral">&quot;(ON)  &quot;</span> : <span class="stringliteral">&quot;(OFF) &quot;</span>) &lt;&lt; left &lt;&lt; info &lt;&lt; endl;</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;            }</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;      }</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;<span class="keyword">const</span> LogId val = LogId(args[0].atoi());</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;<span class="keywordtype">int</span> on_off = -1;</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;   <span class="keywordflow">if</span>      (args.size() &gt; 1 &amp;&amp; args[1].starts_iwith(<span class="stringliteral">&quot;ON&quot;</span>))    on_off = 1;</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (args.size() &gt; 1 &amp;&amp; args[1].starts_iwith(<span class="stringliteral">&quot;OFf&quot;</span>))   on_off = 0;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <span class="keywordflow">if</span> (val &gt;= LID_MIN &amp;&amp; val &lt;= LID_MAX)</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;      {</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">char</span> * info = Log_info(val);</div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;        Assert(info);</div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;        <span class="keywordtype">bool</span> new_status = !Log_status(val);   <span class="comment">// toggle</span></div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;        <span class="keywordflow">if</span> (on_off == 0)        new_status = <span class="keyword">false</span>;</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (on_off == 1)   new_status = <span class="keyword">true</span>;</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;        Log_control(val, new_status);</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;    Log facility &#39;&quot;</span> &lt;&lt; info &lt;&lt; <span class="stringliteral">&quot;&#39; is now &quot;</span></div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;             &lt;&lt; (new_status ? <span class="stringliteral">&quot;ON &quot;</span> : <span class="stringliteral">&quot;OFF&quot;</span>) &lt;&lt; endl;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;      }</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;}</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02115"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#a9c4651f90f36f6cc728e7146a3a4a0aa"> 2115</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#a9c4651f90f36f6cc728e7146a3a4a0aa">Command::transfer_context::process_record</a>(<span class="keyword">const</span> UTF8 * record,</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;                                          <span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; objects)</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;{</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> rec_type = record[0];   <span class="comment">// &#39;*&#39;, &#39; &#39;, or &#39;X&#39;</span></div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> sub_type = record[1];</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;   <span class="keywordflow">if</span> (rec_type == <span class="charliteral">&#39;*&#39;</span>)   <span class="comment">// comment or similar</span></div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;      {</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;        Log(LOG_command_IN)</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;           {</div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;             <span class="keyword">const</span> <span class="keywordtype">char</span> * stype = <span class="stringliteral">&quot; *** bad sub-record of *&quot;</span>;</div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;             <span class="keywordflow">switch</span>(sub_type)</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;                {</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39; &#39;</span>: stype = <span class="stringliteral">&quot; comment&quot;</span>;     <span class="keywordflow">break</span>;</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39;(&#39;</span>: {</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;                              stype = <span class="stringliteral">&quot; timestamp&quot;</span>;</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;                              <a class="code" href="structYMDhmsu.html">YMDhmsu</a> t(now());   <span class="comment">// fallback if sscanf() != 7</span></div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;                              <span class="keywordflow">if</span> (7 == sscanf(charP(record + 1),</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;                                              <span class="stringliteral">&quot;(%d %d %d %d %d %d %d)&quot;</span>,</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;                                              &amp;t.<a class="code" href="structYMDhmsu.html#ab474982883e050d04e3b44be036122ed">year</a>, &amp;t.<a class="code" href="structYMDhmsu.html#adb8189a3111d2ea409fdab27f7882f0c">month</a>, &amp;t.<a class="code" href="structYMDhmsu.html#aa7f7fe940f6298a35301645a4fbb0aa8">day</a>,</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;                                              &amp;t.<a class="code" href="structYMDhmsu.html#a15ce9aa4f046b202fe8ca83c3ebb10e2">hour</a>, &amp;t.<a class="code" href="structYMDhmsu.html#a022fc0c042636b59fb0fe3c7a0428417">minute</a>, &amp;t.<a class="code" href="structYMDhmsu.html#ae447db4de8afa81b7d24f9bd0b1c110d">second</a>,</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;                                              &amp;t.<a class="code" href="structYMDhmsu.html#a404bd8c667c5ecd49205fd49c8b3ece0">micro</a>))</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;                                  {</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;                                    timestamp = t.<a class="code" href="structYMDhmsu.html#aa0722d258b9da36ad28d55790e1b37bf">get</a>();</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;                                  }</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;                            }</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;                            <span class="keywordflow">break</span>;</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;                  <span class="keywordflow">case</span> <span class="charliteral">&#39;I&#39;</span>: stype = <span class="stringliteral">&quot; imbed&quot;</span>;       <span class="keywordflow">break</span>;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;                }</div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;record #&quot;</span> &lt;&lt; setw(3) &lt;&lt; recnum &lt;&lt; <span class="stringliteral">&quot;: &#39;&quot;</span> &lt;&lt; rec_type</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; stype &lt;&lt; endl;</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;           }</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;      }</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (rec_type == <span class="charliteral">&#39; &#39;</span> || rec_type == <span class="charliteral">&#39;X&#39;</span>)   <span class="comment">// object</span></div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;      {</div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;        <span class="keywordflow">if</span> (new_record)</div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;           {</div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;             Log(LOG_command_IN)</div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;                {</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;                  <span class="keyword">const</span> <span class="keywordtype">char</span> * stype = <span class="stringliteral">&quot; *** bad sub-record of X&quot;</span>;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;</div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;<span class="comment">//                          &quot; -------------------------------------&quot;;</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;                  <span class="keywordflow">switch</span>(sub_type)</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;                     {</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;                       <span class="keywordflow">case</span> <span class="charliteral">&#39;A&#39;</span>: stype = <span class="stringliteral">&quot; 2 âTF array &quot;</span>;           <span class="keywordflow">break</span>;</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;                       <span class="keywordflow">case</span> <span class="charliteral">&#39;C&#39;</span>: stype = <span class="stringliteral">&quot; 1 âTF char array &quot;</span>;      <span class="keywordflow">break</span>;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;                       <span class="keywordflow">case</span> <span class="charliteral">&#39;F&#39;</span>: stype = <span class="stringliteral">&quot; 2 âTF function &quot;</span>;        <span class="keywordflow">break</span>;</div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;                       <span class="keywordflow">case</span> <span class="charliteral">&#39;N&#39;</span>: stype = <span class="stringliteral">&quot; 1 âTF numeric array &quot;</span>;   <span class="keywordflow">break</span>;</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;                     }</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;                  CERR &lt;&lt; <span class="stringliteral">&quot;record #&quot;</span> &lt;&lt; setw(3) &lt;&lt; recnum</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;                       &lt;&lt; <span class="stringliteral">&quot;: &quot;</span> &lt;&lt; stype &lt;&lt; endl;</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;                }</div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;</div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;             item_type = sub_type;</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;           }</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;        add(record + 1, 71);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;        new_record = (rec_type == <span class="charliteral">&#39;X&#39;</span>);   <span class="comment">// &#39;X&#39; marks the final record</span></div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;        <span class="keywordflow">if</span> (new_record)</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;           {</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;             <span class="keywordflow">if</span>      (item_type == <span class="charliteral">&#39;A&#39;</span>)   array_2TF(objects);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item_type == <span class="charliteral">&#39;C&#39;</span>)   chars_1TF(objects);</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item_type == <span class="charliteral">&#39;N&#39;</span>)   numeric_1TF(objects);</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (item_type == <span class="charliteral">&#39;F&#39;</span>)   function_2TF(objects);</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;             <span class="keywordflow">else</span>                         CERR &lt;&lt; <span class="stringliteral">&quot;????: &quot;</span> &lt;&lt; data &lt;&lt; endl;</div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;             data.clear();</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;           }</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;      }</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;      {</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;record #&quot;</span> &lt;&lt; setw(3) &lt;&lt; recnum &lt;&lt; <span class="stringliteral">&quot;: &#39;&quot;</span> &lt;&lt; rec_type &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span></div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;*** bad record type &#39;&quot;</span> &lt;&lt; rec_type &lt;&lt; endl;</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;      }</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;}</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;uint32_t</div><div class="line"><a name="l02194"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#a36395b934377269c3f923a110904f9d3"> 2194</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#a36395b934377269c3f923a110904f9d3">Command::transfer_context::get_nrs</a>(<a class="code" href="classUCS__string.html">UCS_string</a> &amp; name, <a class="code" href="classShape.html">Shape</a> &amp; shape)<span class="keyword"> const</span></div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;<span class="keywordtype">int</span> idx = 1;</div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;   <span class="comment">// data + 1 is: NAME RK SHAPE RAVEL...</span></div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;   <span class="keywordflow">while</span> (idx &lt; data.size() &amp;&amp; data[idx] != UNI_ASCII_SPACE)</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;         name.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(data[idx++]);</div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;   ++idx;   <span class="comment">// skip space after the name</span></div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;<span class="keywordtype">int</span> rank = 0;</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <span class="keywordflow">while</span> (idx &lt; data.size() &amp;&amp;</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;          data[idx] &gt;= UNI_ASCII_0 &amp;&amp;</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;          data[idx] &lt;= UNI_ASCII_9)</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;      {</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;        rank *= 10;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;        rank += data[idx++] - UNI_ASCII_0;</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;      }</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   ++idx;   <span class="comment">// skip space after the rank</span></div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;   loop (r, rank)</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;      {</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;        ShapeItem s = 0;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;        <span class="keywordflow">while</span> (idx &lt; data.size() &amp;&amp;</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;               data[idx] &gt;= UNI_ASCII_0 &amp;&amp;</div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;               data[idx] &lt;= UNI_ASCII_9)</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;           {</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;             s *= 10;</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;             s += data[idx++] - UNI_ASCII_0;</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;           }</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;        shape.<a class="code" href="classShape.html#aeb018b67601d3f1c4bea3d2c2b877b7e">add_shape_item</a>(s);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;        ++idx;   <span class="comment">// skip space after shape[r]</span></div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;      }</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;  </div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <span class="keywordflow">return</span> idx;</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;}</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02232"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#a692d84840f69d40df03843f0d7589017"> 2232</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#a692d84840f69d40df03843f0d7589017">Command::transfer_context::numeric_1TF</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; objects)<span class="keyword"> const</span></div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> var_name;</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<a class="code" href="classShape.html">Shape</a> shape;</div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<span class="keywordtype">int</span> idx = get_nrs(var_name, shape);</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;   <span class="keywordflow">if</span> (objects.size() &amp;&amp; !objects.<a class="code" href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">contains</a>(var_name))   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;<a class="code" href="classSymbol.html">Symbol</a> * sym = 0;</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#a88cc8af75e4a2c4d8a1d382637ca07b4">Avec::is_quad</a>(var_name[0]))   <span class="comment">// system variable.</span></div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;      {</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;        <span class="keywordtype">int</span> len = 0;</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;        <span class="keyword">const</span> <a class="code" href="classToken.html">Token</a> t = <a class="code" href="classWorkspace.html#acb39e0420fcef7558220b9576b809e97">Workspace::get_quad</a>(var_name, len);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;        <span class="keywordflow">if</span> (t.<a class="code" href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">get_ValueType</a>() == TV_SYM)   sym = t.<a class="code" href="classToken.html#aa92af5604449cd8c22b35297f07d5b9d">get_sym_ptr</a>();</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;        <span class="keywordflow">else</span>                               Assert(0 &amp;&amp; <span class="stringliteral">&quot;Bad system variable&quot;</span>);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;      }</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;   <span class="keywordflow">else</span>                            <span class="comment">// user defined variable</span></div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;      {</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;        sym = <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(var_name);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;        Assert(sym);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;      }</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;   </div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   Log(LOG_command_IN)</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;      {</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;        CERR &lt;&lt; endl &lt;&lt; var_name &lt;&lt; <span class="stringliteral">&quot; rank &quot;</span> &lt;&lt; shape.<a class="code" href="classShape.html#a017e9a35dd20f4bc4fdeb7ea29b6805d">get_rank</a>() &lt;&lt; <span class="stringliteral">&quot; IS &#39;&quot;</span>;</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;        loop(j, data.size() - idx)   CERR &lt;&lt; data[idx + j];</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;      }</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<a class="code" href="classToken__string.html">Token_string</a> tos;</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   {</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;     <a class="code" href="classUCS__string.html">UCS_string</a> data1(data, idx, data.size() - idx);</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;     <a class="code" href="classTokenizer.html">Tokenizer</a> tokenizer(PM_EXECUTE, LOC, <span class="keyword">false</span>);</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;     <span class="keywordflow">if</span> (tokenizer.tokenize(data1, tos) != E_NO_ERROR)   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;   }</div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160; </div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;   <span class="keywordflow">if</span> (tos.size() != size_t(shape.<a class="code" href="classShape.html#af39e05bad7be900fa1437a6eb6035e97">get_volume</a>()))   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<a class="code" href="classValue__P.html">Value_P</a> val(shape, LOC);</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;   <span class="keyword">new</span> (&amp;val-&gt;get_ravel(0)) <a class="code" href="classIntCell.html">IntCell</a>(0);   <span class="comment">// prototype</span></div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<span class="keyword">const</span> ShapeItem ec = val-&gt;element_count();</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   loop(e, ec)</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;      {</div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;        <span class="keyword">const</span> TokenTag tag = tos[e].get_tag();</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;        <a class="code" href="classCell.html">Cell</a> * C = val-&gt;next_ravel();</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;        <span class="keywordflow">if</span>      (tag == TOK_INTEGER)  <span class="keyword">new</span> (C) <a class="code" href="classIntCell.html">IntCell</a>(tos[e].get_int_val());</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == TOK_REAL)     <span class="keyword">new</span> (C) <a class="code" href="classFloatCell.html">FloatCell</a>(tos[e].get_flt_val());</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tag == TOK_COMPLEX)  <span class="keyword">new</span> (C)</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;                                          <a class="code" href="classComplexCell.html">ComplexCell</a>(tos[e].get_cpx_real(),</div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;                                                      tos[e].get_cpx_imag());</div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;        <span class="keywordflow">else</span> FIXME;</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;      }</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;   val-&gt;check_value(LOC);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   Assert(sym);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   sym-&gt;<a class="code" href="classSymbol.html#a739f019bbd3b466914ac56f3437496db">assign</a>(val, <span class="keyword">false</span>, LOC);</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;}</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02293"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#a73ebb1258e33db67a0d2ea54ff3efe97"> 2293</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#a73ebb1258e33db67a0d2ea54ff3efe97">Command::transfer_context::chars_1TF</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; objects)<span class="keyword"> const</span></div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> var_name;</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;<a class="code" href="classShape.html">Shape</a> shape;</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;<span class="keywordtype">int</span> idx = get_nrs(var_name, shape);</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;   <span class="keywordflow">if</span> (objects.size() &amp;&amp; !objects.<a class="code" href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">contains</a>(var_name))   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<a class="code" href="classSymbol.html">Symbol</a> * sym = 0;</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#a88cc8af75e4a2c4d8a1d382637ca07b4">Avec::is_quad</a>(var_name[0]))   <span class="comment">// system variable.</span></div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;      {</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;        <span class="keywordtype">int</span> len = 0;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;        <span class="keyword">const</span> <a class="code" href="classToken.html">Token</a> t = <a class="code" href="classWorkspace.html#acb39e0420fcef7558220b9576b809e97">Workspace::get_quad</a>(var_name, len);</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;        <span class="keywordflow">if</span> (t.<a class="code" href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">get_ValueType</a>() == TV_SYM)   sym = t.<a class="code" href="classToken.html#aa92af5604449cd8c22b35297f07d5b9d">get_sym_ptr</a>();</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;        <span class="keywordflow">else</span>                               Assert(0 &amp;&amp; <span class="stringliteral">&quot;Bad system variable&quot;</span>);</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;      }</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   <span class="keywordflow">else</span>                            <span class="comment">// user defined variable</span></div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;      {</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;        sym = <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(var_name);</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;        Assert(sym);</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;      }</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;   </div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;   Log(LOG_command_IN)</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;      {</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;        CERR &lt;&lt; endl &lt;&lt; var_name &lt;&lt; <span class="stringliteral">&quot; shape &quot;</span> &lt;&lt; shape &lt;&lt; <span class="stringliteral">&quot; IS: &#39;&quot;</span>;</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;        loop(j, data.size() - idx)   CERR &lt;&lt; data[idx + j];</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;      }</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;<a class="code" href="classValue__P.html">Value_P</a> val(shape, LOC);</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;<span class="keyword">const</span> ShapeItem ec = val-&gt;element_count();</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;   <span class="keyword">new</span> (&amp;val-&gt;get_ravel(0)) <a class="code" href="classCharCell.html">CharCell</a>(UNI_ASCII_SPACE);   <span class="comment">// prototype</span></div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;ShapeItem padded = 0;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   loop(e, ec)</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;      {</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;        Unicode uni = UNI_ASCII_SPACE;</div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;        <span class="keywordflow">if</span> (e &lt; (data.size() - idx))   uni = data[e + idx];</div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;        <span class="keywordflow">else</span>                           ++padded;</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;         <span class="keyword">new</span> (&amp;val-&gt;get_ravel(e)) <a class="code" href="classCharCell.html">CharCell</a>(uni);</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;      }</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   <span class="keywordflow">if</span> (padded)</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;      {</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;WARNING: ATF Record for &quot;</span> &lt;&lt; var_name &lt;&lt; <span class="stringliteral">&quot; is broken (&quot;</span></div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;             &lt;&lt; padded &lt;&lt; <span class="stringliteral">&quot; spaces added)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;      }</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   val-&gt;check_value(LOC);</div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;   Assert(sym);</div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;   sym-&gt;<a class="code" href="classSymbol.html#a739f019bbd3b466914ac56f3437496db">assign</a>(val, <span class="keyword">false</span>, LOC);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;}</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02348"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#a4e80a2899a02285ba89e58792e6150ea"> 2348</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#a4e80a2899a02285ba89e58792e6150ea">Command::transfer_context::array_2TF</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; objects)<span class="keyword"> const</span></div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;   <span class="comment">// an Array in 2 âTF format</span></div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> data1(&amp;data[1], data.size() - 1);</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> var_or_fun;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;</div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;   <span class="comment">// data1 is: VARNAMEâdata...</span></div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;   <span class="keywordflow">if</span> (objects.size())</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;      {</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;        <a class="code" href="classUCS__string.html">UCS_string</a> var_name;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;        loop(d, data1.size())</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;           {</div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;             <span class="keyword">const</span> Unicode uni = data1[d];</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;             <span class="keywordflow">if</span> (uni == UNI_LEFT_ARROW)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;             var_name.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(uni);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;           }</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;        <span class="keywordflow">if</span> (!objects.<a class="code" href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">contains</a>(var_name))   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;      }</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;   var_or_fun = <a class="code" href="classQuad__TF.html#a293263bd9b2bf923dc9e4113dded832f">Quad_TF::tf2_inverse</a>(data1);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;   <span class="keywordflow">if</span> (var_or_fun.size() == 0)</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;      {</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;ERROR: inverse 2 âTF failed for &#39;&quot;</span> &lt;&lt; data1 &lt;&lt; <span class="stringliteral">&quot;;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;      }</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;}</div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02379"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#afee6856208966168d158de45145dd4ca"> 2379</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#afee6856208966168d158de45145dd4ca">Command::transfer_context::function_2TF</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string__vector.html">UCS_string_vector</a> &amp; objects)<span class="keyword">const</span></div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;<span class="keywordtype">int</span> idx = 1;</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> fun_name;</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;   <span class="keywordflow">while</span> ((idx &lt; data.size()) &amp;&amp; (data[idx] != UNI_ASCII_SPACE))</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;        fun_name.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(data[idx++]);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;   ++idx;</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;   <span class="keywordflow">if</span> (objects.size() &amp;&amp; !objects.<a class="code" href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">contains</a>(fun_name))   <span class="keywordflow">return</span>;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> statement;</div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;   <span class="keywordflow">while</span> (idx &lt; data.size())   statement.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(data[idx++]);</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;   statement.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_LF);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> fun_name1 = <a class="code" href="classQuad__TF.html#a293263bd9b2bf923dc9e4113dded832f">Quad_TF::tf2_inverse</a>(statement);</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;   <span class="keywordflow">if</span> (fun_name1.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)   <span class="comment">// tf2_inverse() failed</span></div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;      {</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;inverse 2 âTF failed for the following APL statement: &quot;</span></div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;             &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot;    &quot;</span> &lt;&lt; statement &lt;&lt; endl;</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;      }</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;<a class="code" href="classSymbol.html">Symbol</a> * sym1 = <a class="code" href="classWorkspace.html#ad59928bcb6527147b5c5ca3e34106fe3">Workspace::lookup_existing_symbol</a>(fun_name1);</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;   Assert(sym1);</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;<a class="code" href="classFunction.html">Function</a> * fun1 = sym1-&gt;<a class="code" href="classSymbol.html#a1d1320dbabb544d3bafcc360d1ddd76e">get_function</a>();</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;   Assert(fun1);</div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;   fun1-&gt;<a class="code" href="classFunction.html#a4d6d6e2b3c6306fbca9a537d6652daee">set_creation_time</a>(timestamp);</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;   Log(LOG_command_IN)</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;      {</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;       <span class="keyword">const</span> <a class="code" href="structYMDhmsu.html">YMDhmsu</a> ymdhmsu(timestamp);</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;       CERR &lt;&lt; <span class="stringliteral">&quot;FUNCTION &#39;&quot;</span> &lt;&lt; fun_name1 &lt;&lt;  <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;   created: &quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#aa7f7fe940f6298a35301645a4fbb0aa8">day</a> &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#adb8189a3111d2ea409fdab27f7882f0c">month</a></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#ab474982883e050d04e3b44be036122ed">year</a> &lt;&lt; <span class="stringliteral">&quot;  &quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#a15ce9aa4f046b202fe8ca83c3ebb10e2">hour</a></div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#a022fc0c042636b59fb0fe3c7a0428417">minute</a> &lt;&lt; <span class="stringliteral">&quot;:&quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#ae447db4de8afa81b7d24f9bd0b1c110d">second</a></div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;.&quot;</span> &lt;&lt; ymdhmsu.<a class="code" href="structYMDhmsu.html#a404bd8c667c5ecd49205fd49c8b3ece0">micro</a> &lt;&lt; <span class="stringliteral">&quot; (&quot;</span> &lt;&lt; timestamp &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;      }</div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;}</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02421"></a><span class="lineno"><a class="line" href="structCommand_1_1transfer__context.html#a77c5f0fa4e25decf8d996cb8b69ac06a"> 2421</a></span>&#160;<a class="code" href="structCommand_1_1transfer__context.html#a77c5f0fa4e25decf8d996cb8b69ac06a">Command::transfer_context::add</a>(<span class="keyword">const</span> UTF8 * str, <span class="keywordtype">int</span> len)</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;{</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;<span class="preprocessor">#if 0</span></div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;   <span class="comment">// helper to print the uni_to_cp_map when given a cp_to_uni_map.</span></div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;   <a class="code" href="classAvec.html#ae3911626674255ce3f75abd5cd4ca3be">Avec::print_inverse_IBM_quad_AV</a>();</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;   DOMAIN_ERROR;</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;<span class="keyword">const</span> Unicode * cp_to_uni_map = <a class="code" href="classAvec.html#a15bfa417923b425ec3c2baf973d2a5f9">Avec::IBM_quad_AV</a>();</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;   loop(l, len)</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;      {</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="keyword">const</span> UTF8 utf = str[l];</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;        <span class="keywordflow">switch</span>(utf)</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;           {</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;             <span class="keywordflow">case</span> <span class="charliteral">&#39;^&#39;</span>: data.append(UNI_AND);              <span class="keywordflow">break</span>;   <span class="comment">// ~ â â¼</span></div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;             <span class="keywordflow">case</span> <span class="charliteral">&#39;*&#39;</span>: data.append(UNI_STAR_OPERATOR);    <span class="keywordflow">break</span>;   <span class="comment">// * â â</span></div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;             <span class="keywordflow">case</span> <span class="charliteral">&#39;~&#39;</span>: data.append(UNI_TILDE_OPERATOR);   <span class="keywordflow">break</span>;   <span class="comment">// ~ â â¼</span></div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;             </div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;             <span class="keywordflow">default</span>:  data.append(Unicode(cp_to_uni_map[utf]));</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;           }</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;      }</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;}</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l02447"></a><span class="lineno"><a class="line" href="classCommand.html#a429d0c585e845bf29a504a24889cb761"> 2447</a></span>&#160;<a class="code" href="classCommand.html#a429d0c585e845bf29a504a24889cb761">Command::parse_from_to</a>(<a class="code" href="classUCS__string.html">UCS_string</a> &amp; from, <a class="code" href="classUCS__string.html">UCS_string</a> &amp; to,</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;                       <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; user_arg)</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;{</div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;   <span class="comment">// parse user_arg which is one of the following:</span></div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;   <span class="comment">// 1.   (empty)</span></div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;   <span class="comment">// 2.   FROMTO</span></div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;   <span class="comment">// 3a.  FROM -</span></div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;   <span class="comment">// 3b.       - TO</span></div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;   <span class="comment">// 3c.  FROM - TO</span></div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;   from.clear();</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;   to.clear();</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;<span class="keywordtype">int</span> s = 0;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;<span class="keywordtype">bool</span> got_minus = <span class="keyword">false</span>;</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;   <span class="comment">// skip spaces before from</span></div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;   <span class="keywordflow">while</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; user_arg[s] &lt;= <span class="charliteral">&#39; &#39;</span>) ++s;</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;   <span class="keywordflow">if</span> (s == user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// case 1.: OK</span></div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;   <span class="comment">// copy left of - to from</span></div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;   <span class="keywordflow">while</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>()   &amp;&amp;</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;              user_arg[s] &gt; <span class="charliteral">&#39; &#39;</span> &amp;&amp;</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;              user_arg[s] != <span class="charliteral">&#39;-&#39;</span>)  from.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(user_arg[s++]);</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;   <span class="comment">// skip spaces after from</span></div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;   <span class="keywordflow">while</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; user_arg[s] &lt;= <span class="charliteral">&#39; &#39;</span>) ++s;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;   <span class="keywordflow">if</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; user_arg[s] == <span class="charliteral">&#39;-&#39;</span>) { ++s;   got_minus = <span class="keyword">true</span>; }</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <span class="comment">// skip spaces before to</span></div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;   <span class="keywordflow">while</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; user_arg[s] &lt;= <span class="charliteral">&#39; &#39;</span>) ++s;</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;   <span class="comment">// copy right of - to from</span></div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;   <span class="keywordflow">while</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; user_arg[s] &gt; <span class="charliteral">&#39; &#39;</span>)  to.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(user_arg[s++]);</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;</div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <span class="comment">// skip spaces after to</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;   <span class="keywordflow">while</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() &amp;&amp; user_arg[s] &lt;= <span class="charliteral">&#39; &#39;</span>) ++s;</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;</div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;   <span class="keywordflow">if</span> (s &lt; user_arg.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="keywordflow">return</span> <span class="keyword">true</span>;   <span class="comment">// error: non-blank after to</span></div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;   <span class="keywordflow">if</span> (!got_minus)   to = from;   <span class="comment">// case 2.</span></div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;   <span class="keywordflow">if</span> (from.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0 &amp;&amp; to.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0) <span class="keywordflow">return</span> <span class="keyword">true</span>;   <span class="comment">// error: single -</span></div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;   <span class="comment">// &quot;increment&quot; TO so that we can compare ITEM &lt; TO</span></div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;   <span class="keywordflow">if</span> (to.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   to.<a class="code" href="classUCS__string.html#a186a76c22c3ac840f1e607ba49e253a0">back</a>() = Unicode(to.<a class="code" href="classUCS__string.html#a186a76c22c3ac840f1e607ba49e253a0">back</a>() + 1);</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// OK</span></div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;}</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l02508"></a><span class="lineno"><a class="line" href="classCommand.html#a77793af6c04c67f89632265c4504bf74"> 2508</a></span>&#160;<a class="code" href="classCommand.html#a77793af6c04c67f89632265c4504bf74">Command::is_lib_ref</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; lib)</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;{</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;   <span class="keywordflow">if</span> (lib.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 1)   <span class="comment">// single char: lib number</span></div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;      {</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a>(lib[0]))   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;      }</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;   <span class="keywordflow">if</span> (lib[0] == UNI_ASCII_FULLSTOP)   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;   loop(l, lib.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;      {</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;        <span class="keyword">const</span> Unicode uni = lib[l];</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;        <span class="keywordflow">if</span> (uni == UNI_ASCII_SLASH)       <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;        <span class="keywordflow">if</span> (uni == UNI_ASCII_BACKSLASH)   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;      }</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;}</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="ttc" id="structYMDhmsu_html_aa0722d258b9da36ad28d55790e1b37bf"><div class="ttname"><a href="structYMDhmsu.html#aa0722d258b9da36ad28d55790e1b37bf">YMDhmsu::get</a></div><div class="ttdeci">APL_time_us get() const</div><div class="ttdoc">return usec since Jan. 1. 1970 00:00:00 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8cc_source.html#l00253">Common.cc:253</a></div></div>
<div class="ttc" id="classComplexCell_html"><div class="ttname"><a href="classComplexCell.html">ComplexCell</a></div><div class="ttdoc">A celkl containing one complex numbver. </div><div class="ttdef"><b>Definition:</b> <a href="ComplexCell_8hh_source.html#l00034">ComplexCell.hh:34</a></div></div>
<div class="ttc" id="classShape_html_aeb018b67601d3f1c4bea3d2c2b877b7e"><div class="ttname"><a href="classShape.html#aeb018b67601d3f1c4bea3d2c2b877b7e">Shape::add_shape_item</a></div><div class="ttdeci">void add_shape_item(ShapeItem len)</div><div class="ttdoc">add a dimension of length len at the end </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8hh_source.html#l00157">Shape.hh:157</a></div></div>
<div class="ttc" id="classPrefix_html_addb6f527f608e25888c207d5428e8242"><div class="ttname"><a href="classPrefix.html#addb6f527f608e25888c207d5428e8242">Prefix::tos</a></div><div class="ttdeci">Token_loc &amp; tos()</div><div class="ttdoc">return the leftmost (top-of-stack) Token_loc (at put position) </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00285">Prefix.hh:285</a></div></div>
<div class="ttc" id="classWorkspace_html_a057e0d77702810d071560c7b72c2f8d6"><div class="ttname"><a href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a></div><div class="ttdeci">static StateIndicator * SI_top()</div><div class="ttdoc">the top of the SI stack (the SI pushed last) </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00117">Workspace.hh:117</a></div></div>
<div class="ttc" id="classAvec_html_ae3911626674255ce3f75abd5cd4ca3be"><div class="ttname"><a href="classAvec.html#ae3911626674255ce3f75abd5cd4ca3be">Avec::print_inverse_IBM_quad_AV</a></div><div class="ttdeci">static void print_inverse_IBM_quad_AV()</div><div class="ttdoc">recompute inverse_ibm_av from ibm_av and print it </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8cc_source.html#l00500">Avec.cc:500</a></div></div>
<div class="ttc" id="classVH__entry_html_ae422e396e1a7268221697abfd927ead0"><div class="ttname"><a href="classVH__entry.html#ae422e396e1a7268221697abfd927ead0">VH_entry::print_history</a></div><div class="ttdeci">static void print_history(ostream &amp;out, const Value *value, const char *loc)</div><div class="ttdoc">print the history of value </div><div class="ttdef"><b>Definition:</b> <a href="ValueHistory_8cc_source.html#l00071">ValueHistory.cc:71</a></div></div>
<div class="ttc" id="classCommand_html_a834eac0e797a5d1c992018b7d0c049a4"><div class="ttname"><a href="classCommand.html#a834eac0e797a5d1c992018b7d0c049a4">Command::cmd_DOXY</a></div><div class="ttdeci">static void cmd_DOXY(ostream &amp;out, UCS_string_vector &amp;args)</div><div class="ttdoc">]DOXY: create doxygen-like documentation of the current workspace </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00783">Command.cc:783</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a36395b934377269c3f923a110904f9d3"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a36395b934377269c3f923a110904f9d3">Command::transfer_context::get_nrs</a></div><div class="ttdeci">uint32_t get_nrs(UCS_string &amp;name, Shape &amp;shape) const</div><div class="ttdoc">get the name, rank, and shape of a 1 âTF record </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02194">Command.cc:2194</a></div></div>
<div class="ttc" id="classNabla_html_a5571a862b4a619a9c6404dcb7fcf385f"><div class="ttname"><a href="classNabla.html#a5571a862b4a619a9c6404dcb7fcf385f">Nabla::edit_function</a></div><div class="ttdeci">static void edit_function(const UCS_string &amp;cmd)</div><div class="ttdoc">edit the function specified in cmd (e.g. cmd = &quot;âFUN&quot;) </div><div class="ttdef"><b>Definition:</b> <a href="Nabla_8cc_source.html#l00037">Nabla.cc:37</a></div></div>
<div class="ttc" id="classShape_html_af39e05bad7be900fa1437a6eb6035e97"><div class="ttname"><a href="classShape.html#af39e05bad7be900fa1437a6eb6035e97">Shape::get_volume</a></div><div class="ttdeci">ShapeItem get_volume() const</div><div class="ttdoc">return the number of elements (1 for scalars, else product of shapes) </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8hh_source.html#l00187">Shape.hh:187</a></div></div>
<div class="ttc" id="structYMDhmsu_html"><div class="ttname"><a href="structYMDhmsu.html">YMDhmsu</a></div><div class="ttdoc">Year, Month, Day, hour, minute, second, millisecond. </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00323">Common.hh:323</a></div></div>
<div class="ttc" id="classUCS__string_html_af9dec3e5327356e34a16ebfa604498c1"><div class="ttname"><a href="classUCS__string.html#af9dec3e5327356e34a16ebfa604498c1">UCS_string::contains</a></div><div class="ttdeci">bool contains(Unicode uni)</div><div class="ttdoc">return true if this string contains uni </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l01414">UCS_string.cc:1414</a></div></div>
<div class="ttc" id="classWorkspace_html_a28f04b4a3bfcdc52f82d24c060475c61"><div class="ttname"><a href="classWorkspace.html#a28f04b4a3bfcdc52f82d24c060475c61">Workspace::erase_symbols</a></div><div class="ttdeci">static void erase_symbols(ostream &amp;out, const UCS_string_vector &amp;symbols)</div><div class="ttdoc">erase the symbols in symbols from the symbol table </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00142">Workspace.hh:142</a></div></div>
<div class="ttc" id="structCommand_1_1val__val_html_ac1d794e618e7599f1ee7df7adf6748f0"><div class="ttname"><a href="structCommand_1_1val__val.html#ac1d794e618e7599f1ee7df7adf6748f0">Command::val_val::compare_val_val1</a></div><div class="ttdeci">static int compare_val_val1(const void *key, const void *B)</div><div class="ttdoc">compare function for bsearch() </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00643">Command.cc:643</a></div></div>
<div class="ttc" id="classFunction_html"><div class="ttname"><a href="classFunction.html">Function</a></div><div class="ttdoc">Base class for all APL functions and operators (system or defined) </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00048">Function.hh:48</a></div></div>
<div class="ttc" id="classCell_html"><div class="ttname"><a href="classCell.html">Cell</a></div><div class="ttdoc">The base class for all Cells. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00054">Cell.hh:54</a></div></div>
<div class="ttc" id="classCommand_html_ad222a6de11eb55501624a4d0dea3a464"><div class="ttname"><a href="classCommand.html#ad222a6de11eb55501624a4d0dea3a464">Command::cmd_LOAD</a></div><div class="ttdeci">static void cmd_LOAD(ostream &amp;out, UCS_string_vector &amp;args, UCS_string &amp;quad_lx, bool silent)</div><div class="ttdoc">)LOAD: load a workspace file </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01320">Command.cc:1320</a></div></div>
<div class="ttc" id="classError_html"><div class="ttname"><a href="classError.html">Error</a></div><div class="ttdoc">An APL error and information related to it. </div><div class="ttdef"><b>Definition:</b> <a href="Error_8hh_source.html#l00044">Error.hh:44</a></div></div>
<div class="ttc" id="classValue_html_a80c3e1a7208f4f97985e5c742ec93b2d"><div class="ttname"><a href="classValue.html#a80c3e1a7208f4f97985e5c742ec93b2d">Value::print_stale</a></div><div class="ttdeci">static int print_stale(ostream &amp;out)</div><div class="ttdoc">print stale Values, and return the number of stale Values. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cc_source.html#l01890">Value.cc:1890</a></div></div>
<div class="ttc" id="classUCS__string_html_a3b92321d846e064514c29486acdee4e6"><div class="ttname"><a href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">UCS_string::size</a></div><div class="ttdeci">ShapeItem size() const</div><div class="ttdoc">overload basic_string::size() so that it returns a signed length </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00330">UCS_string.hh:330</a></div></div>
<div class="ttc" id="classUCS__string_html_a21c71f20fbd921dd1933404a2674c3cb"><div class="ttname"><a href="classUCS__string.html#a21c71f20fbd921dd1933404a2674c3cb">UCS_string::copy_black</a></div><div class="ttdeci">void copy_black(UCS_string &amp;dest, int &amp;idx) const</div><div class="ttdoc">skip leading whitespaces starting at idx, append the following non-whitespaces (if any) to dest...</div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00524">UCS_string.cc:524</a></div></div>
<div class="ttc" id="classToken_html_a9721c23968d7272edd1abae91ba77193"><div class="ttname"><a href="classToken.html#a9721c23968d7272edd1abae91ba77193">Token::get_int_val</a></div><div class="ttdeci">int64_t get_int_val() const</div><div class="ttdoc">return the integer value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00153">Token.hh:153</a></div></div>
<div class="ttc" id="structYMDhmsu_html_a404bd8c667c5ecd49205fd49c8b3ece0"><div class="ttname"><a href="structYMDhmsu.html#a404bd8c667c5ecd49205fd49c8b3ece0">YMDhmsu::micro</a></div><div class="ttdeci">int micro</div><div class="ttdoc">microseconds 0-999999 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00337">Common.hh:337</a></div></div>
<div class="ttc" id="classAvec_html_af31e35e3049f3bc48cb1ff8d70262dd7"><div class="ttname"><a href="classAvec.html#af31e35e3049f3bc48cb1ff8d70262dd7">Avec::is_first_symbol_char</a></div><div class="ttdeci">static bool is_first_symbol_char(Unicode uni)</div><div class="ttdoc">Return true iff av is a valid char in a user defined symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8cc_source.html#l00322">Avec.cc:322</a></div></div>
<div class="ttc" id="classUCS__string_html"><div class="ttname"><a href="classUCS__string.html">UCS_string</a></div><div class="ttdoc">A string of Unicode characters (32-bit) </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00047">UCS_string.hh:47</a></div></div>
<div class="ttc" id="classLibPaths_html_ac148131bcc9dc69d298ed62b866bdcd5"><div class="ttname"><a href="classLibPaths.html#ac148131bcc9dc69d298ed62b866bdcd5">LibPaths::get_APL_lib_root</a></div><div class="ttdeci">static const char * get_APL_lib_root()</div><div class="ttdoc">return directory containing (file or directory) workspaces and wslib1 </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00087">LibPaths.hh:87</a></div></div>
<div class="ttc" id="classValue_html_a89120a742c078918d1a5d84ec742e69c"><div class="ttname"><a href="classValue.html#a89120a742c078918d1a5d84ec742e69c">Value::get_ravel</a></div><div class="ttdeci">Cell &amp; get_ravel(ShapeItem idx)</div><div class="ttdoc">return the idx&amp;#39;th element of the ravel. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00254">Value.hh:254</a></div></div>
<div class="ttc" id="classStateIndicator_html_aed5cced5e7997bb7b12d4e4cf948f165"><div class="ttname"><a href="classStateIndicator.html#aed5cced5e7997bb7b12d4e4cf948f165">StateIndicator::get_safe_execution</a></div><div class="ttdeci">int get_safe_execution() const</div><div class="ttdoc">return the number of pending âECs (or other safe execution contexts) </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00159">StateIndicator.hh:159</a></div></div>
<div class="ttc" id="classCommand_html_a4afcbbdbee3fd2f536db12651861110b"><div class="ttname"><a href="classCommand.html#a4afcbbdbee3fd2f536db12651861110b">Command::cmd_OUT</a></div><div class="ttdeci">static void cmd_OUT(ostream &amp;out, UCS_string_vector &amp;args)</div><div class="ttdoc">)OUT: export a workspace file </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01749">Command.cc:1749</a></div></div>
<div class="ttc" id="classCommand_html_a13b5e986bc7eae259343aca362870bba"><div class="ttname"><a href="classCommand.html#a13b5e986bc7eae259343aca362870bba">Command::check_redefinition</a></div><div class="ttdeci">static bool check_redefinition(ostream &amp;out, const UCS_string &amp;cnew, const UCS_string fnew, const int mnew)</div><div class="ttdoc">check if a command is being redefined </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01796">Command.cc:1796</a></div></div>
<div class="ttc" id="classCommand_html_a209e6b7262396300ee80f7764fc21da3"><div class="ttname"><a href="classCommand.html#a209e6b7262396300ee80f7764fc21da3">Command::cmd_BOXING</a></div><div class="ttdeci">static void cmd_BOXING(ostream &amp;out, const UCS_string &amp;arg)</div><div class="ttdoc">)BOXING command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00598">Command.cc:598</a></div></div>
<div class="ttc" id="classPerformance_html_a6b9599c8f6fab73e11fafdf634f11c21"><div class="ttname"><a href="classPerformance.html#a6b9599c8f6fab73e11fafdf634f11c21">Performance::save_data</a></div><div class="ttdeci">static void save_data(ostream &amp;out, ostream &amp;out_file)</div><div class="ttdoc">write all counters to .def file </div><div class="ttdef"><b>Definition:</b> <a href="Performance_8cc_source.html#l00238">Performance.cc:238</a></div></div>
<div class="ttc" id="structLibPaths_1_1LibDir_html_a77aa7367ac9c26968270733fae786142a47e43826fd12ef7526c76a72606582a6"><div class="ttname"><a href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a47e43826fd12ef7526c76a72606582a6">LibPaths::LibDir::CSRC_PWD</a></div><div class="ttdoc">lib root from current directory </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00067">LibPaths.hh:67</a></div></div>
<div class="ttc" id="classUCS__string_html_ae748097bb3a84f52c658900006587e5b"><div class="ttname"><a href="classUCS__string.html#ae748097bb3a84f52c658900006587e5b">UCS_string::lexical_before</a></div><div class="ttdeci">bool lexical_before(const UCS_string other) const</div><div class="ttdoc">case-sensitive comparison: return true iff this comes before other </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l01160">UCS_string.cc:1160</a></div></div>
<div class="ttc" id="classIndexExpr_html_af6ce132f19fe86699668a8cd523ffd01"><div class="ttname"><a href="classIndexExpr.html#af6ce132f19fe86699668a8cd523ffd01">IndexExpr::erase_stale</a></div><div class="ttdeci">static void erase_stale(const char *loc)</div><div class="ttdoc">erase stale IndexExprs </div><div class="ttdef"><b>Definition:</b> <a href="IndexExpr_8cc_source.html#l00156">IndexExpr.cc:156</a></div></div>
<div class="ttc" id="structLibPaths_1_1LibDir_html_a77aa7367ac9c26968270733fae786142aa109b248c869e933b6f6176c5ab5502b"><div class="ttname"><a href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142aa109b248c869e933b6f6176c5ab5502b">LibPaths::LibDir::CSRC_NONE</a></div><div class="ttdoc">not at all </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00065">LibPaths.hh:65</a></div></div>
<div class="ttc" id="classError_html_a73c1f4ab40f4e313f504562d52bb001e"><div class="ttname"><a href="classError.html#a73c1f4ab40f4e313f504562d52bb001e">Error::get_error_code</a></div><div class="ttdeci">const ErrorCode get_error_code() const</div><div class="ttdoc">return the error code of this error </div><div class="ttdef"><b>Definition:</b> <a href="Error_8hh_source.html#l00058">Error.hh:58</a></div></div>
<div class="ttc" id="structLibPaths_1_1LibDir_html_a77aa7367ac9c26968270733fae786142a676f791b1236dfc1128ee67981e3fab1"><div class="ttname"><a href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a676f791b1236dfc1128ee67981e3fab1">LibPaths::LibDir::CSRC_ENV</a></div><div class="ttdoc">lib root from env. variable APL_LIB_ROOT </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00066">LibPaths.hh:66</a></div></div>
<div class="ttc" id="classToken__string_html"><div class="ttname"><a href="classToken__string.html">Token_string</a></div><div class="ttdoc">A sequence of Token. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00316">Token.hh:316</a></div></div>
<div class="ttc" id="classUTF8__string_html_ae512c0617f7a13fe5011655d898ca6c1"><div class="ttname"><a href="classUTF8__string.html#ae512c0617f7a13fe5011655d898ca6c1">UTF8_string::append_UTF8</a></div><div class="ttdeci">void append_UTF8(const UTF8_string &amp;suffix)</div><div class="ttdoc">append the UTF8_string suffix </div><div class="ttdef"><b>Definition:</b> <a href="UTF8__string_8hh_source.html#l00105">UTF8_string.hh:105</a></div></div>
<div class="ttc" id="classCommand_html_a7d3c3284d54674356d89f268949109c6"><div class="ttname"><a href="classCommand.html#a7d3c3284d54674356d89f268949109c6">Command::cmd_LIB2</a></div><div class="ttdeci">static void cmd_LIB2(ostream &amp;out, const UCS_string_vector &amp;args)</div><div class="ttdoc">list content of workspace and wslib directories: ]LIB [N] </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01665">Command.cc:1665</a></div></div>
<div class="ttc" id="classCommand_html_a925cc5f77af57e1705b8c96a522e6a55"><div class="ttname"><a href="classCommand.html#a925cc5f77af57e1705b8c96a522e6a55">Command::cmd_HELP</a></div><div class="ttdeci">static void cmd_HELP(ostream &amp;out, const UCS_string &amp;arg)</div><div class="ttdoc">show list of commands </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01025">Command.cc:1025</a></div></div>
<div class="ttc" id="classFunction_html_adbd055c988c2284dc98bdfacea3268aa"><div class="ttname"><a href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">Function::get_ufun1</a></div><div class="ttdeci">virtual UserFunction * get_ufun1()</div><div class="ttdoc">return a pointer to this UserFunction (if it is one) </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00138">Function.hh:138</a></div></div>
<div class="ttc" id="classDoxy_html_ab1c9ced7c6526de696e9bf105745b408"><div class="ttname"><a href="classDoxy.html#ab1c9ced7c6526de696e9bf105745b408">Doxy::get_root_dir</a></div><div class="ttdeci">const UTF8_string &amp; get_root_dir() const</div><div class="ttdoc">return the directory into which all documenattion files will be written </div><div class="ttdef"><b>Definition:</b> <a href="Doxy_8hh_source.html#l00102">Doxy.hh:102</a></div></div>
<div class="ttc" id="classWorkspace_html_ae10c8a897ceb5a9f4a161cdfa2e33b3b"><div class="ttname"><a href="classWorkspace.html#ae10c8a897ceb5a9f4a161cdfa2e33b3b">Workspace::push_Command</a></div><div class="ttdeci">static void push_Command(const UCS_string &amp;command)</div><div class="ttdoc">push a command. This is done when âCommand is performed and the command would push the SI stack (i...</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00284">Workspace.hh:284</a></div></div>
<div class="ttc" id="classTokenizer_html"><div class="ttname"><a href="classTokenizer.html">Tokenizer</a></div><div class="ttdoc">The converter from APL input characters to APL tokens. </div><div class="ttdef"><b>Definition:</b> <a href="Tokenizer_8hh_source.html#l00095">Tokenizer.hh:95</a></div></div>
<div class="ttc" id="classCommand_html_a1e93c9bde851ee11f10b840c5cf72821"><div class="ttname"><a href="classCommand.html#a1e93c9bde851ee11f10b840c5cf72821">Command::cmd_HISTORY</a></div><div class="ttdeci">static void cmd_HISTORY(ostream &amp;out, const UCS_string &amp;arg)</div><div class="ttdoc">show or clear input history </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01209">Command.cc:1209</a></div></div>
<div class="ttc" id="classLibPaths_html_a12cc7234d6e91efb271bef954b95806f"><div class="ttname"><a href="classLibPaths.html#a12cc7234d6e91efb271bef954b95806f">LibPaths::set_APL_lib_root</a></div><div class="ttdeci">static void set_APL_lib_root(const char *new_root)</div><div class="ttdoc">set library root to new_root </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8cc_source.html#l00205">LibPaths.cc:205</a></div></div>
<div class="ttc" id="classWorkspace_html_acb39e0420fcef7558220b9576b809e97"><div class="ttname"><a href="classWorkspace.html#acb39e0420fcef7558220b9576b809e97">Workspace::get_quad</a></div><div class="ttdeci">static Token get_quad(const UCS_string &amp;ucs, int &amp;len)</div><div class="ttdoc">return a token for system function or variable ucs </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00324">Workspace.cc:324</a></div></div>
<div class="ttc" id="classIO__Files_html_ac7a14dfc38263d79ac39142ac269dfe0"><div class="ttname"><a href="classIO__Files.html#ac7a14dfc38263d79ac39142ac269dfe0">IO_Files::apl_error</a></div><div class="ttdeci">static void apl_error(const char *loc)</div><div class="ttdoc">count an APL error </div><div class="ttdef"><b>Definition:</b> <a href="IO__Files_8cc_source.html#l00418">IO_Files.cc:418</a></div></div>
<div class="ttc" id="structCommand_1_1val__val_html"><div class="ttname"><a href="structCommand_1_1val__val.html">Command::val_val</a></div><div class="ttdoc">a helper for finding sub-values with two parents </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00092">Command.hh:92</a></div></div>
<div class="ttc" id="classCommand_html_ae2c14c874844701377a0e716021229c7"><div class="ttname"><a href="classCommand.html#ae2c14c874844701377a0e716021229c7">Command::cmd_LIB1</a></div><div class="ttdeci">static void cmd_LIB1(ostream &amp;out, const UCS_string_vector &amp;args)</div><div class="ttdoc">list content of workspace and wslib directories: )LIB [N] </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01652">Command.cc:1652</a></div></div>
<div class="ttc" id="classCommand_html_a429d0c585e845bf29a504a24889cb761"><div class="ttname"><a href="classCommand.html#a429d0c585e845bf29a504a24889cb761">Command::parse_from_to</a></div><div class="ttdeci">static bool parse_from_to(UCS_string &amp;from, UCS_string &amp;to, const UCS_string &amp;user_input)</div><div class="ttdoc">parse user-suplied argument (of )VARS, )OPS, or )NMS commands) into strings from and to ...</div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02447">Command.cc:2447</a></div></div>
<div class="ttc" id="classUCS__string_html_ad14d08312e34ad5d733360eccf9a745a"><div class="ttname"><a href="classUCS__string.html#ad14d08312e34ad5d733360eccf9a745a">UCS_string::append_ASCII</a></div><div class="ttdeci">void append_ASCII(const char *ascii)</div><div class="ttdoc">append 0-terminated ASCII string str to this string. str is NOT interpreted as UTF8 string (use appen...</div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00260">UCS_string.hh:260</a></div></div>
<div class="ttc" id="classCommand_html_a942f9d187d7dcb5b05c8b57eac6552a7"><div class="ttname"><a href="classCommand.html#a942f9d187d7dcb5b05c8b57eac6552a7">Command::cmd_MORE</a></div><div class="ttdeci">static void cmd_MORE(ostream &amp;out)</div><div class="ttdoc">print more error info </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01703">Command.cc:1703</a></div></div>
<div class="ttc" id="structYMDhmsu_html_a15ce9aa4f046b202fe8ca83c3ebb10e2"><div class="ttname"><a href="structYMDhmsu.html#a15ce9aa4f046b202fe8ca83c3ebb10e2">YMDhmsu::hour</a></div><div class="ttdeci">int hour</div><div class="ttdoc">hour 0-23 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00334">Common.hh:334</a></div></div>
<div class="ttc" id="classQuad__WA_html_af6d9143e603553fdbb6ac5040d498cc3"><div class="ttname"><a href="classQuad__WA.html#af6d9143e603553fdbb6ac5040d498cc3">Quad_WA::initial_rlimit</a></div><div class="ttdeci">static rlim_t initial_rlimit</div><div class="ttdoc">the memory limit at startup </div><div class="ttdef"><b>Definition:</b> <a href="Quad__WA_8hh_source.html#l00050">Quad_WA.hh:50</a></div></div>
<div class="ttc" id="classStatementList_html_a20b0b6ca4bd952856e75bdecc7fc110a"><div class="ttname"><a href="classStatementList.html#a20b0b6ca4bd952856e75bdecc7fc110a">StatementList::fix</a></div><div class="ttdeci">static StatementList * fix(const UCS_string &amp;data, const char *loc)</div><div class="ttdoc">compute body token from text data </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8cc_source.html#l00926">Executable.cc:926</a></div></div>
<div class="ttc" id="classStateIndicator_html_ab5a1edc34e723251bd11b4767d7c49b2"><div class="ttname"><a href="classStateIndicator.html#ab5a1edc34e723251bd11b4767d7c49b2">StateIndicator::get_error</a></div><div class="ttdeci">static Error &amp; get_error(StateIndicator *si)</div><div class="ttdoc">return the error related info in this context </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00127">StateIndicator.hh:127</a></div></div>
<div class="ttc" id="structYMDhmsu_html_a022fc0c042636b59fb0fe3c7a0428417"><div class="ttname"><a href="structYMDhmsu.html#a022fc0c042636b59fb0fe3c7a0428417">YMDhmsu::minute</a></div><div class="ttdeci">int minute</div><div class="ttdoc">minute 0-59 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00335">Common.hh:335</a></div></div>
<div class="ttc" id="classCommand_html_ade7fa861e534f953d5439040e78fe433"><div class="ttname"><a href="classCommand.html#ade7fa861e534f953d5439040e78fe433">Command::cmd_LIBS</a></div><div class="ttdeci">static void cmd_LIBS(ostream &amp;out, const UCS_string_vector &amp;lib_ref)</div><div class="ttdoc">list paths of workspace and wslib directories </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01336">Command.cc:1336</a></div></div>
<div class="ttc" id="classDynamicObject_html_a8898a428fcd929eb8ec256d98620a7ff"><div class="ttname"><a href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a></div><div class="ttdeci">static const DynamicObject * get_all_values()</div><div class="ttdoc">return a pointer to all allocated Values </div><div class="ttdef"><b>Definition:</b> <a href="DynamicObject_8hh_source.html#l00116">DynamicObject.hh:116</a></div></div>
<div class="ttc" id="classAvec_html_af6b90a707281ad128da1764d92d85cd7"><div class="ttname"><a href="classAvec.html#af6b90a707281ad128da1764d92d85cd7">Avec::is_digit</a></div><div class="ttdeci">static bool is_digit(Unicode uni)</div><div class="ttdoc">Return true iff av is a digit (i.e. 0 â¤ av â¤ 9) </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8hh_source.html#l00102">Avec.hh:102</a></div></div>
<div class="ttc" id="classCommand_html_a44d50f4ab683653103d3adad9d767826"><div class="ttname"><a href="classCommand.html#a44d50f4ab683653103d3adad9d767826">Command::cmd_XTERM</a></div><div class="ttdeci">static void cmd_XTERM(ostream &amp;out, const UCS_string &amp;args)</div><div class="ttdoc">enable and disable colors </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00559">Command.cc:559</a></div></div>
<div class="ttc" id="classValueStackItem_html"><div class="ttname"><a href="classValueStackItem.html">ValueStackItem</a></div><div class="ttdoc">One entry in the value stack of a Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00041">Symbol.hh:41</a></div></div>
<div class="ttc" id="classUCS__string_html_a07e8673ec73ad31228be88053aeff1b1"><div class="ttname"><a href="classUCS__string.html#a07e8673ec73ad31228be88053aeff1b1">UCS_string::remove_leading_whitespaces</a></div><div class="ttdeci">void remove_leading_whitespaces()</div><div class="ttdoc">remove leading blanks, tabs, etc </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00491">UCS_string.cc:491</a></div></div>
<div class="ttc" id="classDoxy_html_ad8abe2e8a1b686a7b35e582c369d41ae"><div class="ttname"><a href="classDoxy.html#ad8abe2e8a1b686a7b35e582c369d41ae">Doxy::gen</a></div><div class="ttdeci">void gen()</div><div class="ttdoc">generate the entire documentation </div><div class="ttdef"><b>Definition:</b> <a href="Doxy_8cc_source.html#l00123">Doxy.cc:123</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_afee6856208966168d158de45145dd4ca"><div class="ttname"><a href="structCommand_1_1transfer__context.html#afee6856208966168d158de45145dd4ca">Command::transfer_context::function_2TF</a></div><div class="ttdeci">void function_2TF(const UCS_string_vector &amp;objects) const</div><div class="ttdoc">process an &amp;#39;F&amp;#39; (function in 2 âTF format) item. </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02379">Command.cc:2379</a></div></div>
<div class="ttc" id="structCommand_1_1val__val_html_abb89126c909576cce79b1df821334ced"><div class="ttname"><a href="structCommand_1_1val__val.html#abb89126c909576cce79b1df821334ced">Command::val_val::compare_val_val</a></div><div class="ttdeci">static bool compare_val_val(const val_val &amp;A, const val_val &amp;B, const void *)</div><div class="ttdoc">compare function for Heapsort::sort() </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00636">Command.cc:636</a></div></div>
<div class="ttc" id="classStateIndicator_html_a192beb8b85f88094f6ec841821166939"><div class="ttname"><a href="classStateIndicator.html#a192beb8b85f88094f6ec841821166939">StateIndicator::get_prefix</a></div><div class="ttdeci">Prefix &amp; get_prefix()</div><div class="ttdoc">get the current prefix parser </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00177">StateIndicator.hh:177</a></div></div>
<div class="ttc" id="classSymbol_html_a696eb14234b5cc83a5eab198a867a594"><div class="ttname"><a href="classSymbol.html#a696eb14234b5cc83a5eab198a867a594">Symbol::get_value</a></div><div class="ttdeci">virtual Value_P get_value()</div><div class="ttdoc">overloaded NamedObject::get_value() </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00487">Symbol.cc:487</a></div></div>
<div class="ttc" id="classFloatCell_html"><div class="ttname"><a href="classFloatCell.html">FloatCell</a></div><div class="ttdoc">A Cell containing a single floating point (or rational) value. </div><div class="ttdef"><b>Definition:</b> <a href="FloatCell_8hh_source.html#l00039">FloatCell.hh:39</a></div></div>
<div class="ttc" id="classCommand_html_a27d91074be8c72a8876a0d557ceb5333"><div class="ttname"><a href="classCommand.html#a27d91074be8c72a8876a0d557ceb5333">Command::cmd_KEYB</a></div><div class="ttdeci">static void cmd_KEYB(ostream &amp;out)</div><div class="ttdoc">show US keyboard layout </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00886">Command.cc:886</a></div></div>
<div class="ttc" id="classCommand_html_ad5c9241b1bb935841fe3c0d81546b7b3"><div class="ttname"><a href="classCommand.html#ad5c9241b1bb935841fe3c0d81546b7b3">Command::process_line</a></div><div class="ttdeci">static void process_line()</div><div class="ttdoc">process a single line entered by the user (in immediate execution mode) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00060">Command.cc:60</a></div></div>
<div class="ttc" id="classCharCell_html"><div class="ttname"><a href="classCharCell.html">CharCell</a></div><div class="ttdoc">A Cell containing a single Unicode character. </div><div class="ttdef"><b>Definition:</b> <a href="CharCell_8hh_source.html#l00031">CharCell.hh:31</a></div></div>
<div class="ttc" id="structUserPreferences_html_a1886c0f2e46fdae283b915a20f40312d"><div class="ttname"><a href="structUserPreferences.html#a1886c0f2e46fdae283b915a20f40312d">UserPreferences::safe_mode</a></div><div class="ttdeci">bool safe_mode</div><div class="ttdoc">true if âsafe command line option was given </div><div class="ttdef"><b>Definition:</b> <a href="UserPreferences_8hh_source.html#l00200">UserPreferences.hh:200</a></div></div>
<div class="ttc" id="classExecutable_html_a5085ae774705082dc077ed81863a8469"><div class="ttname"><a href="classExecutable.html#a5085ae774705082dc077ed81863a8469">Executable::get_body</a></div><div class="ttdeci">const Token_string &amp; get_body() const</div><div class="ttdoc">return the body of this executable </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00103">Executable.hh:103</a></div></div>
<div class="ttc" id="classCommand_html_ac70a0a220bae16cdb98b389f4872c85d"><div class="ttname"><a href="classCommand.html#ac70a0a220bae16cdb98b389f4872c85d">Command::log_control</a></div><div class="ttdeci">static void log_control(const UCS_string &amp;args)</div><div class="ttdoc">parse the argument of the ]LOG command and set logging accordingly </div></div>
<div class="ttc" id="classUCS__string_html_a9a80a1621c030d847983275d62902411"><div class="ttname"><a href="classUCS__string.html#a9a80a1621c030d847983275d62902411">UCS_string::compare</a></div><div class="ttdeci">Comp_result compare(const UCS_string &amp;other) const</div><div class="ttdoc">compare this with UCS_string other </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00307">UCS_string.hh:307</a></div></div>
<div class="ttc" id="classWorkspace_html_ad59928bcb6527147b5c5ca3e34106fe3"><div class="ttname"><a href="classWorkspace.html#ad59928bcb6527147b5c5ca3e34106fe3">Workspace::lookup_existing_symbol</a></div><div class="ttdeci">static Symbol * lookup_existing_symbol(const UCS_string &amp;symbol_name)</div><div class="ttdoc">lookup an existing symbol (user defined or âxx). </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00306">Workspace.cc:306</a></div></div>
<div class="ttc" id="classUCS__string__vector_html_affd2be085b10c39ad48659a884cf2ab1"><div class="ttname"><a href="classUCS__string__vector.html#affd2be085b10c39ad48659a884cf2ab1">UCS_string_vector::compute_column_width</a></div><div class="ttdeci">void compute_column_width(int tab_size, std::vector&lt; int &gt; &amp;result)</div><div class="ttdoc">compute columns widths so that items align nicely </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string__vector_8cc_source.html#l00115">UCS_string_vector.cc:115</a></div></div>
<div class="ttc" id="classCommand_html_ad61e749290966d00856ce1dd4f6abe42"><div class="ttname"><a href="classCommand.html#ad61e749290966d00856ce1dd4f6abe42">Command::cmd_CONTINUE</a></div><div class="ttdeci">static void cmd_CONTINUE(ostream &amp;out)</div><div class="ttdoc">)SAVE active WS as CONTINUE and )OFF </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00751">Command.cc:751</a></div></div>
<div class="ttc" id="structCommand_1_1val__val_html_a6b0a1eb1b530fcc312eb9e07f2c3abb0"><div class="ttname"><a href="structCommand_1_1val__val.html#a6b0a1eb1b530fcc312eb9e07f2c3abb0">Command::val_val::child</a></div><div class="ttdeci">const Value * child</div><div class="ttdoc">the value (always valid) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00098">Command.hh:98</a></div></div>
<div class="ttc" id="classWorkspace_html_a7ebb52057f806a09742a97d2befacdf7"><div class="ttname"><a href="classWorkspace.html#a7ebb52057f806a09742a97d2befacdf7">Workspace::get_error</a></div><div class="ttdeci">static Error * get_error()</div><div class="ttdoc">return information in SI_top() </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00134">Workspace.hh:134</a></div></div>
<div class="ttc" id="classWorkspace_html_a8a4f1d898d523818dbd9d7efa6f2cf92"><div class="ttname"><a href="classWorkspace.html#a8a4f1d898d523818dbd9d7efa6f2cf92">Workspace::save_WS</a></div><div class="ttdeci">static void save_WS(ostream &amp;out, LibRef lib, const UCS_string &amp;wsname, bool name_from_WSID)</div><div class="ttdoc">save this workspace </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00610">Workspace.cc:610</a></div></div>
<div class="ttc" id="classStateIndicator_html"><div class="ttname"><a href="classStateIndicator.html">StateIndicator</a></div><div class="ttdoc">One entry of the state indicator (SI) of the APL interpreter. </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00040">StateIndicator.hh:40</a></div></div>
<div class="ttc" id="classUCS__string_html_a0caf2e53ce43a721d5207fbf174956c1"><div class="ttname"><a href="classUCS__string.html#a0caf2e53ce43a721d5207fbf174956c1">UCS_string::atoi</a></div><div class="ttdeci">int atoi() const</div><div class="ttdoc">return integer value for a string starting with optional whitespaces, followed by digits...</div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l01082">UCS_string.cc:1082</a></div></div>
<div class="ttc" id="classWorkspace_html_a77c7b25908cf2479dc087cc3bcf44dcb"><div class="ttname"><a href="classWorkspace.html#a77c7b25908cf2479dc087cc3bcf44dcb">Workspace::load_WS</a></div><div class="ttdeci">static void load_WS(ostream &amp;out, LibRef lib, const UCS_string &amp;wsname, UCS_string &amp;quad_lx, bool silent)</div><div class="ttdoc">load lib_ws into the_workspace, maybe set âLX of the new WS. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00942">Workspace.cc:942</a></div></div>
<div class="ttc" id="classWorkspace_html_ae7c0cc7419eedbf2c519dc1c202b901b"><div class="ttname"><a href="classWorkspace.html#ae7c0cc7419eedbf2c519dc1c202b901b">Workspace::get_prompt</a></div><div class="ttdeci">static const UCS_string &amp; get_prompt()</div><div class="ttdoc">return the APL prompt </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00162">Workspace.hh:162</a></div></div>
<div class="ttc" id="classDoxy_html"><div class="ttname"><a href="classDoxy.html">Doxy</a></div><div class="ttdoc">implementation of the ]Doxy command. </div><div class="ttdef"><b>Definition:</b> <a href="Doxy_8hh_source.html#l00077">Doxy.hh:77</a></div></div>
<div class="ttc" id="classError_html_a780179b6629a91e2aff82f6165e6d4bd"><div class="ttname"><a href="classError.html#a780179b6629a91e2aff82f6165e6d4bd">Error::get_error_line_2</a></div><div class="ttdeci">const char * get_error_line_2() const</div><div class="ttdoc">return error_message_2. This is the second of 3 error lines. It contains the failed statement and is ...</div><div class="ttdef"><b>Definition:</b> <a href="Error_8hh_source.html#l00073">Error.hh:73</a></div></div>
<div class="ttc" id="classNativeFunction_html_aa3c7c980f71b2b498067dd31b969b4f0"><div class="ttname"><a href="classNativeFunction.html#aa3c7c980f71b2b498067dd31b969b4f0">NativeFunction::is_valid</a></div><div class="ttdeci">bool is_valid() const</div><div class="ttdoc">return true if the .so library was successfully loaded </div><div class="ttdef"><b>Definition:</b> <a href="NativeFunction_8hh_source.html#l00043">NativeFunction.hh:43</a></div></div>
<div class="ttc" id="classWorkspace_html_a24d1064a95b346bac85d5b2423c7148c"><div class="ttname"><a href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a></div><div class="ttdeci">static vector&lt; Command::user_command &gt; &amp; get_user_commands()</div><div class="ttdoc">Return all user-defined commands. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00174">Workspace.hh:174</a></div></div>
<div class="ttc" id="classUCS__string__vector_html_a4c548acafd0c03ebbe43ad8643dc07d0"><div class="ttname"><a href="classUCS__string__vector.html#a4c548acafd0c03ebbe43ad8643dc07d0">UCS_string_vector::sort</a></div><div class="ttdeci">void sort()</div><div class="ttdoc">sort strings </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string__vector_8hh_source.html#l00047">UCS_string_vector.hh:47</a></div></div>
<div class="ttc" id="classCommand_html_aa6a83dd9577fb9c0f12ed3562baa9ead"><div class="ttname"><a href="classCommand.html#aa6a83dd9577fb9c0f12ed3562baa9ead">Command::APL_expression_count</a></div><div class="ttdeci">static ShapeItem APL_expression_count</div><div class="ttdoc">the number of APL expressions entered in immediate execution mode </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00284">Command.hh:284</a></div></div>
<div class="ttc" id="classError_html_a782d3b90b8d5e00842b9aa46b510de77"><div class="ttname"><a href="classError.html#a782d3b90b8d5e00842b9aa46b510de77">Error::get_error_line_3</a></div><div class="ttdeci">UCS_string get_error_line_3() const</div><div class="ttdoc">compute the caret line. This is the third of the 3 error lines. It contains the failure position the ...</div><div class="ttdef"><b>Definition:</b> <a href="Error_8cc_source.html#l00145">Error.cc:145</a></div></div>
<div class="ttc" id="classStateIndicator_html_abe48451c67c413334c2f9b1bb43014aa"><div class="ttname"><a href="classStateIndicator.html#abe48451c67c413334c2f9b1bb43014aa">StateIndicator::goon</a></div><div class="ttdeci">void goon(Function_Line N, const char *loc)</div><div class="ttdoc">continue this StateIndicator (to line N after âN back into it) </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8cc_source.html#l00069">StateIndicator.cc:69</a></div></div>
<div class="ttc" id="classLibPaths_html_a4316cbd8878626733273cb0db73cfd82"><div class="ttname"><a href="classLibPaths.html#a4316cbd8878626733273cb0db73cfd82">LibPaths::get_lib_dir</a></div><div class="ttdeci">static UTF8_string get_lib_dir(LibRef lib)</div><div class="ttdoc">return library path (from config file or from libroot) </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8cc_source.html#l00218">LibPaths.cc:218</a></div></div>
<div class="ttc" id="classStateIndicator_html_a2d4915de712ba06900582f0918f053a8"><div class="ttname"><a href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">StateIndicator::get_parent</a></div><div class="ttdeci">StateIndicator * get_parent() const</div><div class="ttdoc">return the SI that has called this one </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00185">StateIndicator.hh:185</a></div></div>
<div class="ttc" id="classUCS__string_html_a186a76c22c3ac840f1e607ba49e253a0"><div class="ttname"><a href="classUCS__string.html#a186a76c22c3ac840f1e607ba49e253a0">UCS_string::back</a></div><div class="ttdeci">Unicode back() const</div><div class="ttdoc">return the last character in this string </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00126">UCS_string.hh:126</a></div></div>
<div class="ttc" id="classNativeFunction_html_a6bb00ef4d40c68c149352a3b793deda8"><div class="ttname"><a href="classNativeFunction.html#a6bb00ef4d40c68c149352a3b793deda8">NativeFunction::get_so_path</a></div><div class="ttdeci">const UCS_string &amp; get_so_path() const</div><div class="ttdoc">return the name of the .so library that implements this function </div><div class="ttdef"><b>Definition:</b> <a href="NativeFunction_8hh_source.html#l00039">NativeFunction.hh:39</a></div></div>
<div class="ttc" id="classCommand_html_a39c11577c5e25765fbf5c848607a915a"><div class="ttname"><a href="classCommand.html#a39c11577c5e25765fbf5c848607a915a">Command::resolve_lib_wsname</a></div><div class="ttdeci">static bool resolve_lib_wsname(ostream &amp;out, const UCS_string_vector &amp;args, LibRef &amp;lib, UCS_string &amp;wsname)</div><div class="ttdoc">resolve an optional lib followed by a WS name </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01861">Command.cc:1861</a></div></div>
<div class="ttc" id="structUserPreferences_html_ac86f3d6c74cc87a5f06c41f01b3dba6d"><div class="ttname"><a href="structUserPreferences.html#ac86f3d6c74cc87a5f06c41f01b3dba6d">UserPreferences::session_start</a></div><div class="ttdeci">timeval session_start</div><div class="ttdoc">when apl was started </div><div class="ttdef"><b>Definition:</b> <a href="UserPreferences_8hh_source.html#l00147">UserPreferences.hh:147</a></div></div>
<div class="ttc" id="classValueStackItem_html_aa7df380849cb4bb49c76a5c79acd0b01"><div class="ttname"><a href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">ValueStackItem::name_class</a></div><div class="ttdeci">NameClass name_class</div><div class="ttdoc">the (current) name class (like âNC, unless shared variable) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00086">Symbol.hh:86</a></div></div>
<div class="ttc" id="classDynamicObject_html"><div class="ttname"><a href="classDynamicObject.html">DynamicObject</a></div><div class="ttdoc">A Value or an IndexExpr. </div><div class="ttdef"><b>Definition:</b> <a href="DynamicObject_8hh_source.html#l00041">DynamicObject.hh:41</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a692d84840f69d40df03843f0d7589017"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a692d84840f69d40df03843f0d7589017">Command::transfer_context::numeric_1TF</a></div><div class="ttdeci">void numeric_1TF(const UCS_string_vector &amp;objects) const</div><div class="ttdoc">process an &amp;#39;N&amp;#39; (numeric in 1 âTF format) item. </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02232">Command.cc:2232</a></div></div>
<div class="ttc" id="classUCS__string_html_a59758db55104daa7d4d72933412f86e3"><div class="ttname"><a href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">UCS_string::starts_iwith</a></div><div class="ttdeci">bool starts_iwith(const char *prefix) const</div><div class="ttdoc">return true if this starts with prefix (ASCII, case insensitive). </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00607">UCS_string.cc:607</a></div></div>
<div class="ttc" id="structYMDhmsu_html_aa7f7fe940f6298a35301645a4fbb0aa8"><div class="ttname"><a href="structYMDhmsu.html#aa7f7fe940f6298a35301645a4fbb0aa8">YMDhmsu::day</a></div><div class="ttdeci">int day</div><div class="ttdoc">day 1-31 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00333">Common.hh:333</a></div></div>
<div class="ttc" id="classQuad__EC_html_a44e3cc95f4d9c98ced01bf1810c32208"><div class="ttname"><a href="classQuad__EC.html#a44e3cc95f4d9c98ced01bf1810c32208">Quad_EC::eoc</a></div><div class="ttdeci">static void eoc(Token &amp;token)</div><div class="ttdoc">end of context handler for âEC </div><div class="ttdef"><b>Definition:</b> <a href="QuadFunction_8cc_source.html#l00341">QuadFunction.cc:341</a></div></div>
<div class="ttc" id="classHeapsort_html_a9b74961df9e87b6a9888924a6a1e2d85"><div class="ttname"><a href="classHeapsort.html#a9b74961df9e87b6a9888924a6a1e2d85">Heapsort::sort</a></div><div class="ttdeci">static void sort(T *a, int64_t heapsize, const void *comp_arg, greater_fun gf)</div><div class="ttdoc">sort a according to gf </div><div class="ttdef"><b>Definition:</b> <a href="Heapsort_8hh_source.html#l00040">Heapsort.hh:40</a></div></div>
<div class="ttc" id="classValue__P__Base_html_a64e77a99509cdb6ecbe4cf273a2e7694"><div class="ttname"><a href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">Value_P_Base::get</a></div><div class="ttdeci">const Value * get() const</div><div class="ttdoc">return a const pointer to the Value </div><div class="ttdef"><b>Definition:</b> <a href="Value__P_8hh_source.html#l00076">Value_P.hh:76</a></div></div>
<div class="ttc" id="classInputMux_html_a8a79cbe5207cde162fb36133ad9defdd"><div class="ttname"><a href="classInputMux.html#a8a79cbe5207cde162fb36133ad9defdd">InputMux::get_line</a></div><div class="ttdeci">static void get_line(LineInputMode mode, const UCS_string &amp;prompt, UCS_string &amp;line, bool &amp;eof, LineHistory &amp;hist)</div><div class="ttdoc">get one line </div><div class="ttdef"><b>Definition:</b> <a href="LineInput_8cc_source.html#l00654">LineInput.cc:654</a></div></div>
<div class="ttc" id="classFunction_html_ac69b8cfa3ac1577ef8cf98500002e6ef"><div class="ttname"><a href="classFunction.html#ac69b8cfa3ac1577ef8cf98500002e6ef">Function::get_oper_valence</a></div><div class="ttdeci">virtual int get_oper_valence() const</div><div class="ttdoc">return the number of function arguments (1 or 2) of an operator. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00100">Function.hh:100</a></div></div>
<div class="ttc" id="classLibPaths_html_a0da8dd5e9a90282d75239ec86ebb15d4"><div class="ttname"><a href="classLibPaths.html#a0da8dd5e9a90282d75239ec86ebb15d4">LibPaths::get_lib_filename</a></div><div class="ttdeci">static UTF8_string get_lib_filename(LibRef lib, const UTF8_string &amp;name, bool existing, const char *ext1, const char *ext2)</div><div class="ttdoc">return full path for file name, possibly adding .ext1 or .ext2 </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8cc_source.html#l00267">LibPaths.cc:267</a></div></div>
<div class="ttc" id="classUCS__string_html_afd4c5d6cd5482ce0979527de1f3699b5"><div class="ttname"><a href="classUCS__string.html#afd4c5d6cd5482ce0979527de1f3699b5">UCS_string::do_escape</a></div><div class="ttdeci">UCS_string do_escape(bool double_quoted) const</div><div class="ttdoc">the inverse of un_escape(). </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00990">UCS_string.cc:990</a></div></div>
<div class="ttc" id="classLibPaths_html_a38284f405676e112eda549c3114343d1"><div class="ttname"><a href="classLibPaths.html#a38284f405676e112eda549c3114343d1">LibPaths::get_cfg_src</a></div><div class="ttdeci">static LibDir::CfgSrc get_cfg_src(LibRef lib)</div><div class="ttdoc">return source that configured this entry </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00102">LibPaths.hh:102</a></div></div>
<div class="ttc" id="classUCS__string_html_a0484e41b5bfb14e6ec82c5fd7217df56"><div class="ttname"><a href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">UCS_string::append</a></div><div class="ttdeci">void append(const UCS_string &amp;other)</div><div class="ttdoc">append UCS_string other to this string </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00255">UCS_string.hh:255</a></div></div>
<div class="ttc" id="classCommand_html_a0b7131627e1a36bee1370e5a7572063f"><div class="ttname"><a href="classCommand.html#a0b7131627e1a36bee1370e5a7572063f">Command::cmd_PSTAT</a></div><div class="ttdeci">static void cmd_PSTAT(ostream &amp;out, const UCS_string &amp;arg)</div><div class="ttdoc">show performance counters </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00932">Command.cc:932</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a4e80a2899a02285ba89e58792e6150ea"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a4e80a2899a02285ba89e58792e6150ea">Command::transfer_context::array_2TF</a></div><div class="ttdeci">void array_2TF(const UCS_string_vector &amp;objects) const</div><div class="ttdoc">process a &amp;#39;A&amp;#39; (array in 2 âTF format) item. </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02348">Command.cc:2348</a></div></div>
<div class="ttc" id="classWorkspace_html_a5ebd29d8c860b589b9f1d8118a949514"><div class="ttname"><a href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a></div><div class="ttdeci">static UCS_string &amp; more_error()</div><div class="ttdoc">return reference to more info about last error </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00138">Workspace.hh:138</a></div></div>
<div class="ttc" id="classCommand_html_a77793af6c04c67f89632265c4504bf74"><div class="ttname"><a href="classCommand.html#a77793af6c04c67f89632265c4504bf74">Command::is_lib_ref</a></div><div class="ttdeci">static bool is_lib_ref(const UCS_string &amp;lib)</div><div class="ttdoc">return true if lib looks like a library reference (a 1-digit number or a path containing ...</div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02508">Command.cc:2508</a></div></div>
<div class="ttc" id="classIndexExpr_html_aa16a458ef14025e0bd3af2c7d8513fcb"><div class="ttname"><a href="classIndexExpr.html#aa16a458ef14025e0bd3af2c7d8513fcb">IndexExpr::print_stale</a></div><div class="ttdeci">static int print_stale(ostream &amp;out)</div><div class="ttdoc">print stale IndexExprs, and return the number of stale IndexExprs. </div><div class="ttdef"><b>Definition:</b> <a href="IndexExpr_8cc_source.html#l00133">IndexExpr.cc:133</a></div></div>
<div class="ttc" id="classCommand_html_ae0699916c54054bb56d0dccc46d2b767"><div class="ttname"><a href="classCommand.html#ae0699916c54054bb56d0dccc46d2b767">Command::open_LIB_dir</a></div><div class="ttdeci">static DIR * open_LIB_dir(UTF8_string &amp;path, ostream &amp;out, const UCS_string_vector &amp;args)</div><div class="ttdoc">open directory arg and follow symlinks </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01405">Command.cc:1405</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a9c4651f90f36f6cc728e7146a3a4a0aa"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a9c4651f90f36f6cc728e7146a3a4a0aa">Command::transfer_context::process_record</a></div><div class="ttdeci">void process_record(const UTF8 *record, const UCS_string_vector &amp;objects)</div><div class="ttdoc">process one record of a workspace file </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02115">Command.cc:2115</a></div></div>
<div class="ttc" id="classSymbol_html_a1d1320dbabb544d3bafcc360d1ddd76e"><div class="ttname"><a href="classSymbol.html#a1d1320dbabb544d3bafcc360d1ddd76e">Symbol::get_function</a></div><div class="ttdeci">virtual const Function * get_function() const</div><div class="ttdoc">Return the current function (or throw a VALUE_ERROR) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00559">Symbol.cc:559</a></div></div>
<div class="ttc" id="classValue_html_ac5b54e3a13cab0837442f1575b3299a5"><div class="ttname"><a href="classValue.html#ac5b54e3a13cab0837442f1575b3299a5">Value::nz_element_count</a></div><div class="ttdeci">ShapeItem nz_element_count() const</div><div class="ttdoc">return the number of elements, but at least 1 (for the prototype). </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00167">Value.hh:167</a></div></div>
<div class="ttc" id="classValue__P_html"><div class="ttname"><a href="classValue__P.html">Value_P</a></div><div class="ttdoc">A Value smart * (constructors) </div><div class="ttdef"><b>Definition:</b> <a href="Value__P_8hh_source.html#l00108">Value_P.hh:108</a></div></div>
<div class="ttc" id="unionValueStackItem_1_1__sym__val_html_a315fb71a75aeb00281e49d799d38b917"><div class="ttname"><a href="unionValueStackItem_1_1__sym__val.html#a315fb71a75aeb00281e49d799d38b917">ValueStackItem::_sym_val::label</a></div><div class="ttdeci">Function_Line label</div><div class="ttdoc">if Symbol is a label </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00075">Symbol.hh:75</a></div></div>
<div class="ttc" id="classWorkspace_html_a4f16b318ce57e107a03017eb87c80983"><div class="ttname"><a href="classWorkspace.html#a4f16b318ce57e107a03017eb87c80983">Workspace::SI_top_fun</a></div><div class="ttdeci">static StateIndicator * SI_top_fun()</div><div class="ttdoc">the topmost SI with parse mode PM_FUNCTION </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00200">Workspace.cc:200</a></div></div>
<div class="ttc" id="classError_html_ac3d41db87a1c0aa40928ed6d2c12bc33"><div class="ttname"><a href="classError.html#ac3d41db87a1c0aa40928ed6d2c12bc33">Error::print</a></div><div class="ttdeci">void print(ostream &amp;out, const char *loc) const</div><div class="ttdoc">print the error and its related information </div><div class="ttdef"><b>Definition:</b> <a href="Error_8cc_source.html#l00049">Error.cc:49</a></div></div>
<div class="ttc" id="classCommand_html_aeb8671f785d828bbfac0d9b9ff46437d"><div class="ttname"><a href="classCommand.html#aeb8671f785d828bbfac0d9b9ff46437d">Command::lib_common</a></div><div class="ttdeci">static void lib_common(ostream &amp;out, const UCS_string_vector &amp;args, int variant)</div><div class="ttdoc">list library: common helper </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01486">Command.cc:1486</a></div></div>
<div class="ttc" id="classCommand_html_a11ccda9c4eea7546be450e30a029650a"><div class="ttname"><a href="classCommand.html#a11ccda9c4eea7546be450e30a029650a">Command::cmd_ERASE</a></div><div class="ttdeci">static void cmd_ERASE(ostream &amp;out, UCS_string_vector &amp;args)</div><div class="ttdoc">)ERASE: erase symbols </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00880">Command.cc:880</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a77c5f0fa4e25decf8d996cb8b69ac06a"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a77c5f0fa4e25decf8d996cb8b69ac06a">Command::transfer_context::add</a></div><div class="ttdeci">void add(const UTF8 *str, int len)</div><div class="ttdoc">add len UTF8 bytes to this transfer_context </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02421">Command.cc:2421</a></div></div>
<div class="ttc" id="classIntCell_html"><div class="ttname"><a href="classIntCell.html">IntCell</a></div><div class="ttdoc">A cell containing a single Integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IntCell_8hh_source.html#l00034">IntCell.hh:34</a></div></div>
<div class="ttc" id="classSymbol_html_a34b203a4879ba48c148f0c271cd029a2"><div class="ttname"><a href="classSymbol.html#a34b203a4879ba48c148f0c271cd029a2">Symbol::is_erased</a></div><div class="ttdeci">bool is_erased() const</div><div class="ttdoc">return true, iff this Symbol is not used (i.e. erased) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00206">Symbol.hh:206</a></div></div>
<div class="ttc" id="classCommand_html_af5d73db57801b2363c954b402f19186d"><div class="ttname"><a href="classCommand.html#af5d73db57801b2363c954b402f19186d">Command::cmd_CHECK</a></div><div class="ttdeci">static void cmd_CHECK(ostream &amp;out)</div><div class="ttdoc">check workspace integrity (stale Value and IndexExpr objects, etc) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00650">Command.cc:650</a></div></div>
<div class="ttc" id="classSymbol_html_af70e09e9ca7ec63a0fc8344a9468c70a"><div class="ttname"><a href="classSymbol.html#af70e09e9ca7ec63a0fc8344a9468c70a">Symbol::top_of_stack</a></div><div class="ttdeci">const ValueStackItem * top_of_stack() const</div><div class="ttdoc">return the top-most item on the value stack </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00241">Symbol.hh:241</a></div></div>
<div class="ttc" id="structLibPaths_1_1LibDir_html_a77aa7367ac9c26968270733fae786142adcaec822f695d295c042265bda09f52c"><div class="ttname"><a href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142adcaec822f695d295c042265bda09f52c">LibPaths::LibDir::CSRC_PREF_HOME</a></div><div class="ttdoc">path from preferences file below $HOME </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00069">LibPaths.hh:69</a></div></div>
<div class="ttc" id="classCell_html_a3af019707c56a0fb40fce2d370af8307"><div class="ttname"><a href="classCell.html#a3af019707c56a0fb40fce2d370af8307">Cell::get_pointer_value</a></div><div class="ttdeci">virtual Value_P get_pointer_value() const</div><div class="ttdoc">Return the APL value of a cell (Asserts for non-pointer cells) </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00126">Cell.hh:126</a></div></div>
<div class="ttc" id="classWorkspace_html_a15d8cb5c62016f547b9718e820c94efd"><div class="ttname"><a href="classWorkspace.html#a15d8cb5c62016f547b9718e820c94efd">Workspace::dump_WS</a></div><div class="ttdeci">static void dump_WS(ostream &amp;out, LibRef lib, const UCS_string &amp;wsname, bool html, bool silent)</div><div class="ttdoc">dump this workspace </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00798">Workspace.cc:798</a></div></div>
<div class="ttc" id="classCommand_html_af95676cbc57e2564feb00e5166d07512"><div class="ttname"><a href="classCommand.html#af95676cbc57e2564feb00e5166d07512">Command::is_directory</a></div><div class="ttdeci">static bool is_directory(dirent *entry, const UTF8_string &amp;path)</div><div class="ttdoc">return true if entry is a directory </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01469">Command.cc:1469</a></div></div>
<div class="ttc" id="classWorkspace_html_a1d227be0952fda0d4c1e9f45e60e83e0"><div class="ttname"><a href="classWorkspace.html#a1d227be0952fda0d4c1e9f45e60e83e0">Workspace::push_SI</a></div><div class="ttdeci">static void push_SI(Executable *fun, const char *loc)</div><div class="ttdoc">Create a new SI-entry on the SI stack. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00076">Workspace.cc:76</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html"><div class="ttname"><a href="structCommand_1_1transfer__context.html">Command::transfer_context</a></div><div class="ttdoc">a helper struct for the )IN command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00226">Command.hh:226</a></div></div>
<div class="ttc" id="classCommand_html_a9903751e0c1e4659a85434234b27491e"><div class="ttname"><a href="classCommand.html#a9903751e0c1e4659a85434234b27491e">Command::cmd_LOG</a></div><div class="ttdeci">static void cmd_LOG(ostream &amp;out, const UCS_string &amp;arg)</div><div class="ttdoc">control logging facilities </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01678">Command.cc:1678</a></div></div>
<div class="ttc" id="classUTF8__string_html_a75b4e440d7576c690934bc7b5f863ac6"><div class="ttname"><a href="classUTF8__string.html#a75b4e440d7576c690934bc7b5f863ac6">UTF8_string::ends_with</a></div><div class="ttdeci">bool ends_with(const char *ext) const</div><div class="ttdoc">return true iff string ends with ext (usually a file name extennsion) </div><div class="ttdef"><b>Definition:</b> <a href="UTF8__string_8cc_source.html#l00264">UTF8_string.cc:264</a></div></div>
<div class="ttc" id="classUCS__string__vector_html"><div class="ttname"><a href="classUCS__string__vector.html">UCS_string_vector</a></div><div class="ttdoc">a vector of UCS_strings. </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string__vector_8hh_source.html#l00030">UCS_string_vector.hh:30</a></div></div>
<div class="ttc" id="classFunction_html_a4d6d6e2b3c6306fbca9a537d6652daee"><div class="ttname"><a href="classFunction.html#a4d6d6e2b3c6306fbca9a537d6652daee">Function::set_creation_time</a></div><div class="ttdeci">void set_creation_time(APL_time_us t)</div><div class="ttdoc">set the time when the function was created (0 for built-in functions) </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00124">Function.hh:124</a></div></div>
<div class="ttc" id="classToken_html_a049cd3eb72ae0c6427e523d399876b86"><div class="ttname"><a href="classToken.html#a049cd3eb72ae0c6427e523d399876b86">Token::get_Class</a></div><div class="ttdeci">TokenClass get_Class() const</div><div class="ttdoc">return the TokenClass of this token. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00138">Token.hh:138</a></div></div>
<div class="ttc" id="classUCS__string_html_a52cd4088451200cd78eb2db03b44a8ac"><div class="ttname"><a href="classUCS__string.html#a52cd4088451200cd78eb2db03b44a8ac">UCS_string::erase</a></div><div class="ttdeci">void erase(ShapeItem pos)</div><div class="ttdoc">erase 1 (!) character at pos </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00374">UCS_string.hh:374</a></div></div>
<div class="ttc" id="classCommand_html_aec0c4c6efbb9df9a34220b510f58905a"><div class="ttname"><a href="classCommand.html#aec0c4c6efbb9df9a34220b510f58905a">Command::cmd_SAVE</a></div><div class="ttdeci">static void cmd_SAVE(ostream &amp;out, const UCS_string_vector &amp;args)</div><div class="ttdoc">)SAVE: save a workspace file (.xml) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01821">Command.cc:1821</a></div></div>
<div class="ttc" id="classShape_html_a017e9a35dd20f4bc4fdeb7ea29b6805d"><div class="ttname"><a href="classShape.html#a017e9a35dd20f4bc4fdeb7ea29b6805d">Shape::get_rank</a></div><div class="ttdeci">uRank get_rank() const</div><div class="ttdoc">return the rank </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8hh_source.html#l00112">Shape.hh:112</a></div></div>
<div class="ttc" id="classOutput_html_a366b2a6643a87e6c1f4d46eb01b9948f"><div class="ttname"><a href="classOutput.html#a366b2a6643a87e6c1f4d46eb01b9948f">Output::toggle_color</a></div><div class="ttdeci">static void toggle_color(const UCS_string &amp;arg)</div><div class="ttdoc">set or toggle color mode (implementation of command ]XTERM) </div><div class="ttdef"><b>Definition:</b> <a href="Output_8cc_source.html#l00381">Output.cc:381</a></div></div>
<div class="ttc" id="classQuad__TF_html_a293263bd9b2bf923dc9e4113dded832f"><div class="ttname"><a href="classQuad__TF.html#a293263bd9b2bf923dc9e4113dded832f">Quad_TF::tf2_inverse</a></div><div class="ttdeci">static UCS_string tf2_inverse(const UCS_string &amp;ravel)</div><div class="ttdoc">try inverse âTF2 of ucs, set new_var_or_fun if successful </div><div class="ttdef"><b>Definition:</b> <a href="Quad__TF_8cc_source.html#l00516">Quad_TF.cc:516</a></div></div>
<div class="ttc" id="classWorkspace_html_ad8aedac4ca9e22cc8881d07eef87dcfe"><div class="ttname"><a href="classWorkspace.html#ad8aedac4ca9e22cc8881d07eef87dcfe">Workspace::wsid</a></div><div class="ttdeci">static void wsid(ostream &amp;out, UCS_string arg, LibRef lib, bool silent)</div><div class="ttdoc">set or inquire the workspace ID </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l01048">Workspace.cc:1048</a></div></div>
<div class="ttc" id="classCommand_html_ac143785ae5217051a7ef49bcbde1893c"><div class="ttname"><a href="classCommand.html#ac143785ae5217051a7ef49bcbde1893c">Command::do_APL_command</a></div><div class="ttdeci">static bool do_APL_command(ostream &amp;out, UCS_string &amp;line)</div><div class="ttdoc">process line which contains an APL command. Return true iff the command was user-defined (and then th...</div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00137">Command.cc:137</a></div></div>
<div class="ttc" id="classFunction_html_ac4a44eddbd86c8278f240ec95c5f1553"><div class="ttname"><a href="classFunction.html#ac4a44eddbd86c8278f240ec95c5f1553">Function::is_native</a></div><div class="ttdeci">virtual bool is_native() const</div><div class="ttdoc">return true iff this is a native function </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00073">Function.hh:73</a></div></div>
<div class="ttc" id="structUserPreferences_html_a058b17d5427be7ae69a8ae91b7ee597a"><div class="ttname"><a href="structUserPreferences.html#a058b17d5427be7ae69a8ae91b7ee597a">UserPreferences::keyboard_layout_file</a></div><div class="ttdeci">UTF8_string keyboard_layout_file</div><div class="ttdoc">name of a user-provided keyboard layout file </div><div class="ttdef"><b>Definition:</b> <a href="UserPreferences_8hh_source.html#l00223">UserPreferences.hh:223</a></div></div>
<div class="ttc" id="classDoxy_html_a572fcbc935713113cd422c4d46789c8a"><div class="ttname"><a href="classDoxy.html#a572fcbc935713113cd422c4d46789c8a">Doxy::get_errors</a></div><div class="ttdeci">int get_errors() const</div><div class="ttdoc">return the number of errors that have occurred </div><div class="ttdef"><b>Definition:</b> <a href="Doxy_8hh_source.html#l00098">Doxy.hh:98</a></div></div>
<div class="ttc" id="classAvec_html_a88cc8af75e4a2c4d8a1d382637ca07b4"><div class="ttname"><a href="classAvec.html#a88cc8af75e4a2c4d8a1d382637ca07b4">Avec::is_quad</a></div><div class="ttdeci">static bool is_quad(Unicode uni)</div><div class="ttdoc">return true if unicode uni is a quad (â or â¯) </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8hh_source.html#l00123">Avec.hh:123</a></div></div>
<div class="ttc" id="classWorkspace_html_a20b0659f2d3987a4bb21d6c399e0a436"><div class="ttname"><a href="classWorkspace.html#a20b0659f2d3987a4bb21d6c399e0a436">Workspace::copy_WS</a></div><div class="ttdeci">static void copy_WS(ostream &amp;out, LibRef lib, const UCS_string &amp;wsname, UCS_string_vector &amp;objects, bool protection)</div><div class="ttdoc">copy objects from another workspace </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l01012">Workspace.cc:1012</a></div></div>
<div class="ttc" id="classToken_html_a1a31afbb07e3f1dbb86d5f872ce5c297"><div class="ttname"><a href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">Token::get_ValueType</a></div><div class="ttdeci">TokenValueType get_ValueType() const</div><div class="ttdoc">return the TokenValueType of this token. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00134">Token.hh:134</a></div></div>
<div class="ttc" id="classStateIndicator_html_aa6584f8a9afaf76a334fb33517e36987"><div class="ttname"><a href="classStateIndicator.html#aa6584f8a9afaf76a334fb33517e36987">StateIndicator::get_parse_mode</a></div><div class="ttdeci">ParseMode get_parse_mode() const</div><div class="ttdoc">return the mode of this entry </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00095">StateIndicator.hh:95</a></div></div>
<div class="ttc" id="classValueStackItem_html_a739208eba9367a492a89ff2a2e5b1796"><div class="ttname"><a href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">ValueStackItem::sym_val</a></div><div class="ttdeci">_sym_val sym_val</div><div class="ttdoc">the (current) value of this symbol (unless variable) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00080">Symbol.hh:80</a></div></div>
<div class="ttc" id="classStateIndicator_html_a8923e217fa9bf331dd84cc15487dd177"><div class="ttname"><a href="classStateIndicator.html#a8923e217fa9bf331dd84cc15487dd177">StateIndicator::get_executable</a></div><div class="ttdeci">Executable * get_executable()</div><div class="ttdoc">return pointer to the current user function, statements, or execute </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00076">StateIndicator.hh:76</a></div></div>
<div class="ttc" id="structCommand_1_1user__command_html"><div class="ttname"><a href="structCommand_1_1user__command.html">Command::user_command</a></div><div class="ttdoc">one user defined command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00081">Command.hh:81</a></div></div>
<div class="ttc" id="classQuad__FIO_html_ad9d0099fb5d1ebe9a2ec8a8dd2b3b68d"><div class="ttname"><a href="classQuad__FIO.html#ad9d0099fb5d1ebe9a2ec8a8dd2b3b68d">Quad_FIO::benchmark_cycles_from</a></div><div class="ttdeci">static uint64_t benchmark_cycles_from</div><div class="ttdoc">cycle counter at start of a benchmark (âFIO[-1]) </div><div class="ttdef"><b>Definition:</b> <a href="Quad__FIO_8hh_source.html#l00076">Quad_FIO.hh:76</a></div></div>
<div class="ttc" id="structYMDhmsu_html_ae447db4de8afa81b7d24f9bd0b1c110d"><div class="ttname"><a href="structYMDhmsu.html#ae447db4de8afa81b7d24f9bd0b1c110d">YMDhmsu::second</a></div><div class="ttdeci">int second</div><div class="ttdoc">second 0-59 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00336">Common.hh:336</a></div></div>
<div class="ttc" id="classCommand_html_a51b8fbdb5d65baf2fddfc930b9b142cf"><div class="ttname"><a href="classCommand.html#a51b8fbdb5d65baf2fddfc930b9b142cf">Command::cmd_COPY</a></div><div class="ttdeci">static void cmd_COPY(ostream &amp;out, UCS_string_vector &amp;args, bool protection)</div><div class="ttdoc">)COPY: copy a workspace file </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00760">Command.cc:760</a></div></div>
<div class="ttc" id="classWorkspace_html_ace4fff7bb6714da724d964c5aa9c5503"><div class="ttname"><a href="classWorkspace.html#ace4fff7bb6714da724d964c5aa9c5503">Workspace::get_WS_name</a></div><div class="ttdeci">static const UCS_string &amp; get_WS_name()</div><div class="ttdoc">return the name of the current workspace. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00166">Workspace.hh:166</a></div></div>
<div class="ttc" id="classCommand_html_a2f17c91a8b65e540a207da7c3be94dec"><div class="ttname"><a href="classCommand.html#a2f17c91a8b65e540a207da7c3be94dec">Command::do_USERCMD</a></div><div class="ttdeci">static void do_USERCMD(ostream &amp;out, UCS_string &amp;line, const UCS_string &amp;line1, const UCS_string &amp;cmd, UCS_string_vector &amp;args, int uidx)</div><div class="ttdoc">execute a user defined command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02053">Command.cc:2053</a></div></div>
<div class="ttc" id="classQuad__TZ_html_ab06810e45e19d69ad466f0b0cd184179"><div class="ttname"><a href="classQuad__TZ.html#ab06810e45e19d69ad466f0b0cd184179">Quad_TZ::print_timestamp</a></div><div class="ttdeci">ostream &amp; print_timestamp(ostream &amp;out, APL_time_us when) const</div><div class="ttdoc">print e.g. 2017-05-17 15:09:12 (GMT+2) to out (no trailing endl) </div><div class="ttdef"><b>Definition:</b> <a href="SystemVariable_8cc_source.html#l01073">SystemVariable.cc:1073</a></div></div>
<div class="ttc" id="classToken_html_a13e8b65088f8a7d103772acc6cfb5140"><div class="ttname"><a href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">Token::get_tag</a></div><div class="ttdeci">const TokenTag get_tag() const</div><div class="ttdoc">return the tag of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00146">Token.hh:146</a></div></div>
<div class="ttc" id="classError_html_a9dbfb665cecfad231189862c5f414c48"><div class="ttname"><a href="classError.html#a9dbfb665cecfad231189862c5f414c48">Error::error_name</a></div><div class="ttdeci">static const char * error_name(ErrorCode err)</div><div class="ttdoc">return a string describing the error </div><div class="ttdef"><b>Definition:</b> <a href="Error_8cc_source.html#l00099">Error.cc:99</a></div></div>
<div class="ttc" id="classCommand_html_a879617e7645bea2e4052154f16999634"><div class="ttname"><a href="classCommand.html#a879617e7645bea2e4052154f16999634">Command::finish_context</a></div><div class="ttdeci">static void finish_context()</div><div class="ttdoc">finish the current SI-&gt;top() and pop it when done </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00327">Command.cc:327</a></div></div>
<div class="ttc" id="classPrefix_html_a84943b5d0ba357555e3c03c244382777"><div class="ttname"><a href="classPrefix.html#a84943b5d0ba357555e3c03c244382777">Prefix::at0</a></div><div class="ttdeci">const Token &amp; at0() const</div><div class="ttdoc">return the leftmost token (e.g. A in AâB) </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00138">Prefix.hh:138</a></div></div>
<div class="ttc" id="classAvec_html_a76a72fdcb1782be1c490b3670c45504f"><div class="ttname"><a href="classAvec.html#a76a72fdcb1782be1c490b3670c45504f">Avec::is_symbol_char</a></div><div class="ttdeci">static bool is_symbol_char(Unicode av)</div><div class="ttdoc">Return true iff av is a valid char in a user defined symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8cc_source.html#l00314">Avec.cc:314</a></div></div>
<div class="ttc" id="classWorkspace_html_ab1c7cb2634d945d28166c30ecc6e1506"><div class="ttname"><a href="classWorkspace.html#ab1c7cb2634d945d28166c30ecc6e1506">Workspace::get_pushed_Command</a></div><div class="ttdeci">static const UCS_string &amp; get_pushed_Command()</div><div class="ttdoc">return the pushed command </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00288">Workspace.hh:288</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a2734289cea0484ac68e854fab12688ea"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a2734289cea0484ac68e854fab12688ea">Command::transfer_context::is_ebcdic</a></div><div class="ttdeci">bool is_ebcdic</div><div class="ttdoc">true if record is EBCDIC (not yet supported) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00262">Command.hh:262</a></div></div>
<div class="ttc" id="classPerformance_html_a07efbb4a65f608d91f13be0388763b0c"><div class="ttname"><a href="classPerformance.html#a07efbb4a65f608d91f13be0388763b0c">Performance::print</a></div><div class="ttdeci">static void print(Pfstat_ID which, ostream &amp;out)</div><div class="ttdoc">print all counters </div><div class="ttdef"><b>Definition:</b> <a href="Performance_8cc_source.html#l00110">Performance.cc:110</a></div></div>
<div class="ttc" id="classOutput_html_a5fbec469bdc1d4ed4cd951ba98784118"><div class="ttname"><a href="classOutput.html#a5fbec469bdc1d4ed4cd951ba98784118">Output::color_enabled</a></div><div class="ttdeci">static bool color_enabled()</div><div class="ttdoc">true if xterm/color is on </div><div class="ttdef"><b>Definition:</b> <a href="Output_8cc_source.html#l00389">Output.cc:389</a></div></div>
<div class="ttc" id="classValue_html"><div class="ttname"><a href="classValue.html">Value</a></div><div class="ttdoc">An APL Value (essentially a Shape and a ravel) </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00056">Value.hh:56</a></div></div>
<div class="ttc" id="classCommand_html_a7580944830e9eae94b800e4921b4865f"><div class="ttname"><a href="classCommand.html#a7580944830e9eae94b800e4921b4865f">Command::primitive_help</a></div><div class="ttdeci">static void primitive_help(ostream &amp;out, const char *arg, int arity, const char *prim, const char *name, const char *title, const char *descr)</div><div class="ttdoc">show help for APL primitives </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00984">Command.cc:984</a></div></div>
<div class="ttc" id="classCommand_html_a7d3314fc076188ed081d4667ca4cb0b7"><div class="ttname"><a href="classCommand.html#a7d3314fc076188ed081d4667ca4cb0b7">Command::boxing_format</a></div><div class="ttdeci">static int boxing_format</div><div class="ttdoc">format for ]BOXING </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00112">Command.hh:112</a></div></div>
<div class="ttc" id="structToken__loc_html_aebf5051dccb240685ec2dd6c39195a64"><div class="ttname"><a href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">Token_loc::tok</a></div><div class="ttdeci">Token tok</div><div class="ttdoc">the token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00374">Token.hh:374</a></div></div>
<div class="ttc" id="classValue_html_a38979fd196c826557e1614fa0514bbaa"><div class="ttname"><a href="classValue.html#a38979fd196c826557e1614fa0514bbaa">Value::erase_stale</a></div><div class="ttdeci">static int erase_stale(const char *loc)</div><div class="ttdoc">erase stale values </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cc_source.html#l00611">Value.cc:611</a></div></div>
<div class="ttc" id="classUTF8__string_html"><div class="ttname"><a href="classUTF8__string.html">UTF8_string</a></div><div class="ttdoc">an UTF8 encoded Unicode (RFC 3629) string </div><div class="ttdef"><b>Definition:</b> <a href="UTF8__string_8hh_source.html#l00048">UTF8_string.hh:48</a></div></div>
<div class="ttc" id="structCommand_1_1val__val_html_a6c44960807bfefff55401ad200cf2a3b"><div class="ttname"><a href="structCommand_1_1val__val.html#a6c44960807bfefff55401ad200cf2a3b">Command::val_val::parent</a></div><div class="ttdeci">const Value * parent</div><div class="ttdoc">the parent (0 unless child is a sub-value </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00095">Command.hh:95</a></div></div>
<div class="ttc" id="structLibPaths_1_1LibDir_html_a77aa7367ac9c26968270733fae786142aeb4e15be8f57d531f9993b9b0325de15"><div class="ttname"><a href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142aeb4e15be8f57d531f9993b9b0325de15">LibPaths::LibDir::CSRC_PREF_SYS</a></div><div class="ttdoc">path from preferences file below /etc/ </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00068">LibPaths.hh:68</a></div></div>
<div class="ttc" id="classLineInput_html_a7ce871a5af18773d431be4e0746a18eb"><div class="ttname"><a href="classLineInput.html#a7ce871a5af18773d431be4e0746a18eb">LineInput::get_history</a></div><div class="ttdeci">static LineHistory &amp; get_history()</div><div class="ttdoc">return the history </div><div class="ttdef"><b>Definition:</b> <a href="LineInput_8hh_source.html#l00319">LineInput.hh:319</a></div></div>
<div class="ttc" id="structCommand_1_1user__command_html_a464103ea3f5203247f3bedeace167ed4"><div class="ttname"><a href="structCommand_1_1user__command.html#a464103ea3f5203247f3bedeace167ed4">Command::user_command::prefix</a></div><div class="ttdeci">UCS_string prefix</div><div class="ttdoc">the first characters of the command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00083">Command.hh:83</a></div></div>
<div class="ttc" id="classSymbol_html"><div class="ttname"><a href="classSymbol.html">Symbol</a></div><div class="ttdoc">Base class for variables, defined functions, and distinguished names. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00090">Symbol.hh:90</a></div></div>
<div class="ttc" id="classExecutable_html"><div class="ttname"><a href="classExecutable.html">Executable</a></div><div class="ttdoc">Base class for ExecuteList, StatementList, and UserFunction. </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00040">Executable.hh:40</a></div></div>
<div class="ttc" id="classUserFunction_html_af4a520e7ab3a61ca3c3f4be32f463810"><div class="ttname"><a href="classUserFunction.html#af4a520e7ab3a61ca3c3f4be32f463810">UserFunction::help</a></div><div class="ttdeci">void help(ostream &amp;out) const</div><div class="ttdoc">print help for this function on out (for the )HELP command) </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8cc_source.html#l01232">UserFunction.cc:1232</a></div></div>
<div class="ttc" id="classNativeFunction_html"><div class="ttname"><a href="classNativeFunction.html">NativeFunction</a></div><div class="ttdoc">A user-defined function written in C++. </div><div class="ttdef"><b>Definition:</b> <a href="NativeFunction_8hh_source.html#l00035">NativeFunction.hh:35</a></div></div>
<div class="ttc" id="classCommand_html_a427a447f00c0b3b928b87b74ebd467ea"><div class="ttname"><a href="classCommand.html#a427a447f00c0b3b928b87b74ebd467ea">Command::cmd_DROP</a></div><div class="ttdeci">static void cmd_DROP(ostream &amp;out, const UCS_string_vector &amp;args)</div><div class="ttdoc">)DROP: delete a workspace file </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00808">Command.cc:808</a></div></div>
<div class="ttc" id="classUserFunction_html"><div class="ttname"><a href="classUserFunction.html">UserFunction</a></div><div class="ttdoc">One user-defined function. </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8hh_source.html#l00036">UserFunction.hh:36</a></div></div>
<div class="ttc" id="classStateIndicator_html_a4989125b7d6f01ac0979a8f747c019a5"><div class="ttname"><a href="classStateIndicator.html#a4989125b7d6f01ac0979a8f747c019a5">StateIndicator::retry</a></div><div class="ttdeci">void retry(const char *loc)</div><div class="ttdoc">retry this StateIndicator (after â&amp;#39;&amp;#39;) </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8cc_source.html#l00095">StateIndicator.cc:95</a></div></div>
<div class="ttc" id="classUCS__string_html_a5ee12a6873e023f9ad76ffafd7aa9c20"><div class="ttname"><a href="classUCS__string.html#a5ee12a6873e023f9ad76ffafd7aa9c20">UCS_string::prepend</a></div><div class="ttdeci">void prepend(Unicode uni)</div><div class="ttdoc">prepend character uni </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00283">UCS_string.hh:283</a></div></div>
<div class="ttc" id="classCommand_html_af36741357bfd4e183b34ee8b747bc7c5"><div class="ttname"><a href="classCommand.html#af36741357bfd4e183b34ee8b747bc7c5">Command::do_APL_expression</a></div><div class="ttdeci">static void do_APL_expression(UCS_string &amp;line)</div><div class="ttdoc">process line which contains APL statements </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00252">Command.cc:252</a></div></div>
<div class="ttc" id="classPrefix_html"><div class="ttname"><a href="classPrefix.html">Prefix</a></div><div class="ttdoc">a class for reducing all statements of an Executable </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00057">Prefix.hh:57</a></div></div>
<div class="ttc" id="classWorkspace_html_a9f82e947e506f90bc39561c2a26f5fec"><div class="ttname"><a href="classWorkspace.html#a9f82e947e506f90bc39561c2a26f5fec">Workspace::cleanup_expunged</a></div><div class="ttdeci">static int cleanup_expunged(ostream &amp;out, bool &amp;erased)</div><div class="ttdoc">maybe remove functions for which âEX has failed </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00510">Workspace.cc:510</a></div></div>
<div class="ttc" id="classUCS__string__vector_html_a65567680f61c6cf35a211fc7e8ae21ae"><div class="ttname"><a href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">UCS_string_vector::contains</a></div><div class="ttdeci">bool contains(const UCS_string &amp;ucs) const</div><div class="ttdoc">return true iff one of the strings is equal to ucs </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string__vector_8hh_source.html#l00040">UCS_string_vector.hh:40</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_a73ebb1258e33db67a0d2ea54ff3efe97"><div class="ttname"><a href="structCommand_1_1transfer__context.html#a73ebb1258e33db67a0d2ea54ff3efe97">Command::transfer_context::chars_1TF</a></div><div class="ttdeci">void chars_1TF(const UCS_string_vector &amp;objects) const</div><div class="ttdoc">process a &amp;#39;C&amp;#39; (character, in 1 âTF format) item. </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l02293">Command.cc:2293</a></div></div>
<div class="ttc" id="classCommand_html_aa0764d08a6ae9c8270907ab7d5dc37cf"><div class="ttname"><a href="classCommand.html#aa0764d08a6ae9c8270907ab7d5dc37cf">Command::cmd_IN</a></div><div class="ttdeci">static void cmd_IN(ostream &amp;out, UCS_string_vector &amp;args, bool protect)</div><div class="ttdoc">)IN: import a workspace file </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01252">Command.cc:1252</a></div></div>
<div class="ttc" id="classStateIndicator_html_afca13502d9ce16b01d8b7ec95da872fd"><div class="ttname"><a href="classStateIndicator.html#afca13502d9ce16b01d8b7ec95da872fd">StateIndicator::escape</a></div><div class="ttdeci">void escape()</div><div class="ttdoc">Escape from user function (exit from each invocation until immediate execution is reached) ...</div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8cc_source.html#l00349">StateIndicator.cc:349</a></div></div>
<div class="ttc" id="classLibPaths_html_a6c671db38ef40ad989618b9138689573"><div class="ttname"><a href="classLibPaths.html#a6c671db38ef40ad989618b9138689573">LibPaths::set_lib_dir</a></div><div class="ttdeci">static void set_lib_dir(LibRef lib, const char *path, LibDir::CfgSrc src)</div><div class="ttdoc">set library path (from config file) </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8cc_source.html#l00211">LibPaths.cc:211</a></div></div>
<div class="ttc" id="classPerformance_html_ade9bde2f5f04a4c720c58331dcfa907e"><div class="ttname"><a href="classPerformance.html#ade9bde2f5f04a4c720c58331dcfa907e">Performance::reset_all</a></div><div class="ttdeci">static void reset_all()</div><div class="ttdoc">reset all counters </div><div class="ttdef"><b>Definition:</b> <a href="Performance_8cc_source.html#l00248">Performance.cc:248</a></div></div>
<div class="ttc" id="classCommand_html_a8969f1bd26bbcb4e6dd9e556dc9d83fb"><div class="ttname"><a href="classCommand.html#a8969f1bd26bbcb4e6dd9e556dc9d83fb">Command::check_name_conflict</a></div><div class="ttdeci">static bool check_name_conflict(ostream &amp;out, const UCS_string &amp;cnew, const UCS_string cold)</div><div class="ttdoc">check if a command name conflicts with an existing command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01774">Command.cc:1774</a></div></div>
<div class="ttc" id="structCommand_1_1transfer__context_html_afa78ecfc3166828869325160b2bf37ed"><div class="ttname"><a href="structCommand_1_1transfer__context.html#afa78ecfc3166828869325160b2bf37ed">Command::transfer_context::recnum</a></div><div class="ttdeci">int recnum</div><div class="ttdoc">the record number </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00265">Command.hh:265</a></div></div>
<div class="ttc" id="classFunction_html_a1e98de20de09c81c7b5e257880eb2c89"><div class="ttname"><a href="classFunction.html#a1e98de20de09c81c7b5e257880eb2c89">Function::get_fun_valence</a></div><div class="ttdeci">virtual int get_fun_valence() const</div><div class="ttdoc">return the number of value arguments (0, 1, or 2) of a user defined function, For non-user defined fu...</div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00091">Function.hh:91</a></div></div>
<div class="ttc" id="classWorkspace_html_a34c064c6760d7bfcc10e68700defe327"><div class="ttname"><a href="classWorkspace.html#a34c064c6760d7bfcc10e68700defe327">Workspace::get_v_Quad_TZ</a></div><div class="ttdeci">static Quad_TZ &amp; get_v_Quad_TZ()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00045">Workspace.hh:45</a></div></div>
<div class="ttc" id="classUCS__string_html_a03aed5b59ab15793af300f63abf20de6"><div class="ttname"><a href="classUCS__string.html#a03aed5b59ab15793af300f63abf20de6">UCS_string::ends_with</a></div><div class="ttdeci">bool ends_with(const char *suffix) const</div><div class="ttdoc">return true if this ends with suffix (ASCII, case matters). </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00586">UCS_string.cc:586</a></div></div>
<div class="ttc" id="classToken_html"><div class="ttname"><a href="classToken.html">Token</a></div><div class="ttdoc">One atom of an APL function or expression. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00045">Token.hh:45</a></div></div>
<div class="ttc" id="classExecutable_html_a56bddb63158eedc401fe8ec3ce04f787"><div class="ttname"><a href="classExecutable.html#a56bddb63158eedc401fe8ec3ce04f787">Executable::execute_body</a></div><div class="ttdeci">Token execute_body() const</div><div class="ttdoc">execute the body of this executable </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8cc_source.html#l00256">Executable.cc:256</a></div></div>
<div class="ttc" id="classUTF8__string_html_af0f7724e5743d48d9e29776de5d53c71"><div class="ttname"><a href="classUTF8__string.html#af0f7724e5743d48d9e29776de5d53c71">UTF8_string::c_str</a></div><div class="ttdeci">const char * c_str() const</div><div class="ttdoc">return this string as a 0-termionated C string </div><div class="ttdef"><b>Definition:</b> <a href="UTF8__string_8hh_source.html#l00083">UTF8_string.hh:83</a></div></div>
<div class="ttc" id="classWorkspace_html_ab0188eca4a9e7dd492e042f87ea69ba7"><div class="ttname"><a href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a></div><div class="ttdeci">static Symbol * lookup_symbol(const UCS_string &amp;symbol_name)</div><div class="ttdoc">lookup an existing user defined symbol. If not found, create one (unless this would be a quad symbol)...</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00126">Workspace.hh:126</a></div></div>
<div class="ttc" id="classToken_html_aa92af5604449cd8c22b35297f07d5b9d"><div class="ttname"><a href="classToken.html#aa92af5604449cd8c22b35297f07d5b9d">Token::get_sym_ptr</a></div><div class="ttdeci">Symbol * get_sym_ptr() const</div><div class="ttdoc">return the Symbol * value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00187">Token.hh:187</a></div></div>
<div class="ttc" id="structLibPaths_1_1LibDir_html_a77aa7367ac9c26968270733fae786142a285cc96c12fd86e4013fb64fb00553e1"><div class="ttname"><a href="structLibPaths_1_1LibDir.html#a77aa7367ac9c26968270733fae786142a285cc96c12fd86e4013fb64fb00553e1">LibPaths::LibDir::CSRC_CMD</a></div><div class="ttdoc">lib root from )LIBS command </div><div class="ttdef"><b>Definition:</b> <a href="LibPaths_8hh_source.html#l00070">LibPaths.hh:70</a></div></div>
<div class="ttc" id="classCommand_html_a9d079b240efe9dfd37038cc2de6828e7"><div class="ttname"><a href="classCommand.html#a9d079b240efe9dfd37038cc2de6828e7">Command::cmd_HOST</a></div><div class="ttdeci">static void cmd_HOST(ostream &amp;out, const UCS_string &amp;arg)</div><div class="ttdoc">)HOST: execute OS command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01217">Command.cc:1217</a></div></div>
<div class="ttc" id="classLineInput_html_a67380e434a21599b5ac579e542b27379"><div class="ttname"><a href="classLineInput.html#a67380e434a21599b5ac579e542b27379">LineInput::print_history</a></div><div class="ttdeci">static void print_history(ostream &amp;out)</div><div class="ttdoc">print history to out </div><div class="ttdef"><b>Definition:</b> <a href="LineInput_8hh_source.html#l00307">LineInput.hh:307</a></div></div>
<div class="ttc" id="classCommand_html_aafd8a7df22d24109a5ea7de47267f241"><div class="ttname"><a href="classCommand.html#aafd8a7df22d24109a5ea7de47267f241">Command::cmd_OFF</a></div><div class="ttdeci">static void cmd_OFF(int exit_val)</div><div class="ttdoc">clean-up and exit from APL interpreter </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01716">Command.cc:1716</a></div></div>
<div class="ttc" id="classLineInput_html_ad491f420acc05aad15024db06deadd3f"><div class="ttname"><a href="classLineInput.html#ad491f420acc05aad15024db06deadd3f">LineInput::clear_history</a></div><div class="ttdeci">static void clear_history(ostream &amp;out)</div><div class="ttdoc">clear history </div><div class="ttdef"><b>Definition:</b> <a href="LineInput_8hh_source.html#l00303">LineInput.hh:303</a></div></div>
<div class="ttc" id="classWorkspace_html_a7ffca45a4446b644e7caf093a1699ba2"><div class="ttname"><a href="classWorkspace.html#a7ffca45a4446b644e7caf093a1699ba2">Workspace::write_OUT</a></div><div class="ttdeci">static void write_OUT(FILE *out, uint64_t &amp;seq, const UCS_string_vector &amp;objects)</div><div class="ttdoc">write symbols for )OUT command </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00399">Workspace.cc:399</a></div></div>
<div class="ttc" id="structYMDhmsu_html_ab474982883e050d04e3b44be036122ed"><div class="ttname"><a href="structYMDhmsu.html#ab474982883e050d04e3b44be036122ed">YMDhmsu::year</a></div><div class="ttdeci">int year</div><div class="ttdoc">year, e.g. 2013 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00331">Common.hh:331</a></div></div>
<div class="ttc" id="classUCS__string_html_a67ea87cb92e687105b21917ffb4a2a6f"><div class="ttname"><a href="classUCS__string.html#a67ea87cb92e687105b21917ffb4a2a6f">UCS_string::pop_back</a></div><div class="ttdeci">void pop_back()</div><div class="ttdoc">remove the last character in this string </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00251">UCS_string.hh:251</a></div></div>
<div class="ttc" id="classAvec_html_a15bfa417923b425ec3c2baf973d2a5f9"><div class="ttname"><a href="classAvec.html#a15bfa417923b425ec3c2baf973d2a5f9">Avec::IBM_quad_AV</a></div><div class="ttdeci">static const Unicode * IBM_quad_AV()</div><div class="ttdoc">a pointer to 256 Unicode characters that are exactly the APL2 character set (âAV) shown in lrm Appen...</div><div class="ttdef"><b>Definition:</b> <a href="Avec_8cc_source.html#l00426">Avec.cc:426</a></div></div>
<div class="ttc" id="classToken_html_a3d7d59eaac1535df1433357d5d372f84"><div class="ttname"><a href="classToken.html#a3d7d59eaac1535df1433357d5d372f84">Token::~Token</a></div><div class="ttdeci">~Token()</div><div class="ttdoc">destructor </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00123">Token.hh:123</a></div></div>
<div class="ttc" id="classCell_html_ae98b3988a7fa52c6c157b4911b043dde"><div class="ttname"><a href="classCell.html#ae98b3988a7fa52c6c157b4911b043dde">Cell::is_pointer_cell</a></div><div class="ttdeci">virtual bool is_pointer_cell() const</div><div class="ttdoc">Return true iff this cell is a pointer (to a sub-array) cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00201">Cell.hh:201</a></div></div>
<div class="ttc" id="classCommand_html_a78b8f6d900683d8c1392c3f87fd4d4ac"><div class="ttname"><a href="classCommand.html#a78b8f6d900683d8c1392c3f87fd4d4ac">Command::check_params</a></div><div class="ttdeci">static bool check_params(ostream &amp;out, const char *command, int argc, const char *args)</div><div class="ttdoc">check the number of parameters in a command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00179">Command.cc:179</a></div></div>
<div class="ttc" id="structUserPreferences_html_ab953f017038113a7b004f2487f2852f2"><div class="ttname"><a href="structUserPreferences.html#ab953f017038113a7b004f2487f2852f2">UserPreferences::silent</a></div><div class="ttdeci">bool silent</div><div class="ttdoc">true if no banner/Goodbye is wanted. </div><div class="ttdef"><b>Definition:</b> <a href="UserPreferences_8hh_source.html#l00207">UserPreferences.hh:207</a></div></div>
<div class="ttc" id="classWorkspace_html_a4c393e0cc87db7d5148100e25d525729"><div class="ttname"><a href="classWorkspace.html#a4c393e0cc87db7d5148100e25d525729">Workspace::pop_SI</a></div><div class="ttdeci">static void pop_SI(const char *loc)</div><div class="ttdoc">Remove the current SI-entry from the SI stack. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00145">Workspace.cc:145</a></div></div>
<div class="ttc" id="structYMDhmsu_html_adb8189a3111d2ea409fdab27f7882f0c"><div class="ttname"><a href="structYMDhmsu.html#adb8189a3111d2ea409fdab27f7882f0c">YMDhmsu::month</a></div><div class="ttdeci">int month</div><div class="ttdoc">month 1-12 </div><div class="ttdef"><b>Definition:</b> <a href="Common_8hh_source.html#l00332">Common.hh:332</a></div></div>
<div class="ttc" id="classCommand_html_a3c8718c78546d294a18e5793329e9df0"><div class="ttname"><a href="classCommand.html#a3c8718c78546d294a18e5793329e9df0">Command::split_arg</a></div><div class="ttdeci">static UCS_string_vector split_arg(const UCS_string &amp;arg)</div><div class="ttdoc">split whitespace separated arguments into individual arguments </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00584">Command.cc:584</a></div></div>
<div class="ttc" id="classCommand_html_a03b38c251f9bd3a543dc33377a091b6d"><div class="ttname"><a href="classCommand.html#a03b38c251f9bd3a543dc33377a091b6d">Command::cmd_USERCMD</a></div><div class="ttdeci">static void cmd_USERCMD(ostream &amp;out, const UCS_string &amp;arg, UCS_string_vector &amp;args)</div><div class="ttdoc">create a user defined command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l01885">Command.cc:1885</a></div></div>
<div class="ttc" id="classCommand_html_a98e7d1dd0c01014d79f2120292588a70"><div class="ttname"><a href="classCommand.html#a98e7d1dd0c01014d79f2120292588a70">Command::cmd_DUMP</a></div><div class="ttdeci">static void cmd_DUMP(ostream &amp;out, const UCS_string_vector &amp;args, bool html, bool silent)</div><div class="ttdoc">)DUMP: dump a workspace file (.apl) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00837">Command.cc:837</a></div></div>
<div class="ttc" id="classUCS__string_html_aaa6ebd4a175a47347101721aa86322dd"><div class="ttname"><a href="classUCS__string.html#aaa6ebd4a175a47347101721aa86322dd">UCS_string::append_quoted</a></div><div class="ttdeci">void append_quoted(const UCS_string &amp;other)</div><div class="ttdoc">append other in quotes, doubling quoted in other </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00820">UCS_string.cc:820</a></div></div>
<div class="ttc" id="classSymbol_html_a739f019bbd3b466914ac56f3437496db"><div class="ttname"><a href="classSymbol.html#a739f019bbd3b466914ac56f3437496db">Symbol::assign</a></div><div class="ttdeci">virtual void assign(Value_P value, bool clone, const char *loc)</div><div class="ttdoc">Assign value to this Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00123">Symbol.cc:123</a></div></div>
<div class="ttc" id="classShape_html"><div class="ttname"><a href="classShape.html">Shape</a></div><div class="ttdoc">the shape of an APL value </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8hh_source.html#l00031">Shape.hh:31</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><b>Command.cc</b></li>
    <li class="footer">Generated on Sun Aug 9 2020 16:43:41 for GNUAPL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
