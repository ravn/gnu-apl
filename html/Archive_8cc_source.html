<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>GNUAPL: src/Archive.cc Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">GNUAPL
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',false,false,'search.php','Search');
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('Archive_8cc_source.html','');});
</script>
<div id="doc-content">
<div class="header">
  <div class="headertitle">
<div class="title">Archive.cc</div>  </div>
</div><!--header-->
<div class="contents">
<div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l00002"></a><span class="lineno">    2</span>&#160;<span class="comment">    This file is part of GNU APL, a free implementation of the</span></div><div class="line"><a name="l00003"></a><span class="lineno">    3</span>&#160;<span class="comment">    ISO/IEC Standard 13751, &quot;Programming Language APL, Extended&quot;</span></div><div class="line"><a name="l00004"></a><span class="lineno">    4</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00005"></a><span class="lineno">    5</span>&#160;<span class="comment">    Copyright (C) 2008-2016  Dr. JÃ¼rgen Sauermann</span></div><div class="line"><a name="l00006"></a><span class="lineno">    6</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00007"></a><span class="lineno">    7</span>&#160;<span class="comment">    This program is free software: you can redistribute it and/or modify</span></div><div class="line"><a name="l00008"></a><span class="lineno">    8</span>&#160;<span class="comment">    it under the terms of the GNU General Public License as published by</span></div><div class="line"><a name="l00009"></a><span class="lineno">    9</span>&#160;<span class="comment">    the Free Software Foundation, either version 3 of the License, or</span></div><div class="line"><a name="l00010"></a><span class="lineno">   10</span>&#160;<span class="comment">    (at your option) any later version.</span></div><div class="line"><a name="l00011"></a><span class="lineno">   11</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00012"></a><span class="lineno">   12</span>&#160;<span class="comment">    This program is distributed in the hope that it will be useful,</span></div><div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="comment">    but WITHOUT ANY WARRANTY; without even the implied warranty of</span></div><div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="comment">    MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the</span></div><div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="comment">    GNU General Public License for more details.</span></div><div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="comment"></span></div><div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;<span class="comment">    You should have received a copy of the GNU General Public License</span></div><div class="line"><a name="l00018"></a><span class="lineno">   18</span>&#160;<span class="comment">    along with this program.  If not, see &lt;http://www.gnu.org/licenses/&gt;.</span></div><div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div><div class="line"><a name="l00021"></a><span class="lineno">   21</span>&#160;<span class="preprocessor">#include &lt;fcntl.h&gt;</span></div><div class="line"><a name="l00022"></a><span class="lineno">   22</span>&#160;<span class="preprocessor">#include &lt;errno.h&gt;</span></div><div class="line"><a name="l00023"></a><span class="lineno">   23</span>&#160;<span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><a name="l00024"></a><span class="lineno">   24</span>&#160;<span class="preprocessor">#include &lt;stdio.h&gt;</span></div><div class="line"><a name="l00025"></a><span class="lineno">   25</span>&#160;<span class="preprocessor">#include &lt;sys/mman.h&gt;</span></div><div class="line"><a name="l00026"></a><span class="lineno">   26</span>&#160;<span class="preprocessor">#include &lt;sys/stat.h&gt;</span></div><div class="line"><a name="l00027"></a><span class="lineno">   27</span>&#160;<span class="preprocessor">#include &lt;sys/types.h&gt;</span></div><div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;</div><div class="line"><a name="l00029"></a><span class="lineno">   29</span>&#160;<span class="preprocessor">#include &quot;Archive.hh&quot;</span></div><div class="line"><a name="l00030"></a><span class="lineno">   30</span>&#160;<span class="preprocessor">#include &quot;buildtag.hh&quot;</span>   <span class="comment">// for ARCHIVE_SVN</span></div><div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;<span class="preprocessor">#include &quot;Common.hh&quot;</span></div><div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;<span class="preprocessor">#include &quot;Command.hh&quot;</span></div><div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;<span class="preprocessor">#include &quot;CharCell.hh&quot;</span></div><div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;<span class="preprocessor">#include &quot;ComplexCell.hh&quot;</span></div><div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;<span class="preprocessor">#include &quot;Executable.hh&quot;</span></div><div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;<span class="preprocessor">#include &quot;FloatCell.hh&quot;</span></div><div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;<span class="preprocessor">#include &quot;Function.hh&quot;</span></div><div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;<span class="preprocessor">#include &quot;Heapsort.hh&quot;</span></div><div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;<span class="preprocessor">#include &quot;IndexExpr.hh&quot;</span></div><div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;<span class="preprocessor">#include &quot;IntCell.hh&quot;</span></div><div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;<span class="preprocessor">#include &quot;LvalCell.hh&quot;</span></div><div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;<span class="preprocessor">#include &quot;Macro.hh&quot;</span></div><div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;<span class="preprocessor">#include &quot;NativeFunction.hh&quot;</span></div><div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;<span class="preprocessor">#include &quot;Output.hh&quot;</span></div><div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;<span class="preprocessor">#include &quot;PointerCell.hh&quot;</span></div><div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;<span class="preprocessor">#include &quot;PrintOperator.hh&quot;</span></div><div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;<span class="preprocessor">#include &quot;Symbol.hh&quot;</span></div><div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;<span class="preprocessor">#include &quot;Token.hh&quot;</span></div><div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;<span class="preprocessor">#include &quot;UCS_string.hh&quot;</span></div><div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;<span class="preprocessor">#include &quot;UserFunction.hh&quot;</span></div><div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;<span class="preprocessor">#include &quot;Value.hh&quot;</span></div><div class="line"><a name="l00052"></a><span class="lineno">   52</span>&#160;<span class="preprocessor">#include &quot;Workspace.hh&quot;</span></div><div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;</div><div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;<span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;</div><div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;<span class="preprocessor">#define NEED(x)   if (space &lt; int(x)) \</span></div><div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;<span class="preprocessor">   { leave_char_mode();   out &lt;&lt; &quot;\n&quot;;   space = do_indent(); } out</span></div><div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;</div><div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00063"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a8b0a3a2f1f9c91af785edf994b4fa48d">   63</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a8b0a3a2f1f9c91af785edf994b4fa48d">XML_Saving_Archive::xml_allowed</a>(Unicode uni)</div><div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;{</div><div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;   <span class="keywordflow">if</span> (uni &lt; <span class="charliteral">&#39; &#39;</span>)    <span class="keywordflow">return</span> <span class="keyword">false</span>;    <span class="comment">// control chars and negative</span></div><div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;   <span class="keywordflow">if</span> (uni == <span class="charliteral">&#39;&lt;&#39;</span>)   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// &lt; not allowed</span></div><div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;   <span class="keywordflow">if</span> (uni == <span class="charliteral">&#39;&amp;&#39;</span>)   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// &lt; not allowed</span></div><div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;   <span class="keywordflow">if</span> (uni == <span class="charliteral">&#39;&quot;&#39;</span>)   <span class="keywordflow">return</span> <span class="keyword">false</span>;   <span class="comment">// not allowed in &quot;...&quot;</span></div><div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;   <span class="keywordflow">if</span> (uni &gt; <span class="charliteral">&#39;~&#39;</span>)</div><div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;      {</div><div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;        <span class="comment">// non-ASCII character. This is, in principle, allowed in XML but</span></div><div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;        <span class="comment">// may not print properly if the font used does not provide the</span></div><div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;        <span class="comment">// character. We therefore allow characters in âAV and their alternate</span></div><div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;        <span class="comment">// characters except our own type markers (â°Â¹Â²...)</span></div><div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;        <span class="keywordflow">if</span> (is_iPAD_char(uni))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#a844e2fc3a73ef90f42e63a9c268f36b8">Avec::find_char</a>(uni) != Invalid_CHT)              <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classAvec.html#a0641640e6b1cc18a1e4c525dcf5e83a4">Avec::map_alternative_char</a>(uni) != Invalid_CHT)   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;        <span class="keywordflow">return</span> <span class="keyword">false</span>;    <span class="comment">// allowed, but may</span></div><div class="line"><a name="l00080"></a><span class="lineno">   80</span>&#160;      }</div><div class="line"><a name="l00081"></a><span class="lineno">   81</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l00082"></a><span class="lineno">   82</span>&#160;}</div><div class="line"><a name="l00083"></a><span class="lineno">   83</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00084"></a><span class="lineno">   84</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> *</div><div class="line"><a name="l00085"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a3da33c8ba02d437ae1803eac0464c945">   85</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a3da33c8ba02d437ae1803eac0464c945">XML_Saving_Archive::decr</a>(<span class="keywordtype">int</span> &amp; counter, <span class="keyword">const</span> <span class="keywordtype">char</span> * str)</div><div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;{</div><div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;   counter -= strlen(str);</div><div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;   <span class="keywordflow">return</span> str;</div><div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;}</div><div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l00092"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#ab1e1e0d523a391379f41e5e8efa7ff66">   92</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#ab1e1e0d523a391379f41e5e8efa7ff66">XML_Saving_Archive::do_indent</a>()</div><div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;{</div><div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> spaces = indent * INDENT_LEN;</div><div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;   loop(s, spaces)   out &lt;&lt; <span class="stringliteral">&quot; &quot;</span>;</div><div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div><div class="line"><a name="l00097"></a><span class="lineno">   97</span>&#160;   <span class="keywordflow">return</span> 72 - spaces;</div><div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;}</div><div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;<a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">XML_Saving_Archive::Vid</a></div><div class="line"><a name="l00101"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a161f686e1065cddaf30ab5c06f4a56a1">  101</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a161f686e1065cddaf30ab5c06f4a56a1">XML_Saving_Archive::find_vid</a>(<span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * val)</div><div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;{</div><div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;<span class="keyword">const</span> <span class="keywordtype">void</span> * item = bsearch(val, values, value_count, <span class="keyword">sizeof</span>(<a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a>),</div><div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;                      _val_par::compare_val_par1);</div><div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;   <span class="keywordflow">if</span> (item == 0)   <span class="keywordflow">return</span> INVALID_VID;</div><div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;   <span class="keywordflow">return</span> <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a>(reinterpret_cast&lt;const _val_par *&gt;(item) - values);</div><div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;}</div><div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00110"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a792fe70c4d59b79b9f1da76945377e35">  110</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a792fe70c4d59b79b9f1da76945377e35">XML_Saving_Archive::emit_unicode</a>(Unicode uni, <span class="keywordtype">int</span> &amp; space)</div><div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;{</div><div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;   <span class="keywordflow">if</span> (uni == UNI_ASCII_LF)</div><div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;      {</div><div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;        leave_char_mode();</div><div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;        out &lt;&lt; UNI_PAD_U1 &lt;&lt; <span class="stringliteral">&quot;A&quot;</span> &lt;&lt; <span class="stringliteral">&quot;\n&quot;</span>;</div><div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;        space = do_indent();</div><div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;      }</div><div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!xml_allowed(uni))</div><div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;      {</div><div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;        space -= leave_char_mode();</div><div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;        <span class="keywordtype">char</span> cc[40];</div><div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;        snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%X&quot;</span>, uni);</div><div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;        NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U1 &lt;&lt; decr(space, cc);</div><div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;        space--;   <span class="comment">// PAD_U1</span></div><div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;      }</div><div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;   <span class="keywordflow">else</span> </div><div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;      {</div><div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;        NEED(1) &lt;&lt; <span class="stringliteral">&quot;&quot;</span>;</div><div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;        space -= enter_char_mode();</div><div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;        out &lt;&lt; uni;</div><div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;        space--;   <span class="comment">// uni</span></div><div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;      }</div><div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;}</div><div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00136"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a7c5dbf639d8ffda3ed1478a7004ba357">  136</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a7c5dbf639d8ffda3ed1478a7004ba357">XML_Saving_Archive::save_UCS</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; ucs)</div><div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;{</div><div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;<span class="keywordtype">int</span> space = do_indent();</div><div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;   out &lt;&lt; decr(space, <span class="stringliteral">&quot;&lt;UCS uni=\&quot;&quot;</span>);</div><div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;   Assert(char_mode == <span class="keyword">false</span>);</div><div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;   indent += 5;</div><div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;   loop(u, ucs.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   emit_unicode(ucs[u], space);</div><div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;   leave_char_mode();</div><div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;   space -= 2;</div><div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;   indent -= 5;</div><div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;}</div><div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;<a class="code" href="classXML__Saving__Archive.html">XML_Saving_Archive</a> &amp;</div><div class="line"><a name="l00150"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#ad389ad3f93e77ff31be67eb2f5ebb9fd">  150</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#ad389ad3f93e77ff31be67eb2f5ebb9fd">XML_Saving_Archive::save_shape</a>(<a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> vid)</div><div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;{</div><div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;<span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> &amp; v = *values[vid]._val;</div><div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;</div><div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;   do_indent();</div><div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;Value flg=\&quot;&quot;</span> &lt;&lt; HEX(v.<a class="code" href="classValue.html#aa7a89fbbca076c1c0c1a579702bf5ff1">get_flags</a>()) &lt;&lt; <span class="stringliteral">&quot;\&quot; vid=\&quot;&quot;</span> &lt;&lt; vid &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;</div><div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;<span class="keyword">const</span> <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> parent_vid = values[vid]._par;</div><div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot; parent=\&quot;&quot;</span> &lt;&lt; parent_vid &lt;&lt; <span class="stringliteral">&quot;\&quot; rk=\&quot;&quot;</span> &lt;&lt; v.<a class="code" href="classValue.html#a5ac7131d2f89d0bc8b8907d960cbd125">get_rank</a>()&lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div><div class="line"><a name="l00160"></a><span class="lineno">  160</span>&#160;   loop (r, v.<a class="code" href="classValue.html#a5ac7131d2f89d0bc8b8907d960cbd125">get_rank</a>())</div><div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;      {</div><div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot; sh-&quot;</span> &lt;&lt; r &lt;&lt; <span class="stringliteral">&quot;=\&quot;&quot;</span> &lt;&lt; v.<a class="code" href="classValue.html#aeb50afe8b59d1321fc03d8a2626c8613">get_shape_item</a>(r) &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;      }</div><div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;</div><div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00166"></a><span class="lineno">  166</span>&#160;   <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00167"></a><span class="lineno">  167</span>&#160;}</div><div class="line"><a name="l00168"></a><span class="lineno">  168</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00169"></a><span class="lineno">  169</span>&#160;<a class="code" href="classXML__Saving__Archive.html">XML_Saving_Archive</a> &amp;</div><div class="line"><a name="l00170"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a91f354b394601f7dc6369c6485670e5f">  170</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a91f354b394601f7dc6369c6485670e5f">XML_Saving_Archive::save_Ravel</a>(<a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> vid)</div><div class="line"><a name="l00171"></a><span class="lineno">  171</span>&#160;{</div><div class="line"><a name="l00172"></a><span class="lineno">  172</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save_Ravel(Vid &quot;</span> &lt;&lt; vid &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00173"></a><span class="lineno">  173</span>&#160;</div><div class="line"><a name="l00174"></a><span class="lineno">  174</span>&#160;<span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> &amp; v = *values[vid]._val;</div><div class="line"><a name="l00175"></a><span class="lineno">  175</span>&#160;</div><div class="line"><a name="l00176"></a><span class="lineno">  176</span>&#160;<span class="keywordtype">int</span> space = do_indent();</div><div class="line"><a name="l00177"></a><span class="lineno">  177</span>&#160;</div><div class="line"><a name="l00178"></a><span class="lineno">  178</span>&#160;<span class="keywordtype">char</span> cc[80];</div><div class="line"><a name="l00179"></a><span class="lineno">  179</span>&#160;   snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;&lt;Ravel vid=\&quot;%d\&quot; cells=\&quot;&quot;</span>, vid);</div><div class="line"><a name="l00180"></a><span class="lineno">  180</span>&#160;   out &lt;&lt; decr(space, cc);</div><div class="line"><a name="l00181"></a><span class="lineno">  181</span>&#160;</div><div class="line"><a name="l00182"></a><span class="lineno">  182</span>&#160;   ++indent;</div><div class="line"><a name="l00183"></a><span class="lineno">  183</span>&#160;<span class="keyword">const</span> ShapeItem len = v.<a class="code" href="classValue.html#ac5b54e3a13cab0837442f1575b3299a5">nz_element_count</a>();</div><div class="line"><a name="l00184"></a><span class="lineno">  184</span>&#160;<span class="keyword">const</span> <a class="code" href="classCell.html">Cell</a> * C = &amp;v.<a class="code" href="classValue.html#a89120a742c078918d1a5d84ec742e69c">get_ravel</a>(0);</div><div class="line"><a name="l00185"></a><span class="lineno">  185</span>&#160;   loop(l, len)   emit_cell(*C++, space);</div><div class="line"><a name="l00186"></a><span class="lineno">  186</span>&#160;</div><div class="line"><a name="l00187"></a><span class="lineno">  187</span>&#160;   space -= leave_char_mode();</div><div class="line"><a name="l00188"></a><span class="lineno">  188</span>&#160;   out&lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00189"></a><span class="lineno">  189</span>&#160;   space -= 2;</div><div class="line"><a name="l00190"></a><span class="lineno">  190</span>&#160;   --indent;</div><div class="line"><a name="l00191"></a><span class="lineno">  191</span>&#160;</div><div class="line"><a name="l00192"></a><span class="lineno">  192</span>&#160;   <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00193"></a><span class="lineno">  193</span>&#160;}</div><div class="line"><a name="l00194"></a><span class="lineno">  194</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00195"></a><span class="lineno">  195</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00196"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#ae0384623223c3d4e87ea98f2ec0adf5c">  196</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#ae0384623223c3d4e87ea98f2ec0adf5c">XML_Saving_Archive::emit_cell</a>(<span class="keyword">const</span> <a class="code" href="classCell.html">Cell</a> &amp; cell, <span class="keywordtype">int</span> &amp; space)</div><div class="line"><a name="l00197"></a><span class="lineno">  197</span>&#160;{</div><div class="line"><a name="l00198"></a><span class="lineno">  198</span>&#160;<span class="keywordtype">char</span> cc[80];</div><div class="line"><a name="l00199"></a><span class="lineno">  199</span>&#160;   <span class="keywordflow">switch</span>(cell.<a class="code" href="classCell.html#a38a6a25f0ad091f35e3d9abfe5608a50">get_cell_type</a>())</div><div class="line"><a name="l00200"></a><span class="lineno">  200</span>&#160;      {</div><div class="line"><a name="l00201"></a><span class="lineno">  201</span>&#160;            <span class="keywordflow">case</span> CT_CHAR:   <span class="comment">// uses UNI_PAD_U0, UNI_PAD_U1, and UNI_PAD_U2</span></div><div class="line"><a name="l00202"></a><span class="lineno">  202</span>&#160;                 emit_unicode(cell.<a class="code" href="classCell.html#ab940e21b6212fbd1bfa8de9f99d090ea">get_char_value</a>(), space);</div><div class="line"><a name="l00203"></a><span class="lineno">  203</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l00204"></a><span class="lineno">  204</span>&#160;</div><div class="line"><a name="l00205"></a><span class="lineno">  205</span>&#160;            <span class="keywordflow">case</span> CT_INT:   <span class="comment">// uses UNI_PAD_U3</span></div><div class="line"><a name="l00206"></a><span class="lineno">  206</span>&#160;                 space -= leave_char_mode();</div><div class="line"><a name="l00207"></a><span class="lineno">  207</span>&#160;                 snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%lld&quot;</span>,</div><div class="line"><a name="l00208"></a><span class="lineno">  208</span>&#160;                          long_long(cell.<a class="code" href="classCell.html#ad165f9ab69abf46b2cf44d301a700a1c">get_int_value</a>()));</div><div class="line"><a name="l00209"></a><span class="lineno">  209</span>&#160;                 NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U3 &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00210"></a><span class="lineno">  210</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l00211"></a><span class="lineno">  211</span>&#160;</div><div class="line"><a name="l00212"></a><span class="lineno">  212</span>&#160;            <span class="keywordflow">case</span> CT_FLOAT:   <span class="comment">// uses UNI_PAD_U4 or UNI_PAD_U8</span></div><div class="line"><a name="l00213"></a><span class="lineno">  213</span>&#160;                 space -= leave_char_mode();</div><div class="line"><a name="l00214"></a><span class="lineno">  214</span>&#160;<span class="preprocessor">#ifdef RATIONAL_NUMBERS_WANTED</span></div><div class="line"><a name="l00215"></a><span class="lineno">  215</span>&#160;                 {</div><div class="line"><a name="l00216"></a><span class="lineno">  216</span>&#160;                 <span class="keyword">const</span> <a class="code" href="classFloatCell.html">FloatCell</a> &amp; flt = cell.<a class="code" href="classCell.html#a63b030d0f3c3d2c8c1d742b5a0ba2212">cFloatCell</a>();</div><div class="line"><a name="l00217"></a><span class="lineno">  217</span>&#160;                 <span class="keywordflow">if</span> (<span class="keyword">const</span> APL_Integer denom = flt.get_denominator())</div><div class="line"><a name="l00218"></a><span class="lineno">  218</span>&#160;                    {</div><div class="line"><a name="l00219"></a><span class="lineno">  219</span>&#160;                      <span class="keyword">const</span> APL_Integer numer = flt.get_numerator();</div><div class="line"><a name="l00220"></a><span class="lineno">  220</span>&#160;                      snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%lldÃ·%lld&quot;</span>, long_long(numer),</div><div class="line"><a name="l00221"></a><span class="lineno">  221</span>&#160;                               long_long(denom));</div><div class="line"><a name="l00222"></a><span class="lineno">  222</span>&#160;                      NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U8 &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00223"></a><span class="lineno">  223</span>&#160;                      <span class="keywordflow">break</span>;</div><div class="line"><a name="l00224"></a><span class="lineno">  224</span>&#160;                    }</div><div class="line"><a name="l00225"></a><span class="lineno">  225</span>&#160;                 }</div><div class="line"><a name="l00226"></a><span class="lineno">  226</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00227"></a><span class="lineno">  227</span>&#160;                 snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%.17g&quot;</span>,</div><div class="line"><a name="l00228"></a><span class="lineno">  228</span>&#160;                          <span class="keywordtype">double</span>(cell.<a class="code" href="classCell.html#a9a0028fd74f00deb001a8062a55916c6">get_real_value</a>()));</div><div class="line"><a name="l00229"></a><span class="lineno">  229</span>&#160;                 NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U4 &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00230"></a><span class="lineno">  230</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l00231"></a><span class="lineno">  231</span>&#160;</div><div class="line"><a name="l00232"></a><span class="lineno">  232</span>&#160;            <span class="keywordflow">case</span> CT_COMPLEX:   <span class="comment">// uses UNI_PAD_U5</span></div><div class="line"><a name="l00233"></a><span class="lineno">  233</span>&#160;                 space -= leave_char_mode();</div><div class="line"><a name="l00234"></a><span class="lineno">  234</span>&#160;                 snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%17gJ%17g&quot;</span>,</div><div class="line"><a name="l00235"></a><span class="lineno">  235</span>&#160;                          <span class="keywordtype">double</span>(cell.<a class="code" href="classCell.html#a9a0028fd74f00deb001a8062a55916c6">get_real_value</a>()),</div><div class="line"><a name="l00236"></a><span class="lineno">  236</span>&#160;                          <span class="keywordtype">double</span>(cell.<a class="code" href="classCell.html#a0e6b9239fa77e3222f32400d51c8f114">get_imag_value</a>()));</div><div class="line"><a name="l00237"></a><span class="lineno">  237</span>&#160;                 NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U5 &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00238"></a><span class="lineno">  238</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l00239"></a><span class="lineno">  239</span>&#160;</div><div class="line"><a name="l00240"></a><span class="lineno">  240</span>&#160;            <span class="keywordflow">case</span> CT_POINTER:   <span class="comment">// uses UNI_PAD_U6</span></div><div class="line"><a name="l00241"></a><span class="lineno">  241</span>&#160;                 space -= leave_char_mode();</div><div class="line"><a name="l00242"></a><span class="lineno">  242</span>&#160;                 {</div><div class="line"><a name="l00243"></a><span class="lineno">  243</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> vid = find_vid(cell.<a class="code" href="classCell.html#a3af019707c56a0fb40fce2d370af8307">get_pointer_value</a>().<a class="code" href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">get</a>());</div><div class="line"><a name="l00244"></a><span class="lineno">  244</span>&#160;                   snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%d&quot;</span>, vid);</div><div class="line"><a name="l00245"></a><span class="lineno">  245</span>&#160;                   NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U6 &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00246"></a><span class="lineno">  246</span>&#160;                 }</div><div class="line"><a name="l00247"></a><span class="lineno">  247</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l00248"></a><span class="lineno">  248</span>&#160;</div><div class="line"><a name="l00249"></a><span class="lineno">  249</span>&#160;            <span class="keywordflow">case</span> CT_CELLREF:   <span class="comment">// uses UNI_PAD_U7</span></div><div class="line"><a name="l00250"></a><span class="lineno">  250</span>&#160;                 space -= leave_char_mode();</div><div class="line"><a name="l00251"></a><span class="lineno">  251</span>&#160;                 {</div><div class="line"><a name="l00252"></a><span class="lineno">  252</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classCell.html">Cell</a> * cp = cell.<a class="code" href="classCell.html#a87287b9b88b2ee6b92c11aadabe6d557">get_lval_value</a>();</div><div class="line"><a name="l00253"></a><span class="lineno">  253</span>&#160;                   <span class="keywordflow">if</span> (cp)   <span class="comment">// valid Cell *</span></div><div class="line"><a name="l00254"></a><span class="lineno">  254</span>&#160;                      {</div><div class="line"><a name="l00255"></a><span class="lineno">  255</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * owner = cell.<a class="code" href="classCell.html#a06ef9c7f3c6bda37c480412a2bca2e9b">cLvalCell</a>().<a class="code" href="classLvalCell.html#ab78f3147b19c684e4a02381fd857bc16">get_cell_owner</a>();</div><div class="line"><a name="l00256"></a><span class="lineno">  256</span>&#160;                        <span class="keyword">const</span> <span class="keywordtype">long</span> <span class="keywordtype">long</span> offset = owner-&gt;<a class="code" href="classValue.html#a0cc27364712e6ae2195b15ec54f516a2">get_offset</a>(cp);</div><div class="line"><a name="l00257"></a><span class="lineno">  257</span>&#160;                        <span class="keyword">const</span> <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> vid = find_vid(owner);</div><div class="line"><a name="l00258"></a><span class="lineno">  258</span>&#160;                        snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;%d[%lld]&quot;</span>, vid, offset);</div><div class="line"><a name="l00259"></a><span class="lineno">  259</span>&#160;                        NEED(1 + strlen(cc)) &lt;&lt; UNI_PAD_U7 &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00260"></a><span class="lineno">  260</span>&#160;                      }</div><div class="line"><a name="l00261"></a><span class="lineno">  261</span>&#160;                   <span class="keywordflow">else</span>     <span class="comment">// 0-cell-pointer</span></div><div class="line"><a name="l00262"></a><span class="lineno">  262</span>&#160;                      {</div><div class="line"><a name="l00263"></a><span class="lineno">  263</span>&#160;                        snprintf(cc, <span class="keyword">sizeof</span>(cc), <span class="stringliteral">&quot;0&quot;</span>);</div><div class="line"><a name="l00264"></a><span class="lineno">  264</span>&#160;                        NEED(2) &lt;&lt; UNI_PAD_U7 &lt;&lt; <span class="stringliteral">&quot;0&quot;</span> &lt;&lt; decr(--space, cc);</div><div class="line"><a name="l00265"></a><span class="lineno">  265</span>&#160;                      }</div><div class="line"><a name="l00266"></a><span class="lineno">  266</span>&#160;                 }</div><div class="line"><a name="l00267"></a><span class="lineno">  267</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l00268"></a><span class="lineno">  268</span>&#160;</div><div class="line"><a name="l00269"></a><span class="lineno">  269</span>&#160;            <span class="keywordflow">default</span>: Assert(0);</div><div class="line"><a name="l00270"></a><span class="lineno">  270</span>&#160;      }</div><div class="line"><a name="l00271"></a><span class="lineno">  271</span>&#160;}</div><div class="line"><a name="l00272"></a><span class="lineno">  272</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00273"></a><span class="lineno">  273</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00274"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a40ab403b1e7dd05196c9b36c8678a140">  274</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a40ab403b1e7dd05196c9b36c8678a140">XML_Saving_Archive::save_Function</a>(<span class="keyword">const</span> <a class="code" href="classFunction.html">Function</a> &amp; fun)</div><div class="line"><a name="l00275"></a><span class="lineno">  275</span>&#160;{</div><div class="line"><a name="l00276"></a><span class="lineno">  276</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> * eprops = fun.<a class="code" href="classFunction.html#a1e71e36e1f81d6963d1ebba0b67495b3">get_exec_properties</a>();</div><div class="line"><a name="l00277"></a><span class="lineno">  277</span>&#160;<span class="keyword">const</span> APL_time_us creation_time = fun.<a class="code" href="classFunction.html#a2ea41f5c122b8b9ad7a32b742b3ce4a0">get_creation_time</a>();</div><div class="line"><a name="l00278"></a><span class="lineno">  278</span>&#160;   do_indent();</div><div class="line"><a name="l00279"></a><span class="lineno">  279</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;Function creation-time=\&quot;&quot;</span> &lt;&lt; creation_time</div><div class="line"><a name="l00280"></a><span class="lineno">  280</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;\&quot; exec-properties=\&quot;&quot;</span></div><div class="line"><a name="l00281"></a><span class="lineno">  281</span>&#160;       &lt;&lt; eprops[0] &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; eprops[1] &lt;&lt; <span class="stringliteral">&quot;,&quot;</span></div><div class="line"><a name="l00282"></a><span class="lineno">  282</span>&#160;       &lt;&lt; eprops[2] &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; eprops[3] &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00283"></a><span class="lineno">  283</span>&#160;</div><div class="line"><a name="l00284"></a><span class="lineno">  284</span>&#160;   <span class="keywordflow">if</span> (fun.<a class="code" href="classFunction.html#ac4a44eddbd86c8278f240ec95c5f1553">is_native</a>())   out &lt;&lt; <span class="stringliteral">&quot; native=\&quot;1\&quot;&quot;</span>;</div><div class="line"><a name="l00285"></a><span class="lineno">  285</span>&#160;</div><div class="line"><a name="l00286"></a><span class="lineno">  286</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00287"></a><span class="lineno">  287</span>&#160;   ++indent;</div><div class="line"><a name="l00288"></a><span class="lineno">  288</span>&#160;</div><div class="line"><a name="l00289"></a><span class="lineno">  289</span>&#160;   save_UCS(fun.<a class="code" href="classFunction.html#a5d1ea5b6f6267431f7ca2773fa0955b9">canonical</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00290"></a><span class="lineno">  290</span>&#160;</div><div class="line"><a name="l00291"></a><span class="lineno">  291</span>&#160;   --indent;</div><div class="line"><a name="l00292"></a><span class="lineno">  292</span>&#160;   do_indent();</div><div class="line"><a name="l00293"></a><span class="lineno">  293</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/Function&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00294"></a><span class="lineno">  294</span>&#160;}</div><div class="line"><a name="l00295"></a><span class="lineno">  295</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00296"></a><span class="lineno">  296</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l00297"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a66cf20b8d9b8ada0838c506e4a2fd798">  297</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a66cf20b8d9b8ada0838c506e4a2fd798">XML_Saving_Archive::save_Function_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * ufun_prefix,</div><div class="line"><a name="l00298"></a><span class="lineno">  298</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">char</span> * level_prefix,</div><div class="line"><a name="l00299"></a><span class="lineno">  299</span>&#160;                                       <span class="keyword">const</span> <span class="keywordtype">char</span> * id_prefix,</div><div class="line"><a name="l00300"></a><span class="lineno">  300</span>&#160;                                       <span class="keyword">const</span> <a class="code" href="classFunction.html">Function</a> &amp; fun)</div><div class="line"><a name="l00301"></a><span class="lineno">  301</span>&#160;{</div><div class="line"><a name="l00302"></a><span class="lineno">  302</span>&#160;   <span class="keywordflow">if</span> (fun.<a class="code" href="classFunction.html#af2588ccbf97a2a9ad1a2169c04b63bf4">is_derived</a>())</div><div class="line"><a name="l00303"></a><span class="lineno">  303</span>&#160;      {</div><div class="line"><a name="l00304"></a><span class="lineno">  304</span>&#160;        CERR &lt;&lt; endl &lt;&lt;</div><div class="line"><a name="l00305"></a><span class="lineno">  305</span>&#160;<span class="stringliteral">&quot;WARNING: The )SI stack contains a derived function. )SAVEing a workspace in\n&quot;</span></div><div class="line"><a name="l00306"></a><span class="lineno">  306</span>&#160;<span class="stringliteral">&quot;         such a state is currently not supported and WILL cause problems\n&quot;</span></div><div class="line"><a name="l00307"></a><span class="lineno">  307</span>&#160;<span class="stringliteral">&quot;         when )LOADing the workspace. Please perform )SIC (or â) and then\n&quot;</span></div><div class="line"><a name="l00308"></a><span class="lineno">  308</span>&#160;<span class="stringliteral">&quot;         )SAVE this workspace again.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00309"></a><span class="lineno">  309</span>&#160;      }</div><div class="line"><a name="l00310"></a><span class="lineno">  310</span>&#160;</div><div class="line"><a name="l00311"></a><span class="lineno">  311</span>&#160;<span class="keyword">const</span> <a class="code" href="classUserFunction.html">UserFunction</a> * ufun = fun.<a class="code" href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">get_ufun1</a>();</div><div class="line"><a name="l00312"></a><span class="lineno">  312</span>&#160;   <span class="keywordflow">if</span> (ufun)   <span class="comment">// user defined function</span></div><div class="line"><a name="l00313"></a><span class="lineno">  313</span>&#160;      {</div><div class="line"><a name="l00314"></a><span class="lineno">  314</span>&#160;        <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; fname = ufun-&gt;<a class="code" href="classUserFunction.html#a59a4ca14c199edd678c1f10ba95e2f43">get_name</a>();</div><div class="line"><a name="l00315"></a><span class="lineno">  315</span>&#160;        <a class="code" href="classSymbol.html">Symbol</a> * sym = <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(fname);</div><div class="line"><a name="l00316"></a><span class="lineno">  316</span>&#160;        Assert(sym);</div><div class="line"><a name="l00317"></a><span class="lineno">  317</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> sym_depth = sym-&gt;<a class="code" href="classSymbol.html#a044ed60a7206b0375b538b286c2d1efe">get_ufun_depth</a>(ufun);</div><div class="line"><a name="l00318"></a><span class="lineno">  318</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; ufun_prefix &lt;&lt; <span class="stringliteral">&quot;-name=\&quot;&quot;</span>  &lt;&lt; fname     &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div><div class="line"><a name="l00319"></a><span class="lineno">  319</span>&#160;            &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; level_prefix &lt;&lt; <span class="stringliteral">&quot;-level=\&quot;&quot;</span> &lt;&lt; sym_depth &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00320"></a><span class="lineno">  320</span>&#160;        <span class="keywordflow">return</span> 2;   <span class="comment">// two attributes</span></div><div class="line"><a name="l00321"></a><span class="lineno">  321</span>&#160;      }</div><div class="line"><a name="l00322"></a><span class="lineno">  322</span>&#160;   <span class="keywordflow">else</span>        <span class="comment">// primitive or quad function</span></div><div class="line"><a name="l00323"></a><span class="lineno">  323</span>&#160;      {</div><div class="line"><a name="l00324"></a><span class="lineno">  324</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; id_prefix &lt;&lt; <span class="stringliteral">&quot;-id=\&quot;&quot;</span> &lt;&lt; HEX(fun.<a class="code" href="classNamedObject.html#a3ff29d3b8f3eed6c55f535e1af8dbc91">get_Id</a>());</div><div class="line"><a name="l00325"></a><span class="lineno">  325</span>&#160;        <span class="keywordflow">return</span> 1;   <span class="comment">// one attribute</span></div><div class="line"><a name="l00326"></a><span class="lineno">  326</span>&#160;      }</div><div class="line"><a name="l00327"></a><span class="lineno">  327</span>&#160;}</div><div class="line"><a name="l00328"></a><span class="lineno">  328</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00329"></a><span class="lineno">  329</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00330"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#af9d935a599af0ad9cfba39555312899e">  330</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#af9d935a599af0ad9cfba39555312899e">XML_Saving_Archive::save_Parser</a>(<span class="keyword">const</span> <a class="code" href="classPrefix.html">Prefix</a> &amp; prefix)</div><div class="line"><a name="l00331"></a><span class="lineno">  331</span>&#160;{</div><div class="line"><a name="l00332"></a><span class="lineno">  332</span>&#160;   do_indent();</div><div class="line"><a name="l00333"></a><span class="lineno">  333</span>&#160;    out &lt;&lt; <span class="stringliteral">&quot;&lt;Parser size=\&quot;&quot;</span>      &lt;&lt; prefix.<a class="code" href="classPrefix.html#a07a35c8b69a8c9f685225e2a2586a2fd">size</a>()</div><div class="line"><a name="l00334"></a><span class="lineno">  334</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;\&quot; assign-pending=\&quot;&quot;</span> &lt;&lt; prefix.<a class="code" href="classPrefix.html#afdd4d7c0aa09d4bc4c9d8588d3872bd6">get_assign_state</a>()</div><div class="line"><a name="l00335"></a><span class="lineno">  335</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;\&quot; action=\&quot;&quot;</span>         &lt;&lt; prefix.<a class="code" href="classPrefix.html#abbfeb353dfb63b9e7701625f7e8da2c0">action</a></div><div class="line"><a name="l00336"></a><span class="lineno">  336</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;\&quot; lookahead-high=\&quot;&quot;</span> &lt;&lt; prefix.<a class="code" href="classPrefix.html#ab2d9dce194de98e40b6f1bbec063be71">get_lookahead_high</a>()</div><div class="line"><a name="l00337"></a><span class="lineno">  337</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00338"></a><span class="lineno">  338</span>&#160;</div><div class="line"><a name="l00339"></a><span class="lineno">  339</span>&#160;   <span class="comment">// write the lookahead token, starting at the fifo&#39;s get position</span></div><div class="line"><a name="l00340"></a><span class="lineno">  340</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00341"></a><span class="lineno">  341</span>&#160;   ++indent;</div><div class="line"><a name="l00342"></a><span class="lineno">  342</span>&#160;   loop(s, prefix.<a class="code" href="classPrefix.html#a07a35c8b69a8c9f685225e2a2586a2fd">size</a>())</div><div class="line"><a name="l00343"></a><span class="lineno">  343</span>&#160;      {</div><div class="line"><a name="l00344"></a><span class="lineno">  344</span>&#160;        <span class="keyword">const</span> <a class="code" href="structToken__loc.html">Token_loc</a> &amp; tloc = prefix.<a class="code" href="classPrefix.html#a32e238464846f32c7954f72feb3a473b">at</a>(prefix.<a class="code" href="classPrefix.html#a07a35c8b69a8c9f685225e2a2586a2fd">size</a>() - s - 1);</div><div class="line"><a name="l00345"></a><span class="lineno">  345</span>&#160;        save_token_loc(tloc);</div><div class="line"><a name="l00346"></a><span class="lineno">  346</span>&#160;      }</div><div class="line"><a name="l00347"></a><span class="lineno">  347</span>&#160;   save_token_loc(prefix.<a class="code" href="classPrefix.html#a67b7ab1b67761fb4901127f89def43fc">saved_lookahead</a>);</div><div class="line"><a name="l00348"></a><span class="lineno">  348</span>&#160;   --indent;</div><div class="line"><a name="l00349"></a><span class="lineno">  349</span>&#160;</div><div class="line"><a name="l00350"></a><span class="lineno">  350</span>&#160;</div><div class="line"><a name="l00351"></a><span class="lineno">  351</span>&#160;   do_indent();</div><div class="line"><a name="l00352"></a><span class="lineno">  352</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/Parser&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00353"></a><span class="lineno">  353</span>&#160;}</div><div class="line"><a name="l00354"></a><span class="lineno">  354</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00355"></a><span class="lineno">  355</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00356"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a92142d2fec9d5a49667566e0bb86f55c">  356</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a92142d2fec9d5a49667566e0bb86f55c">XML_Saving_Archive::save_symtab</a>(<span class="keyword">const</span> <a class="code" href="classSymbolTable.html">SymbolTable</a> &amp; symtab)</div><div class="line"><a name="l00357"></a><span class="lineno">  357</span>&#160;{</div><div class="line"><a name="l00358"></a><span class="lineno">  358</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save_symtab()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00359"></a><span class="lineno">  359</span>&#160;</div><div class="line"><a name="l00360"></a><span class="lineno">  360</span>&#160;std::vector&lt;const Symbol *&gt; symbols = symtab.<a class="code" href="classSymbolTable.html#a96e1d725bb82c9c25d33d444bfb1cb2d">get_all_symbols</a>();</div><div class="line"><a name="l00361"></a><span class="lineno">  361</span>&#160;</div><div class="line"><a name="l00362"></a><span class="lineno">  362</span>&#160;   <span class="comment">// remove erased symbols</span></div><div class="line"><a name="l00363"></a><span class="lineno">  363</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00364"></a><span class="lineno">  364</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> s = 0; s &lt; symbols.size();)</div><div class="line"><a name="l00365"></a><span class="lineno">  365</span>&#160;      {</div><div class="line"><a name="l00366"></a><span class="lineno">  366</span>&#160;        <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a> * sym = symbols[s];</div><div class="line"><a name="l00367"></a><span class="lineno">  367</span>&#160;        <span class="keywordflow">if</span> (sym-&gt;<a class="code" href="classSymbol.html#a34b203a4879ba48c148f0c271cd029a2">is_erased</a>())</div><div class="line"><a name="l00368"></a><span class="lineno">  368</span>&#160;            {</div><div class="line"><a name="l00369"></a><span class="lineno">  369</span>&#160;              symbols[s] = symbols.back();</div><div class="line"><a name="l00370"></a><span class="lineno">  370</span>&#160;              symbols.pop_back();</div><div class="line"><a name="l00371"></a><span class="lineno">  371</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l00372"></a><span class="lineno">  372</span>&#160;            }</div><div class="line"><a name="l00373"></a><span class="lineno">  373</span>&#160;</div><div class="line"><a name="l00374"></a><span class="lineno">  374</span>&#160;        ++s;</div><div class="line"><a name="l00375"></a><span class="lineno">  375</span>&#160;      }</div><div class="line"><a name="l00376"></a><span class="lineno">  376</span>&#160;</div><div class="line"><a name="l00377"></a><span class="lineno">  377</span>&#160;   do_indent();</div><div class="line"><a name="l00378"></a><span class="lineno">  378</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;SymbolTable size=\&quot;&quot;</span> &lt;&lt; symbols.size() &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00379"></a><span class="lineno">  379</span>&#160;</div><div class="line"><a name="l00380"></a><span class="lineno">  380</span>&#160;   ++indent;</div><div class="line"><a name="l00381"></a><span class="lineno">  381</span>&#160;</div><div class="line"><a name="l00382"></a><span class="lineno">  382</span>&#160;   <span class="keywordflow">while</span> (symbols.size() &gt; 0)</div><div class="line"><a name="l00383"></a><span class="lineno">  383</span>&#160;      {</div><div class="line"><a name="l00384"></a><span class="lineno">  384</span>&#160;        <span class="comment">// set idx to the alphabetically smallest name</span></div><div class="line"><a name="l00385"></a><span class="lineno">  385</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l00386"></a><span class="lineno">  386</span>&#160;        <span class="keywordtype">int</span> idx = 0;</div><div class="line"><a name="l00387"></a><span class="lineno">  387</span>&#160;        <span class="keywordflow">for</span> (<span class="keywordtype">size_t</span> i = 1; i &lt; symbols.size(); ++i)</div><div class="line"><a name="l00388"></a><span class="lineno">  388</span>&#160;            {</div><div class="line"><a name="l00389"></a><span class="lineno">  389</span>&#160;              <span class="keywordflow">if</span> (symbols[idx]-&gt;compare(*symbols[i]) &gt; 0)   idx = i;</div><div class="line"><a name="l00390"></a><span class="lineno">  390</span>&#160;            }</div><div class="line"><a name="l00391"></a><span class="lineno">  391</span>&#160;</div><div class="line"><a name="l00392"></a><span class="lineno">  392</span>&#160;        <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a> * sym = symbols[idx];</div><div class="line"><a name="l00393"></a><span class="lineno">  393</span>&#160;        save_Symbol(*sym);</div><div class="line"><a name="l00394"></a><span class="lineno">  394</span>&#160;</div><div class="line"><a name="l00395"></a><span class="lineno">  395</span>&#160;        symbols[idx] = symbols.back();</div><div class="line"><a name="l00396"></a><span class="lineno">  396</span>&#160;        symbols.pop_back();</div><div class="line"><a name="l00397"></a><span class="lineno">  397</span>&#160;      }</div><div class="line"><a name="l00398"></a><span class="lineno">  398</span>&#160;</div><div class="line"><a name="l00399"></a><span class="lineno">  399</span>&#160;   --indent;</div><div class="line"><a name="l00400"></a><span class="lineno">  400</span>&#160;</div><div class="line"><a name="l00401"></a><span class="lineno">  401</span>&#160;   do_indent();</div><div class="line"><a name="l00402"></a><span class="lineno">  402</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/SymbolTable&gt;&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"><a name="l00403"></a><span class="lineno">  403</span>&#160;}</div><div class="line"><a name="l00404"></a><span class="lineno">  404</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00405"></a><span class="lineno">  405</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00406"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a3bc62d82baa6be004398f70faa1b3e8b">  406</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a3bc62d82baa6be004398f70faa1b3e8b">XML_Saving_Archive::save_SI_entry</a>(<span class="keyword">const</span> <a class="code" href="classStateIndicator.html">StateIndicator</a> &amp; si)</div><div class="line"><a name="l00407"></a><span class="lineno">  407</span>&#160;{</div><div class="line"><a name="l00408"></a><span class="lineno">  408</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save_SI_entry()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00409"></a><span class="lineno">  409</span>&#160;</div><div class="line"><a name="l00410"></a><span class="lineno">  410</span>&#160;<span class="keyword">const</span> <a class="code" href="classExecutable.html">Executable</a> &amp; exec = *si.<a class="code" href="classStateIndicator.html#a8923e217fa9bf331dd84cc15487dd177">get_executable</a>();</div><div class="line"><a name="l00411"></a><span class="lineno">  411</span>&#160;</div><div class="line"><a name="l00412"></a><span class="lineno">  412</span>&#160;   do_indent();</div><div class="line"><a name="l00413"></a><span class="lineno">  413</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;SI-entry level=\&quot;&quot;</span> &lt;&lt; si.<a class="code" href="classStateIndicator.html#aa60ca9df0350c7b2e4c0825f061f300e">get_level</a>()</div><div class="line"><a name="l00414"></a><span class="lineno">  414</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;\&quot; pc=\&quot;&quot;</span> &lt;&lt; si.<a class="code" href="classStateIndicator.html#a93fdf9b10d3c4253c3d79e018c799fcb">get_PC</a>()</div><div class="line"><a name="l00415"></a><span class="lineno">  415</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;\&quot; line=\&quot;&quot;</span> &lt;&lt; exec.<a class="code" href="classExecutable.html#acc35b347a5624e399f271c27778a2dbb">get_line</a>(si.<a class="code" href="classStateIndicator.html#a93fdf9b10d3c4253c3d79e018c799fcb">get_PC</a>()) &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span></div><div class="line"><a name="l00416"></a><span class="lineno">  416</span>&#160;       &lt;&lt;<span class="stringliteral">&quot;&gt;&quot;</span> &lt;&lt; endl &lt;&lt; flush;</div><div class="line"><a name="l00417"></a><span class="lineno">  417</span>&#160;</div><div class="line"><a name="l00418"></a><span class="lineno">  418</span>&#160;   ++indent;</div><div class="line"><a name="l00419"></a><span class="lineno">  419</span>&#160;   do_indent();</div><div class="line"><a name="l00420"></a><span class="lineno">  420</span>&#160;   <span class="keywordflow">switch</span>(exec.<a class="code" href="classExecutable.html#a02b3dd7f7dbb3c3e099e3ab553034baa">get_parse_mode</a>())</div><div class="line"><a name="l00421"></a><span class="lineno">  421</span>&#160;      {</div><div class="line"><a name="l00422"></a><span class="lineno">  422</span>&#160;        <span class="keywordflow">case</span> PM_FUNCTION:</div><div class="line"><a name="l00423"></a><span class="lineno">  423</span>&#160;             {</div><div class="line"><a name="l00424"></a><span class="lineno">  424</span>&#160;               <a class="code" href="classSymbol.html">Symbol</a> * sym = <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(exec.<a class="code" href="classExecutable.html#a57c1ce1db5bf5710338d1b9cf84a6dfd">get_name</a>());</div><div class="line"><a name="l00425"></a><span class="lineno">  425</span>&#160;               Assert(sym);</div><div class="line"><a name="l00426"></a><span class="lineno">  426</span>&#160;               <span class="keyword">const</span> <a class="code" href="classUserFunction.html">UserFunction</a> * ufun = exec.<a class="code" href="classExecutable.html#a420233b14fb8b368f6205540bd290cb9">get_ufun</a>();</div><div class="line"><a name="l00427"></a><span class="lineno">  427</span>&#160;               Assert(ufun);</div><div class="line"><a name="l00428"></a><span class="lineno">  428</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">int</span> sym_depth = sym-&gt;<a class="code" href="classSymbol.html#a044ed60a7206b0375b538b286c2d1efe">get_ufun_depth</a>(ufun);</div><div class="line"><a name="l00429"></a><span class="lineno">  429</span>&#160;</div><div class="line"><a name="l00430"></a><span class="lineno">  430</span>&#160;               <span class="keywordflow">if</span> (ufun-&gt;<a class="code" href="classFunction.html#a735c9e2d01eda71ddece9dc3c527b7b2">is_macro</a>())</div><div class="line"><a name="l00431"></a><span class="lineno">  431</span>&#160;                  out &lt;&lt; <span class="stringliteral">&quot;&lt;UserFunction macro-num=\&quot;&quot;</span> &lt;&lt; ufun-&gt;<a class="code" href="classUserFunction.html#ac2cf5908480af0d1d0cd4cd6dccd5bd2">get_macnum</a>()</div><div class="line"><a name="l00432"></a><span class="lineno">  432</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00433"></a><span class="lineno">  433</span>&#160;               <span class="keywordflow">else</span> <span class="keywordflow">if</span> (ufun-&gt;<a class="code" href="classUserFunction.html#ac4673156caea5cc5c006a58bee8f9d25">is_lambda</a>())</div><div class="line"><a name="l00434"></a><span class="lineno">  434</span>&#160;                  {</div><div class="line"><a name="l00435"></a><span class="lineno">  435</span>&#160;                    out &lt;&lt; <span class="stringliteral">&quot;&lt;UserFunction lambda-name=\&quot;&quot;</span> &lt;&lt; ufun-&gt;<a class="code" href="classUserFunction.html#a59a4ca14c199edd678c1f10ba95e2f43">get_name</a>()</div><div class="line"><a name="l00436"></a><span class="lineno">  436</span>&#160;                        &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00437"></a><span class="lineno">  437</span>&#160;                    ++indent;</div><div class="line"><a name="l00438"></a><span class="lineno">  438</span>&#160;                    save_UCS(ufun-&gt;<a class="code" href="classUserFunction.html#a33987249eae73499f4213d3c63a101ec">canonical</a>(<span class="keyword">false</span>));</div><div class="line"><a name="l00439"></a><span class="lineno">  439</span>&#160;                    --indent;</div><div class="line"><a name="l00440"></a><span class="lineno">  440</span>&#160;                    do_indent();</div><div class="line"><a name="l00441"></a><span class="lineno">  441</span>&#160;                    out &lt;&lt; <span class="stringliteral">&quot;&lt;/UserFunction&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00442"></a><span class="lineno">  442</span>&#160;                  }</div><div class="line"><a name="l00443"></a><span class="lineno">  443</span>&#160;               <span class="keywordflow">else</span></div><div class="line"><a name="l00444"></a><span class="lineno">  444</span>&#160;                  out &lt;&lt; <span class="stringliteral">&quot;&lt;UserFunction ufun-name=\&quot;&quot;</span> &lt;&lt; sym-&gt;<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>()</div><div class="line"><a name="l00445"></a><span class="lineno">  445</span>&#160;                      &lt;&lt; <span class="stringliteral">&quot;\&quot; symbol-level=\&quot;&quot;</span> &lt;&lt; sym_depth &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00446"></a><span class="lineno">  446</span>&#160;             }</div><div class="line"><a name="l00447"></a><span class="lineno">  447</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00448"></a><span class="lineno">  448</span>&#160;</div><div class="line"><a name="l00449"></a><span class="lineno">  449</span>&#160;        <span class="keywordflow">case</span> PM_STATEMENT_LIST:</div><div class="line"><a name="l00450"></a><span class="lineno">  450</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;Statements&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00451"></a><span class="lineno">  451</span>&#160;             ++indent;</div><div class="line"><a name="l00452"></a><span class="lineno">  452</span>&#160;             save_UCS(exec.<a class="code" href="classExecutable.html#a426a4201fb401213c4e13b3f27d35284">get_text</a>(0));</div><div class="line"><a name="l00453"></a><span class="lineno">  453</span>&#160;             --indent;</div><div class="line"><a name="l00454"></a><span class="lineno">  454</span>&#160;             do_indent();</div><div class="line"><a name="l00455"></a><span class="lineno">  455</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;/Statements&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00456"></a><span class="lineno">  456</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l00457"></a><span class="lineno">  457</span>&#160;</div><div class="line"><a name="l00458"></a><span class="lineno">  458</span>&#160;        <span class="keywordflow">case</span> PM_EXECUTE:</div><div class="line"><a name="l00459"></a><span class="lineno">  459</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;Execute&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00460"></a><span class="lineno">  460</span>&#160;             ++indent;</div><div class="line"><a name="l00461"></a><span class="lineno">  461</span>&#160;             save_UCS(exec.<a class="code" href="classExecutable.html#a426a4201fb401213c4e13b3f27d35284">get_text</a>(0));</div><div class="line"><a name="l00462"></a><span class="lineno">  462</span>&#160;             --indent;</div><div class="line"><a name="l00463"></a><span class="lineno">  463</span>&#160;             do_indent();</div><div class="line"><a name="l00464"></a><span class="lineno">  464</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;/Execute&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00465"></a><span class="lineno">  465</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00466"></a><span class="lineno">  466</span>&#160;</div><div class="line"><a name="l00467"></a><span class="lineno">  467</span>&#160;          <span class="keywordflow">default</span>: FIXME;</div><div class="line"><a name="l00468"></a><span class="lineno">  468</span>&#160;      }</div><div class="line"><a name="l00469"></a><span class="lineno">  469</span>&#160;</div><div class="line"><a name="l00470"></a><span class="lineno">  470</span>&#160;   <span class="comment">// print the parser states...</span></div><div class="line"><a name="l00471"></a><span class="lineno">  471</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00472"></a><span class="lineno">  472</span>&#160;   save_Parser(si.<a class="code" href="classStateIndicator.html#a4c2ceda2ab0c6a27b906f268e2ae229c">current_stack</a>);</div><div class="line"><a name="l00473"></a><span class="lineno">  473</span>&#160;</div><div class="line"><a name="l00474"></a><span class="lineno">  474</span>&#160;   --indent;</div><div class="line"><a name="l00475"></a><span class="lineno">  475</span>&#160;</div><div class="line"><a name="l00476"></a><span class="lineno">  476</span>&#160;   do_indent();</div><div class="line"><a name="l00477"></a><span class="lineno">  477</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/SI-entry&gt;&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"><a name="l00478"></a><span class="lineno">  478</span>&#160;}</div><div class="line"><a name="l00479"></a><span class="lineno">  479</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00480"></a><span class="lineno">  480</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00481"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a1019a371e3f70c855f8af07d42f49c7c">  481</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a1019a371e3f70c855f8af07d42f49c7c">XML_Saving_Archive::save_Symbol</a>(<span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a> &amp; sym)</div><div class="line"><a name="l00482"></a><span class="lineno">  482</span>&#160;{</div><div class="line"><a name="l00483"></a><span class="lineno">  483</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save_Symbol(Vid &quot;</span></div><div class="line"><a name="l00484"></a><span class="lineno">  484</span>&#160;                           &lt;&lt; sym.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>() &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00485"></a><span class="lineno">  485</span>&#160;</div><div class="line"><a name="l00486"></a><span class="lineno">  486</span>&#160;   do_indent();</div><div class="line"><a name="l00487"></a><span class="lineno">  487</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;Symbol name=\&quot;&quot;</span> &lt;&lt; sym.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot; stack-size=\&quot;&quot;</span></div><div class="line"><a name="l00488"></a><span class="lineno">  488</span>&#160;       &lt;&lt; sym.<a class="code" href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">value_stack_size</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00489"></a><span class="lineno">  489</span>&#160;</div><div class="line"><a name="l00490"></a><span class="lineno">  490</span>&#160;   ++indent;</div><div class="line"><a name="l00491"></a><span class="lineno">  491</span>&#160;   loop(v, sym.<a class="code" href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">value_stack_size</a>())  save_vstack_item(sym[v]);</div><div class="line"><a name="l00492"></a><span class="lineno">  492</span>&#160;   --indent;</div><div class="line"><a name="l00493"></a><span class="lineno">  493</span>&#160;</div><div class="line"><a name="l00494"></a><span class="lineno">  494</span>&#160;   do_indent();</div><div class="line"><a name="l00495"></a><span class="lineno">  495</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/Symbol&gt;&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"><a name="l00496"></a><span class="lineno">  496</span>&#160;}</div><div class="line"><a name="l00497"></a><span class="lineno">  497</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00498"></a><span class="lineno">  498</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00499"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a0892b3f304e6f3bd5f940b882dd8318b">  499</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a0892b3f304e6f3bd5f940b882dd8318b">XML_Saving_Archive::save_user_commands</a>(</div><div class="line"><a name="l00500"></a><span class="lineno">  500</span>&#160;               <span class="keyword">const</span> std::vector&lt;Command::user_command&gt; &amp; cmds)</div><div class="line"><a name="l00501"></a><span class="lineno">  501</span>&#160;{</div><div class="line"><a name="l00502"></a><span class="lineno">  502</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save_user_commands()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00503"></a><span class="lineno">  503</span>&#160;   <span class="keywordflow">if</span> (cmds.size() == 0)   <span class="keywordflow">return</span>;</div><div class="line"><a name="l00504"></a><span class="lineno">  504</span>&#160;</div><div class="line"><a name="l00505"></a><span class="lineno">  505</span>&#160;   do_indent();</div><div class="line"><a name="l00506"></a><span class="lineno">  506</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;Commands size=\&quot;&quot;</span> &lt;&lt; cmds.size() &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00507"></a><span class="lineno">  507</span>&#160;</div><div class="line"><a name="l00508"></a><span class="lineno">  508</span>&#160;   ++indent;</div><div class="line"><a name="l00509"></a><span class="lineno">  509</span>&#160;   loop(u, cmds.size())</div><div class="line"><a name="l00510"></a><span class="lineno">  510</span>&#160;      {</div><div class="line"><a name="l00511"></a><span class="lineno">  511</span>&#160;        <span class="keyword">const</span> <a class="code" href="structCommand_1_1user__command.html">Command::user_command</a> &amp; ucmd = cmds[u];</div><div class="line"><a name="l00512"></a><span class="lineno">  512</span>&#160;        do_indent();</div><div class="line"><a name="l00513"></a><span class="lineno">  513</span>&#160;        out &lt;&lt; <span class="stringliteral">&quot;&lt;Command name=\&quot;&quot;</span> &lt;&lt; ucmd.<a class="code" href="structCommand_1_1user__command.html#a464103ea3f5203247f3bedeace167ed4">prefix</a></div><div class="line"><a name="l00514"></a><span class="lineno">  514</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;\&quot; mode=\&quot;&quot;</span> &lt;&lt; ucmd.<a class="code" href="structCommand_1_1user__command.html#a81974e387324da0e19443e8ea5cc26c7">mode</a></div><div class="line"><a name="l00515"></a><span class="lineno">  515</span>&#160;            &lt;&lt; <span class="stringliteral">&quot;\&quot; fun=\&quot;&quot;</span> &lt;&lt;  ucmd.<a class="code" href="structCommand_1_1user__command.html#a029fa3ff3d4761a800781dc976ce9f46">apl_function</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00516"></a><span class="lineno">  516</span>&#160;      }</div><div class="line"><a name="l00517"></a><span class="lineno">  517</span>&#160;</div><div class="line"><a name="l00518"></a><span class="lineno">  518</span>&#160;   --indent;</div><div class="line"><a name="l00519"></a><span class="lineno">  519</span>&#160;   do_indent();</div><div class="line"><a name="l00520"></a><span class="lineno">  520</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/Commands&gt;&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"><a name="l00521"></a><span class="lineno">  521</span>&#160;}</div><div class="line"><a name="l00522"></a><span class="lineno">  522</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00523"></a><span class="lineno">  523</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00524"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a2595cc03a54882176e3d9bddd9bbff60">  524</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a2595cc03a54882176e3d9bddd9bbff60">XML_Saving_Archive::save_token_loc</a>(<span class="keyword">const</span> <a class="code" href="structToken__loc.html">Token_loc</a> &amp; tloc)</div><div class="line"><a name="l00525"></a><span class="lineno">  525</span>&#160;{</div><div class="line"><a name="l00526"></a><span class="lineno">  526</span>&#160;   do_indent();</div><div class="line"><a name="l00527"></a><span class="lineno">  527</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;Token pc=\&quot;&quot;</span> &lt;&lt; tloc.<a class="code" href="structToken__loc.html#a511eae32c6a6c064243c8c6f0ac6dc54">pc</a></div><div class="line"><a name="l00528"></a><span class="lineno">  528</span>&#160;       &lt;&lt; <span class="stringliteral">&quot;\&quot; tag=\&quot;&quot;</span> &lt;&lt; HEX(tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>.<a class="code" href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">get_tag</a>()) &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00529"></a><span class="lineno">  529</span>&#160;   emit_token_val(tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>);</div><div class="line"><a name="l00530"></a><span class="lineno">  530</span>&#160;</div><div class="line"><a name="l00531"></a><span class="lineno">  531</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00532"></a><span class="lineno">  532</span>&#160;}</div><div class="line"><a name="l00533"></a><span class="lineno">  533</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00534"></a><span class="lineno">  534</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00535"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a7be3cd4709e0783821a20738ee44433f">  535</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a7be3cd4709e0783821a20738ee44433f">XML_Saving_Archive::emit_token_val</a>(<span class="keyword">const</span> <a class="code" href="classToken.html">Token</a> &amp; tok)</div><div class="line"><a name="l00536"></a><span class="lineno">  536</span>&#160;{</div><div class="line"><a name="l00537"></a><span class="lineno">  537</span>&#160;   <span class="keywordflow">switch</span>(tok.<a class="code" href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">get_ValueType</a>())</div><div class="line"><a name="l00538"></a><span class="lineno">  538</span>&#160;      {</div><div class="line"><a name="l00539"></a><span class="lineno">  539</span>&#160;        <span class="keywordflow">case</span> TV_NONE:  <span class="keywordflow">break</span>;</div><div class="line"><a name="l00540"></a><span class="lineno">  540</span>&#160;</div><div class="line"><a name="l00541"></a><span class="lineno">  541</span>&#160;        <span class="keywordflow">case</span> TV_CHAR:  Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_SYM Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00542"></a><span class="lineno">  542</span>&#160;                       out &lt;&lt; <span class="stringliteral">&quot; char=\&quot;&quot;</span> &lt;&lt; int(tok.<a class="code" href="classToken.html#aaeae570a5fa2e6a83ca2b824c6013ef9">get_char_val</a>()) &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00543"></a><span class="lineno">  543</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00544"></a><span class="lineno">  544</span>&#160;</div><div class="line"><a name="l00545"></a><span class="lineno">  545</span>&#160;        <span class="keywordflow">case</span> TV_INT:   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_INT Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00546"></a><span class="lineno">  546</span>&#160;                       out &lt;&lt; <span class="stringliteral">&quot; int=\&quot;&quot;</span> &lt;&lt; tok.<a class="code" href="classToken.html#a9721c23968d7272edd1abae91ba77193">get_int_val</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00547"></a><span class="lineno">  547</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00548"></a><span class="lineno">  548</span>&#160;</div><div class="line"><a name="l00549"></a><span class="lineno">  549</span>&#160;        <span class="keywordflow">case</span> TV_FLT:   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_FLT Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00550"></a><span class="lineno">  550</span>&#160;                       out &lt;&lt; <span class="stringliteral">&quot; float=\&quot;&quot;</span> &lt;&lt; tok.<a class="code" href="classToken.html#abbcd765b2cb1c9da24d762ca451eefa4">get_flt_val</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00551"></a><span class="lineno">  551</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00552"></a><span class="lineno">  552</span>&#160;</div><div class="line"><a name="l00553"></a><span class="lineno">  553</span>&#160;        <span class="keywordflow">case</span> TV_CPX:   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_CPX Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00554"></a><span class="lineno">  554</span>&#160;                       out &lt;&lt; <span class="stringliteral">&quot; real=\&quot;&quot;</span> &lt;&lt; tok.<a class="code" href="classToken.html#a2a53219afbfd9ec64b5dd449c225ed68">get_cpx_real</a>()</div><div class="line"><a name="l00555"></a><span class="lineno">  555</span>&#160;                           &lt;&lt; <span class="stringliteral">&quot;\&quot; imag=\&quot;&quot;</span> &lt;&lt; tok.<a class="code" href="classToken.html#a74ebddaf8dce2b11c59cddfb61594816">get_cpx_imag</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00556"></a><span class="lineno">  556</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00557"></a><span class="lineno">  557</span>&#160;</div><div class="line"><a name="l00558"></a><span class="lineno">  558</span>&#160;        <span class="keywordflow">case</span> TV_SYM:   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_SYM Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00559"></a><span class="lineno">  559</span>&#160;                       {</div><div class="line"><a name="l00560"></a><span class="lineno">  560</span>&#160;                         <a class="code" href="classSymbol.html">Symbol</a> * sym = tok.<a class="code" href="classToken.html#aa92af5604449cd8c22b35297f07d5b9d">get_sym_ptr</a>();</div><div class="line"><a name="l00561"></a><span class="lineno">  561</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> name = sym-&gt;<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>();</div><div class="line"><a name="l00562"></a><span class="lineno">  562</span>&#160;                         out &lt;&lt; <span class="stringliteral">&quot; sym=\&quot;&quot;</span> &lt;&lt; name &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00563"></a><span class="lineno">  563</span>&#160;                       }</div><div class="line"><a name="l00564"></a><span class="lineno">  564</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00565"></a><span class="lineno">  565</span>&#160;</div><div class="line"><a name="l00566"></a><span class="lineno">  566</span>&#160;        <span class="keywordflow">case</span> TV_LIN:   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_LIN Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00567"></a><span class="lineno">  567</span>&#160;                       out &lt;&lt; <span class="stringliteral">&quot; line=\&quot;&quot;</span> &lt;&lt; tok.<a class="code" href="classToken.html#a785302e067658aeeeb65a45815b9d9da">get_fun_line</a>() &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00568"></a><span class="lineno">  568</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00569"></a><span class="lineno">  569</span>&#160;</div><div class="line"><a name="l00570"></a><span class="lineno">  570</span>&#160;        <span class="keywordflow">case</span> TV_VAL:   {</div><div class="line"><a name="l00571"></a><span class="lineno">  571</span>&#160;                         Log(LOG_archive)</div><div class="line"><a name="l00572"></a><span class="lineno">  572</span>&#160;                            CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_VAL Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00573"></a><span class="lineno">  573</span>&#160;</div><div class="line"><a name="l00574"></a><span class="lineno">  574</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> vid = find_vid(tok.<a class="code" href="classToken.html#a205e0b499e06999ff91c272ff28c9013">get_apl_val</a>().<a class="code" href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">get</a>());</div><div class="line"><a name="l00575"></a><span class="lineno">  575</span>&#160;                         out &lt;&lt; <span class="stringliteral">&quot; vid=\&quot;&quot;</span> &lt;&lt; vid &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00576"></a><span class="lineno">  576</span>&#160;                       }</div><div class="line"><a name="l00577"></a><span class="lineno">  577</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00578"></a><span class="lineno">  578</span>&#160;</div><div class="line"><a name="l00579"></a><span class="lineno">  579</span>&#160;        <span class="keywordflow">case</span> TV_INDEX: {</div><div class="line"><a name="l00580"></a><span class="lineno">  580</span>&#160;                         Log(LOG_archive)</div><div class="line"><a name="l00581"></a><span class="lineno">  581</span>&#160;                            CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_INDEX Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00582"></a><span class="lineno">  582</span>&#160;                         <span class="keyword">const</span> <a class="code" href="classIndexExpr.html">IndexExpr</a> &amp; idx = tok.<a class="code" href="classToken.html#a218560fb5b8bb15e75a3f7e907115e07">get_index_val</a>();</div><div class="line"><a name="l00583"></a><span class="lineno">  583</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">int</span> rank = idx.<a class="code" href="classIndexExpr.html#a7cb8dc69ee2b77d786296d674f459f46">value_count</a>();</div><div class="line"><a name="l00584"></a><span class="lineno">  584</span>&#160;                         out &lt;&lt; <span class="stringliteral">&quot; index=\&quot;&quot;</span>;</div><div class="line"><a name="l00585"></a><span class="lineno">  585</span>&#160;                         loop(i, rank)</div><div class="line"><a name="l00586"></a><span class="lineno">  586</span>&#160;                             {</div><div class="line"><a name="l00587"></a><span class="lineno">  587</span>&#160;                               <span class="keywordflow">if</span> (i)   out &lt;&lt; <span class="stringliteral">&quot;,&quot;</span>;</div><div class="line"><a name="l00588"></a><span class="lineno">  588</span>&#160;                               <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * val = idx.<a class="code" href="classIndexExpr.html#a2b6175a58b688ad2f64b6bbafdda67c6">values</a>[i].<a class="code" href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">get</a>();</div><div class="line"><a name="l00589"></a><span class="lineno">  589</span>&#160;                               <span class="keywordflow">if</span> (val)   out &lt;&lt; <span class="stringliteral">&quot;vid_&quot;</span> &lt;&lt; find_vid(val);</div><div class="line"><a name="l00590"></a><span class="lineno">  590</span>&#160;                               <span class="keywordflow">else</span>       out &lt;&lt; <span class="stringliteral">&quot;-&quot;</span>;</div><div class="line"><a name="l00591"></a><span class="lineno">  591</span>&#160;                                out &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00592"></a><span class="lineno">  592</span>&#160;                             }</div><div class="line"><a name="l00593"></a><span class="lineno">  593</span>&#160;                       }</div><div class="line"><a name="l00594"></a><span class="lineno">  594</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00595"></a><span class="lineno">  595</span>&#160;</div><div class="line"><a name="l00596"></a><span class="lineno">  596</span>&#160;        <span class="keywordflow">case</span> TV_FUN:   {</div><div class="line"><a name="l00597"></a><span class="lineno">  597</span>&#160;                         Log(LOG_archive)</div><div class="line"><a name="l00598"></a><span class="lineno">  598</span>&#160;                            CERR &lt;&lt; <span class="stringliteral">&quot;Saving TV_FUN Token&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00599"></a><span class="lineno">  599</span>&#160;</div><div class="line"><a name="l00600"></a><span class="lineno">  600</span>&#160;                         <a class="code" href="classFunction.html">Function</a> * fun = tok.<a class="code" href="classToken.html#af613f4df5fa00a0c8fa4de162284171c">get_function</a>();</div><div class="line"><a name="l00601"></a><span class="lineno">  601</span>&#160;                         Assert1(fun);</div><div class="line"><a name="l00602"></a><span class="lineno">  602</span>&#160;                         save_Function_name(<span class="stringliteral">&quot;ufun&quot;</span>, <span class="stringliteral">&quot;symbol&quot;</span>, <span class="stringliteral">&quot;fun&quot;</span>, *fun);</div><div class="line"><a name="l00603"></a><span class="lineno">  603</span>&#160;                       }</div><div class="line"><a name="l00604"></a><span class="lineno">  604</span>&#160;                       out &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span>;</div><div class="line"><a name="l00605"></a><span class="lineno">  605</span>&#160;                       <span class="keywordflow">break</span>;</div><div class="line"><a name="l00606"></a><span class="lineno">  606</span>&#160;</div><div class="line"><a name="l00607"></a><span class="lineno">  607</span>&#160;        <span class="keywordflow">default</span>:       FIXME;</div><div class="line"><a name="l00608"></a><span class="lineno">  608</span>&#160;</div><div class="line"><a name="l00609"></a><span class="lineno">  609</span>&#160;      }</div><div class="line"><a name="l00610"></a><span class="lineno">  610</span>&#160;}</div><div class="line"><a name="l00611"></a><span class="lineno">  611</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00612"></a><span class="lineno">  612</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l00613"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#a5c1f7b87ab7b4a1a2cfcf33513029e40">  613</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#a5c1f7b87ab7b4a1a2cfcf33513029e40">XML_Saving_Archive::save_vstack_item</a>(<span class="keyword">const</span> <a class="code" href="classValueStackItem.html">ValueStackItem</a> &amp; vsi)</div><div class="line"><a name="l00614"></a><span class="lineno">  614</span>&#160;{</div><div class="line"><a name="l00615"></a><span class="lineno">  615</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;    save_vstack_item(name_class &quot;</span></div><div class="line"><a name="l00616"></a><span class="lineno">  616</span>&#160;                           &lt;&lt; vsi.<a class="code" href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">name_class</a> &lt;&lt; <span class="stringliteral">&quot;)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00617"></a><span class="lineno">  617</span>&#160;   <span class="keywordflow">switch</span>(vsi.<a class="code" href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">name_class</a>)</div><div class="line"><a name="l00618"></a><span class="lineno">  618</span>&#160;      {</div><div class="line"><a name="l00619"></a><span class="lineno">  619</span>&#160;        <span class="keywordflow">case</span> NC_UNUSED_USER_NAME:</div><div class="line"><a name="l00620"></a><span class="lineno">  620</span>&#160;             do_indent();</div><div class="line"><a name="l00621"></a><span class="lineno">  621</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;unused-name/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00622"></a><span class="lineno">  622</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00623"></a><span class="lineno">  623</span>&#160;</div><div class="line"><a name="l00624"></a><span class="lineno">  624</span>&#160;        <span class="keywordflow">case</span> NC_LABEL:</div><div class="line"><a name="l00625"></a><span class="lineno">  625</span>&#160;             do_indent();</div><div class="line"><a name="l00626"></a><span class="lineno">  626</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;Label value=\&quot;&quot;</span> &lt;&lt; vsi.<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#a315fb71a75aeb00281e49d799d38b917">label</a> &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00627"></a><span class="lineno">  627</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00628"></a><span class="lineno">  628</span>&#160;</div><div class="line"><a name="l00629"></a><span class="lineno">  629</span>&#160;        <span class="keywordflow">case</span> NC_VARIABLE:</div><div class="line"><a name="l00630"></a><span class="lineno">  630</span>&#160;             do_indent();</div><div class="line"><a name="l00631"></a><span class="lineno">  631</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;Variable vid=\&quot;&quot;</span> &lt;&lt; find_vid(vsi.<a class="code" href="classValueStackItem.html#adf006d2f3cd365049f89a2f5479af6b5">apl_val</a>.<a class="code" href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">get</a>())</div><div class="line"><a name="l00632"></a><span class="lineno">  632</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00633"></a><span class="lineno">  633</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00634"></a><span class="lineno">  634</span>&#160;</div><div class="line"><a name="l00635"></a><span class="lineno">  635</span>&#160;        <span class="keywordflow">case</span> NC_FUNCTION:</div><div class="line"><a name="l00636"></a><span class="lineno">  636</span>&#160;        <span class="keywordflow">case</span> NC_OPERATOR:</div><div class="line"><a name="l00637"></a><span class="lineno">  637</span>&#160;             save_Function(*vsi.<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#af30375052e9fc2151e49a19a63a43bf4">function</a>);</div><div class="line"><a name="l00638"></a><span class="lineno">  638</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00639"></a><span class="lineno">  639</span>&#160;</div><div class="line"><a name="l00640"></a><span class="lineno">  640</span>&#160;        <span class="keywordflow">case</span> NC_SHARED_VAR:</div><div class="line"><a name="l00641"></a><span class="lineno">  641</span>&#160;             do_indent();</div><div class="line"><a name="l00642"></a><span class="lineno">  642</span>&#160;             out &lt;&lt; <span class="stringliteral">&quot;&lt;Shared-Variable key=\&quot;&quot;</span> &lt;&lt; vsi.<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#a68048ce9a0b919362f188c4c2d3cbd8a">sv_key</a></div><div class="line"><a name="l00643"></a><span class="lineno">  643</span>&#160;                 &lt;&lt; <span class="stringliteral">&quot;\&quot;/&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00644"></a><span class="lineno">  644</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l00645"></a><span class="lineno">  645</span>&#160;</div><div class="line"><a name="l00646"></a><span class="lineno">  646</span>&#160;        <span class="keywordflow">default</span>: Assert(0);</div><div class="line"><a name="l00647"></a><span class="lineno">  647</span>&#160;      }</div><div class="line"><a name="l00648"></a><span class="lineno">  648</span>&#160;}</div><div class="line"><a name="l00649"></a><span class="lineno">  649</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00650"></a><span class="lineno">  650</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l00651"></a><span class="lineno"><a class="line" href="structXML__Saving__Archive_1_1__val__par.html#a350b32abe9e5057cfcb2c741b22b7da0">  651</a></span>&#160;<a class="code" href="structXML__Saving__Archive_1_1__val__par.html#a350b32abe9e5057cfcb2c741b22b7da0">XML_Saving_Archive::_val_par::compare_val_par</a>(<span class="keyword">const</span> <a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a> &amp; A,</div><div class="line"><a name="l00652"></a><span class="lineno">  652</span>&#160;                                              <span class="keyword">const</span> <a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a> &amp; B, <span class="keyword">const</span> <span class="keywordtype">void</span> *)</div><div class="line"><a name="l00653"></a><span class="lineno">  653</span>&#160;{</div><div class="line"><a name="l00654"></a><span class="lineno">  654</span>&#160;   <span class="keywordflow">return</span> A.<a class="code" href="structXML__Saving__Archive_1_1__val__par.html#a6d5a79370470ee36bcbf545706e09184">_val</a> &gt; B.<a class="code" href="structXML__Saving__Archive_1_1__val__par.html#a6d5a79370470ee36bcbf545706e09184">_val</a>;</div><div class="line"><a name="l00655"></a><span class="lineno">  655</span>&#160;}</div><div class="line"><a name="l00656"></a><span class="lineno">  656</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00657"></a><span class="lineno">  657</span>&#160;<span class="keywordtype">int</span></div><div class="line"><a name="l00658"></a><span class="lineno"><a class="line" href="structXML__Saving__Archive_1_1__val__par.html#aa244b5ee23bfb8318a5267cc3e48221b">  658</a></span>&#160;<a class="code" href="structXML__Saving__Archive_1_1__val__par.html#aa244b5ee23bfb8318a5267cc3e48221b">XML_Saving_Archive::_val_par::compare_val_par1</a>(<span class="keyword">const</span> <span class="keywordtype">void</span> * key, <span class="keyword">const</span> <span class="keywordtype">void</span> * B)</div><div class="line"><a name="l00659"></a><span class="lineno">  659</span>&#160;{</div><div class="line"><a name="l00660"></a><span class="lineno">  660</span>&#160;<span class="keyword">const</span> <span class="keywordtype">void</span> * Bv = (<span class="keyword">reinterpret_cast&lt;</span><span class="keyword">const </span><a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a> *<span class="keyword">&gt;</span>(B))-&gt;_val;</div><div class="line"><a name="l00661"></a><span class="lineno">  661</span>&#160;   <span class="keywordflow">return</span> charP(key) - charP(Bv);</div><div class="line"><a name="l00662"></a><span class="lineno">  662</span>&#160;}</div><div class="line"><a name="l00663"></a><span class="lineno">  663</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l00664"></a><span class="lineno">  664</span>&#160;<a class="code" href="classXML__Saving__Archive.html">XML_Saving_Archive</a> &amp;</div><div class="line"><a name="l00665"></a><span class="lineno"><a class="line" href="classXML__Saving__Archive.html#acc327395cab545ea7797d92f5c931cab">  665</a></span>&#160;<a class="code" href="classXML__Saving__Archive.html#acc327395cab545ea7797d92f5c931cab">XML_Saving_Archive::save</a>()</div><div class="line"><a name="l00666"></a><span class="lineno">  666</span>&#160;{</div><div class="line"><a name="l00667"></a><span class="lineno">  667</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00668"></a><span class="lineno">  668</span>&#160;</div><div class="line"><a name="l00669"></a><span class="lineno">  669</span>&#160;tm * t;</div><div class="line"><a name="l00670"></a><span class="lineno">  670</span>&#160;   {</div><div class="line"><a name="l00671"></a><span class="lineno">  671</span>&#160;     timeval now;</div><div class="line"><a name="l00672"></a><span class="lineno">  672</span>&#160;     gettimeofday(&amp;now, 0);</div><div class="line"><a name="l00673"></a><span class="lineno">  673</span>&#160;     t = gmtime(&amp;now.tv_sec);</div><div class="line"><a name="l00674"></a><span class="lineno">  674</span>&#160;   }</div><div class="line"><a name="l00675"></a><span class="lineno">  675</span>&#160;</div><div class="line"><a name="l00676"></a><span class="lineno">  676</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> offset = <a class="code" href="classWorkspace.html#a34c064c6760d7bfcc10e68700defe327">Workspace::get_v_Quad_TZ</a>().<a class="code" href="classQuad__TZ.html#aca7ab6c3b090bca821fc85536b6a67c1">get_offset</a>();   <span class="comment">// timezone offset</span></div><div class="line"><a name="l00677"></a><span class="lineno">  677</span>&#160;</div><div class="line"><a name="l00678"></a><span class="lineno">  678</span>&#160;   <span class="comment">// check with: xmllint --valid workspace.xml &gt;/dev/null</span></div><div class="line"><a name="l00679"></a><span class="lineno">  679</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00680"></a><span class="lineno">  680</span>&#160;   out &lt;&lt;</div><div class="line"><a name="l00681"></a><span class="lineno">  681</span>&#160;<span class="stringliteral">&quot;&lt;?xml version=&#39;1.0&#39; encoding=&#39;UTF-8&#39; standalone=&#39;yes&#39;?&gt;\n&quot;</span></div><div class="line"><a name="l00682"></a><span class="lineno">  682</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00683"></a><span class="lineno">  683</span>&#160;<span class="stringliteral">&quot;&lt;!DOCTYPE Workspace\n&quot;</span></div><div class="line"><a name="l00684"></a><span class="lineno">  684</span>&#160;<span class="stringliteral">&quot;[\n&quot;</span></div><div class="line"><a name="l00685"></a><span class="lineno">  685</span>&#160;<span class="stringliteral">&quot;    &lt;!ELEMENT Workspace (Value*,Ravel*,SymbolTable,Symbol*,Commands,StateIndicator)&gt;\n&quot;</span></div><div class="line"><a name="l00686"></a><span class="lineno">  686</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  wsid       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00687"></a><span class="lineno">  687</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  year       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00688"></a><span class="lineno">  688</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  month      CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00689"></a><span class="lineno">  689</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  day        CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00690"></a><span class="lineno">  690</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  hour       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00691"></a><span class="lineno">  691</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  minute     CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00692"></a><span class="lineno">  692</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  second     CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00693"></a><span class="lineno">  693</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  timezone   CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00694"></a><span class="lineno">  694</span>&#160;<span class="stringliteral">&quot;    &lt;!ATTLIST Workspace  saving_SVN CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00695"></a><span class="lineno">  695</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00696"></a><span class="lineno">  696</span>&#160;<span class="stringliteral">&quot;        &lt;!ELEMENT Value (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00697"></a><span class="lineno">  697</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value flg    CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00698"></a><span class="lineno">  698</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value vid    CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00699"></a><span class="lineno">  699</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value parent CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00700"></a><span class="lineno">  700</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value rk     CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00701"></a><span class="lineno">  701</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-0   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00702"></a><span class="lineno">  702</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-1   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00703"></a><span class="lineno">  703</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-2   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00704"></a><span class="lineno">  704</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-3   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00705"></a><span class="lineno">  705</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-4   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00706"></a><span class="lineno">  706</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-5   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00707"></a><span class="lineno">  707</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-6   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00708"></a><span class="lineno">  708</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Value sh-7   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00709"></a><span class="lineno">  709</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00710"></a><span class="lineno">  710</span>&#160;<span class="stringliteral">&quot;        &lt;!ELEMENT Ravel (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00711"></a><span class="lineno">  711</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Ravel vid    CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00712"></a><span class="lineno">  712</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Ravel cells  CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00713"></a><span class="lineno">  713</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00714"></a><span class="lineno">  714</span>&#160;<span class="stringliteral">&quot;        &lt;!ELEMENT SymbolTable (Symbol*)&gt;\n&quot;</span></div><div class="line"><a name="l00715"></a><span class="lineno">  715</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST SymbolTable size CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00716"></a><span class="lineno">  716</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00717"></a><span class="lineno">  717</span>&#160;<span class="stringliteral">&quot;            &lt;!ELEMENT Symbol (unused-name|Variable|Function|Label|Shared-Variable)*&gt;\n&quot;</span></div><div class="line"><a name="l00718"></a><span class="lineno">  718</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST Symbol name       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00719"></a><span class="lineno">  719</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST Symbol stack-size CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00720"></a><span class="lineno">  720</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00721"></a><span class="lineno">  721</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT unused-name EMPTY&gt;\n&quot;</span></div><div class="line"><a name="l00722"></a><span class="lineno">  722</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00723"></a><span class="lineno">  723</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Variable (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00724"></a><span class="lineno">  724</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Variable vid CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00725"></a><span class="lineno">  725</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00726"></a><span class="lineno">  726</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Function (UCS)&gt;\n&quot;</span></div><div class="line"><a name="l00727"></a><span class="lineno">  727</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Function creation-time   CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00728"></a><span class="lineno">  728</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Function exec-properties CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00729"></a><span class="lineno">  729</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00730"></a><span class="lineno">  730</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Label (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00731"></a><span class="lineno">  731</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Label value CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00732"></a><span class="lineno">  732</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00733"></a><span class="lineno">  733</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Shared-Variable (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00734"></a><span class="lineno">  734</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Shared-Variable key CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00735"></a><span class="lineno">  735</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00736"></a><span class="lineno">  736</span>&#160;<span class="stringliteral">&quot;        &lt;!ELEMENT UCS (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00737"></a><span class="lineno">  737</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST UCS uni CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00738"></a><span class="lineno">  738</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00739"></a><span class="lineno">  739</span>&#160;<span class="stringliteral">&quot;        &lt;!ELEMENT Commands (Command*)&gt;\n&quot;</span></div><div class="line"><a name="l00740"></a><span class="lineno">  740</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST Commands size CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00741"></a><span class="lineno">  741</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00742"></a><span class="lineno">  742</span>&#160;<span class="stringliteral">&quot;            &lt;!ELEMENT Command (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00743"></a><span class="lineno">  743</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST Command name       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00744"></a><span class="lineno">  744</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST Command mode       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00745"></a><span class="lineno">  745</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST Command fun       CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00746"></a><span class="lineno">  746</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00747"></a><span class="lineno">  747</span>&#160;<span class="stringliteral">&quot;        &lt;!ELEMENT StateIndicator (SI-entry*)&gt;\n&quot;</span></div><div class="line"><a name="l00748"></a><span class="lineno">  748</span>&#160;<span class="stringliteral">&quot;        &lt;!ATTLIST StateIndicator levels CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00749"></a><span class="lineno">  749</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00750"></a><span class="lineno">  750</span>&#160;<span class="stringliteral">&quot;            &lt;!ELEMENT SI-entry ((Execute|Statements|UserFunction),Parser+)&gt;\n&quot;</span></div><div class="line"><a name="l00751"></a><span class="lineno">  751</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST SI-entry level     CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00752"></a><span class="lineno">  752</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST SI-entry pc        CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00753"></a><span class="lineno">  753</span>&#160;<span class="stringliteral">&quot;            &lt;!ATTLIST SI-entry line      CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00754"></a><span class="lineno">  754</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00755"></a><span class="lineno">  755</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Statements (UCS)&gt;\n&quot;</span></div><div class="line"><a name="l00756"></a><span class="lineno">  756</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00757"></a><span class="lineno">  757</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Execute (UCS)&gt;\n&quot;</span></div><div class="line"><a name="l00758"></a><span class="lineno">  758</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00759"></a><span class="lineno">  759</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT UserFunction (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00760"></a><span class="lineno">  760</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST UserFunction ufun-name       CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00761"></a><span class="lineno">  761</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST UserFunction macro-num       CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00762"></a><span class="lineno">  762</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST UserFunction lambda-name     CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00763"></a><span class="lineno">  763</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST UserFunction symbol-level    CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00764"></a><span class="lineno">  764</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00765"></a><span class="lineno">  765</span>&#160;<span class="stringliteral">&quot;                &lt;!ELEMENT Parser (Token*)&gt;\n&quot;</span></div><div class="line"><a name="l00766"></a><span class="lineno">  766</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Parser size           CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00767"></a><span class="lineno">  767</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Parser assign-pending CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00768"></a><span class="lineno">  768</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Parser lookahead-high CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00769"></a><span class="lineno">  769</span>&#160;<span class="stringliteral">&quot;                &lt;!ATTLIST Parser action         CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00770"></a><span class="lineno">  770</span>&#160;</div><div class="line"><a name="l00771"></a><span class="lineno">  771</span>&#160;<span class="stringliteral">&quot;                    &lt;!ELEMENT Token (#PCDATA)&gt;\n&quot;</span></div><div class="line"><a name="l00772"></a><span class="lineno">  772</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token pc           CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00773"></a><span class="lineno">  773</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token tag          CDATA #REQUIRED&gt;\n&quot;</span></div><div class="line"><a name="l00774"></a><span class="lineno">  774</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token char         CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00775"></a><span class="lineno">  775</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token int          CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00776"></a><span class="lineno">  776</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token float        CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00777"></a><span class="lineno">  777</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token real         CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00778"></a><span class="lineno">  778</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token imag         CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00779"></a><span class="lineno">  779</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token sym          CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00780"></a><span class="lineno">  780</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token line         CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00781"></a><span class="lineno">  781</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token vid          CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00782"></a><span class="lineno">  782</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token index        CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00783"></a><span class="lineno">  783</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token fun-id       CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00784"></a><span class="lineno">  784</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token ufun-name    CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00785"></a><span class="lineno">  785</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token symbol-level CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00786"></a><span class="lineno">  786</span>&#160;<span class="stringliteral">&quot;                    &lt;!ATTLIST Token comment      CDATA #IMPLIED&gt;\n&quot;</span></div><div class="line"><a name="l00787"></a><span class="lineno">  787</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00788"></a><span class="lineno">  788</span>&#160;<span class="stringliteral">&quot;]&gt;\n&quot;</span></div><div class="line"><a name="l00789"></a><span class="lineno">  789</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00790"></a><span class="lineno">  790</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l00791"></a><span class="lineno">  791</span>&#160;<span class="stringliteral">&quot;    &lt;!-- hour/minute/second is )SAVE time in UTC (aka. GMT).\n&quot;</span></div><div class="line"><a name="l00792"></a><span class="lineno">  792</span>&#160;<span class="stringliteral">&quot;         timezone is offset to UTC in seconds.\n&quot;</span></div><div class="line"><a name="l00793"></a><span class="lineno">  793</span>&#160;<span class="stringliteral">&quot;         local time is UTC + offset --&gt;\n&quot;</span></div><div class="line"><a name="l00794"></a><span class="lineno">  794</span>&#160;<span class="stringliteral">&quot;&lt;Workspace wsid=\&quot;&quot;</span>     &lt;&lt; <a class="code" href="classWorkspace.html#ace4fff7bb6714da724d964c5aa9c5503">Workspace::get_WS_name</a>()</div><div class="line"><a name="l00795"></a><span class="lineno">  795</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot; year=\&quot;&quot;</span>     &lt;&lt; (t-&gt;tm_year + 1900)</div><div class="line"><a name="l00796"></a><span class="lineno">  796</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot; month=\&quot;&quot;</span>    &lt;&lt; (t-&gt;tm_mon  + 1)</div><div class="line"><a name="l00797"></a><span class="lineno">  797</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot; day=\&quot;&quot;</span>      &lt;&lt;  t-&gt;tm_mday &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; endl &lt;&lt;</div><div class="line"><a name="l00798"></a><span class="lineno">  798</span>&#160;<span class="stringliteral">&quot;           hour=\&quot;&quot;</span>     &lt;&lt;  t-&gt;tm_hour</div><div class="line"><a name="l00799"></a><span class="lineno">  799</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot; minute=\&quot;&quot;</span>   &lt;&lt;  t-&gt;tm_min</div><div class="line"><a name="l00800"></a><span class="lineno">  800</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot; second=\&quot;&quot;</span>   &lt;&lt;  t-&gt;tm_sec</div><div class="line"><a name="l00801"></a><span class="lineno">  801</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot; timezone=\&quot;&quot;</span> &lt;&lt; offset &lt;&lt; <span class="stringliteral">&quot;\&quot;&quot;</span> &lt;&lt; endl &lt;&lt;</div><div class="line"><a name="l00802"></a><span class="lineno">  802</span>&#160;<span class="stringliteral">&quot;           saving_SVN=\&quot;&quot;</span> &lt;&lt; ARCHIVE_SVN</div><div class="line"><a name="l00803"></a><span class="lineno">  803</span>&#160;     &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;\n&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00804"></a><span class="lineno">  804</span>&#160;</div><div class="line"><a name="l00805"></a><span class="lineno">  805</span>&#160;   ++indent;</div><div class="line"><a name="l00806"></a><span class="lineno">  806</span>&#160;</div><div class="line"><a name="l00807"></a><span class="lineno">  807</span>&#160;   <span class="comment">// collect all values to be saved. We mark the values to avoid</span></div><div class="line"><a name="l00808"></a><span class="lineno">  808</span>&#160;   <span class="comment">// saving of stale values and unmark the used values</span></div><div class="line"><a name="l00809"></a><span class="lineno">  809</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00810"></a><span class="lineno">  810</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save() marks values...&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00811"></a><span class="lineno">  811</span>&#160;   <a class="code" href="classValue.html#ae90fe6c7d36e56f4768abbc0628c7b06">Value::mark_all_dynamic_values</a>();</div><div class="line"><a name="l00812"></a><span class="lineno">  812</span>&#160;</div><div class="line"><a name="l00813"></a><span class="lineno">  813</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save() unmarks values...&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00814"></a><span class="lineno">  814</span>&#160;   <a class="code" href="classWorkspace.html#a85160b618521a453657a892f454323d4">Workspace::unmark_all_values</a>();</div><div class="line"><a name="l00815"></a><span class="lineno">  815</span>&#160;</div><div class="line"><a name="l00816"></a><span class="lineno">  816</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classDynamicObject.html">DynamicObject</a> * dob = <a class="code" href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a>()-&gt;get_next();</div><div class="line"><a name="l00817"></a><span class="lineno">  817</span>&#160;        dob != <a class="code" href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a>(); dob = dob-&gt;get_next())</div><div class="line"><a name="l00818"></a><span class="lineno">  818</span>&#160;       {</div><div class="line"><a name="l00819"></a><span class="lineno">  819</span>&#160;         <span class="comment">// WARNING: do not use pValue() here !</span></div><div class="line"><a name="l00820"></a><span class="lineno">  820</span>&#160;         <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * val = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classValue.html">Value</a> *<span class="keyword">&gt;</span>(dob);</div><div class="line"><a name="l00821"></a><span class="lineno">  821</span>&#160;</div><div class="line"><a name="l00822"></a><span class="lineno">  822</span>&#160;         <span class="keywordflow">if</span> (val-&gt;<a class="code" href="classValue.html#a84cb4f9a86540d04c52bfae177a97bc8">is_marked</a>())    <span class="keywordflow">continue</span>;   <span class="comment">// stale</span></div><div class="line"><a name="l00823"></a><span class="lineno">  823</span>&#160;</div><div class="line"><a name="l00824"></a><span class="lineno">  824</span>&#160;         ++value_count;</div><div class="line"><a name="l00825"></a><span class="lineno">  825</span>&#160;       }</div><div class="line"><a name="l00826"></a><span class="lineno">  826</span>&#160;</div><div class="line"><a name="l00827"></a><span class="lineno">  827</span>&#160;   Log(LOG_archive)</div><div class="line"><a name="l00828"></a><span class="lineno">  828</span>&#160;      CERR &lt;&lt; <span class="stringliteral">&quot;save() allocates values[&quot;</span> &lt;&lt; value_count &lt;&lt; <span class="stringliteral">&quot;]...&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00829"></a><span class="lineno">  829</span>&#160;</div><div class="line"><a name="l00830"></a><span class="lineno">  830</span>&#160;   <span class="keywordflow">try</span></div><div class="line"><a name="l00831"></a><span class="lineno">  831</span>&#160;      {</div><div class="line"><a name="l00832"></a><span class="lineno">  832</span>&#160;        values = <span class="keyword">new</span> <a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a>[value_count];</div><div class="line"><a name="l00833"></a><span class="lineno">  833</span>&#160;      }</div><div class="line"><a name="l00834"></a><span class="lineno">  834</span>&#160;   <span class="keywordflow">catch</span>(...)</div><div class="line"><a name="l00835"></a><span class="lineno">  835</span>&#160;      {</div><div class="line"><a name="l00836"></a><span class="lineno">  836</span>&#160;        MORE_ERROR() &lt;&lt; </div><div class="line"><a name="l00837"></a><span class="lineno">  837</span>&#160;           <span class="stringliteral">&quot;XML_Saving_Archive::save() could not allocate values[&quot;</span></div><div class="line"><a name="l00838"></a><span class="lineno">  838</span>&#160;               &lt;&lt; value_count &lt;&lt; <span class="stringliteral">&quot;]: (lack of memory).\n&quot;</span></div><div class="line"><a name="l00839"></a><span class="lineno">  839</span>&#160;            <span class="stringliteral">&quot;Your workspace may be corrupt (possibly due &quot;</span></div><div class="line"><a name="l00840"></a><span class="lineno">  840</span>&#160;               <span class="stringliteral">&quot;to a previous WS FULL ?).\n&quot;</span></div><div class="line"><a name="l00841"></a><span class="lineno">  841</span>&#160;            <span class="stringliteral">&quot;You should not )SAVE it. Maybe )DUMP the workspace instead?.&quot;</span></div><div class="line"><a name="l00842"></a><span class="lineno">  842</span>&#160;           ;</div><div class="line"><a name="l00843"></a><span class="lineno">  843</span>&#160;         WS_FULL;</div><div class="line"><a name="l00844"></a><span class="lineno">  844</span>&#160;      }</div><div class="line"><a name="l00845"></a><span class="lineno">  845</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;save() done allocating values[]...&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00846"></a><span class="lineno">  846</span>&#160;</div><div class="line"><a name="l00847"></a><span class="lineno">  847</span>&#160;ShapeItem idx = 0;</div><div class="line"><a name="l00848"></a><span class="lineno">  848</span>&#160;</div><div class="line"><a name="l00849"></a><span class="lineno">  849</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classDynamicObject.html">DynamicObject</a> * dob = <a class="code" href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a>()-&gt;get_next();</div><div class="line"><a name="l00850"></a><span class="lineno">  850</span>&#160;        dob != <a class="code" href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a>(); dob = dob-&gt;get_next())</div><div class="line"><a name="l00851"></a><span class="lineno">  851</span>&#160;       {</div><div class="line"><a name="l00852"></a><span class="lineno">  852</span>&#160;         <span class="comment">// WARNING: do not use pValue() here !</span></div><div class="line"><a name="l00853"></a><span class="lineno">  853</span>&#160;         <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * val = <span class="keyword">static_cast&lt;</span><span class="keyword">const </span><a class="code" href="classValue.html">Value</a> *<span class="keyword">&gt;</span>(dob);</div><div class="line"><a name="l00854"></a><span class="lineno">  854</span>&#160;</div><div class="line"><a name="l00855"></a><span class="lineno">  855</span>&#160;         <span class="keywordflow">if</span> (val-&gt;<a class="code" href="classValue.html#a84cb4f9a86540d04c52bfae177a97bc8">is_marked</a>())    <span class="keywordflow">continue</span>;   <span class="comment">// stale</span></div><div class="line"><a name="l00856"></a><span class="lineno">  856</span>&#160;</div><div class="line"><a name="l00857"></a><span class="lineno">  857</span>&#160;         val-&gt;<a class="code" href="classValue.html#a69a8e1aa89135b7ae26d26516524bfe1">unmark</a>();</div><div class="line"><a name="l00858"></a><span class="lineno">  858</span>&#160;         <span class="keyword">new</span> (values + idx++) <a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a>(val, INVALID_VID);</div><div class="line"><a name="l00859"></a><span class="lineno">  859</span>&#160;       }</div><div class="line"><a name="l00860"></a><span class="lineno">  860</span>&#160;</div><div class="line"><a name="l00861"></a><span class="lineno">  861</span>&#160;   Assert(idx == value_count);</div><div class="line"><a name="l00862"></a><span class="lineno">  862</span>&#160;</div><div class="line"><a name="l00863"></a><span class="lineno">  863</span>&#160;   <span class="comment">// some people use an excessive number of values. We therefore sort them</span></div><div class="line"><a name="l00864"></a><span class="lineno">  864</span>&#160;   <span class="comment">// by the address of the value as to speed up finding them later on</span></div><div class="line"><a name="l00865"></a><span class="lineno">  865</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00866"></a><span class="lineno">  866</span>&#160;   <a class="code" href="classHeapsort.html#a9b74961df9e87b6a9888924a6a1e2d85">Heapsort&lt;_val_par&gt;::sort</a>(values, value_count, 0, &amp;_val_par::compare_val_par);</div><div class="line"><a name="l00867"></a><span class="lineno">  867</span>&#160;   loop(v, (value_count - 1))   Assert(&amp;values[v]._val &lt; &amp;values[v + 1]._val);</div><div class="line"><a name="l00868"></a><span class="lineno">  868</span>&#160;   </div><div class="line"><a name="l00869"></a><span class="lineno">  869</span>&#160;   <span class="comment">// set up parents of values</span></div><div class="line"><a name="l00870"></a><span class="lineno">  870</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00871"></a><span class="lineno">  871</span>&#160;   loop(p, value_count)   <span class="comment">// for every (parent-) value</span></div><div class="line"><a name="l00872"></a><span class="lineno">  872</span>&#160;      {</div><div class="line"><a name="l00873"></a><span class="lineno">  873</span>&#160;        <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> &amp; parent = *values[p]._val;</div><div class="line"><a name="l00874"></a><span class="lineno">  874</span>&#160;        <span class="keyword">const</span> ShapeItem ec = parent.<a class="code" href="classValue.html#ac5b54e3a13cab0837442f1575b3299a5">nz_element_count</a>();</div><div class="line"><a name="l00875"></a><span class="lineno">  875</span>&#160;        loop(e, ec)   <span class="comment">// for every ravel cell of the (parent-) value</span></div><div class="line"><a name="l00876"></a><span class="lineno">  876</span>&#160;            {</div><div class="line"><a name="l00877"></a><span class="lineno">  877</span>&#160;              <span class="keyword">const</span> <a class="code" href="classCell.html">Cell</a> &amp; cP = parent.<a class="code" href="classValue.html#a89120a742c078918d1a5d84ec742e69c">get_ravel</a>(e);</div><div class="line"><a name="l00878"></a><span class="lineno">  878</span>&#160;              <span class="keywordflow">if</span> (cP.<a class="code" href="classCell.html#ae98b3988a7fa52c6c157b4911b043dde">is_pointer_cell</a>())</div><div class="line"><a name="l00879"></a><span class="lineno">  879</span>&#160;                 {</div><div class="line"><a name="l00880"></a><span class="lineno">  880</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classValue.html">Value</a> * sub = cP.<a class="code" href="classCell.html#a3af019707c56a0fb40fce2d370af8307">get_pointer_value</a>().<a class="code" href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">get</a>();</div><div class="line"><a name="l00881"></a><span class="lineno">  881</span>&#160;                   Assert1(sub);</div><div class="line"><a name="l00882"></a><span class="lineno">  882</span>&#160;                   <span class="keyword">const</span> <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a> sub_idx = find_vid(sub);</div><div class="line"><a name="l00883"></a><span class="lineno">  883</span>&#160;                   Assert(sub_idx &lt; value_count);</div><div class="line"><a name="l00884"></a><span class="lineno">  884</span>&#160;                   <span class="keywordflow">if</span> (values[sub_idx]._par != INVALID_VID)</div><div class="line"><a name="l00885"></a><span class="lineno">  885</span>&#160;                      {</div><div class="line"><a name="l00886"></a><span class="lineno">  886</span>&#160;                        <span class="comment">// sub already has a parent, which supposedly cannot</span></div><div class="line"><a name="l00887"></a><span class="lineno">  887</span>&#160;                        <span class="comment">// happen. print out some more information about this</span></div><div class="line"><a name="l00888"></a><span class="lineno">  888</span>&#160;                        <span class="comment">// case.</span></div><div class="line"><a name="l00889"></a><span class="lineno">  889</span>&#160;                        <span class="comment">//</span></div><div class="line"><a name="l00890"></a><span class="lineno">  890</span>&#160;                        CERR &lt;&lt; <span class="stringliteral">&quot;*** Sub-Value &quot;</span></div><div class="line"><a name="l00891"></a><span class="lineno">  891</span>&#160;                             &lt;&lt; voidP(sub) &lt;&lt; <span class="stringliteral">&quot; has two parents.&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l00892"></a><span class="lineno">  892</span>&#160;                             &lt;&lt; <span class="stringliteral">&quot;Child: vid=&quot;</span> &lt;&lt; sub_idx &lt;&lt; <span class="stringliteral">&quot;, _val=&quot;</span></div><div class="line"><a name="l00893"></a><span class="lineno">  893</span>&#160;                             &lt;&lt; values[sub_idx]._val &lt;&lt; <span class="stringliteral">&quot;_par=&quot;</span></div><div class="line"><a name="l00894"></a><span class="lineno">  894</span>&#160;                             &lt;&lt; values[sub_idx]._par &lt;&lt; endl</div><div class="line"><a name="l00895"></a><span class="lineno">  895</span>&#160;                             &lt;&lt; <span class="stringliteral">&quot;Parent 2: vid=&quot;</span> &lt;&lt; p &lt;&lt;  <span class="stringliteral">&quot;, _val=&quot;</span></div><div class="line"><a name="l00896"></a><span class="lineno">  896</span>&#160;                             &lt;&lt; values[p]._val &lt;&lt; <span class="stringliteral">&quot;_par=&quot;</span></div><div class="line"><a name="l00897"></a><span class="lineno">  897</span>&#160;                             &lt;&lt; values[p]._par &lt;&lt; endl</div><div class="line"><a name="l00898"></a><span class="lineno">  898</span>&#160;                             &lt;&lt; <span class="stringliteral">&quot;Call stack:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00899"></a><span class="lineno">  899</span>&#160;                             BACKTRACE</div><div class="line"><a name="l00900"></a><span class="lineno">  900</span>&#160;                        CERR &lt;&lt; endl &lt;&lt; <span class="stringliteral">&quot; Running )CHECK...&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00901"></a><span class="lineno">  901</span>&#160;                        <a class="code" href="classCommand.html#af5d73db57801b2363c954b402f19186d">Command::cmd_CHECK</a>(CERR);</div><div class="line"><a name="l00902"></a><span class="lineno">  902</span>&#160;                        CERR &lt;&lt; endl;</div><div class="line"><a name="l00903"></a><span class="lineno">  903</span>&#160;                        </div><div class="line"><a name="l00904"></a><span class="lineno">  904</span>&#160;</div><div class="line"><a name="l00905"></a><span class="lineno">  905</span>&#160;<span class="preprocessor">#if VALUE_HISTORY_WANTED</span></div><div class="line"><a name="l00906"></a><span class="lineno">  906</span>&#160;print_history(CERR, sub, 0);</div><div class="line"><a name="l00907"></a><span class="lineno">  907</span>&#160;print_history(CERR, values[sub_idx]._par, 0);</div><div class="line"><a name="l00908"></a><span class="lineno">  908</span>&#160;print_history(CERR, values[p]._val, 0);</div><div class="line"><a name="l00909"></a><span class="lineno">  909</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l00910"></a><span class="lineno">  910</span>&#160;</div><div class="line"><a name="l00911"></a><span class="lineno">  911</span>&#160;   CERR &lt;&lt; endl &lt;&lt;</div><div class="line"><a name="l00912"></a><span class="lineno">  912</span>&#160;<span class="stringliteral">&quot;The workspace will be )SAVEd, but using it for anything other than for\n&quot;</span></div><div class="line"><a name="l00913"></a><span class="lineno">  913</span>&#160;<span class="stringliteral">&quot; recovering its content (i.e. defined functions or variables) means asking\n&quot;</span></div><div class="line"><a name="l00914"></a><span class="lineno">  914</span>&#160;<span class="stringliteral">&quot; for BIG trouble!&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00915"></a><span class="lineno">  915</span>&#160;                      }</div><div class="line"><a name="l00916"></a><span class="lineno">  916</span>&#160;</div><div class="line"><a name="l00917"></a><span class="lineno">  917</span>&#160;                   values[sub_idx] = <a class="code" href="structXML__Saving__Archive_1_1__val__par.html">_val_par</a>(values[sub_idx]._val, <a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a>(p));</div><div class="line"><a name="l00918"></a><span class="lineno">  918</span>&#160;                 }</div><div class="line"><a name="l00919"></a><span class="lineno">  919</span>&#160;              <span class="keywordflow">else</span> <span class="keywordflow">if</span> (cP.<a class="code" href="classCell.html#af8746e4049278c9a46f25e6ee0d71fcc">is_lval_cell</a>())</div><div class="line"><a name="l00920"></a><span class="lineno">  920</span>&#160;                 {</div><div class="line"><a name="l00921"></a><span class="lineno">  921</span>&#160;                   Log(LOG_archive)</div><div class="line"><a name="l00922"></a><span class="lineno">  922</span>&#160;                      CERR &lt;&lt; <span class="stringliteral">&quot;LVAL CELL in &quot;</span> &lt;&lt; p &lt;&lt; <span class="stringliteral">&quot; at &quot;</span> LOC &lt;&lt; endl;</div><div class="line"><a name="l00923"></a><span class="lineno">  923</span>&#160;                 }</div><div class="line"><a name="l00924"></a><span class="lineno">  924</span>&#160;            }</div><div class="line"><a name="l00925"></a><span class="lineno">  925</span>&#160;      }</div><div class="line"><a name="l00926"></a><span class="lineno">  926</span>&#160;</div><div class="line"><a name="l00927"></a><span class="lineno">  927</span>&#160;</div><div class="line"><a name="l00928"></a><span class="lineno">  928</span>&#160;   <span class="comment">// save all values (without their ravel)</span></div><div class="line"><a name="l00929"></a><span class="lineno">  929</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00930"></a><span class="lineno">  930</span>&#160;   loop(vid, value_count)   save_shape(<a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a>(vid));</div><div class="line"><a name="l00931"></a><span class="lineno">  931</span>&#160;</div><div class="line"><a name="l00932"></a><span class="lineno">  932</span>&#160;   <span class="comment">// save ravels of all values</span></div><div class="line"><a name="l00933"></a><span class="lineno">  933</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00934"></a><span class="lineno">  934</span>&#160;   loop(vid, value_count)   save_Ravel(<a class="code" href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">Vid</a>(vid));</div><div class="line"><a name="l00935"></a><span class="lineno">  935</span>&#160;</div><div class="line"><a name="l00936"></a><span class="lineno">  936</span>&#160;   <span class="comment">// save user defined symbols</span></div><div class="line"><a name="l00937"></a><span class="lineno">  937</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00938"></a><span class="lineno">  938</span>&#160;   save_symtab(<a class="code" href="classWorkspace.html#a915b42f50823c4c469c1b52ad9e1f529">Workspace::get_symbol_table</a>());</div><div class="line"><a name="l00939"></a><span class="lineno">  939</span>&#160;</div><div class="line"><a name="l00940"></a><span class="lineno">  940</span>&#160;   <span class="comment">// save certain system variables</span></div><div class="line"><a name="l00941"></a><span class="lineno">  941</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00942"></a><span class="lineno">  942</span>&#160;<span class="preprocessor">#define rw_sv_def(x, _str, _txt) save_Symbol(Workspace::get_v_ ## x());</span></div><div class="line"><a name="l00943"></a><span class="lineno">  943</span>&#160;<span class="preprocessor">#define ro_sv_def(x, _str, _txt) save_Symbol(Workspace::get_v_ ## x());</span></div><div class="line"><a name="l00944"></a><span class="lineno">  944</span>&#160;<span class="preprocessor">#include &quot;SystemVariable.def&quot;</span></div><div class="line"><a name="l00945"></a><span class="lineno">  945</span>&#160;</div><div class="line"><a name="l00946"></a><span class="lineno">  946</span>&#160;   <span class="comment">// save user-defined commands (if any)</span></div><div class="line"><a name="l00947"></a><span class="lineno">  947</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00948"></a><span class="lineno">  948</span>&#160;   save_user_commands(<a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>());</div><div class="line"><a name="l00949"></a><span class="lineno">  949</span>&#160;</div><div class="line"><a name="l00950"></a><span class="lineno">  950</span>&#160;   <span class="comment">// save state indicator</span></div><div class="line"><a name="l00951"></a><span class="lineno">  951</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00952"></a><span class="lineno">  952</span>&#160;   {</div><div class="line"><a name="l00953"></a><span class="lineno">  953</span>&#160;     <span class="keyword">const</span> <span class="keywordtype">int</span> levels = <a class="code" href="classWorkspace.html#a64cef901fd41c19f4521bdd1175d0be7">Workspace::SI_entry_count</a>();</div><div class="line"><a name="l00954"></a><span class="lineno">  954</span>&#160;     do_indent();</div><div class="line"><a name="l00955"></a><span class="lineno">  955</span>&#160;     out &lt;&lt; <span class="stringliteral">&quot;&lt;StateIndicator levels=\&quot;&quot;</span> &lt;&lt; levels &lt;&lt; <span class="stringliteral">&quot;\&quot;&gt;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l00956"></a><span class="lineno">  956</span>&#160;</div><div class="line"><a name="l00957"></a><span class="lineno">  957</span>&#160;     ++indent;</div><div class="line"><a name="l00958"></a><span class="lineno">  958</span>&#160;</div><div class="line"><a name="l00959"></a><span class="lineno">  959</span>&#160;     loop(l, levels)</div><div class="line"><a name="l00960"></a><span class="lineno">  960</span>&#160;        {</div><div class="line"><a name="l00961"></a><span class="lineno">  961</span>&#160;          <span class="keywordflow">for</span> (<span class="keyword">const</span> <a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>();</div><div class="line"><a name="l00962"></a><span class="lineno">  962</span>&#160;               si; si = si-&gt;<a class="code" href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">get_parent</a>())</div><div class="line"><a name="l00963"></a><span class="lineno">  963</span>&#160;              {</div><div class="line"><a name="l00964"></a><span class="lineno">  964</span>&#160;                <span class="keywordflow">if</span> (si-&gt;get_level() == l)</div><div class="line"><a name="l00965"></a><span class="lineno">  965</span>&#160;                   {</div><div class="line"><a name="l00966"></a><span class="lineno">  966</span>&#160;                     save_SI_entry(*si);</div><div class="line"><a name="l00967"></a><span class="lineno">  967</span>&#160;                     <span class="keywordflow">break</span>;</div><div class="line"><a name="l00968"></a><span class="lineno">  968</span>&#160;                   }</div><div class="line"><a name="l00969"></a><span class="lineno">  969</span>&#160;              }</div><div class="line"><a name="l00970"></a><span class="lineno">  970</span>&#160;        }</div><div class="line"><a name="l00971"></a><span class="lineno">  971</span>&#160;</div><div class="line"><a name="l00972"></a><span class="lineno">  972</span>&#160;     --indent;</div><div class="line"><a name="l00973"></a><span class="lineno">  973</span>&#160;</div><div class="line"><a name="l00974"></a><span class="lineno">  974</span>&#160;     do_indent();</div><div class="line"><a name="l00975"></a><span class="lineno">  975</span>&#160;     out &lt;&lt; <span class="stringliteral">&quot;&lt;/StateIndicator&gt;&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"><a name="l00976"></a><span class="lineno">  976</span>&#160;   }</div><div class="line"><a name="l00977"></a><span class="lineno">  977</span>&#160;</div><div class="line"><a name="l00978"></a><span class="lineno">  978</span>&#160;   --indent;</div><div class="line"><a name="l00979"></a><span class="lineno">  979</span>&#160;</div><div class="line"><a name="l00980"></a><span class="lineno">  980</span>&#160;   do_indent();</div><div class="line"><a name="l00981"></a><span class="lineno">  981</span>&#160;</div><div class="line"><a name="l00982"></a><span class="lineno">  982</span>&#160;   <span class="comment">// write closing tag and a few 0&#39;s so that string functions</span></div><div class="line"><a name="l00983"></a><span class="lineno">  983</span>&#160;   <span class="comment">// can be used on the mmaped file.</span></div><div class="line"><a name="l00984"></a><span class="lineno">  984</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l00985"></a><span class="lineno">  985</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&lt;/Workspace&gt;&quot;</span> &lt;&lt; endl</div><div class="line"><a name="l00986"></a><span class="lineno">  986</span>&#160;       &lt;&lt; char(0) &lt;&lt; char(0) &lt;&lt;char(0) &lt;&lt;char(0) &lt;&lt; endl;</div><div class="line"><a name="l00987"></a><span class="lineno">  987</span>&#160;</div><div class="line"><a name="l00988"></a><span class="lineno">  988</span>&#160;   <span class="keywordflow">return</span> *<span class="keyword">this</span>;</div><div class="line"><a name="l00989"></a><span class="lineno">  989</span>&#160;}</div><div class="line"><a name="l00990"></a><span class="lineno">  990</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l00991"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#afb3ef30dff883e356ba2441184ae3a5b">  991</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#afb3ef30dff883e356ba2441184ae3a5b">XML_Loading_Archive::XML_Loading_Archive</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * _filename, <span class="keywordtype">int</span> &amp; dump_fd)</div><div class="line"><a name="l00992"></a><span class="lineno">  992</span>&#160;   : fd(-1),</div><div class="line"><a name="l00993"></a><span class="lineno">  993</span>&#160;     map_start(0),</div><div class="line"><a name="l00994"></a><span class="lineno">  994</span>&#160;     map_length(0),</div><div class="line"><a name="l00995"></a><span class="lineno">  995</span>&#160;     file_start(0),</div><div class="line"><a name="l00996"></a><span class="lineno">  996</span>&#160;     line_start(0),</div><div class="line"><a name="l00997"></a><span class="lineno">  997</span>&#160;     line_no(1),</div><div class="line"><a name="l00998"></a><span class="lineno">  998</span>&#160;     current_char(UNI_ASCII_SPACE),</div><div class="line"><a name="l00999"></a><span class="lineno">  999</span>&#160;     data(0),</div><div class="line"><a name="l01000"></a><span class="lineno"> 1000</span>&#160;     file_end(0),</div><div class="line"><a name="l01001"></a><span class="lineno"> 1001</span>&#160;     copying(false),</div><div class="line"><a name="l01002"></a><span class="lineno"> 1002</span>&#160;     protection(false),</div><div class="line"><a name="l01003"></a><span class="lineno"> 1003</span>&#160;     reading_vids(false),</div><div class="line"><a name="l01004"></a><span class="lineno"> 1004</span>&#160;     have_allowed_objects(false),</div><div class="line"><a name="l01005"></a><span class="lineno"> 1005</span>&#160;     filename(_filename),</div><div class="line"><a name="l01006"></a><span class="lineno"> 1006</span>&#160;     file_is_complete(false)</div><div class="line"><a name="l01007"></a><span class="lineno"> 1007</span>&#160;{</div><div class="line"><a name="l01008"></a><span class="lineno"> 1008</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;Loading file &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">filename</a> &lt;&lt; endl;</div><div class="line"><a name="l01009"></a><span class="lineno"> 1009</span>&#160;</div><div class="line"><a name="l01010"></a><span class="lineno"> 1010</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> = open(<a class="code" href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">filename</a>, O_RDONLY);</div><div class="line"><a name="l01011"></a><span class="lineno"> 1011</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> == -1)   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01012"></a><span class="lineno"> 1012</span>&#160;</div><div class="line"><a name="l01013"></a><span class="lineno"> 1013</span>&#160;<span class="keyword">struct </span>stat st;</div><div class="line"><a name="l01014"></a><span class="lineno"> 1014</span>&#160;   <span class="keywordflow">if</span> (fstat(<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>, &amp;st))</div><div class="line"><a name="l01015"></a><span class="lineno"> 1015</span>&#160;      {</div><div class="line"><a name="l01016"></a><span class="lineno"> 1016</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;fstat() failed: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l01017"></a><span class="lineno"> 1017</span>&#160;        close(<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>);</div><div class="line"><a name="l01018"></a><span class="lineno"> 1018</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> = -1;</div><div class="line"><a name="l01019"></a><span class="lineno"> 1019</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01020"></a><span class="lineno"> 1020</span>&#160;      }</div><div class="line"><a name="l01021"></a><span class="lineno"> 1021</span>&#160;</div><div class="line"><a name="l01022"></a><span class="lineno"> 1022</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a82e8b22e8f1ddc37a678108a89ae2e92">map_length</a> = st.st_size;</div><div class="line"><a name="l01023"></a><span class="lineno"> 1023</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#abb05032bb86e9f391d5c56d5d22eef30">map_start</a> = mmap(0, <a class="code" href="classXML__Loading__Archive.html#a82e8b22e8f1ddc37a678108a89ae2e92">map_length</a>, PROT_READ, MAP_SHARED, <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>, 0);</div><div class="line"><a name="l01024"></a><span class="lineno"> 1024</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#abb05032bb86e9f391d5c56d5d22eef30">map_start</a> == reinterpret_cast&lt;const void *&gt;(-1))</div><div class="line"><a name="l01025"></a><span class="lineno"> 1025</span>&#160;      {</div><div class="line"><a name="l01026"></a><span class="lineno"> 1026</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;mmap() failed: &quot;</span> &lt;&lt; strerror(errno) &lt;&lt; endl;</div><div class="line"><a name="l01027"></a><span class="lineno"> 1027</span>&#160;        close(<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>);</div><div class="line"><a name="l01028"></a><span class="lineno"> 1028</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> = -1;</div><div class="line"><a name="l01029"></a><span class="lineno"> 1029</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01030"></a><span class="lineno"> 1030</span>&#160;      }</div><div class="line"><a name="l01031"></a><span class="lineno"> 1031</span>&#160;</div><div class="line"><a name="l01032"></a><span class="lineno"> 1032</span>&#160;   <span class="comment">// success</span></div><div class="line"><a name="l01033"></a><span class="lineno"> 1033</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01034"></a><span class="lineno"> 1034</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a> = charP(<a class="code" href="classXML__Loading__Archive.html#abb05032bb86e9f391d5c56d5d22eef30">map_start</a>);</div><div class="line"><a name="l01035"></a><span class="lineno"> 1035</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a3a8c16532bbdfbb3901be3e38b6a1cdb">file_end</a> = utf8P(<a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a> + <a class="code" href="classXML__Loading__Archive.html#a82e8b22e8f1ddc37a678108a89ae2e92">map_length</a>);</div><div class="line"><a name="l01036"></a><span class="lineno"> 1036</span>&#160;</div><div class="line"><a name="l01037"></a><span class="lineno"> 1037</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a2dce39a2eb0bb8bc55d0306606bb86d6">reset</a>();</div><div class="line"><a name="l01038"></a><span class="lineno"> 1038</span>&#160;</div><div class="line"><a name="l01039"></a><span class="lineno"> 1039</span>&#160;   <span class="keywordflow">if</span> (!strncmp(<a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a>, <span class="stringliteral">&quot;#!&quot;</span>, 2) ||   <span class="comment">// )DUMP file</span></div><div class="line"><a name="l01040"></a><span class="lineno"> 1040</span>&#160;       !strncmp(<a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a>, <span class="stringliteral">&quot;&lt;!&quot;</span>, 2) ||   <span class="comment">// )DUMP-HTML file</span></div><div class="line"><a name="l01041"></a><span class="lineno"> 1041</span>&#160;       !strncmp(<a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a>, <span class="stringliteral">&quot;â!&quot;</span>, 4))     <span class="comment">// a library</span></div><div class="line"><a name="l01042"></a><span class="lineno"> 1042</span>&#160;      {</div><div class="line"><a name="l01043"></a><span class="lineno"> 1043</span>&#160;        <span class="comment">// the file was either written with )DUMP or is a library.</span></div><div class="line"><a name="l01044"></a><span class="lineno"> 1044</span>&#160;        <span class="comment">// Return the open file descriptor (the destructor will unmap())</span></div><div class="line"><a name="l01045"></a><span class="lineno"> 1045</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01046"></a><span class="lineno"> 1046</span>&#160;        dump_fd = <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>;</div><div class="line"><a name="l01047"></a><span class="lineno"> 1047</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> = -1;   <span class="comment">// file will be closed via dump_fd</span></div><div class="line"><a name="l01048"></a><span class="lineno"> 1048</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01049"></a><span class="lineno"> 1049</span>&#160;      }</div><div class="line"><a name="l01050"></a><span class="lineno"> 1050</span>&#160;</div><div class="line"><a name="l01051"></a><span class="lineno"> 1051</span>&#160;   <span class="keywordflow">if</span> (strncmp(<a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a>, <span class="stringliteral">&quot;&lt;?xml&quot;</span>, 5))   <span class="comment">// not an xml file</span></div><div class="line"><a name="l01052"></a><span class="lineno"> 1052</span>&#160;      {</div><div class="line"><a name="l01053"></a><span class="lineno"> 1053</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;file &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">filename</a> &lt;&lt; <span class="stringliteral">&quot; does not &quot;</span> &lt;&lt; endl</div><div class="line"><a name="l01054"></a><span class="lineno"> 1054</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;have the format of a GNU APL .xml or .apl file&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01055"></a><span class="lineno"> 1055</span>&#160;        close(<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>);</div><div class="line"><a name="l01056"></a><span class="lineno"> 1056</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> = -1;</div><div class="line"><a name="l01057"></a><span class="lineno"> 1057</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01058"></a><span class="lineno"> 1058</span>&#160;      }</div><div class="line"><a name="l01059"></a><span class="lineno"> 1059</span>&#160;}</div><div class="line"><a name="l01060"></a><span class="lineno"> 1060</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01061"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a7e840365086a663e8ed80f4c59eb3a19"> 1061</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a7e840365086a663e8ed80f4c59eb3a19">XML_Loading_Archive::~XML_Loading_Archive</a>()</div><div class="line"><a name="l01062"></a><span class="lineno"> 1062</span>&#160;{</div><div class="line"><a name="l01063"></a><span class="lineno"> 1063</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#abb05032bb86e9f391d5c56d5d22eef30">map_start</a>)   munmap(<a class="code" href="classXML__Loading__Archive.html#abb05032bb86e9f391d5c56d5d22eef30">map_start</a>, <a class="code" href="classXML__Loading__Archive.html#a82e8b22e8f1ddc37a678108a89ae2e92">map_length</a>);</div><div class="line"><a name="l01064"></a><span class="lineno"> 1064</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a> != -1)    close(<a class="code" href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">fd</a>);</div><div class="line"><a name="l01065"></a><span class="lineno"> 1065</span>&#160;}</div><div class="line"><a name="l01066"></a><span class="lineno"> 1066</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01067"></a><span class="lineno"> 1067</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01068"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a2dce39a2eb0bb8bc55d0306606bb86d6"> 1068</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a2dce39a2eb0bb8bc55d0306606bb86d6">XML_Loading_Archive::reset</a>()</div><div class="line"><a name="l01069"></a><span class="lineno"> 1069</span>&#160;{</div><div class="line"><a name="l01070"></a><span class="lineno"> 1070</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a7a5012ead73b1bd89de4c8537da01ef6">line_start</a> = <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a> = utf8P(<a class="code" href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">file_start</a>);</div><div class="line"><a name="l01071"></a><span class="lineno"> 1071</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a> = 1;</div><div class="line"><a name="l01072"></a><span class="lineno"> 1072</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01073"></a><span class="lineno"> 1073</span>&#160;}</div><div class="line"><a name="l01074"></a><span class="lineno"> 1074</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01075"></a><span class="lineno"> 1075</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01076"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace"> 1076</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">XML_Loading_Archive::skip_to_tag</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * tag)</div><div class="line"><a name="l01077"></a><span class="lineno"> 1077</span>&#160;{</div><div class="line"><a name="l01078"></a><span class="lineno"> 1078</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01079"></a><span class="lineno"> 1079</span>&#160;      {</div><div class="line"><a name="l01080"></a><span class="lineno"> 1080</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC))   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01081"></a><span class="lineno"> 1081</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(tag))     <span class="keywordflow">break</span>;</div><div class="line"><a name="l01082"></a><span class="lineno"> 1082</span>&#160;      }</div><div class="line"><a name="l01083"></a><span class="lineno"> 1083</span>&#160;</div><div class="line"><a name="l01084"></a><span class="lineno"> 1084</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01085"></a><span class="lineno"> 1085</span>&#160;}</div><div class="line"><a name="l01086"></a><span class="lineno"> 1086</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01087"></a><span class="lineno"> 1087</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01088"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a45c9b23463cf5379d2788af1789a62f0"> 1088</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a45c9b23463cf5379d2788af1789a62f0">XML_Loading_Archive::read_vids</a>()</div><div class="line"><a name="l01089"></a><span class="lineno"> 1089</span>&#160;{</div><div class="line"><a name="l01090"></a><span class="lineno"> 1090</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a2dce39a2eb0bb8bc55d0306606bb86d6">reset</a>();   <span class="comment">// skips to &lt;Workspace&gt;</span></div><div class="line"><a name="l01091"></a><span class="lineno"> 1091</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">reading_vids</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01092"></a><span class="lineno"> 1092</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a3ea748a15d0a90fe9a32c362b14da7fd">read_Workspace</a>(<span class="keyword">true</span>);</div><div class="line"><a name="l01093"></a><span class="lineno"> 1093</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">reading_vids</a> = <span class="keyword">false</span>;</div><div class="line"><a name="l01094"></a><span class="lineno"> 1094</span>&#160;</div><div class="line"><a name="l01095"></a><span class="lineno"> 1095</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a2dce39a2eb0bb8bc55d0306606bb86d6">reset</a>();</div><div class="line"><a name="l01096"></a><span class="lineno"> 1096</span>&#160;}</div><div class="line"><a name="l01097"></a><span class="lineno"> 1097</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01098"></a><span class="lineno"> 1098</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01099"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a8bd29aeafec52ab250cc219be69c7560"> 1099</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a8bd29aeafec52ab250cc219be69c7560">XML_Loading_Archive::where</a>(ostream &amp; out)</div><div class="line"><a name="l01100"></a><span class="lineno"> 1100</span>&#160;{</div><div class="line"><a name="l01101"></a><span class="lineno"> 1101</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;line=&quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a> &lt;&lt; <span class="stringliteral">&quot;+&quot;</span> &lt;&lt; (<a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a> - <a class="code" href="classXML__Loading__Archive.html#a7a5012ead73b1bd89de4c8537da01ef6">line_start</a>) &lt;&lt; <span class="stringliteral">&quot; &#39;&quot;</span>;</div><div class="line"><a name="l01102"></a><span class="lineno"> 1102</span>&#160;</div><div class="line"><a name="l01103"></a><span class="lineno"> 1103</span>&#160;   loop(j, 40)   { <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>[j] == 0x0A)   <span class="keywordflow">break</span>;   out &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>[j]; }</div><div class="line"><a name="l01104"></a><span class="lineno"> 1104</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01105"></a><span class="lineno"> 1105</span>&#160;}</div><div class="line"><a name="l01106"></a><span class="lineno"> 1106</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01107"></a><span class="lineno"> 1107</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01108"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a2794bca6a47030fdb69759aacb80eb33"> 1108</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a2794bca6a47030fdb69759aacb80eb33">XML_Loading_Archive::where_att</a>(ostream &amp; out)</div><div class="line"><a name="l01109"></a><span class="lineno"> 1109</span>&#160;{</div><div class="line"><a name="l01110"></a><span class="lineno"> 1110</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;line=&quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a> &lt;&lt; <span class="stringliteral">&quot;+&quot;</span> &lt;&lt; (<a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a> - <a class="code" href="classXML__Loading__Archive.html#a7a5012ead73b1bd89de4c8537da01ef6">line_start</a>) &lt;&lt; <span class="stringliteral">&quot; &#39;&quot;</span>;</div><div class="line"><a name="l01111"></a><span class="lineno"> 1111</span>&#160;</div><div class="line"><a name="l01112"></a><span class="lineno"> 1112</span>&#160;   loop(j, 40)</div><div class="line"><a name="l01113"></a><span class="lineno"> 1113</span>&#160;      {</div><div class="line"><a name="l01114"></a><span class="lineno"> 1114</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a>[j] == 0x0A)        <span class="keywordflow">break</span>;</div><div class="line"><a name="l01115"></a><span class="lineno"> 1115</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a> + j &gt;= <a class="code" href="classXML__Loading__Archive.html#a6e040d3332aece6bdb83933dfdba6bb1">end_attr</a>)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01116"></a><span class="lineno"> 1116</span>&#160;         out &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a>[j];</div><div class="line"><a name="l01117"></a><span class="lineno"> 1117</span>&#160;      }</div><div class="line"><a name="l01118"></a><span class="lineno"> 1118</span>&#160;</div><div class="line"><a name="l01119"></a><span class="lineno"> 1119</span>&#160;   out &lt;&lt; <span class="stringliteral">&quot;&#39;&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01120"></a><span class="lineno"> 1120</span>&#160;}</div><div class="line"><a name="l01121"></a><span class="lineno"> 1121</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01122"></a><span class="lineno"> 1122</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01123"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df"> 1123</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">XML_Loading_Archive::get_uni</a>()</div><div class="line"><a name="l01124"></a><span class="lineno"> 1124</span>&#160;{</div><div class="line"><a name="l01125"></a><span class="lineno"> 1125</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a> &gt; <a class="code" href="classXML__Loading__Archive.html#a3a8c16532bbdfbb3901be3e38b6a1cdb">file_end</a>)   <span class="keywordflow">return</span> <span class="keyword">true</span>;   <span class="comment">// EOF</span></div><div class="line"><a name="l01126"></a><span class="lineno"> 1126</span>&#160;</div><div class="line"><a name="l01127"></a><span class="lineno"> 1127</span>&#160;<span class="keywordtype">int</span> len = 0;</div><div class="line"><a name="l01128"></a><span class="lineno"> 1128</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> = <a class="code" href="classUTF8__string.html#a27a630b44bca173fe9ea5005bcb3e460">UTF8_string::toUni</a>(<a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>, len, <span class="keyword">true</span>);</div><div class="line"><a name="l01129"></a><span class="lineno"> 1129</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a> += len;</div><div class="line"><a name="l01130"></a><span class="lineno"> 1130</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == 0x0A)   { ++<a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a>;   <a class="code" href="classXML__Loading__Archive.html#a7a5012ead73b1bd89de4c8537da01ef6">line_start</a> = <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>; }</div><div class="line"><a name="l01131"></a><span class="lineno"> 1131</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01132"></a><span class="lineno"> 1132</span>&#160;}</div><div class="line"><a name="l01133"></a><span class="lineno"> 1133</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01134"></a><span class="lineno"> 1134</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01135"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c"> 1135</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">XML_Loading_Archive::is_tag</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * prefix)<span class="keyword"> const</span></div><div class="line"><a name="l01136"></a><span class="lineno"> 1136</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01137"></a><span class="lineno"> 1137</span>&#160;   <span class="keywordflow">return</span> !strncmp(charP(<a class="code" href="classXML__Loading__Archive.html#a970e38bdfc09eb7dea1fc8746cb9c01f">tag_name</a>), prefix, strlen(prefix));</div><div class="line"><a name="l01138"></a><span class="lineno"> 1138</span>&#160;}</div><div class="line"><a name="l01139"></a><span class="lineno"> 1139</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01140"></a><span class="lineno"> 1140</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01141"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1"> 1141</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">XML_Loading_Archive::expect_tag</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * prefix, <span class="keyword">const</span> <span class="keywordtype">char</span> * loc)<span class="keyword"> const</span></div><div class="line"><a name="l01142"></a><span class="lineno"> 1142</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01143"></a><span class="lineno"> 1143</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(prefix))</div><div class="line"><a name="l01144"></a><span class="lineno"> 1144</span>&#160;      {</div><div class="line"><a name="l01145"></a><span class="lineno"> 1145</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;   Got tag &quot;</span>;</div><div class="line"><a name="l01146"></a><span class="lineno"> 1146</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a59a9b9839c3a2087ce5a350b3b9a9c06">print_tag</a>(CERR);</div><div class="line"><a name="l01147"></a><span class="lineno"> 1147</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot; when expecting tag &quot;</span> &lt;&lt; prefix</div><div class="line"><a name="l01148"></a><span class="lineno"> 1148</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; at &quot;</span> &lt;&lt; loc &lt;&lt; <span class="stringliteral">&quot;  line &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a> &lt;&lt; endl;</div><div class="line"><a name="l01149"></a><span class="lineno"> 1149</span>&#160;        DOMAIN_ERROR;</div><div class="line"><a name="l01150"></a><span class="lineno"> 1150</span>&#160;      }</div><div class="line"><a name="l01151"></a><span class="lineno"> 1151</span>&#160;}</div><div class="line"><a name="l01152"></a><span class="lineno"> 1152</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01153"></a><span class="lineno"> 1153</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01154"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a59a9b9839c3a2087ce5a350b3b9a9c06"> 1154</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a59a9b9839c3a2087ce5a350b3b9a9c06">XML_Loading_Archive::print_tag</a>(ostream &amp; out)<span class="keyword"> const</span></div><div class="line"><a name="l01155"></a><span class="lineno"> 1155</span>&#160;<span class="keyword"></span>{</div><div class="line"><a name="l01156"></a><span class="lineno"> 1156</span>&#160;   loop(t, <a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a> - <a class="code" href="classXML__Loading__Archive.html#a970e38bdfc09eb7dea1fc8746cb9c01f">tag_name</a>)   out &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a970e38bdfc09eb7dea1fc8746cb9c01f">tag_name</a>[t];</div><div class="line"><a name="l01157"></a><span class="lineno"> 1157</span>&#160;}</div><div class="line"><a name="l01158"></a><span class="lineno"> 1158</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01159"></a><span class="lineno"> 1159</span>&#160;<span class="keyword">const</span> UTF8 *</div><div class="line"><a name="l01160"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41"> 1160</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">XML_Loading_Archive::find_attr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * att_name, <span class="keywordtype">bool</span> optional)</div><div class="line"><a name="l01161"></a><span class="lineno"> 1161</span>&#160;{</div><div class="line"><a name="l01162"></a><span class="lineno"> 1162</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> att_len = strlen(att_name);</div><div class="line"><a name="l01163"></a><span class="lineno"> 1163</span>&#160;</div><div class="line"><a name="l01164"></a><span class="lineno"> 1164</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> UTF8 * d = <a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a>; d &lt; <a class="code" href="classXML__Loading__Archive.html#a6e040d3332aece6bdb83933dfdba6bb1">end_attr</a>; ++d)</div><div class="line"><a name="l01165"></a><span class="lineno"> 1165</span>&#160;       {</div><div class="line"><a name="l01166"></a><span class="lineno"> 1166</span>&#160;         <span class="keywordflow">if</span> (strncmp(att_name, charP(d), att_len))   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01167"></a><span class="lineno"> 1167</span>&#160;         <span class="keyword">const</span> UTF8 * dd = d + att_len;</div><div class="line"><a name="l01168"></a><span class="lineno"> 1168</span>&#160;         <span class="keywordflow">while</span> (*dd &lt;= <span class="charliteral">&#39; &#39;</span>)   ++dd;   <span class="comment">// skip whitespaces</span></div><div class="line"><a name="l01169"></a><span class="lineno"> 1169</span>&#160;         <span class="keywordflow">if</span> (*dd++ != <span class="charliteral">&#39;=&#39;</span>)   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01170"></a><span class="lineno"> 1170</span>&#160;</div><div class="line"><a name="l01171"></a><span class="lineno"> 1171</span>&#160;         <span class="comment">// attribute= found. find value.</span></div><div class="line"><a name="l01172"></a><span class="lineno"> 1172</span>&#160;         <span class="keywordflow">while</span> (*dd &lt;= <span class="charliteral">&#39; &#39;</span>)   ++dd;   <span class="comment">// skip whitespaces</span></div><div class="line"><a name="l01173"></a><span class="lineno"> 1173</span>&#160;         Assert(*dd == <span class="charliteral">&#39;&quot;&#39;</span>);</div><div class="line"><a name="l01174"></a><span class="lineno"> 1174</span>&#160;         <span class="keywordflow">return</span> dd + 1;</div><div class="line"><a name="l01175"></a><span class="lineno"> 1175</span>&#160;       }</div><div class="line"><a name="l01176"></a><span class="lineno"> 1176</span>&#160;</div><div class="line"><a name="l01177"></a><span class="lineno"> 1177</span>&#160;   <span class="comment">// not found</span></div><div class="line"><a name="l01178"></a><span class="lineno"> 1178</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01179"></a><span class="lineno"> 1179</span>&#160;   <span class="keywordflow">if</span> (!optional)</div><div class="line"><a name="l01180"></a><span class="lineno"> 1180</span>&#160;      {</div><div class="line"><a name="l01181"></a><span class="lineno"> 1181</span>&#160;         CERR &lt;&lt; <span class="stringliteral">&quot;Attribute name &#39;&quot;</span> &lt;&lt; att_name &lt;&lt; <span class="stringliteral">&quot;&#39; not found in:&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01182"></a><span class="lineno"> 1182</span>&#160;         <a class="code" href="classXML__Loading__Archive.html#a2794bca6a47030fdb69759aacb80eb33">where_att</a>(CERR);</div><div class="line"><a name="l01183"></a><span class="lineno"> 1183</span>&#160;         DOMAIN_ERROR;</div><div class="line"><a name="l01184"></a><span class="lineno"> 1184</span>&#160;      }</div><div class="line"><a name="l01185"></a><span class="lineno"> 1185</span>&#160;   <span class="keywordflow">return</span> 0;   <span class="comment">// not found</span></div><div class="line"><a name="l01186"></a><span class="lineno"> 1186</span>&#160;}</div><div class="line"><a name="l01187"></a><span class="lineno"> 1187</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01188"></a><span class="lineno"> 1188</span>&#160;int64_t</div><div class="line"><a name="l01189"></a><span class="lineno"> 1189</span>&#160;<a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">XML_Loading_Archive::find_int_attr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * attrib, <span class="keywordtype">bool</span> optional, <span class="keywordtype">int</span> base)</div><div class="line"><a name="l01190"></a><span class="lineno"> 1190</span>&#160;{</div><div class="line"><a name="l01191"></a><span class="lineno"> 1191</span>&#160;<span class="keyword">const</span> UTF8 * value = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(attrib, optional);</div><div class="line"><a name="l01192"></a><span class="lineno"> 1192</span>&#160;   <span class="keywordflow">if</span> (value == 0)   <span class="keywordflow">return</span> -1;   <span class="comment">// not found</span></div><div class="line"><a name="l01193"></a><span class="lineno"> 1193</span>&#160;</div><div class="line"><a name="l01194"></a><span class="lineno"> 1194</span>&#160;<span class="keyword">const</span> int64_t val = strtoll(charP(value), 0, base);</div><div class="line"><a name="l01195"></a><span class="lineno"> 1195</span>&#160;   <span class="keywordflow">return</span> val;</div><div class="line"><a name="l01196"></a><span class="lineno"> 1196</span>&#160;}</div><div class="line"><a name="l01197"></a><span class="lineno"> 1197</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01198"></a><span class="lineno"> 1198</span>&#160;<a class="code" href="classAPL__Float.html">APL_Float</a></div><div class="line"><a name="l01199"></a><span class="lineno"> 1199</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a1acad23f43b2ceb1287f378c3e001d33">XML_Loading_Archive::find_float_attr</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * attrib)</div><div class="line"><a name="l01200"></a><span class="lineno"> 1200</span>&#160;{</div><div class="line"><a name="l01201"></a><span class="lineno"> 1201</span>&#160;<span class="keyword">const</span> UTF8 * value = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(attrib, <span class="keyword">false</span>);</div><div class="line"><a name="l01202"></a><span class="lineno"> 1202</span>&#160;<span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> val = strtod(charP(value), 0);</div><div class="line"><a name="l01203"></a><span class="lineno"> 1203</span>&#160;   <span class="keywordflow">return</span> val;</div><div class="line"><a name="l01204"></a><span class="lineno"> 1204</span>&#160;}</div><div class="line"><a name="l01205"></a><span class="lineno"> 1205</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01206"></a><span class="lineno"> 1206</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l01207"></a><span class="lineno"> 1207</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">XML_Loading_Archive::next_tag</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * loc)</div><div class="line"><a name="l01208"></a><span class="lineno"> 1208</span>&#160;{</div><div class="line"><a name="l01209"></a><span class="lineno"> 1209</span>&#160;again:</div><div class="line"><a name="l01210"></a><span class="lineno"> 1210</span>&#160;</div><div class="line"><a name="l01211"></a><span class="lineno"> 1211</span>&#160;   <span class="comment">// read chars up to (including) &#39;&lt;&#39;</span></div><div class="line"><a name="l01212"></a><span class="lineno"> 1212</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01213"></a><span class="lineno"> 1213</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> != <span class="charliteral">&#39;&lt;&#39;</span>)</div><div class="line"><a name="l01214"></a><span class="lineno"> 1214</span>&#160;      {</div><div class="line"><a name="l01215"></a><span class="lineno"> 1215</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">get_uni</a>())   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01216"></a><span class="lineno"> 1216</span>&#160;      }</div><div class="line"><a name="l01217"></a><span class="lineno"> 1217</span>&#160;</div><div class="line"><a name="l01218"></a><span class="lineno"> 1218</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a970e38bdfc09eb7dea1fc8746cb9c01f">tag_name</a> = <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>;</div><div class="line"><a name="l01219"></a><span class="lineno"> 1219</span>&#160;</div><div class="line"><a name="l01220"></a><span class="lineno"> 1220</span>&#160;   <span class="comment">// read char after &lt;</span></div><div class="line"><a name="l01221"></a><span class="lineno"> 1221</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01222"></a><span class="lineno"> 1222</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">get_uni</a>())   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01223"></a><span class="lineno"> 1223</span>&#160;</div><div class="line"><a name="l01224"></a><span class="lineno"> 1224</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == <span class="charliteral">&#39;?&#39;</span>)   <span class="keywordflow">goto</span> again;   <span class="comment">// processing instruction</span></div><div class="line"><a name="l01225"></a><span class="lineno"> 1225</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == <span class="charliteral">&#39;!&#39;</span>)   <span class="keywordflow">goto</span> again;   <span class="comment">// comment</span></div><div class="line"><a name="l01226"></a><span class="lineno"> 1226</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == <span class="charliteral">&#39;/&#39;</span>)   <a class="code" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">get_uni</a>();    <span class="comment">// / at start of name</span></div><div class="line"><a name="l01227"></a><span class="lineno"> 1227</span>&#160;</div><div class="line"><a name="l01228"></a><span class="lineno"> 1228</span>&#160;   <span class="comment">// read chars before attributes (if any)</span></div><div class="line"><a name="l01229"></a><span class="lineno"> 1229</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01230"></a><span class="lineno"> 1230</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01231"></a><span class="lineno"> 1231</span>&#160;       {</div><div class="line"><a name="l01232"></a><span class="lineno"> 1232</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == <span class="charliteral">&#39; &#39;</span>)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01233"></a><span class="lineno"> 1233</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == <span class="charliteral">&#39;/&#39;</span>)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01234"></a><span class="lineno"> 1234</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> == <span class="charliteral">&#39;&gt;&#39;</span>)   <span class="keywordflow">break</span>; </div><div class="line"><a name="l01235"></a><span class="lineno"> 1235</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">get_uni</a>())   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01236"></a><span class="lineno"> 1236</span>&#160;       }</div><div class="line"><a name="l01237"></a><span class="lineno"> 1237</span>&#160;</div><div class="line"><a name="l01238"></a><span class="lineno"> 1238</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">attributes</a> = <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>;</div><div class="line"><a name="l01239"></a><span class="lineno"> 1239</span>&#160;</div><div class="line"><a name="l01240"></a><span class="lineno"> 1240</span>&#160;   <span class="comment">// read chars before end of tag</span></div><div class="line"><a name="l01241"></a><span class="lineno"> 1241</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01242"></a><span class="lineno"> 1242</span>&#160;   <span class="keywordflow">while</span> (<a class="code" href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">current_char</a> != <span class="charliteral">&#39;&gt;&#39;</span>)</div><div class="line"><a name="l01243"></a><span class="lineno"> 1243</span>&#160;      {</div><div class="line"><a name="l01244"></a><span class="lineno"> 1244</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">get_uni</a>())   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l01245"></a><span class="lineno"> 1245</span>&#160;      }</div><div class="line"><a name="l01246"></a><span class="lineno"> 1246</span>&#160;</div><div class="line"><a name="l01247"></a><span class="lineno"> 1247</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a6e040d3332aece6bdb83933dfdba6bb1">end_attr</a> = <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>;</div><div class="line"><a name="l01248"></a><span class="lineno"> 1248</span>&#160;</div><div class="line"><a name="l01249"></a><span class="lineno"> 1249</span>&#160;<span class="comment">/*</span></div><div class="line"><a name="l01250"></a><span class="lineno"> 1250</span>&#160;<span class="comment">   CERR &lt;&lt; &quot;See tag &quot;;</span></div><div class="line"><a name="l01251"></a><span class="lineno"> 1251</span>&#160;<span class="comment">   for (const UTF8 * t = tag_name; t &lt; attributes; ++t)   CERR &lt;&lt; (char)*t;</span></div><div class="line"><a name="l01252"></a><span class="lineno"> 1252</span>&#160;<span class="comment">   CERR &lt;&lt; &quot; at &quot; &lt;&lt; loc &lt;&lt; &quot; line &quot; &lt;&lt; line_no &lt;&lt; endl;</span></div><div class="line"><a name="l01253"></a><span class="lineno"> 1253</span>&#160;<span class="comment">*/</span></div><div class="line"><a name="l01254"></a><span class="lineno"> 1254</span>&#160;</div><div class="line"><a name="l01255"></a><span class="lineno"> 1255</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l01256"></a><span class="lineno"> 1256</span>&#160;}</div><div class="line"><a name="l01257"></a><span class="lineno"> 1257</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01258"></a><span class="lineno"> 1258</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01259"></a><span class="lineno"> 1259</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a3ea748a15d0a90fe9a32c362b14da7fd">XML_Loading_Archive::read_Workspace</a>(<span class="keywordtype">bool</span> silent)</div><div class="line"><a name="l01260"></a><span class="lineno"> 1260</span>&#160;{</div><div class="line"><a name="l01261"></a><span class="lineno"> 1261</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;Workspace&quot;</span>, LOC);</div><div class="line"><a name="l01262"></a><span class="lineno"> 1262</span>&#160;</div><div class="line"><a name="l01263"></a><span class="lineno"> 1263</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> offset   = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;timezone&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01264"></a><span class="lineno"> 1264</span>&#160;<span class="keyword">const</span> UTF8 * wsid  = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;wsid&quot;</span>,         <span class="keyword">false</span>);</div><div class="line"><a name="l01265"></a><span class="lineno"> 1265</span>&#160;</div><div class="line"><a name="l01266"></a><span class="lineno"> 1266</span>&#160;<span class="keywordtype">int</span> year  = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;year&quot;</span>,     <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01267"></a><span class="lineno"> 1267</span>&#160;<span class="keywordtype">int</span> mon   = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;month&quot;</span>,    <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01268"></a><span class="lineno"> 1268</span>&#160;<span class="keywordtype">int</span> day   = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;day&quot;</span>,      <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01269"></a><span class="lineno"> 1269</span>&#160;<span class="keywordtype">int</span> hour  = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;hour&quot;</span>,     <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01270"></a><span class="lineno"> 1270</span>&#160;<span class="keywordtype">int</span> min   = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;minute&quot;</span>,   <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01271"></a><span class="lineno"> 1271</span>&#160;<span class="keywordtype">int</span> sec   = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;second&quot;</span>,   <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01272"></a><span class="lineno"> 1272</span>&#160;</div><div class="line"><a name="l01273"></a><span class="lineno"> 1273</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> saving_SVN;</div><div class="line"><a name="l01274"></a><span class="lineno"> 1274</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> current_SVN(ARCHIVE_SVN);</div><div class="line"><a name="l01275"></a><span class="lineno"> 1275</span>&#160;   {</div><div class="line"><a name="l01276"></a><span class="lineno"> 1276</span>&#160;     <span class="keyword">const</span> UTF8 * saving = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;saving_SVN&quot;</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01277"></a><span class="lineno"> 1277</span>&#160;     <span class="keywordflow">while</span> (saving &amp;&amp; *saving != <span class="charliteral">&#39;&quot;&#39;</span>)   saving_SVN.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(Unicode(*saving++));</div><div class="line"><a name="l01278"></a><span class="lineno"> 1278</span>&#160;   }</div><div class="line"><a name="l01279"></a><span class="lineno"> 1279</span>&#160;<span class="keywordtype">bool</span> mismatch = <span class="keyword">false</span>;</div><div class="line"><a name="l01280"></a><span class="lineno"> 1280</span>&#160;</div><div class="line"><a name="l01281"></a><span class="lineno"> 1281</span>&#160;   <span class="keywordflow">if</span> (saving_SVN.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)   <span class="comment">// saved with very old version</span></div><div class="line"><a name="l01282"></a><span class="lineno"> 1282</span>&#160;      {</div><div class="line"><a name="l01283"></a><span class="lineno"> 1283</span>&#160;        mismatch = <span class="keyword">true</span>;</div><div class="line"><a name="l01284"></a><span class="lineno"> 1284</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;WARNING: this workspace was )SAVEd with a VERY &quot;</span></div><div class="line"><a name="l01285"></a><span class="lineno"> 1285</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;old SVN version of GNU APL.&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01286"></a><span class="lineno"> 1286</span>&#160;      }</div><div class="line"><a name="l01287"></a><span class="lineno"> 1287</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (saving_SVN != current_SVN)   <span class="comment">// saved with different version</span></div><div class="line"><a name="l01288"></a><span class="lineno"> 1288</span>&#160;      {</div><div class="line"><a name="l01289"></a><span class="lineno"> 1289</span>&#160;        mismatch = <span class="keyword">true</span>;</div><div class="line"><a name="l01290"></a><span class="lineno"> 1290</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;WARNING: this workspace was )SAVEd with SVN version &quot;</span></div><div class="line"><a name="l01291"></a><span class="lineno"> 1291</span>&#160;             &lt;&lt; saving_SVN &lt;&lt; endl &lt;&lt;</div><div class="line"><a name="l01292"></a><span class="lineno"> 1292</span>&#160;        <span class="stringliteral">&quot;          but is now being )LOADed with a SVN version &quot;</span></div><div class="line"><a name="l01293"></a><span class="lineno"> 1293</span>&#160;             &lt;&lt; current_SVN &lt;&lt; <span class="stringliteral">&quot; or greater&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01294"></a><span class="lineno"> 1294</span>&#160;      }</div><div class="line"><a name="l01295"></a><span class="lineno"> 1295</span>&#160;</div><div class="line"><a name="l01296"></a><span class="lineno"> 1296</span>&#160;   <span class="keywordflow">if</span> (mismatch)</div><div class="line"><a name="l01297"></a><span class="lineno"> 1297</span>&#160;      {</div><div class="line"><a name="l01298"></a><span class="lineno"> 1298</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;Expect problems, in particular when the )SI was not clear.\n&quot;</span>;</div><div class="line"><a name="l01299"></a><span class="lineno"> 1299</span>&#160;        <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)</div><div class="line"><a name="l01300"></a><span class="lineno"> 1300</span>&#160;           CERR &lt;&lt; <span class="stringliteral">&quot;In case of problems, please try )COPY instead of )LOAD.&quot;</span></div><div class="line"><a name="l01301"></a><span class="lineno"> 1301</span>&#160;                &lt;&lt; endl;</div><div class="line"><a name="l01302"></a><span class="lineno"> 1302</span>&#160;      }</div><div class="line"><a name="l01303"></a><span class="lineno"> 1303</span>&#160;</div><div class="line"><a name="l01304"></a><span class="lineno"> 1304</span>&#160;   sec  += offset          % 60;</div><div class="line"><a name="l01305"></a><span class="lineno"> 1305</span>&#160;   min  += (offset /   60) % 60;</div><div class="line"><a name="l01306"></a><span class="lineno"> 1306</span>&#160;   hour += (offset / 3600) % 60;</div><div class="line"><a name="l01307"></a><span class="lineno"> 1307</span>&#160;   <span class="keywordflow">if</span>      (sec  &gt;= 60)   { sec  -= 60;   ++min;  }</div><div class="line"><a name="l01308"></a><span class="lineno"> 1308</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (sec  &lt;  0)    { sec  += 60;   --min;  }</div><div class="line"><a name="l01309"></a><span class="lineno"> 1309</span>&#160;</div><div class="line"><a name="l01310"></a><span class="lineno"> 1310</span>&#160;   <span class="keywordflow">if</span>      (min  &gt;= 60)   { min  -= 60;   ++hour; }</div><div class="line"><a name="l01311"></a><span class="lineno"> 1311</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (min  &lt;   0)   { min  += 60;   --hour; }</div><div class="line"><a name="l01312"></a><span class="lineno"> 1312</span>&#160;</div><div class="line"><a name="l01313"></a><span class="lineno"> 1313</span>&#160;   <span class="keywordflow">if</span>      (hour &gt;= 24)   { hour -= 24;   ++day;  }</div><div class="line"><a name="l01314"></a><span class="lineno"> 1314</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (hour &lt;   0)   { hour += 24;   --day;  }</div><div class="line"><a name="l01315"></a><span class="lineno"> 1315</span>&#160;</div><div class="line"><a name="l01316"></a><span class="lineno"> 1316</span>&#160;<span class="keywordtype">bool</span> next_month = <span class="keyword">false</span>;</div><div class="line"><a name="l01317"></a><span class="lineno"> 1317</span>&#160;<span class="keywordtype">bool</span> prev_month = <span class="keyword">false</span>;</div><div class="line"><a name="l01318"></a><span class="lineno"> 1318</span>&#160;   <span class="keywordflow">switch</span>(day)</div><div class="line"><a name="l01319"></a><span class="lineno"> 1319</span>&#160;      {</div><div class="line"><a name="l01320"></a><span class="lineno"> 1320</span>&#160;        <span class="keywordflow">case</span> 32: next_month = <span class="keyword">true</span>;</div><div class="line"><a name="l01321"></a><span class="lineno"> 1321</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l01322"></a><span class="lineno"> 1322</span>&#160;</div><div class="line"><a name="l01323"></a><span class="lineno"> 1323</span>&#160;        <span class="keywordflow">case</span> 31: <span class="keywordflow">if</span> (mon == 4 || mon == 6 || mon == 9 || mon == 11)</div><div class="line"><a name="l01324"></a><span class="lineno"> 1324</span>&#160;                    next_month = <span class="keyword">true</span>;</div><div class="line"><a name="l01325"></a><span class="lineno"> 1325</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l01326"></a><span class="lineno"> 1326</span>&#160;</div><div class="line"><a name="l01327"></a><span class="lineno"> 1327</span>&#160;        <span class="keywordflow">case</span> 30: <span class="keywordflow">if</span> (mon == 2)   next_month = <span class="keyword">true</span>;</div><div class="line"><a name="l01328"></a><span class="lineno"> 1328</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l01329"></a><span class="lineno"> 1329</span>&#160;</div><div class="line"><a name="l01330"></a><span class="lineno"> 1330</span>&#160;        <span class="keywordflow">case</span> 29: <span class="keywordflow">if</span> (mon != 2)         <span class="keywordflow">break</span>;               <span class="comment">// not february</span></div><div class="line"><a name="l01331"></a><span class="lineno"> 1331</span>&#160;                 <span class="keywordflow">if</span> (year &amp; 3)         next_month = <span class="keyword">true</span>;   <span class="comment">// not leap year</span></div><div class="line"><a name="l01332"></a><span class="lineno"> 1332</span>&#160;                 <span class="comment">// the above fails if someone loads a workspace that</span></div><div class="line"><a name="l01333"></a><span class="lineno"> 1333</span>&#160;                 <span class="comment">// was saved around midnight on 2/28/2100. Dont do that!</span></div><div class="line"><a name="l01334"></a><span class="lineno"> 1334</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l01335"></a><span class="lineno"> 1335</span>&#160;</div><div class="line"><a name="l01336"></a><span class="lineno"> 1336</span>&#160;        <span class="keywordflow">case</span> 0:  prev_month = <span class="keyword">true</span>;</div><div class="line"><a name="l01337"></a><span class="lineno"> 1337</span>&#160;                 <span class="keywordflow">break</span>;</div><div class="line"><a name="l01338"></a><span class="lineno"> 1338</span>&#160;</div><div class="line"><a name="l01339"></a><span class="lineno"> 1339</span>&#160;        <span class="keywordflow">default</span>: <span class="keywordflow">break</span>;</div><div class="line"><a name="l01340"></a><span class="lineno"> 1340</span>&#160;      }</div><div class="line"><a name="l01341"></a><span class="lineno"> 1341</span>&#160;</div><div class="line"><a name="l01342"></a><span class="lineno"> 1342</span>&#160;   <span class="keywordflow">if</span>      (next_month)   { day = 1; ++mon;  }</div><div class="line"><a name="l01343"></a><span class="lineno"> 1343</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (prev_month)</div><div class="line"><a name="l01344"></a><span class="lineno"> 1344</span>&#160;           {</div><div class="line"><a name="l01345"></a><span class="lineno"> 1345</span>&#160;             day = 31;   --mon;</div><div class="line"><a name="l01346"></a><span class="lineno"> 1346</span>&#160;             <span class="keywordflow">if</span> (mon == 4 || mon == 6 || mon == 9 || mon == 11)   day = 30;</div><div class="line"><a name="l01347"></a><span class="lineno"> 1347</span>&#160;             <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mon == 2)                 day = (year &amp; 3) ? 28 : 29;</div><div class="line"><a name="l01348"></a><span class="lineno"> 1348</span>&#160;           }</div><div class="line"><a name="l01349"></a><span class="lineno"> 1349</span>&#160;</div><div class="line"><a name="l01350"></a><span class="lineno"> 1350</span>&#160;   <span class="keywordflow">if</span>      (mon &gt; 12)   { mon =  1; ++year; }</div><div class="line"><a name="l01351"></a><span class="lineno"> 1351</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (mon &lt;  1)   { mon = 12; --year; }</div><div class="line"><a name="l01352"></a><span class="lineno"> 1352</span>&#160;</div><div class="line"><a name="l01353"></a><span class="lineno"> 1353</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;read_Workspace() &quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01354"></a><span class="lineno"> 1354</span>&#160;</div><div class="line"><a name="l01355"></a><span class="lineno"> 1355</span>&#160;   <span class="comment">// quick check that the file is complete</span></div><div class="line"><a name="l01356"></a><span class="lineno"> 1356</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01357"></a><span class="lineno"> 1357</span>&#160;   <span class="keywordflow">for</span> (<span class="keyword">const</span> UTF8 * c = <a class="code" href="classXML__Loading__Archive.html#a3a8c16532bbdfbb3901be3e38b6a1cdb">file_end</a> - 12; (c &gt; <a class="code" href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">data</a>) &amp;&amp; (c &gt; <a class="code" href="classXML__Loading__Archive.html#a3a8c16532bbdfbb3901be3e38b6a1cdb">file_end</a> - 200); --c)</div><div class="line"><a name="l01358"></a><span class="lineno"> 1358</span>&#160;       {</div><div class="line"><a name="l01359"></a><span class="lineno"> 1359</span>&#160;         <span class="keywordflow">if</span> (!strncmp(charP(c), <span class="stringliteral">&quot;&lt;/Workspace&gt;&quot;</span>, 12))</div><div class="line"><a name="l01360"></a><span class="lineno"> 1360</span>&#160;            {</div><div class="line"><a name="l01361"></a><span class="lineno"> 1361</span>&#160;              <a class="code" href="classXML__Loading__Archive.html#ac088635672e79a9c3f9079eff4046bd9">file_is_complete</a> = <span class="keyword">true</span>;</div><div class="line"><a name="l01362"></a><span class="lineno"> 1362</span>&#160;              <span class="keywordflow">break</span>;</div><div class="line"><a name="l01363"></a><span class="lineno"> 1363</span>&#160;            }</div><div class="line"><a name="l01364"></a><span class="lineno"> 1364</span>&#160;       }</div><div class="line"><a name="l01365"></a><span class="lineno"> 1365</span>&#160;</div><div class="line"><a name="l01366"></a><span class="lineno"> 1366</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#ac088635672e79a9c3f9079eff4046bd9">file_is_complete</a> &amp;&amp; !<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)</div><div class="line"><a name="l01367"></a><span class="lineno"> 1367</span>&#160;      {</div><div class="line"><a name="l01368"></a><span class="lineno"> 1368</span>&#160;        CERR &lt;&lt;</div><div class="line"><a name="l01369"></a><span class="lineno"> 1369</span>&#160;<span class="stringliteral">&quot;*** workspace file &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">filename</a> &lt;&lt; endl &lt;&lt;</div><div class="line"><a name="l01370"></a><span class="lineno"> 1370</span>&#160;<span class="stringliteral">&quot;    seems to be incomplete (possibly caused by a crash on )SAVE?)\n&quot;</span> </div><div class="line"><a name="l01371"></a><span class="lineno"> 1371</span>&#160;<span class="stringliteral">&quot;    You may still be able to )COPY from it.\n&quot;</span></div><div class="line"><a name="l01372"></a><span class="lineno"> 1372</span>&#160;<span class="stringliteral">&quot;\nNOT COPIED&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01373"></a><span class="lineno"> 1373</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01374"></a><span class="lineno"> 1374</span>&#160;      }</div><div class="line"><a name="l01375"></a><span class="lineno"> 1375</span>&#160;</div><div class="line"><a name="l01376"></a><span class="lineno"> 1376</span>&#160;   <span class="comment">// the order in which tags are written to the xml file</span></div><div class="line"><a name="l01377"></a><span class="lineno"> 1377</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01378"></a><span class="lineno"> 1378</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * tag_order[] =</div><div class="line"><a name="l01379"></a><span class="lineno"> 1379</span>&#160;{</div><div class="line"><a name="l01380"></a><span class="lineno"> 1380</span>&#160;  <span class="stringliteral">&quot;Value&quot;</span>,</div><div class="line"><a name="l01381"></a><span class="lineno"> 1381</span>&#160;  <span class="stringliteral">&quot;Ravel&quot;</span>,</div><div class="line"><a name="l01382"></a><span class="lineno"> 1382</span>&#160;  <span class="stringliteral">&quot;SymbolTable&quot;</span>,</div><div class="line"><a name="l01383"></a><span class="lineno"> 1383</span>&#160;  <span class="stringliteral">&quot;Symbol&quot;</span>,</div><div class="line"><a name="l01384"></a><span class="lineno"> 1384</span>&#160;  <span class="stringliteral">&quot;Commands&quot;</span>,</div><div class="line"><a name="l01385"></a><span class="lineno"> 1385</span>&#160;  <span class="stringliteral">&quot;StateIndicator&quot;</span>,</div><div class="line"><a name="l01386"></a><span class="lineno"> 1386</span>&#160;  <span class="stringliteral">&quot;/Workspace&quot;</span>,</div><div class="line"><a name="l01387"></a><span class="lineno"> 1387</span>&#160;  0</div><div class="line"><a name="l01388"></a><span class="lineno"> 1388</span>&#160;};</div><div class="line"><a name="l01389"></a><span class="lineno"> 1389</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> ** tag_pos = tag_order;</div><div class="line"><a name="l01390"></a><span class="lineno"> 1390</span>&#160;</div><div class="line"><a name="l01391"></a><span class="lineno"> 1391</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01392"></a><span class="lineno"> 1392</span>&#160;       {</div><div class="line"><a name="l01393"></a><span class="lineno"> 1393</span>&#160;         <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01394"></a><span class="lineno"> 1394</span>&#160;</div><div class="line"><a name="l01395"></a><span class="lineno"> 1395</span>&#160;         <span class="comment">// make sure that we do not move backwards in tag_order</span></div><div class="line"><a name="l01396"></a><span class="lineno"> 1396</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l01397"></a><span class="lineno"> 1397</span>&#160;         <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(*tag_pos))   <span class="comment">// new tag</span></div><div class="line"><a name="l01398"></a><span class="lineno"> 1398</span>&#160;            {</div><div class="line"><a name="l01399"></a><span class="lineno"> 1399</span>&#160;              tag_pos++;</div><div class="line"><a name="l01400"></a><span class="lineno"> 1400</span>&#160;              <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01401"></a><span class="lineno"> 1401</span>&#160;                  {</div><div class="line"><a name="l01402"></a><span class="lineno"> 1402</span>&#160;                     <span class="keywordflow">if</span> (*tag_pos == 0)      DOMAIN_ERROR;   <span class="comment">// end of list</span></div><div class="line"><a name="l01403"></a><span class="lineno"> 1403</span>&#160;                     <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(*tag_pos))   <span class="keywordflow">break</span>;          <span class="comment">// found</span></div><div class="line"><a name="l01404"></a><span class="lineno"> 1404</span>&#160;                     ++tag_pos;</div><div class="line"><a name="l01405"></a><span class="lineno"> 1405</span>&#160;                  }</div><div class="line"><a name="l01406"></a><span class="lineno"> 1406</span>&#160;            }</div><div class="line"><a name="l01407"></a><span class="lineno"> 1407</span>&#160;</div><div class="line"><a name="l01408"></a><span class="lineno"> 1408</span>&#160;         <span class="keywordflow">if</span>      (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Value&quot;</span>))            <a class="code" href="classXML__Loading__Archive.html#a475b4572fea93849b155009d78afbd66">read_Value</a>();</div><div class="line"><a name="l01409"></a><span class="lineno"> 1409</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Ravel&quot;</span>))            <a class="code" href="classXML__Loading__Archive.html#ad200f5b98b9cf3e903ccf714a56a1d0f">read_Ravel</a>();</div><div class="line"><a name="l01410"></a><span class="lineno"> 1410</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;SymbolTable&quot;</span>))      <a class="code" href="classXML__Loading__Archive.html#a2a4f7a3fff06dfd2351348bf26fc90a3">read_SymbolTable</a>();</div><div class="line"><a name="l01411"></a><span class="lineno"> 1411</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Symbol&quot;</span>))           <a class="code" href="classXML__Loading__Archive.html#a75730a7dd5af9238d0d1aa223a54060e">read_Symbol</a>();</div><div class="line"><a name="l01412"></a><span class="lineno"> 1412</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Commands&quot;</span>))         <a class="code" href="classXML__Loading__Archive.html#aa277539e63e84953fa49069c6d51ea47">read_Commands</a>();</div><div class="line"><a name="l01413"></a><span class="lineno"> 1413</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)                    <span class="keywordflow">break</span>;</div><div class="line"><a name="l01414"></a><span class="lineno"> 1414</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;StateIndicator&quot;</span>))   <a class="code" href="classXML__Loading__Archive.html#ad2f1d88070976eab8a41f0fdcd1e0ec1">read_StateIndicator</a>();</div><div class="line"><a name="l01415"></a><span class="lineno"> 1415</span>&#160;         <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;/Workspace&quot;</span>))       <span class="keywordflow">break</span>;</div><div class="line"><a name="l01416"></a><span class="lineno"> 1416</span>&#160;         <span class="keywordflow">else</span>    <span class="comment">/* complain */</span>               <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;UNEXPECTED&quot;</span>, LOC);</div><div class="line"><a name="l01417"></a><span class="lineno"> 1417</span>&#160;       }</div><div class="line"><a name="l01418"></a><span class="lineno"> 1418</span>&#160;</div><div class="line"><a name="l01419"></a><span class="lineno"> 1419</span>&#160;   <span class="comment">// loaded workspace can contain stale variables, e.g. shared vars.</span></div><div class="line"><a name="l01420"></a><span class="lineno"> 1420</span>&#160;   <span class="comment">// remove them.</span></div><div class="line"><a name="l01421"></a><span class="lineno"> 1421</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01422"></a><span class="lineno"> 1422</span>&#160;   <a class="code" href="classValue.html#a38979fd196c826557e1614fa0514bbaa">Value::erase_stale</a>(LOC);</div><div class="line"><a name="l01423"></a><span class="lineno"> 1423</span>&#160;</div><div class="line"><a name="l01424"></a><span class="lineno"> 1424</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">reading_vids</a>)   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01425"></a><span class="lineno"> 1425</span>&#160;</div><div class="line"><a name="l01426"></a><span class="lineno"> 1426</span>&#160;<span class="keyword">const</span> <span class="keywordtype">char</span> * tz_sign = (offset &lt; 0) ? <span class="stringliteral">&quot;&quot;</span> : <span class="stringliteral">&quot;+&quot;</span>;</div><div class="line"><a name="l01427"></a><span class="lineno"> 1427</span>&#160;   <span class="keywordflow">if</span> (!silent)   COUT</div><div class="line"><a name="l01428"></a><span class="lineno"> 1428</span>&#160;        &lt;&lt; <span class="stringliteral">&quot;SAVED &quot;</span></div><div class="line"><a name="l01429"></a><span class="lineno"> 1429</span>&#160;        &lt;&lt; setfill(<span class="charliteral">&#39;0&#39;</span>) &lt;&lt; year        &lt;&lt; <span class="stringliteral">&quot;-&quot;</span></div><div class="line"><a name="l01430"></a><span class="lineno"> 1430</span>&#160;        &lt;&lt; setw(2)      &lt;&lt; mon         &lt;&lt; <span class="stringliteral">&quot;-&quot;</span></div><div class="line"><a name="l01431"></a><span class="lineno"> 1431</span>&#160;        &lt;&lt; setw(2)      &lt;&lt; day         &lt;&lt; <span class="stringliteral">&quot; &quot;</span></div><div class="line"><a name="l01432"></a><span class="lineno"> 1432</span>&#160;        &lt;&lt; setw(2)      &lt;&lt; hour        &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div><div class="line"><a name="l01433"></a><span class="lineno"> 1433</span>&#160;        &lt;&lt; setw(2)      &lt;&lt; min         &lt;&lt; <span class="stringliteral">&quot;:&quot;</span></div><div class="line"><a name="l01434"></a><span class="lineno"> 1434</span>&#160;        &lt;&lt; setw(2)      &lt;&lt; sec         &lt;&lt; <span class="stringliteral">&quot; (GMT&quot;</span></div><div class="line"><a name="l01435"></a><span class="lineno"> 1435</span>&#160;        &lt;&lt; tz_sign      &lt;&lt; offset/3600 &lt;&lt; <span class="stringliteral">&quot;)&quot;</span></div><div class="line"><a name="l01436"></a><span class="lineno"> 1436</span>&#160;        &lt;&lt; setfill(<span class="charliteral">&#39; &#39;</span>) &lt;&lt;  endl;</div><div class="line"><a name="l01437"></a><span class="lineno"> 1437</span>&#160;</div><div class="line"><a name="l01438"></a><span class="lineno"> 1438</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)</div><div class="line"><a name="l01439"></a><span class="lineno"> 1439</span>&#160;      {</div><div class="line"><a name="l01440"></a><span class="lineno"> 1440</span>&#160;        <span class="keyword">const</span> UTF8 * end = wsid;</div><div class="line"><a name="l01441"></a><span class="lineno"> 1441</span>&#160;        <span class="keywordflow">while</span> (*end != <span class="charliteral">&#39;&quot;&#39;</span>)   ++end;</div><div class="line"><a name="l01442"></a><span class="lineno"> 1442</span>&#160;</div><div class="line"><a name="l01443"></a><span class="lineno"> 1443</span>&#160;        <a class="code" href="classWorkspace.html#a016ae4cac389b19f735b3c70a17cc508">Workspace::set_WS_name</a>(<a class="code" href="classUCS__string.html">UCS_string</a>(<a class="code" href="classUTF8__string.html">UTF8_string</a>(wsid, end - wsid)));</div><div class="line"><a name="l01444"></a><span class="lineno"> 1444</span>&#160;      }</div><div class="line"><a name="l01445"></a><span class="lineno"> 1445</span>&#160;</div><div class="line"><a name="l01446"></a><span class="lineno"> 1446</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a02c56f13960c2355d285da61356e5dff">have_allowed_objects</a> &amp;&amp; <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>.size())</div><div class="line"><a name="l01447"></a><span class="lineno"> 1447</span>&#160;      {</div><div class="line"><a name="l01448"></a><span class="lineno"> 1448</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;NOT COPIED:&quot;</span>;</div><div class="line"><a name="l01449"></a><span class="lineno"> 1449</span>&#160;        loop(a, <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>.size())   CERR &lt;&lt; <span class="stringliteral">&quot; &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>[a];</div><div class="line"><a name="l01450"></a><span class="lineno"> 1450</span>&#160;        CERR &lt;&lt; endl;</div><div class="line"><a name="l01451"></a><span class="lineno"> 1451</span>&#160;      }</div><div class="line"><a name="l01452"></a><span class="lineno"> 1452</span>&#160;}</div><div class="line"><a name="l01453"></a><span class="lineno"> 1453</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01454"></a><span class="lineno"> 1454</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01455"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a475b4572fea93849b155009d78afbd66"> 1455</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a475b4572fea93849b155009d78afbd66">XML_Loading_Archive::read_Value</a>()</div><div class="line"><a name="l01456"></a><span class="lineno"> 1456</span>&#160;{</div><div class="line"><a name="l01457"></a><span class="lineno"> 1457</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;Value&quot;</span>, LOC);</div><div class="line"><a name="l01458"></a><span class="lineno"> 1458</span>&#160;</div><div class="line"><a name="l01459"></a><span class="lineno"> 1459</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  vid = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;vid&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01460"></a><span class="lineno"> 1460</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  parent = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;parent&quot;</span>, <span class="keyword">true</span>, 10);</div><div class="line"><a name="l01461"></a><span class="lineno"> 1461</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span>  rk  = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;rk&quot;</span>,  <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01462"></a><span class="lineno"> 1462</span>&#160;</div><div class="line"><a name="l01463"></a><span class="lineno"> 1463</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;  read_Value() vid=&quot;</span> &lt;&lt; vid &lt;&lt; endl;</div><div class="line"><a name="l01464"></a><span class="lineno"> 1464</span>&#160;</div><div class="line"><a name="l01465"></a><span class="lineno"> 1465</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">reading_vids</a>)</div><div class="line"><a name="l01466"></a><span class="lineno"> 1466</span>&#160;      {</div><div class="line"><a name="l01467"></a><span class="lineno"> 1467</span>&#160;         <a class="code" href="classXML__Loading__Archive.html#aeacc5a4f0951f36624045b6831ff09c2">parents</a>.push_back(parent);</div><div class="line"><a name="l01468"></a><span class="lineno"> 1468</span>&#160;         <span class="keywordflow">return</span>;</div><div class="line"><a name="l01469"></a><span class="lineno"> 1469</span>&#160;      }</div><div class="line"><a name="l01470"></a><span class="lineno"> 1470</span>&#160;</div><div class="line"><a name="l01471"></a><span class="lineno"> 1471</span>&#160;<a class="code" href="classShape.html">Shape</a> sh_value;</div><div class="line"><a name="l01472"></a><span class="lineno"> 1472</span>&#160;   loop(r, rk)</div><div class="line"><a name="l01473"></a><span class="lineno"> 1473</span>&#160;      {</div><div class="line"><a name="l01474"></a><span class="lineno"> 1474</span>&#160;        <span class="keywordtype">char</span> sh[20];</div><div class="line"><a name="l01475"></a><span class="lineno"> 1475</span>&#160;        snprintf(sh, <span class="keyword">sizeof</span>(sh), <span class="stringliteral">&quot;sh-%d&quot;</span>, <span class="keywordtype">int</span>(r));</div><div class="line"><a name="l01476"></a><span class="lineno"> 1476</span>&#160;        <span class="keyword">const</span> UTF8 * sh_r = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(sh, <span class="keyword">false</span>);</div><div class="line"><a name="l01477"></a><span class="lineno"> 1477</span>&#160;        sh_value.<a class="code" href="classShape.html#aeb018b67601d3f1c4bea3d2c2b877b7e">add_shape_item</a>(atoll(charP(sh_r)));</div><div class="line"><a name="l01478"></a><span class="lineno"> 1478</span>&#160;      }</div><div class="line"><a name="l01479"></a><span class="lineno"> 1479</span>&#160;</div><div class="line"><a name="l01480"></a><span class="lineno"> 1480</span>&#160;   <span class="comment">// if we do )COPY or )PCOPY and vid is not in vids_COPY list, then we</span></div><div class="line"><a name="l01481"></a><span class="lineno"> 1481</span>&#160;   <span class="comment">// push 0 (so that indexing with vid still works) and ignore such</span></div><div class="line"><a name="l01482"></a><span class="lineno"> 1482</span>&#160;   <span class="comment">// values in read_Ravel.</span></div><div class="line"><a name="l01483"></a><span class="lineno"> 1483</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01484"></a><span class="lineno"> 1484</span>&#160;<span class="keywordtype">bool</span> no_copy = <span class="keyword">false</span>;   <span class="comment">// assume the value is needed</span></div><div class="line"><a name="l01485"></a><span class="lineno"> 1485</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)</div><div class="line"><a name="l01486"></a><span class="lineno"> 1486</span>&#160;      {</div><div class="line"><a name="l01487"></a><span class="lineno"> 1487</span>&#160;        <span class="comment">// if vid is a sub-value then find its topmost owner</span></div><div class="line"><a name="l01488"></a><span class="lineno"> 1488</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01489"></a><span class="lineno"> 1489</span>&#160;        <span class="keywordtype">int</span> parent = vid;</div><div class="line"><a name="l01490"></a><span class="lineno"> 1490</span>&#160;        <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l01491"></a><span class="lineno"> 1491</span>&#160;            {</div><div class="line"><a name="l01492"></a><span class="lineno"> 1492</span>&#160;              Assert(parent &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#aeacc5a4f0951f36624045b6831ff09c2">parents</a>.size()));</div><div class="line"><a name="l01493"></a><span class="lineno"> 1493</span>&#160;              <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#aeacc5a4f0951f36624045b6831ff09c2">parents</a>[parent] == -1)   <span class="keywordflow">break</span>;   <span class="comment">// topmost owner found</span></div><div class="line"><a name="l01494"></a><span class="lineno"> 1494</span>&#160;              parent = <a class="code" href="classXML__Loading__Archive.html#aeacc5a4f0951f36624045b6831ff09c2">parents</a>[parent];</div><div class="line"><a name="l01495"></a><span class="lineno"> 1495</span>&#160;            }</div><div class="line"><a name="l01496"></a><span class="lineno"> 1496</span>&#160;</div><div class="line"><a name="l01497"></a><span class="lineno"> 1497</span>&#160;        no_copy = <span class="keyword">true</span>;   <span class="comment">// assume the value is not needed</span></div><div class="line"><a name="l01498"></a><span class="lineno"> 1498</span>&#160;        loop(v, <a class="code" href="classXML__Loading__Archive.html#a4180cae61394cb08ba070c7ecd138ea5">vids_COPY</a>.size())</div><div class="line"><a name="l01499"></a><span class="lineno"> 1499</span>&#160;           {</div><div class="line"><a name="l01500"></a><span class="lineno"> 1500</span>&#160;              <span class="keywordflow">if</span> (parent == <a class="code" href="classXML__Loading__Archive.html#a4180cae61394cb08ba070c7ecd138ea5">vids_COPY</a>[v])   <span class="comment">// vid is in the list: copy</span></div><div class="line"><a name="l01501"></a><span class="lineno"> 1501</span>&#160;                 {</div><div class="line"><a name="l01502"></a><span class="lineno"> 1502</span>&#160;                   no_copy = <span class="keyword">false</span>;</div><div class="line"><a name="l01503"></a><span class="lineno"> 1503</span>&#160;                   <span class="keywordflow">break</span>;</div><div class="line"><a name="l01504"></a><span class="lineno"> 1504</span>&#160;                 }</div><div class="line"><a name="l01505"></a><span class="lineno"> 1505</span>&#160;           }</div><div class="line"><a name="l01506"></a><span class="lineno"> 1506</span>&#160;      }</div><div class="line"><a name="l01507"></a><span class="lineno"> 1507</span>&#160;</div><div class="line"><a name="l01508"></a><span class="lineno"> 1508</span>&#160;   <span class="keywordflow">if</span> (no_copy)</div><div class="line"><a name="l01509"></a><span class="lineno"> 1509</span>&#160;      {</div><div class="line"><a name="l01510"></a><span class="lineno"> 1510</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.push_back(<a class="code" href="classValue__P.html">Value_P</a>());</div><div class="line"><a name="l01511"></a><span class="lineno"> 1511</span>&#160;      }</div><div class="line"><a name="l01512"></a><span class="lineno"> 1512</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01513"></a><span class="lineno"> 1513</span>&#160;      {</div><div class="line"><a name="l01514"></a><span class="lineno"> 1514</span>&#160;        Assert(vid == <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l01515"></a><span class="lineno"> 1515</span>&#160;</div><div class="line"><a name="l01516"></a><span class="lineno"> 1516</span>&#160;        <a class="code" href="classValue__P.html">Value_P</a> val(sh_value, LOC);</div><div class="line"><a name="l01517"></a><span class="lineno"> 1517</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.push_back(val);</div><div class="line"><a name="l01518"></a><span class="lineno"> 1518</span>&#160;      }</div><div class="line"><a name="l01519"></a><span class="lineno"> 1519</span>&#160;}</div><div class="line"><a name="l01520"></a><span class="lineno"> 1520</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01521"></a><span class="lineno"> 1521</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01522"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#aa94a5825fbb0c3c7d5d894a3d8430221"> 1522</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#aa94a5825fbb0c3c7d5d894a3d8430221">XML_Loading_Archive::read_Cells</a>(<a class="code" href="classCell.html">Cell</a> * &amp; C, <a class="code" href="classValue.html">Value</a> &amp; C_owner,</div><div class="line"><a name="l01523"></a><span class="lineno"> 1523</span>&#160;                                <span class="keyword">const</span> UTF8 * &amp; first)</div><div class="line"><a name="l01524"></a><span class="lineno"> 1524</span>&#160;{</div><div class="line"><a name="l01525"></a><span class="lineno"> 1525</span>&#160;   <span class="keywordflow">while</span> (*first &lt;= <span class="charliteral">&#39; &#39;</span>)   ++first;</div><div class="line"><a name="l01526"></a><span class="lineno"> 1526</span>&#160;</div><div class="line"><a name="l01527"></a><span class="lineno"> 1527</span>&#160;<span class="keywordtype">int</span> len;</div><div class="line"><a name="l01528"></a><span class="lineno"> 1528</span>&#160;<span class="keyword">const</span> Unicode type = <a class="code" href="classUTF8__string.html#a27a630b44bca173fe9ea5005bcb3e460">UTF8_string::toUni</a>(first, len, <span class="keyword">true</span>);</div><div class="line"><a name="l01529"></a><span class="lineno"> 1529</span>&#160;</div><div class="line"><a name="l01530"></a><span class="lineno"> 1530</span>&#160;   <span class="keywordflow">switch</span> (type)</div><div class="line"><a name="l01531"></a><span class="lineno"> 1531</span>&#160;      {</div><div class="line"><a name="l01532"></a><span class="lineno"> 1532</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U0: <span class="comment">// end of UNI_PAD_U2</span></div><div class="line"><a name="l01533"></a><span class="lineno"> 1533</span>&#160;        <span class="keywordflow">case</span> <span class="charliteral">&#39;\n&#39;</span>:       <span class="comment">// end of UNI_PAD_U2 (fix old bug)</span></div><div class="line"><a name="l01534"></a><span class="lineno"> 1534</span>&#160;             first += len;</div><div class="line"><a name="l01535"></a><span class="lineno"> 1535</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01536"></a><span class="lineno"> 1536</span>&#160;</div><div class="line"><a name="l01537"></a><span class="lineno"> 1537</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U1: <span class="comment">// hex Unicode</span></div><div class="line"><a name="l01538"></a><span class="lineno"> 1538</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U2: <span class="comment">// printable ASCII</span></div><div class="line"><a name="l01539"></a><span class="lineno"> 1539</span>&#160;             {</div><div class="line"><a name="l01540"></a><span class="lineno"> 1540</span>&#160;               <a class="code" href="classUCS__string.html">UCS_string</a> ucs;</div><div class="line"><a name="l01541"></a><span class="lineno"> 1541</span>&#160;               <a class="code" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">read_chars</a>(ucs, first);</div><div class="line"><a name="l01542"></a><span class="lineno"> 1542</span>&#160;               loop(u, ucs.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>())   <span class="keyword">new</span> (C++) <a class="code" href="classCharCell.html">CharCell</a>(ucs[u]);</div><div class="line"><a name="l01543"></a><span class="lineno"> 1543</span>&#160;             }</div><div class="line"><a name="l01544"></a><span class="lineno"> 1544</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01545"></a><span class="lineno"> 1545</span>&#160;</div><div class="line"><a name="l01546"></a><span class="lineno"> 1546</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U3: <span class="comment">// integer</span></div><div class="line"><a name="l01547"></a><span class="lineno"> 1547</span>&#160;             first += len;</div><div class="line"><a name="l01548"></a><span class="lineno"> 1548</span>&#160;             {</div><div class="line"><a name="l01549"></a><span class="lineno"> 1549</span>&#160;               <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01550"></a><span class="lineno"> 1550</span>&#160;               <span class="keyword">const</span> APL_Integer val = strtoll(charP(first), &amp;end, 10);</div><div class="line"><a name="l01551"></a><span class="lineno"> 1551</span>&#160;               <span class="keyword">new</span> (C++) <a class="code" href="classIntCell.html">IntCell</a>(val);</div><div class="line"><a name="l01552"></a><span class="lineno"> 1552</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01553"></a><span class="lineno"> 1553</span>&#160;             }</div><div class="line"><a name="l01554"></a><span class="lineno"> 1554</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01555"></a><span class="lineno"> 1555</span>&#160;</div><div class="line"><a name="l01556"></a><span class="lineno"> 1556</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U4: <span class="comment">// real</span></div><div class="line"><a name="l01557"></a><span class="lineno"> 1557</span>&#160;             first += len;</div><div class="line"><a name="l01558"></a><span class="lineno"> 1558</span>&#160;             {</div><div class="line"><a name="l01559"></a><span class="lineno"> 1559</span>&#160;               <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01560"></a><span class="lineno"> 1560</span>&#160;               <span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> val = strtod(charP(first), &amp;end);</div><div class="line"><a name="l01561"></a><span class="lineno"> 1561</span>&#160;               <span class="keyword">new</span> (C++) <a class="code" href="classFloatCell.html">FloatCell</a>(val);</div><div class="line"><a name="l01562"></a><span class="lineno"> 1562</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01563"></a><span class="lineno"> 1563</span>&#160;             }</div><div class="line"><a name="l01564"></a><span class="lineno"> 1564</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01565"></a><span class="lineno"> 1565</span>&#160;</div><div class="line"><a name="l01566"></a><span class="lineno"> 1566</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U5: <span class="comment">// complex</span></div><div class="line"><a name="l01567"></a><span class="lineno"> 1567</span>&#160;             first += len;</div><div class="line"><a name="l01568"></a><span class="lineno"> 1568</span>&#160;             {</div><div class="line"><a name="l01569"></a><span class="lineno"> 1569</span>&#160;               <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01570"></a><span class="lineno"> 1570</span>&#160;               <span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> real = strtod(charP(first), &amp;end);</div><div class="line"><a name="l01571"></a><span class="lineno"> 1571</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01572"></a><span class="lineno"> 1572</span>&#160;               Assert(*end == <span class="charliteral">&#39;J&#39;</span>);</div><div class="line"><a name="l01573"></a><span class="lineno"> 1573</span>&#160;               ++end;</div><div class="line"><a name="l01574"></a><span class="lineno"> 1574</span>&#160;               <span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> imag = strtod(end, &amp;end);</div><div class="line"><a name="l01575"></a><span class="lineno"> 1575</span>&#160;               <span class="keyword">new</span> (C++) <a class="code" href="classComplexCell.html">ComplexCell</a>(real, imag);</div><div class="line"><a name="l01576"></a><span class="lineno"> 1576</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01577"></a><span class="lineno"> 1577</span>&#160;             }</div><div class="line"><a name="l01578"></a><span class="lineno"> 1578</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01579"></a><span class="lineno"> 1579</span>&#160;</div><div class="line"><a name="l01580"></a><span class="lineno"> 1580</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U6: <span class="comment">// pointer</span></div><div class="line"><a name="l01581"></a><span class="lineno"> 1581</span>&#160;             first += len;</div><div class="line"><a name="l01582"></a><span class="lineno"> 1582</span>&#160;             {</div><div class="line"><a name="l01583"></a><span class="lineno"> 1583</span>&#160;               <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01584"></a><span class="lineno"> 1584</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">int</span> vid = strtoll(charP(first), &amp;end, 10);</div><div class="line"><a name="l01585"></a><span class="lineno"> 1585</span>&#160;               Assert(vid &gt;= 0);</div><div class="line"><a name="l01586"></a><span class="lineno"> 1586</span>&#160;               Assert(vid &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l01587"></a><span class="lineno"> 1587</span>&#160;               C++-&gt;<a class="code" href="classCell.html#a6ff584df467249c47c95570553d1f05e">init_from_value</a>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid].<span class="keyword">get</span>(), C_owner, LOC);</div><div class="line"><a name="l01588"></a><span class="lineno"> 1588</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01589"></a><span class="lineno"> 1589</span>&#160;             }</div><div class="line"><a name="l01590"></a><span class="lineno"> 1590</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01591"></a><span class="lineno"> 1591</span>&#160;</div><div class="line"><a name="l01592"></a><span class="lineno"> 1592</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U7: <span class="comment">// cellref</span></div><div class="line"><a name="l01593"></a><span class="lineno"> 1593</span>&#160;             first += len;</div><div class="line"><a name="l01594"></a><span class="lineno"> 1594</span>&#160;             <span class="keywordflow">if</span> (first[0] == <span class="charliteral">&#39;0&#39;</span>)    <span class="comment">// 0-cell-pointer</span></div><div class="line"><a name="l01595"></a><span class="lineno"> 1595</span>&#160;                {</div><div class="line"><a name="l01596"></a><span class="lineno"> 1596</span>&#160;                  <span class="keyword">new</span> (C++) <a class="code" href="classLvalCell.html">LvalCell</a>(0, 0);</div><div class="line"><a name="l01597"></a><span class="lineno"> 1597</span>&#160;                  first++;</div><div class="line"><a name="l01598"></a><span class="lineno"> 1598</span>&#160;                }</div><div class="line"><a name="l01599"></a><span class="lineno"> 1599</span>&#160;             <span class="keywordflow">else</span></div><div class="line"><a name="l01600"></a><span class="lineno"> 1600</span>&#160;                {</div><div class="line"><a name="l01601"></a><span class="lineno"> 1601</span>&#160;                  <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01602"></a><span class="lineno"> 1602</span>&#160;                  <span class="keyword">const</span> <span class="keywordtype">int</span> vid = strtoll(charP(first), &amp;end, 16);</div><div class="line"><a name="l01603"></a><span class="lineno"> 1603</span>&#160;                  Assert(vid &gt;= 0);</div><div class="line"><a name="l01604"></a><span class="lineno"> 1604</span>&#160;                  Assert(vid &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l01605"></a><span class="lineno"> 1605</span>&#160;                  Assert(*end == <span class="charliteral">&#39;[&#39;</span>);   ++end;</div><div class="line"><a name="l01606"></a><span class="lineno"> 1606</span>&#160;                  <span class="keyword">const</span> ShapeItem offset = strtoll(end, &amp;end, 16);</div><div class="line"><a name="l01607"></a><span class="lineno"> 1607</span>&#160;                  Assert(*end == <span class="charliteral">&#39;]&#39;</span>);   ++end;</div><div class="line"><a name="l01608"></a><span class="lineno"> 1608</span>&#160;                  <span class="keyword">new</span> (C++) <a class="code" href="classLvalCell.html">LvalCell</a>(&amp;<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid]-&gt;get_ravel(offset),</div><div class="line"><a name="l01609"></a><span class="lineno"> 1609</span>&#160;                                     <a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid].get());</div><div class="line"><a name="l01610"></a><span class="lineno"> 1610</span>&#160;                  first = utf8P(end);</div><div class="line"><a name="l01611"></a><span class="lineno"> 1611</span>&#160;                }</div><div class="line"><a name="l01612"></a><span class="lineno"> 1612</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01613"></a><span class="lineno"> 1613</span>&#160;</div><div class="line"><a name="l01614"></a><span class="lineno"> 1614</span>&#160;        <span class="keywordflow">case</span> UNI_PAD_U8: <span class="comment">// rational quotient</span></div><div class="line"><a name="l01615"></a><span class="lineno"> 1615</span>&#160;             <span class="comment">//</span></div><div class="line"><a name="l01616"></a><span class="lineno"> 1616</span>&#160;             <span class="comment">// we should understand rational quotients even if we are</span></div><div class="line"><a name="l01617"></a><span class="lineno"> 1617</span>&#160;             <span class="comment">// not ./configured for them..</span></div><div class="line"><a name="l01618"></a><span class="lineno"> 1618</span>&#160;             <span class="comment">//</span></div><div class="line"><a name="l01619"></a><span class="lineno"> 1619</span>&#160;             first += len;</div><div class="line"><a name="l01620"></a><span class="lineno"> 1620</span>&#160;             {</div><div class="line"><a name="l01621"></a><span class="lineno"> 1621</span>&#160;               <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01622"></a><span class="lineno"> 1622</span>&#160;               <span class="keyword">const</span> uint64_t numer = strtoll(charP(first), &amp;end, 10);</div><div class="line"><a name="l01623"></a><span class="lineno"> 1623</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01624"></a><span class="lineno"> 1624</span>&#160;</div><div class="line"><a name="l01625"></a><span class="lineno"> 1625</span>&#160;               <span class="comment">// skip Ã· (which is is C3 B7 in UTF8)</span></div><div class="line"><a name="l01626"></a><span class="lineno"> 1626</span>&#160;               Assert((*end++ &amp; 0xFF) == 0xC3);</div><div class="line"><a name="l01627"></a><span class="lineno"> 1627</span>&#160;               Assert((*end++ &amp; 0xFF) == 0xB7);</div><div class="line"><a name="l01628"></a><span class="lineno"> 1628</span>&#160;               <span class="keyword">const</span> uint64_t denom = strtoll(end, &amp;end, 10);</div><div class="line"><a name="l01629"></a><span class="lineno"> 1629</span>&#160;               Assert(denom &gt; 0);</div><div class="line"><a name="l01630"></a><span class="lineno"> 1630</span>&#160;<span class="preprocessor">#ifdef RATIONAL_NUMBERS_WANTED</span></div><div class="line"><a name="l01631"></a><span class="lineno"> 1631</span>&#160;               <span class="keyword">new</span> (C++) <a class="code" href="classFloatCell.html">FloatCell</a>(numer, denom);</div><div class="line"><a name="l01632"></a><span class="lineno"> 1632</span>&#160;<span class="preprocessor">#else</span></div><div class="line"><a name="l01633"></a><span class="lineno"> 1633</span>&#160;               <span class="keyword">new</span> (C++) <a class="code" href="classFloatCell.html">FloatCell</a>((1.0*(numer))/denom);</div><div class="line"><a name="l01634"></a><span class="lineno"> 1634</span>&#160;<span class="preprocessor">#endif</span></div><div class="line"><a name="l01635"></a><span class="lineno"> 1635</span>&#160;               first = utf8P(end);</div><div class="line"><a name="l01636"></a><span class="lineno"> 1636</span>&#160;             }</div><div class="line"><a name="l01637"></a><span class="lineno"> 1637</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l01638"></a><span class="lineno"> 1638</span>&#160;</div><div class="line"><a name="l01639"></a><span class="lineno"> 1639</span>&#160;</div><div class="line"><a name="l01640"></a><span class="lineno"> 1640</span>&#160;        <span class="keywordflow">default</span>: Q1(type) Q1(<a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a>) DOMAIN_ERROR;</div><div class="line"><a name="l01641"></a><span class="lineno"> 1641</span>&#160;      }</div><div class="line"><a name="l01642"></a><span class="lineno"> 1642</span>&#160;}</div><div class="line"><a name="l01643"></a><span class="lineno"> 1643</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01644"></a><span class="lineno"> 1644</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01645"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e"> 1645</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">XML_Loading_Archive::read_chars</a>(<a class="code" href="classUCS__string.html">UCS_string</a> &amp; ucs, <span class="keyword">const</span> UTF8 * &amp; utf)</div><div class="line"><a name="l01646"></a><span class="lineno"> 1646</span>&#160;{</div><div class="line"><a name="l01647"></a><span class="lineno"> 1647</span>&#160;   <span class="keywordflow">while</span> (*utf &lt;= <span class="charliteral">&#39; &#39;</span>)   ++utf;   <span class="comment">// skip leading whitespace</span></div><div class="line"><a name="l01648"></a><span class="lineno"> 1648</span>&#160;</div><div class="line"><a name="l01649"></a><span class="lineno"> 1649</span>&#160;   <span class="comment">// char mode is controlled by delimiters:</span></div><div class="line"><a name="l01650"></a><span class="lineno"> 1650</span>&#160;   <span class="comment">// Â² (UNI_PAD_U2 = start of char mode),</span></div><div class="line"><a name="l01651"></a><span class="lineno"> 1651</span>&#160;   <span class="comment">// Â¹ (UNI_PAD_U1 = start of hex mode = implicit end of char mode), and</span></div><div class="line"><a name="l01652"></a><span class="lineno"> 1652</span>&#160;   <span class="comment">// â° (UNI_PAD_U0 = end of char mode.</span></div><div class="line"><a name="l01653"></a><span class="lineno"> 1653</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01654"></a><span class="lineno"> 1654</span>&#160;   <span class="keywordflow">for</span> (<span class="keywordtype">bool</span> char_mode = <span class="keyword">false</span>;;)</div><div class="line"><a name="l01655"></a><span class="lineno"> 1655</span>&#160;       {</div><div class="line"><a name="l01656"></a><span class="lineno"> 1656</span>&#160;         <span class="keywordflow">if</span> (*utf == <span class="charliteral">&#39;&quot;&#39;</span>)   <span class="keywordflow">break</span>;   <span class="comment">// end of attribute value</span></div><div class="line"><a name="l01657"></a><span class="lineno"> 1657</span>&#160;</div><div class="line"><a name="l01658"></a><span class="lineno"> 1658</span>&#160;         <span class="keywordtype">int</span> len;</div><div class="line"><a name="l01659"></a><span class="lineno"> 1659</span>&#160;         <span class="keyword">const</span> Unicode uni = <a class="code" href="classUTF8__string.html#a27a630b44bca173fe9ea5005bcb3e460">UTF8_string::toUni</a>(utf, len, <span class="keyword">true</span>);</div><div class="line"><a name="l01660"></a><span class="lineno"> 1660</span>&#160;</div><div class="line"><a name="l01661"></a><span class="lineno"> 1661</span>&#160;          <span class="keywordflow">if</span> (char_mode &amp;&amp; *utf != <span class="charliteral">&#39;\n&#39;</span> &amp;&amp; uni != UNI_PAD_U0)</div><div class="line"><a name="l01662"></a><span class="lineno"> 1662</span>&#160;             {</div><div class="line"><a name="l01663"></a><span class="lineno"> 1663</span>&#160;               ucs.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(uni);</div><div class="line"><a name="l01664"></a><span class="lineno"> 1664</span>&#160;               utf += len;</div><div class="line"><a name="l01665"></a><span class="lineno"> 1665</span>&#160;               <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01666"></a><span class="lineno"> 1666</span>&#160;             }</div><div class="line"><a name="l01667"></a><span class="lineno"> 1667</span>&#160;</div><div class="line"><a name="l01668"></a><span class="lineno"> 1668</span>&#160;         <span class="keywordflow">if</span> (uni == UNI_PAD_U2)   <span class="comment">// start of char_mode</span></div><div class="line"><a name="l01669"></a><span class="lineno"> 1669</span>&#160;            {</div><div class="line"><a name="l01670"></a><span class="lineno"> 1670</span>&#160;              utf += len;   <span class="comment">// skip UNI_PAD_U2</span></div><div class="line"><a name="l01671"></a><span class="lineno"> 1671</span>&#160;              char_mode = <span class="keyword">true</span>;</div><div class="line"><a name="l01672"></a><span class="lineno"> 1672</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01673"></a><span class="lineno"> 1673</span>&#160;            }</div><div class="line"><a name="l01674"></a><span class="lineno"> 1674</span>&#160;</div><div class="line"><a name="l01675"></a><span class="lineno"> 1675</span>&#160;         <span class="keywordflow">if</span> (uni == UNI_PAD_U1)   <span class="comment">// start of hex mode</span></div><div class="line"><a name="l01676"></a><span class="lineno"> 1676</span>&#160;            {</div><div class="line"><a name="l01677"></a><span class="lineno"> 1677</span>&#160;              utf += len;   <span class="comment">// skip UNI_PAD_U1</span></div><div class="line"><a name="l01678"></a><span class="lineno"> 1678</span>&#160;              char_mode = <span class="keyword">false</span>;</div><div class="line"><a name="l01679"></a><span class="lineno"> 1679</span>&#160;              <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l01680"></a><span class="lineno"> 1680</span>&#160;              <span class="keyword">const</span> <span class="keywordtype">int</span> hex = strtoll(charP(utf), &amp;end, 16);</div><div class="line"><a name="l01681"></a><span class="lineno"> 1681</span>&#160;              ucs.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(Unicode(hex));</div><div class="line"><a name="l01682"></a><span class="lineno"> 1682</span>&#160;              utf = utf8P(end);</div><div class="line"><a name="l01683"></a><span class="lineno"> 1683</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01684"></a><span class="lineno"> 1684</span>&#160;            }</div><div class="line"><a name="l01685"></a><span class="lineno"> 1685</span>&#160;</div><div class="line"><a name="l01686"></a><span class="lineno"> 1686</span>&#160;         <span class="keywordflow">if</span> (uni == UNI_PAD_U0)   <span class="comment">// end of char_mode</span></div><div class="line"><a name="l01687"></a><span class="lineno"> 1687</span>&#160;            {</div><div class="line"><a name="l01688"></a><span class="lineno"> 1688</span>&#160;              utf += len;   <span class="comment">// skip UNI_PAD_U0</span></div><div class="line"><a name="l01689"></a><span class="lineno"> 1689</span>&#160;              char_mode = <span class="keyword">false</span>;</div><div class="line"><a name="l01690"></a><span class="lineno"> 1690</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01691"></a><span class="lineno"> 1691</span>&#160;            }</div><div class="line"><a name="l01692"></a><span class="lineno"> 1692</span>&#160;</div><div class="line"><a name="l01693"></a><span class="lineno"> 1693</span>&#160;         <span class="keywordflow">if</span> (uni == <span class="charliteral">&#39;\n&#39;</span>)   <span class="comment">// end of char_mode (fix old bug)</span></div><div class="line"><a name="l01694"></a><span class="lineno"> 1694</span>&#160;            {</div><div class="line"><a name="l01695"></a><span class="lineno"> 1695</span>&#160;              <span class="comment">// due to an old bug, the trailing UNI_PAD_U0 may be missing</span></div><div class="line"><a name="l01696"></a><span class="lineno"> 1696</span>&#160;              <span class="comment">// at the end of the line. We therefore reset char_mode at the</span></div><div class="line"><a name="l01697"></a><span class="lineno"> 1697</span>&#160;              <span class="comment">// end of the line so that workspaces save with that fault can</span></div><div class="line"><a name="l01698"></a><span class="lineno"> 1698</span>&#160;              <span class="comment">// be read.</span></div><div class="line"><a name="l01699"></a><span class="lineno"> 1699</span>&#160;              <span class="comment">//</span></div><div class="line"><a name="l01700"></a><span class="lineno"> 1700</span>&#160;              utf += len;   <span class="comment">// skip UNI_PAD_U0</span></div><div class="line"><a name="l01701"></a><span class="lineno"> 1701</span>&#160;              char_mode = <span class="keyword">false</span>;</div><div class="line"><a name="l01702"></a><span class="lineno"> 1702</span>&#160;              <span class="keywordflow">continue</span>;</div><div class="line"><a name="l01703"></a><span class="lineno"> 1703</span>&#160;            }</div><div class="line"><a name="l01704"></a><span class="lineno"> 1704</span>&#160;</div><div class="line"><a name="l01705"></a><span class="lineno"> 1705</span>&#160;         <span class="keywordflow">break</span>;</div><div class="line"><a name="l01706"></a><span class="lineno"> 1706</span>&#160;       }</div><div class="line"><a name="l01707"></a><span class="lineno"> 1707</span>&#160;</div><div class="line"><a name="l01708"></a><span class="lineno"> 1708</span>&#160;   <span class="keywordflow">while</span> (*utf &lt;= <span class="charliteral">&#39; &#39;</span>)   ++utf;   <span class="comment">// skip trailing whitespace</span></div><div class="line"><a name="l01709"></a><span class="lineno"> 1709</span>&#160;}</div><div class="line"><a name="l01710"></a><span class="lineno"> 1710</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01711"></a><span class="lineno"> 1711</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01712"></a><span class="lineno"><a class="line" href="classXML__Loading__Archive.html#ad200f5b98b9cf3e903ccf714a56a1d0f"> 1712</a></span>&#160;<a class="code" href="classXML__Loading__Archive.html#ad200f5b98b9cf3e903ccf714a56a1d0f">XML_Loading_Archive::read_Ravel</a>()</div><div class="line"><a name="l01713"></a><span class="lineno"> 1713</span>&#160;{</div><div class="line"><a name="l01714"></a><span class="lineno"> 1714</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">reading_vids</a>)   <span class="keywordflow">return</span>;</div><div class="line"><a name="l01715"></a><span class="lineno"> 1715</span>&#160;</div><div class="line"><a name="l01716"></a><span class="lineno"> 1716</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> vid = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;vid&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01717"></a><span class="lineno"> 1717</span>&#160;<span class="keyword">const</span> UTF8 * cells = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;cells&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01718"></a><span class="lineno"> 1718</span>&#160;</div><div class="line"><a name="l01719"></a><span class="lineno"> 1719</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;    read_Ravel() vid=&quot;</span> &lt;&lt; vid &lt;&lt; endl;</div><div class="line"><a name="l01720"></a><span class="lineno"> 1720</span>&#160;</div><div class="line"><a name="l01721"></a><span class="lineno"> 1721</span>&#160;   Assert(vid &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l01722"></a><span class="lineno"> 1722</span>&#160;<a class="code" href="classValue__P.html">Value_P</a> val = <a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid];</div><div class="line"><a name="l01723"></a><span class="lineno"> 1723</span>&#160;</div><div class="line"><a name="l01724"></a><span class="lineno"> 1724</span>&#160;   <span class="keywordflow">if</span> (!val)   <span class="comment">// )COPY with vids_COPY or static value</span></div><div class="line"><a name="l01725"></a><span class="lineno"> 1725</span>&#160;      {</div><div class="line"><a name="l01726"></a><span class="lineno"> 1726</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01727"></a><span class="lineno"> 1727</span>&#160;      }</div><div class="line"><a name="l01728"></a><span class="lineno"> 1728</span>&#160;</div><div class="line"><a name="l01729"></a><span class="lineno"> 1729</span>&#160;<span class="keyword">const</span> ShapeItem count = val-&gt;nz_element_count();</div><div class="line"><a name="l01730"></a><span class="lineno"> 1730</span>&#160;<a class="code" href="classCell.html">Cell</a> * C = &amp;val-&gt;get_ravel(0);</div><div class="line"><a name="l01731"></a><span class="lineno"> 1731</span>&#160;<a class="code" href="classCell.html">Cell</a> * end = C + count;</div><div class="line"><a name="l01732"></a><span class="lineno"> 1732</span>&#160;</div><div class="line"><a name="l01733"></a><span class="lineno"> 1733</span>&#160;   <span class="keywordflow">while</span> (C &lt; end)</div><div class="line"><a name="l01734"></a><span class="lineno"> 1734</span>&#160;      {</div><div class="line"><a name="l01735"></a><span class="lineno"> 1735</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#aa94a5825fbb0c3c7d5d894a3d8430221">read_Cells</a>(C, val.<a class="code" href="classValue__P__Base.html#a704ff85f35cdb60648f59a48f0a15bdb">getref</a>(), cells);</div><div class="line"><a name="l01736"></a><span class="lineno"> 1736</span>&#160;        <span class="keywordflow">while</span> (*cells &lt;= <span class="charliteral">&#39; &#39;</span>)   ++cells;   <span class="comment">// skip trailing whitespace</span></div><div class="line"><a name="l01737"></a><span class="lineno"> 1737</span>&#160;      }</div><div class="line"><a name="l01738"></a><span class="lineno"> 1738</span>&#160;</div><div class="line"><a name="l01739"></a><span class="lineno"> 1739</span>&#160;   <span class="keywordflow">if</span> (C != end)   <span class="comment">// unless all cells read</span></div><div class="line"><a name="l01740"></a><span class="lineno"> 1740</span>&#160;      {</div><div class="line"><a name="l01741"></a><span class="lineno"> 1741</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;vid=&quot;</span> &lt;&lt; vid &lt;&lt; endl;</div><div class="line"><a name="l01742"></a><span class="lineno"> 1742</span>&#160;        FIXME;</div><div class="line"><a name="l01743"></a><span class="lineno"> 1743</span>&#160;      }</div><div class="line"><a name="l01744"></a><span class="lineno"> 1744</span>&#160;</div><div class="line"><a name="l01745"></a><span class="lineno"> 1745</span>&#160;   {</div><div class="line"><a name="l01746"></a><span class="lineno"> 1746</span>&#160;     <span class="keywordtype">int</span> len = 0;</div><div class="line"><a name="l01747"></a><span class="lineno"> 1747</span>&#160;     <span class="keyword">const</span> Unicode next = <a class="code" href="classUTF8__string.html#a27a630b44bca173fe9ea5005bcb3e460">UTF8_string::toUni</a>(cells, len, <span class="keyword">true</span>);</div><div class="line"><a name="l01748"></a><span class="lineno"> 1748</span>&#160;     Assert(next == <span class="charliteral">&#39;&quot;&#39;</span>);</div><div class="line"><a name="l01749"></a><span class="lineno"> 1749</span>&#160;   }</div><div class="line"><a name="l01750"></a><span class="lineno"> 1750</span>&#160;</div><div class="line"><a name="l01751"></a><span class="lineno"> 1751</span>&#160;   val-&gt;check_value(LOC);</div><div class="line"><a name="l01752"></a><span class="lineno"> 1752</span>&#160;}</div><div class="line"><a name="l01753"></a><span class="lineno"> 1753</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01754"></a><span class="lineno"> 1754</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01755"></a><span class="lineno"> 1755</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a323736803868a3ec3ac5158038d5c615">XML_Loading_Archive::read_unused_name</a>(<span class="keywordtype">int</span> d, <a class="code" href="classSymbol.html">Symbol</a> &amp; symbol)</div><div class="line"><a name="l01756"></a><span class="lineno"> 1756</span>&#160;{</div><div class="line"><a name="l01757"></a><span class="lineno"> 1757</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;      [&quot;</span> &lt;&lt; d &lt;&lt; <span class="stringliteral">&quot;] unused name&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01758"></a><span class="lineno"> 1758</span>&#160;</div><div class="line"><a name="l01759"></a><span class="lineno"> 1759</span>&#160;   <span class="keywordflow">if</span> (d == 0)   <span class="keywordflow">return</span>;   <span class="comment">// Symbol::Symbol has already created the top level</span></div><div class="line"><a name="l01760"></a><span class="lineno"> 1760</span>&#160;</div><div class="line"><a name="l01761"></a><span class="lineno"> 1761</span>&#160;   symbol.<a class="code" href="classSymbol.html#a26e1c2223b6377aca652d1a7102b417b">push</a>();</div><div class="line"><a name="l01762"></a><span class="lineno"> 1762</span>&#160;}</div><div class="line"><a name="l01763"></a><span class="lineno"> 1763</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01764"></a><span class="lineno"> 1764</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01765"></a><span class="lineno"> 1765</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a1233bd12e879f5670f4a234e0f37b7aa">XML_Loading_Archive::read_Variable</a>(<span class="keywordtype">int</span> d, <a class="code" href="classSymbol.html">Symbol</a> &amp; symbol)</div><div class="line"><a name="l01766"></a><span class="lineno"> 1766</span>&#160;{</div><div class="line"><a name="l01767"></a><span class="lineno"> 1767</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> vid = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;vid&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01768"></a><span class="lineno"> 1768</span>&#160;   Assert(vid &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l01769"></a><span class="lineno"> 1769</span>&#160;</div><div class="line"><a name="l01770"></a><span class="lineno"> 1770</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;      [&quot;</span> &lt;&lt; d &lt;&lt; <span class="stringliteral">&quot;] read_Variable() vid=&quot;</span> &lt;&lt; vid</div><div class="line"><a name="l01771"></a><span class="lineno"> 1771</span>&#160;                           &lt;&lt; <span class="stringliteral">&quot; name=&quot;</span> &lt;&lt; symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>() &lt;&lt; endl;</div><div class="line"><a name="l01772"></a><span class="lineno"> 1772</span>&#160;</div><div class="line"><a name="l01773"></a><span class="lineno"> 1773</span>&#160;   <span class="comment">// some system variables are saved for troubleshooting purposes, but</span></div><div class="line"><a name="l01774"></a><span class="lineno"> 1774</span>&#160;   <span class="comment">// should not be loaded...</span></div><div class="line"><a name="l01775"></a><span class="lineno"> 1775</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01776"></a><span class="lineno"> 1776</span>&#160;   <span class="keywordflow">if</span> (symbol.<a class="code" href="classSymbol.html#a141465ed91f80b5213b70fb8bef8dda3">is_readonly</a>())                     <span class="keywordflow">return</span>;</div><div class="line"><a name="l01777"></a><span class="lineno"> 1777</span>&#160;   <span class="keywordflow">if</span> (symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>().<a class="code" href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">starts_iwith</a>(<span class="stringliteral">&quot;âNLT&quot;</span>))   <span class="keywordflow">return</span>;   <span class="comment">// extinct</span></div><div class="line"><a name="l01778"></a><span class="lineno"> 1778</span>&#160;   <span class="keywordflow">if</span> (symbol.<a class="code" href="classNamedObject.html#a3ff29d3b8f3eed6c55f535e1af8dbc91">get_Id</a>() == ID_Quad_SVE)           <span class="keywordflow">return</span>;</div><div class="line"><a name="l01779"></a><span class="lineno"> 1779</span>&#160;   <span class="keywordflow">if</span> (symbol.<a class="code" href="classNamedObject.html#a3ff29d3b8f3eed6c55f535e1af8dbc91">get_Id</a>() == ID_Quad_SYL)           <span class="keywordflow">return</span>;</div><div class="line"><a name="l01780"></a><span class="lineno"> 1780</span>&#160;   <span class="keywordflow">if</span> (symbol.<a class="code" href="classNamedObject.html#a3ff29d3b8f3eed6c55f535e1af8dbc91">get_Id</a>() == ID_Quad_PS)            <span class="keywordflow">return</span>;</div><div class="line"><a name="l01781"></a><span class="lineno"> 1781</span>&#160;</div><div class="line"><a name="l01782"></a><span class="lineno"> 1782</span>&#160;   <span class="keywordflow">if</span> (vid == -1)   <span class="comment">// stale variable</span></div><div class="line"><a name="l01783"></a><span class="lineno"> 1783</span>&#160;      {</div><div class="line"><a name="l01784"></a><span class="lineno"> 1784</span>&#160;        Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;      &quot;</span> &lt;&lt; symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>()</div><div class="line"><a name="l01785"></a><span class="lineno"> 1785</span>&#160;                                &lt;&lt; <span class="stringliteral">&quot; looks like a stale variable&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01786"></a><span class="lineno"> 1786</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01787"></a><span class="lineno"> 1787</span>&#160;      }</div><div class="line"><a name="l01788"></a><span class="lineno"> 1788</span>&#160;</div><div class="line"><a name="l01789"></a><span class="lineno"> 1789</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid])   <span class="keywordflow">return</span>;   <span class="comment">// value filtered out</span></div><div class="line"><a name="l01790"></a><span class="lineno"> 1790</span>&#160;</div><div class="line"><a name="l01791"></a><span class="lineno"> 1791</span>&#160;   <span class="keywordflow">while</span> (symbol.<a class="code" href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">value_stack_size</a>() &lt;= d)   symbol.<a class="code" href="classSymbol.html#a26e1c2223b6377aca652d1a7102b417b">push</a>();</div><div class="line"><a name="l01792"></a><span class="lineno"> 1792</span>&#160;<span class="comment">// if (d != 0)   symbol.push();</span></div><div class="line"><a name="l01793"></a><span class="lineno"> 1793</span>&#160;</div><div class="line"><a name="l01794"></a><span class="lineno"> 1794</span>&#160;   <span class="keywordflow">try</span></div><div class="line"><a name="l01795"></a><span class="lineno"> 1795</span>&#160;      {</div><div class="line"><a name="l01796"></a><span class="lineno"> 1796</span>&#160;        symbol.<a class="code" href="classSymbol.html#a739f019bbd3b466914ac56f3437496db">assign</a>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid], <span class="keyword">true</span>, LOC);</div><div class="line"><a name="l01797"></a><span class="lineno"> 1797</span>&#160;      }</div><div class="line"><a name="l01798"></a><span class="lineno"> 1798</span>&#160;   <span class="keywordflow">catch</span> (...)</div><div class="line"><a name="l01799"></a><span class="lineno"> 1799</span>&#160;      {</div><div class="line"><a name="l01800"></a><span class="lineno"> 1800</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;*** Could not assign value &quot;</span> &lt;&lt; *<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid]</div><div class="line"><a name="l01801"></a><span class="lineno"> 1801</span>&#160;             &lt;&lt; <span class="stringliteral">&quot;    to variable &quot;</span> &lt;&lt; symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>() &lt;&lt; <span class="stringliteral">&quot; ***&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01802"></a><span class="lineno"> 1802</span>&#160;      }</div><div class="line"><a name="l01803"></a><span class="lineno"> 1803</span>&#160;}</div><div class="line"><a name="l01804"></a><span class="lineno"> 1804</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01805"></a><span class="lineno"> 1805</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01806"></a><span class="lineno"> 1806</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a6fedb7030e4a251354c6d5cc6c9261ab">XML_Loading_Archive::read_Label</a>(<span class="keywordtype">int</span> d, <a class="code" href="classSymbol.html">Symbol</a> &amp; symbol)</div><div class="line"><a name="l01807"></a><span class="lineno"> 1807</span>&#160;{</div><div class="line"><a name="l01808"></a><span class="lineno"> 1808</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> value = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;value&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01809"></a><span class="lineno"> 1809</span>&#160;   <span class="keywordflow">if</span> (d == 0)   symbol.<a class="code" href="classSymbol.html#a83e2d86a6fd77a7f6bd5bdaba17dfab4">pop</a>();</div><div class="line"><a name="l01810"></a><span class="lineno"> 1810</span>&#160;   symbol.<a class="code" href="classSymbol.html#a8bb62c2d692cba8527325bdd723695fb">push_label</a>(Function_Line(value));</div><div class="line"><a name="l01811"></a><span class="lineno"> 1811</span>&#160;}</div><div class="line"><a name="l01812"></a><span class="lineno"> 1812</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01813"></a><span class="lineno"> 1813</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01814"></a><span class="lineno"> 1814</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a2e7aed9883aa106937d3d9313163e10b">XML_Loading_Archive::read_Function</a>(<span class="keywordtype">int</span> d, <a class="code" href="classSymbol.html">Symbol</a> &amp; symbol)</div><div class="line"><a name="l01815"></a><span class="lineno"> 1815</span>&#160;{</div><div class="line"><a name="l01816"></a><span class="lineno"> 1816</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> native = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;native&quot;</span>, <span class="keyword">true</span>, 10);</div><div class="line"><a name="l01817"></a><span class="lineno"> 1817</span>&#160;<span class="keyword">const</span> APL_time_us creation_time = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;creation-time&quot;</span>, <span class="keyword">true</span>, 10);</div><div class="line"><a name="l01818"></a><span class="lineno"> 1818</span>&#160;<span class="keywordtype">int</span> eprops[4] = { 0, 0, 0, 0 };</div><div class="line"><a name="l01819"></a><span class="lineno"> 1819</span>&#160;<span class="keyword">const</span> UTF8 * ep = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;exec-properties&quot;</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l01820"></a><span class="lineno"> 1820</span>&#160;   <span class="keywordflow">if</span> (ep)</div><div class="line"><a name="l01821"></a><span class="lineno"> 1821</span>&#160;      {</div><div class="line"><a name="l01822"></a><span class="lineno"> 1822</span>&#160;        sscanf(charP(ep), <span class="stringliteral">&quot;%d,%d,%d,%d&quot;</span>,</div><div class="line"><a name="l01823"></a><span class="lineno"> 1823</span>&#160;               eprops, eprops + 1, eprops + 2, eprops+ 3);</div><div class="line"><a name="l01824"></a><span class="lineno"> 1824</span>&#160;      }</div><div class="line"><a name="l01825"></a><span class="lineno"> 1825</span>&#160;</div><div class="line"><a name="l01826"></a><span class="lineno"> 1826</span>&#160;   Log(LOG_archive)</div><div class="line"><a name="l01827"></a><span class="lineno"> 1827</span>&#160;      CERR &lt;&lt; <span class="stringliteral">&quot;      [&quot;</span> &lt;&lt; d &lt;&lt; <span class="stringliteral">&quot;] read_Function(&quot;</span> &lt;&lt; symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>()</div><div class="line"><a name="l01828"></a><span class="lineno"> 1828</span>&#160;           &lt;&lt; <span class="stringliteral">&quot;) native=&quot;</span> &lt;&lt; native &lt;&lt; endl;</div><div class="line"><a name="l01829"></a><span class="lineno"> 1829</span>&#160;</div><div class="line"><a name="l01830"></a><span class="lineno"> 1830</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01831"></a><span class="lineno"> 1831</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;UCS&quot;</span>, LOC);</div><div class="line"><a name="l01832"></a><span class="lineno"> 1832</span>&#160;<span class="keyword">const</span> UTF8 * uni = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;uni&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l01833"></a><span class="lineno"> 1833</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01834"></a><span class="lineno"> 1834</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/Function&quot;</span>, LOC);</div><div class="line"><a name="l01835"></a><span class="lineno"> 1835</span>&#160;</div><div class="line"><a name="l01836"></a><span class="lineno"> 1836</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> text;</div><div class="line"><a name="l01837"></a><span class="lineno"> 1837</span>&#160;   <span class="keywordflow">while</span> (*uni != <span class="charliteral">&#39;&quot;&#39;</span>)   <a class="code" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">read_chars</a>(text, uni);</div><div class="line"><a name="l01838"></a><span class="lineno"> 1838</span>&#160;</div><div class="line"><a name="l01839"></a><span class="lineno"> 1839</span>&#160;   <span class="keywordflow">if</span> (native == 1)</div><div class="line"><a name="l01840"></a><span class="lineno"> 1840</span>&#160;      {</div><div class="line"><a name="l01841"></a><span class="lineno"> 1841</span>&#160;        <a class="code" href="classNativeFunction.html">NativeFunction</a> * nfun = <a class="code" href="classNativeFunction.html#a07ab61a74e4a64f38424a2bbd0c6b38b">NativeFunction::fix</a>(text, symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>());</div><div class="line"><a name="l01842"></a><span class="lineno"> 1842</span>&#160;        <span class="keywordflow">if</span> (nfun)   <span class="comment">// fix succeeded</span></div><div class="line"><a name="l01843"></a><span class="lineno"> 1843</span>&#160;           {</div><div class="line"><a name="l01844"></a><span class="lineno"> 1844</span>&#160;             nfun-&gt;<a class="code" href="classFunction.html#a4d6d6e2b3c6306fbca9a537d6652daee">set_creation_time</a>(creation_time);</div><div class="line"><a name="l01845"></a><span class="lineno"> 1845</span>&#160;             <span class="keywordflow">if</span> (d == 0)   symbol.<a class="code" href="classSymbol.html#a83e2d86a6fd77a7f6bd5bdaba17dfab4">pop</a>();</div><div class="line"><a name="l01846"></a><span class="lineno"> 1846</span>&#160;             symbol.<a class="code" href="classSymbol.html#a0b44c13f715cdbc9f13d33a6b4e41317">push_function</a>(nfun);</div><div class="line"><a name="l01847"></a><span class="lineno"> 1847</span>&#160;           }</div><div class="line"><a name="l01848"></a><span class="lineno"> 1848</span>&#160;        <span class="keywordflow">else</span>        <span class="comment">// fix failed</span></div><div class="line"><a name="l01849"></a><span class="lineno"> 1849</span>&#160;           {</div><div class="line"><a name="l01850"></a><span class="lineno"> 1850</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;   *** loading of native function &quot;</span> &lt;&lt; text</div><div class="line"><a name="l01851"></a><span class="lineno"> 1851</span>&#160;                  &lt;&lt; <span class="stringliteral">&quot; failed&quot;</span> &lt;&lt; endl &lt;&lt; endl;</div><div class="line"><a name="l01852"></a><span class="lineno"> 1852</span>&#160;             <span class="keywordflow">if</span> (d == 0)   symbol.<a class="code" href="classSymbol.html#a83e2d86a6fd77a7f6bd5bdaba17dfab4">pop</a>();</div><div class="line"><a name="l01853"></a><span class="lineno"> 1853</span>&#160;             symbol.<a class="code" href="classSymbol.html#a26e1c2223b6377aca652d1a7102b417b">push</a>();</div><div class="line"><a name="l01854"></a><span class="lineno"> 1854</span>&#160;           }</div><div class="line"><a name="l01855"></a><span class="lineno"> 1855</span>&#160;      }</div><div class="line"><a name="l01856"></a><span class="lineno"> 1856</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01857"></a><span class="lineno"> 1857</span>&#160;      {</div><div class="line"><a name="l01858"></a><span class="lineno"> 1858</span>&#160;        <span class="keywordtype">int</span> err = 0;</div><div class="line"><a name="l01859"></a><span class="lineno"> 1859</span>&#160;        <a class="code" href="classUCS__string.html">UCS_string</a> creator_UCS(<a class="code" href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">filename</a>);</div><div class="line"><a name="l01860"></a><span class="lineno"> 1860</span>&#160;        creator_UCS.<a class="code" href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">append</a>(UNI_ASCII_COLON);</div><div class="line"><a name="l01861"></a><span class="lineno"> 1861</span>&#160;        creator_UCS.<a class="code" href="classUCS__string.html#a5776e51c6faa53537409322cd0ebf07a">append_number</a>(<a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a>);</div><div class="line"><a name="l01862"></a><span class="lineno"> 1862</span>&#160;        <a class="code" href="classUTF8__string.html">UTF8_string</a> creator(creator_UCS);</div><div class="line"><a name="l01863"></a><span class="lineno"> 1863</span>&#160;</div><div class="line"><a name="l01864"></a><span class="lineno"> 1864</span>&#160;        <a class="code" href="classUserFunction.html">UserFunction</a> * ufun = 0;</div><div class="line"><a name="l01865"></a><span class="lineno"> 1865</span>&#160;        <span class="keywordflow">if</span> (text[0] == UNI_LAMBDA)</div><div class="line"><a name="l01866"></a><span class="lineno"> 1866</span>&#160;           {</div><div class="line"><a name="l01867"></a><span class="lineno"> 1867</span>&#160;             ufun = <a class="code" href="classUserFunction.html#a3fb5d002175b6e8a7adf754159583ee9">UserFunction::fix_lambda</a>(symbol, text);</div><div class="line"><a name="l01868"></a><span class="lineno"> 1868</span>&#160;             ufun-&gt;<a class="code" href="classExecutable.html#a5f1a0c24eb29a98e47988c5ce370bded">increment_refcount</a>(LOC);   <span class="comment">// since we push it below</span></div><div class="line"><a name="l01869"></a><span class="lineno"> 1869</span>&#160;           }</div><div class="line"><a name="l01870"></a><span class="lineno"> 1870</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01871"></a><span class="lineno"> 1871</span>&#160;           {</div><div class="line"><a name="l01872"></a><span class="lineno"> 1872</span>&#160;             ufun = <a class="code" href="classUserFunction.html#a25e0645f3e9caa68e1b7a35ffed1bfeb">UserFunction::fix</a>(text, err, <span class="keyword">false</span>, LOC, creator, <span class="keyword">false</span>);</div><div class="line"><a name="l01873"></a><span class="lineno"> 1873</span>&#160;           }</div><div class="line"><a name="l01874"></a><span class="lineno"> 1874</span>&#160;</div><div class="line"><a name="l01875"></a><span class="lineno"> 1875</span>&#160;        <span class="keywordflow">if</span> (d == 0)   symbol.<a class="code" href="classSymbol.html#a83e2d86a6fd77a7f6bd5bdaba17dfab4">pop</a>();</div><div class="line"><a name="l01876"></a><span class="lineno"> 1876</span>&#160;        <span class="keywordflow">if</span> (ufun)</div><div class="line"><a name="l01877"></a><span class="lineno"> 1877</span>&#160;           {</div><div class="line"><a name="l01878"></a><span class="lineno"> 1878</span>&#160;             ufun-&gt;<a class="code" href="classFunction.html#a4d6d6e2b3c6306fbca9a537d6652daee">set_creation_time</a>(creation_time);</div><div class="line"><a name="l01879"></a><span class="lineno"> 1879</span>&#160;             symbol.<a class="code" href="classSymbol.html#a0b44c13f715cdbc9f13d33a6b4e41317">push_function</a>(ufun);</div><div class="line"><a name="l01880"></a><span class="lineno"> 1880</span>&#160;             ufun-&gt;<a class="code" href="classUserFunction.html#a248155b050f1f573367a08dea602a10c">set_exec_properties</a>(eprops);</div><div class="line"><a name="l01881"></a><span class="lineno"> 1881</span>&#160;           }</div><div class="line"><a name="l01882"></a><span class="lineno"> 1882</span>&#160;        <span class="keywordflow">else</span></div><div class="line"><a name="l01883"></a><span class="lineno"> 1883</span>&#160;           {</div><div class="line"><a name="l01884"></a><span class="lineno"> 1884</span>&#160;             CERR &lt;&lt; <span class="stringliteral">&quot;    âFX &quot;</span> &lt;&lt; symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>() &lt;&lt; <span class="stringliteral">&quot; failed: &quot;</span></div><div class="line"><a name="l01885"></a><span class="lineno"> 1885</span>&#160;                  &lt;&lt; <a class="code" href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a>() &lt;&lt; endl;</div><div class="line"><a name="l01886"></a><span class="lineno"> 1886</span>&#160;             symbol.<a class="code" href="classSymbol.html#a26e1c2223b6377aca652d1a7102b417b">push</a>();</div><div class="line"><a name="l01887"></a><span class="lineno"> 1887</span>&#160;           }</div><div class="line"><a name="l01888"></a><span class="lineno"> 1888</span>&#160;      }</div><div class="line"><a name="l01889"></a><span class="lineno"> 1889</span>&#160;}</div><div class="line"><a name="l01890"></a><span class="lineno"> 1890</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01891"></a><span class="lineno"> 1891</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01892"></a><span class="lineno"> 1892</span>&#160;<a class="code" href="classXML__Loading__Archive.html#ac33cf45160129fd2365367a778bfdd02">XML_Loading_Archive::read_Shared_Variable</a>(<span class="keywordtype">int</span> d, <a class="code" href="classSymbol.html">Symbol</a> &amp; symbol)</div><div class="line"><a name="l01893"></a><span class="lineno"> 1893</span>&#160;{</div><div class="line"><a name="l01894"></a><span class="lineno"> 1894</span>&#160;<span class="comment">// const SV_key key = find_int_attr(&quot;key&quot;, false, 10);</span></div><div class="line"><a name="l01895"></a><span class="lineno"> 1895</span>&#160;   <span class="keywordflow">if</span> (d != 0)   symbol.<a class="code" href="classSymbol.html#a26e1c2223b6377aca652d1a7102b417b">push</a>();</div><div class="line"><a name="l01896"></a><span class="lineno"> 1896</span>&#160;</div><div class="line"><a name="l01897"></a><span class="lineno"> 1897</span>&#160;   CERR &lt;&lt; <span class="stringliteral">&quot;WARNING: workspace was )SAVEd with a shared variable &quot;</span></div><div class="line"><a name="l01898"></a><span class="lineno"> 1898</span>&#160;        &lt;&lt; symbol.<a class="code" href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">get_name</a>() &lt;&lt; endl</div><div class="line"><a name="l01899"></a><span class="lineno"> 1899</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; (shared variables are not restored by )LOAD or )COPY)&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01900"></a><span class="lineno"> 1900</span>&#160;</div><div class="line"><a name="l01901"></a><span class="lineno"> 1901</span>&#160;   <span class="comment">// symbol.share_var(key);</span></div><div class="line"><a name="l01902"></a><span class="lineno"> 1902</span>&#160;}</div><div class="line"><a name="l01903"></a><span class="lineno"> 1903</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01904"></a><span class="lineno"> 1904</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01905"></a><span class="lineno"> 1905</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a2a4f7a3fff06dfd2351348bf26fc90a3">XML_Loading_Archive::read_SymbolTable</a>()</div><div class="line"><a name="l01906"></a><span class="lineno"> 1906</span>&#160;{</div><div class="line"><a name="l01907"></a><span class="lineno"> 1907</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> size = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;size&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01908"></a><span class="lineno"> 1908</span>&#160;</div><div class="line"><a name="l01909"></a><span class="lineno"> 1909</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;  read_SymbolTable()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l01910"></a><span class="lineno"> 1910</span>&#160;</div><div class="line"><a name="l01911"></a><span class="lineno"> 1911</span>&#160;   loop(s, size)</div><div class="line"><a name="l01912"></a><span class="lineno"> 1912</span>&#160;      {</div><div class="line"><a name="l01913"></a><span class="lineno"> 1913</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01914"></a><span class="lineno"> 1914</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a75730a7dd5af9238d0d1aa223a54060e">read_Symbol</a>();</div><div class="line"><a name="l01915"></a><span class="lineno"> 1915</span>&#160;      }</div><div class="line"><a name="l01916"></a><span class="lineno"> 1916</span>&#160;</div><div class="line"><a name="l01917"></a><span class="lineno"> 1917</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01918"></a><span class="lineno"> 1918</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/SymbolTable&quot;</span>, LOC);</div><div class="line"><a name="l01919"></a><span class="lineno"> 1919</span>&#160;}</div><div class="line"><a name="l01920"></a><span class="lineno"> 1920</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l01921"></a><span class="lineno"> 1921</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l01922"></a><span class="lineno"> 1922</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a75730a7dd5af9238d0d1aa223a54060e">XML_Loading_Archive::read_Symbol</a>()</div><div class="line"><a name="l01923"></a><span class="lineno"> 1923</span>&#160;{</div><div class="line"><a name="l01924"></a><span class="lineno"> 1924</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;Symbol&quot;</span>, LOC);</div><div class="line"><a name="l01925"></a><span class="lineno"> 1925</span>&#160;</div><div class="line"><a name="l01926"></a><span class="lineno"> 1926</span>&#160;<span class="keyword">const</span> UTF8 * name = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;name&quot;</span>,  <span class="keyword">false</span>);</div><div class="line"><a name="l01927"></a><span class="lineno"> 1927</span>&#160;<span class="keyword">const</span> UTF8 * name_end = name;</div><div class="line"><a name="l01928"></a><span class="lineno"> 1928</span>&#160;   <span class="keywordflow">while</span> (*name_end != <span class="charliteral">&#39;&quot;&#39;</span>)   ++name_end;</div><div class="line"><a name="l01929"></a><span class="lineno"> 1929</span>&#160;</div><div class="line"><a name="l01930"></a><span class="lineno"> 1930</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> name_UTF(name, name_end - name);</div><div class="line"><a name="l01931"></a><span class="lineno"> 1931</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a>  name_UCS(name_UTF);</div><div class="line"><a name="l01932"></a><span class="lineno"> 1932</span>&#160;   <span class="keywordflow">if</span> (name_UCS.<a class="code" href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">size</a>() == 0)</div><div class="line"><a name="l01933"></a><span class="lineno"> 1933</span>&#160;      {</div><div class="line"><a name="l01934"></a><span class="lineno"> 1934</span>&#160;        CERR &lt;&lt; <span class="stringliteral">&quot;*** Warning: empty Symbol name in XML archive &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">filename</a></div><div class="line"><a name="l01935"></a><span class="lineno"> 1935</span>&#160;             &lt;&lt; <span class="stringliteral">&quot; around line &quot;</span> &lt;&lt; <a class="code" href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">line_no</a> &lt;&lt; endl;</div><div class="line"><a name="l01936"></a><span class="lineno"> 1936</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l01937"></a><span class="lineno"> 1937</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01938"></a><span class="lineno"> 1938</span>&#160;      }</div><div class="line"><a name="l01939"></a><span class="lineno"> 1939</span>&#160;</div><div class="line"><a name="l01940"></a><span class="lineno"> 1940</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;    read_Symbol() name=&quot;</span> &lt;&lt; name_UCS &lt;&lt; endl;</div><div class="line"><a name="l01941"></a><span class="lineno"> 1941</span>&#160;</div><div class="line"><a name="l01942"></a><span class="lineno"> 1942</span>&#160;   <span class="comment">// âNLT and âPT were removed, but could lurk around in old workspaces.</span></div><div class="line"><a name="l01943"></a><span class="lineno"> 1943</span>&#160;   <span class="comment">// âPW and âTZ are session variables that must not )LOADed (but might be</span></div><div class="line"><a name="l01944"></a><span class="lineno"> 1944</span>&#160;   <span class="comment">// )COPYd)</span></div><div class="line"><a name="l01945"></a><span class="lineno"> 1945</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01946"></a><span class="lineno"> 1946</span>&#160;   <span class="keywordflow">if</span> (name_UTF == <a class="code" href="classUTF8__string.html">UTF8_string</a>(<span class="stringliteral">&quot;âNLT&quot;</span>) || name_UTF == <a class="code" href="classUTF8__string.html">UTF8_string</a>(<span class="stringliteral">&quot;âPT&quot;</span>))</div><div class="line"><a name="l01947"></a><span class="lineno"> 1947</span>&#160;      {</div><div class="line"><a name="l01948"></a><span class="lineno"> 1948</span>&#160;        Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;        skipped at &quot;</span> &lt;&lt; LOC &lt;&lt; endl;</div><div class="line"><a name="l01949"></a><span class="lineno"> 1949</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l01950"></a><span class="lineno"> 1950</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l01951"></a><span class="lineno"> 1951</span>&#160;      }</div><div class="line"><a name="l01952"></a><span class="lineno"> 1952</span>&#160;</div><div class="line"><a name="l01953"></a><span class="lineno"> 1953</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> depth = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;stack-size&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l01954"></a><span class="lineno"> 1954</span>&#160;</div><div class="line"><a name="l01955"></a><span class="lineno"> 1955</span>&#160;   <span class="comment">// lookup symbol, trying âxx first</span></div><div class="line"><a name="l01956"></a><span class="lineno"> 1956</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01957"></a><span class="lineno"> 1957</span>&#160;<a class="code" href="classSymbol.html">Symbol</a> * symbol;</div><div class="line"><a name="l01958"></a><span class="lineno"> 1958</span>&#160;   <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_LAMBDA))</div><div class="line"><a name="l01959"></a><span class="lineno"> 1959</span>&#160;      symbol = &amp;<a class="code" href="classWorkspace.html#a3192783e589c4ba7b79e3b85c1593ca4">Workspace::get_v_LAMBDA</a>();</div><div class="line"><a name="l01960"></a><span class="lineno"> 1960</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_ALPHA))</div><div class="line"><a name="l01961"></a><span class="lineno"> 1961</span>&#160;      symbol = &amp;<a class="code" href="classWorkspace.html#a04a668922bc9c899a92ab14873493199">Workspace::get_v_ALPHA</a>();</div><div class="line"><a name="l01962"></a><span class="lineno"> 1962</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_ALPHA_U))</div><div class="line"><a name="l01963"></a><span class="lineno"> 1963</span>&#160;      symbol = &amp;<a class="code" href="classWorkspace.html#ad7fbbc3aa92594aa2af21f27d4297e39">Workspace::get_v_ALPHA_U</a>();</div><div class="line"><a name="l01964"></a><span class="lineno"> 1964</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_CHI))</div><div class="line"><a name="l01965"></a><span class="lineno"> 1965</span>&#160;      symbol = &amp;<a class="code" href="classWorkspace.html#a441d5cd1b3abd5a455093e10c1ff966d">Workspace::get_v_CHI</a>();</div><div class="line"><a name="l01966"></a><span class="lineno"> 1966</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_OMEGA))</div><div class="line"><a name="l01967"></a><span class="lineno"> 1967</span>&#160;      symbol = &amp;<a class="code" href="classWorkspace.html#acfbfb5e8411b77e43b090b4c27d1263f">Workspace::get_v_OMEGA</a>();</div><div class="line"><a name="l01968"></a><span class="lineno"> 1968</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_OMEGA_U))</div><div class="line"><a name="l01969"></a><span class="lineno"> 1969</span>&#160;      symbol = &amp;<a class="code" href="classWorkspace.html#ada85ae535d16883c90ff907fac7a2b2c">Workspace::get_v_OMEGA_U</a>();</div><div class="line"><a name="l01970"></a><span class="lineno"> 1970</span>&#160;   <span class="keywordflow">else</span></div><div class="line"><a name="l01971"></a><span class="lineno"> 1971</span>&#160;      symbol = <a class="code" href="classWorkspace.html#ad59928bcb6527147b5c5ca3e34106fe3">Workspace::lookup_existing_symbol</a>(name_UCS);</div><div class="line"><a name="l01972"></a><span class="lineno"> 1972</span>&#160;</div><div class="line"><a name="l01973"></a><span class="lineno"> 1973</span>&#160;   <span class="comment">// we do NOT copy if:</span></div><div class="line"><a name="l01974"></a><span class="lineno"> 1974</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01975"></a><span class="lineno"> 1975</span>&#160;   <span class="comment">// 1. )PCOPY and the symbol exists, or </span></div><div class="line"><a name="l01976"></a><span class="lineno"> 1976</span>&#160;   <span class="comment">// 2.  there is an object list and this symbol is not contained in the list</span></div><div class="line"><a name="l01977"></a><span class="lineno"> 1977</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l01978"></a><span class="lineno"> 1978</span>&#160;<span class="keyword">const</span> <span class="keywordtype">bool</span> is_protected = symbol &amp;&amp; <a class="code" href="classXML__Loading__Archive.html#a051771a3e2340dc74c070d4c8b5a627a">protection</a>;</div><div class="line"><a name="l01979"></a><span class="lineno"> 1979</span>&#160;<span class="keyword">const</span> <span class="keywordtype">bool</span> is_selected = <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>.<a class="code" href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">contains</a>(name_UCS);</div><div class="line"><a name="l01980"></a><span class="lineno"> 1980</span>&#160;<span class="keywordtype">bool</span> no_copy = is_protected || (<a class="code" href="classXML__Loading__Archive.html#a02c56f13960c2355d285da61356e5dff">have_allowed_objects</a> &amp;&amp; !is_selected);</div><div class="line"><a name="l01981"></a><span class="lineno"> 1981</span>&#160;</div><div class="line"><a name="l01982"></a><span class="lineno"> 1982</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">reading_vids</a>)</div><div class="line"><a name="l01983"></a><span class="lineno"> 1983</span>&#160;      {</div><div class="line"><a name="l01984"></a><span class="lineno"> 1984</span>&#160;        <span class="comment">// we prepare vids for )COPY or )PCOPY, so we do not create a symbol</span></div><div class="line"><a name="l01985"></a><span class="lineno"> 1985</span>&#160;        <span class="comment">// and care only for the top level</span></div><div class="line"><a name="l01986"></a><span class="lineno"> 1986</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01987"></a><span class="lineno"> 1987</span>&#160;        <span class="keywordflow">if</span> (no_copy || (depth == 0))</div><div class="line"><a name="l01988"></a><span class="lineno"> 1988</span>&#160;           {</div><div class="line"><a name="l01989"></a><span class="lineno"> 1989</span>&#160;             Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;        skipped at &quot;</span> &lt;&lt; LOC &lt;&lt; endl;</div><div class="line"><a name="l01990"></a><span class="lineno"> 1990</span>&#160;             <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l01991"></a><span class="lineno"> 1991</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l01992"></a><span class="lineno"> 1992</span>&#160;           }</div><div class="line"><a name="l01993"></a><span class="lineno"> 1993</span>&#160;</div><div class="line"><a name="l01994"></a><span class="lineno"> 1994</span>&#160;        <span class="comment">// we have entries and copying is allowed</span></div><div class="line"><a name="l01995"></a><span class="lineno"> 1995</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l01996"></a><span class="lineno"> 1996</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l01997"></a><span class="lineno"> 1997</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Variable&quot;</span>))</div><div class="line"><a name="l01998"></a><span class="lineno"> 1998</span>&#160;           {</div><div class="line"><a name="l01999"></a><span class="lineno"> 1999</span>&#160;             <span class="keyword">const</span> <span class="keywordtype">int</span> vid = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;vid&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02000"></a><span class="lineno"> 2000</span>&#160;             <a class="code" href="classXML__Loading__Archive.html#a4180cae61394cb08ba070c7ecd138ea5">vids_COPY</a>.push_back(vid);</div><div class="line"><a name="l02001"></a><span class="lineno"> 2001</span>&#160;           }</div><div class="line"><a name="l02002"></a><span class="lineno"> 2002</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l02003"></a><span class="lineno"> 2003</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02004"></a><span class="lineno"> 2004</span>&#160;      }</div><div class="line"><a name="l02005"></a><span class="lineno"> 2005</span>&#160;</div><div class="line"><a name="l02006"></a><span class="lineno"> 2006</span>&#160;   <span class="comment">// in a )COPY without dedicated objects only</span></div><div class="line"><a name="l02007"></a><span class="lineno"> 2007</span>&#160;   <span class="comment">// âCT, âFC, âIO, âLX, âPP, âPR, and âRL shall be copied</span></div><div class="line"><a name="l02008"></a><span class="lineno"> 2008</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02009"></a><span class="lineno"> 2009</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#a02c56f13960c2355d285da61356e5dff">have_allowed_objects</a>       &amp;&amp;   <span class="comment">// no dedicated object list</span></div><div class="line"><a name="l02010"></a><span class="lineno"> 2010</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>                    &amp;&amp;   <span class="comment">// )COPY</span></div><div class="line"><a name="l02011"></a><span class="lineno"> 2011</span>&#160;        (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_CT) ||</div><div class="line"><a name="l02012"></a><span class="lineno"> 2012</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_FC) ||</div><div class="line"><a name="l02013"></a><span class="lineno"> 2013</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_IO) ||</div><div class="line"><a name="l02014"></a><span class="lineno"> 2014</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_LX) ||</div><div class="line"><a name="l02015"></a><span class="lineno"> 2015</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_PP) ||</div><div class="line"><a name="l02016"></a><span class="lineno"> 2016</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_PR) ||</div><div class="line"><a name="l02017"></a><span class="lineno"> 2017</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_RL)</div><div class="line"><a name="l02018"></a><span class="lineno"> 2018</span>&#160;        ))</div><div class="line"><a name="l02019"></a><span class="lineno"> 2019</span>&#160;      {</div><div class="line"><a name="l02020"></a><span class="lineno"> 2020</span>&#160;        Log(LOG_archive)   CERR &lt;&lt; name_UCS &lt;&lt; <span class="stringliteral">&quot; not copied at &quot;</span> &lt;&lt; LOC &lt;&lt; endl;</div><div class="line"><a name="l02021"></a><span class="lineno"> 2021</span>&#160;        no_copy = <span class="keyword">true</span>;</div><div class="line"><a name="l02022"></a><span class="lineno"> 2022</span>&#160;      }</div><div class="line"><a name="l02023"></a><span class="lineno"> 2023</span>&#160;</div><div class="line"><a name="l02024"></a><span class="lineno"> 2024</span>&#160;   <span class="comment">// in a )LOAD silently ignore session variables (âPW and âTZ)</span></div><div class="line"><a name="l02025"></a><span class="lineno"> 2025</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02026"></a><span class="lineno"> 2026</span>&#160;   <span class="keywordflow">if</span> (!<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a> &amp;&amp;   <span class="comment">// )LOAD</span></div><div class="line"><a name="l02027"></a><span class="lineno"> 2027</span>&#160;        (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_PW) ||</div><div class="line"><a name="l02028"></a><span class="lineno"> 2028</span>&#160;         name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_Quad_TZ)))</div><div class="line"><a name="l02029"></a><span class="lineno"> 2029</span>&#160;      {</div><div class="line"><a name="l02030"></a><span class="lineno"> 2030</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l02031"></a><span class="lineno"> 2031</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02032"></a><span class="lineno"> 2032</span>&#160;      }</div><div class="line"><a name="l02033"></a><span class="lineno"> 2033</span>&#160;</div><div class="line"><a name="l02034"></a><span class="lineno"> 2034</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)</div><div class="line"><a name="l02035"></a><span class="lineno"> 2035</span>&#160;      {</div><div class="line"><a name="l02036"></a><span class="lineno"> 2036</span>&#160;        <span class="keywordflow">if</span> (no_copy || (depth == 0))</div><div class="line"><a name="l02037"></a><span class="lineno"> 2037</span>&#160;           {</div><div class="line"><a name="l02038"></a><span class="lineno"> 2038</span>&#160;             <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l02039"></a><span class="lineno"> 2039</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l02040"></a><span class="lineno"> 2040</span>&#160;           }</div><div class="line"><a name="l02041"></a><span class="lineno"> 2041</span>&#160;      }</div><div class="line"><a name="l02042"></a><span class="lineno"> 2042</span>&#160;</div><div class="line"><a name="l02043"></a><span class="lineno"> 2043</span>&#160;   <span class="comment">// remove this symbol from allowed_objects so that we can print NOT COPIED</span></div><div class="line"><a name="l02044"></a><span class="lineno"> 2044</span>&#160;   <span class="comment">// at the end for all objects that are still in the list.</span></div><div class="line"><a name="l02045"></a><span class="lineno"> 2045</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02046"></a><span class="lineno"> 2046</span>&#160;   loop(a, <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>.size())</div><div class="line"><a name="l02047"></a><span class="lineno"> 2047</span>&#160;      {</div><div class="line"><a name="l02048"></a><span class="lineno"> 2048</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>[a] == name_UCS)</div><div class="line"><a name="l02049"></a><span class="lineno"> 2049</span>&#160;             {</div><div class="line"><a name="l02050"></a><span class="lineno"> 2050</span>&#160;               <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>[a] = <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>.back();</div><div class="line"><a name="l02051"></a><span class="lineno"> 2051</span>&#160;               <a class="code" href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">allowed_objects</a>.pop_back();</div><div class="line"><a name="l02052"></a><span class="lineno"> 2052</span>&#160;               <span class="keywordflow">break</span>;</div><div class="line"><a name="l02053"></a><span class="lineno"> 2053</span>&#160;           }</div><div class="line"><a name="l02054"></a><span class="lineno"> 2054</span>&#160;      }</div><div class="line"><a name="l02055"></a><span class="lineno"> 2055</span>&#160;</div><div class="line"><a name="l02056"></a><span class="lineno"> 2056</span>&#160;   <span class="keywordflow">if</span> (symbol == 0)</div><div class="line"><a name="l02057"></a><span class="lineno"> 2057</span>&#160;      {</div><div class="line"><a name="l02058"></a><span class="lineno"> 2058</span>&#160;        symbol = <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(name_UCS);</div><div class="line"><a name="l02059"></a><span class="lineno"> 2059</span>&#160;      }</div><div class="line"><a name="l02060"></a><span class="lineno"> 2060</span>&#160;   Assert(symbol);</div><div class="line"><a name="l02061"></a><span class="lineno"> 2061</span>&#160;</div><div class="line"><a name="l02062"></a><span class="lineno"> 2062</span>&#160;   loop(d, depth)</div><div class="line"><a name="l02063"></a><span class="lineno"> 2063</span>&#160;      {</div><div class="line"><a name="l02064"></a><span class="lineno"> 2064</span>&#160;        <span class="comment">// for )COPY skip d &gt; 0</span></div><div class="line"><a name="l02065"></a><span class="lineno"> 2065</span>&#160;        <span class="comment">//</span></div><div class="line"><a name="l02066"></a><span class="lineno"> 2066</span>&#160;        <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a> &amp;&amp; (d &gt; 0))</div><div class="line"><a name="l02067"></a><span class="lineno"> 2067</span>&#160;           {</div><div class="line"><a name="l02068"></a><span class="lineno"> 2068</span>&#160;             <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>);</div><div class="line"><a name="l02069"></a><span class="lineno"> 2069</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l02070"></a><span class="lineno"> 2070</span>&#160;           }</div><div class="line"><a name="l02071"></a><span class="lineno"> 2071</span>&#160;</div><div class="line"><a name="l02072"></a><span class="lineno"> 2072</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02073"></a><span class="lineno"> 2073</span>&#160;        <span class="keywordflow">if</span>      (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;unused-name&quot;</span>))       <a class="code" href="classXML__Loading__Archive.html#a323736803868a3ec3ac5158038d5c615">read_unused_name</a>(d, *symbol);</div><div class="line"><a name="l02074"></a><span class="lineno"> 2074</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Variable&quot;</span>))          <a class="code" href="classXML__Loading__Archive.html#a1233bd12e879f5670f4a234e0f37b7aa">read_Variable</a>(d, *symbol);</div><div class="line"><a name="l02075"></a><span class="lineno"> 2075</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Function&quot;</span>))          <a class="code" href="classXML__Loading__Archive.html#a2e7aed9883aa106937d3d9313163e10b">read_Function</a>(d, *symbol);</div><div class="line"><a name="l02076"></a><span class="lineno"> 2076</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Label&quot;</span>))             <a class="code" href="classXML__Loading__Archive.html#a6fedb7030e4a251354c6d5cc6c9261ab">read_Label</a>(d, *symbol);</div><div class="line"><a name="l02077"></a><span class="lineno"> 2077</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Shared-Variable&quot;</span>))   <a class="code" href="classXML__Loading__Archive.html#ac33cf45160129fd2365367a778bfdd02">read_Shared_Variable</a>(d, *symbol);</div><div class="line"><a name="l02078"></a><span class="lineno"> 2078</span>&#160;      }</div><div class="line"><a name="l02079"></a><span class="lineno"> 2079</span>&#160;</div><div class="line"><a name="l02080"></a><span class="lineno"> 2080</span>&#160;   Assert(symbol-&gt;<a class="code" href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">value_stack_size</a>() == depth);</div><div class="line"><a name="l02081"></a><span class="lineno"> 2081</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02082"></a><span class="lineno"> 2082</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/Symbol&quot;</span>, LOC);</div><div class="line"><a name="l02083"></a><span class="lineno"> 2083</span>&#160;}</div><div class="line"><a name="l02084"></a><span class="lineno"> 2084</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02085"></a><span class="lineno"> 2085</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02086"></a><span class="lineno"> 2086</span>&#160;<a class="code" href="classXML__Loading__Archive.html#aa277539e63e84953fa49069c6d51ea47">XML_Loading_Archive::read_Commands</a>()</div><div class="line"><a name="l02087"></a><span class="lineno"> 2087</span>&#160;{</div><div class="line"><a name="l02088"></a><span class="lineno"> 2088</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> size = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;size&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02089"></a><span class="lineno"> 2089</span>&#160;</div><div class="line"><a name="l02090"></a><span class="lineno"> 2090</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;  read_Commands()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02091"></a><span class="lineno"> 2091</span>&#160;</div><div class="line"><a name="l02092"></a><span class="lineno"> 2092</span>&#160;   loop(s, size)</div><div class="line"><a name="l02093"></a><span class="lineno"> 2093</span>&#160;      {</div><div class="line"><a name="l02094"></a><span class="lineno"> 2094</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02095"></a><span class="lineno"> 2095</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a28b4a906759f6035d41007056b0f4498">read_Command</a>();</div><div class="line"><a name="l02096"></a><span class="lineno"> 2096</span>&#160;      }</div><div class="line"><a name="l02097"></a><span class="lineno"> 2097</span>&#160;</div><div class="line"><a name="l02098"></a><span class="lineno"> 2098</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02099"></a><span class="lineno"> 2099</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/Commands&quot;</span>, LOC);</div><div class="line"><a name="l02100"></a><span class="lineno"> 2100</span>&#160;}</div><div class="line"><a name="l02101"></a><span class="lineno"> 2101</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02102"></a><span class="lineno"> 2102</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02103"></a><span class="lineno"> 2103</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a28b4a906759f6035d41007056b0f4498">XML_Loading_Archive::read_Command</a>()</div><div class="line"><a name="l02104"></a><span class="lineno"> 2104</span>&#160;{</div><div class="line"><a name="l02105"></a><span class="lineno"> 2105</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;Command&quot;</span>, LOC);</div><div class="line"><a name="l02106"></a><span class="lineno"> 2106</span>&#160;</div><div class="line"><a name="l02107"></a><span class="lineno"> 2107</span>&#160;<span class="keyword">const</span> UTF8 * name = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;name&quot;</span>,  <span class="keyword">false</span>);</div><div class="line"><a name="l02108"></a><span class="lineno"> 2108</span>&#160;<span class="keyword">const</span> UTF8 * name_end = name;</div><div class="line"><a name="l02109"></a><span class="lineno"> 2109</span>&#160;   <span class="keywordflow">while</span> (*name_end != <span class="charliteral">&#39;&quot;&#39;</span>)   ++name_end;</div><div class="line"><a name="l02110"></a><span class="lineno"> 2110</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> name_UTF(name, name_end - name);</div><div class="line"><a name="l02111"></a><span class="lineno"> 2111</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a>  name_UCS(name_UTF);</div><div class="line"><a name="l02112"></a><span class="lineno"> 2112</span>&#160;</div><div class="line"><a name="l02113"></a><span class="lineno"> 2113</span>&#160;<span class="keyword">const</span> UTF8 * fun = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;fun&quot;</span>,  <span class="keyword">false</span>);</div><div class="line"><a name="l02114"></a><span class="lineno"> 2114</span>&#160;<span class="keyword">const</span> UTF8 * fun_end = fun;</div><div class="line"><a name="l02115"></a><span class="lineno"> 2115</span>&#160;   <span class="keywordflow">while</span> (*fun_end != <span class="charliteral">&#39;&quot;&#39;</span>)   ++fun_end;</div><div class="line"><a name="l02116"></a><span class="lineno"> 2116</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> fun_UTF(fun, fun_end - fun);</div><div class="line"><a name="l02117"></a><span class="lineno"> 2117</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a>  fun_UCS(fun_UTF);</div><div class="line"><a name="l02118"></a><span class="lineno"> 2118</span>&#160;</div><div class="line"><a name="l02119"></a><span class="lineno"> 2119</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> mode = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;mode&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02120"></a><span class="lineno"> 2120</span>&#160;</div><div class="line"><a name="l02121"></a><span class="lineno"> 2121</span>&#160;<a class="code" href="structCommand_1_1user__command.html">Command::user_command</a> ucmd = { name_UCS, fun_UCS, mode };</div><div class="line"><a name="l02122"></a><span class="lineno"> 2122</span>&#160;   <a class="code" href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a>().push_back(ucmd);</div><div class="line"><a name="l02123"></a><span class="lineno"> 2123</span>&#160;}</div><div class="line"><a name="l02124"></a><span class="lineno"> 2124</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02125"></a><span class="lineno"> 2125</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02126"></a><span class="lineno"> 2126</span>&#160;<a class="code" href="classXML__Loading__Archive.html#ad2f1d88070976eab8a41f0fdcd1e0ec1">XML_Loading_Archive::read_StateIndicator</a>()</div><div class="line"><a name="l02127"></a><span class="lineno"> 2127</span>&#160;{</div><div class="line"><a name="l02128"></a><span class="lineno"> 2128</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">copying</a>)</div><div class="line"><a name="l02129"></a><span class="lineno"> 2129</span>&#160;      {</div><div class="line"><a name="l02130"></a><span class="lineno"> 2130</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/StateIndicator&quot;</span>);</div><div class="line"><a name="l02131"></a><span class="lineno"> 2131</span>&#160;        <span class="keywordflow">return</span>;</div><div class="line"><a name="l02132"></a><span class="lineno"> 2132</span>&#160;      }</div><div class="line"><a name="l02133"></a><span class="lineno"> 2133</span>&#160;</div><div class="line"><a name="l02134"></a><span class="lineno"> 2134</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;read_StateIndicator()&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02135"></a><span class="lineno"> 2135</span>&#160;</div><div class="line"><a name="l02136"></a><span class="lineno"> 2136</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> levels = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;levels&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02137"></a><span class="lineno"> 2137</span>&#160;</div><div class="line"><a name="l02138"></a><span class="lineno"> 2138</span>&#160;   loop(l, levels)</div><div class="line"><a name="l02139"></a><span class="lineno"> 2139</span>&#160;      {</div><div class="line"><a name="l02140"></a><span class="lineno"> 2140</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02141"></a><span class="lineno"> 2141</span>&#160;        <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;SI-entry&quot;</span>, LOC);</div><div class="line"><a name="l02142"></a><span class="lineno"> 2142</span>&#160;</div><div class="line"><a name="l02143"></a><span class="lineno"> 2143</span>&#160;        <span class="keywordflow">try</span></div><div class="line"><a name="l02144"></a><span class="lineno"> 2144</span>&#160;           {</div><div class="line"><a name="l02145"></a><span class="lineno"> 2145</span>&#160;             <a class="code" href="classXML__Loading__Archive.html#adfa844fcc401d3c335cafa5abda2f35d">read_SI_entry</a>(l);</div><div class="line"><a name="l02146"></a><span class="lineno"> 2146</span>&#160;           }</div><div class="line"><a name="l02147"></a><span class="lineno"> 2147</span>&#160;        <span class="keywordflow">catch</span> (...)</div><div class="line"><a name="l02148"></a><span class="lineno"> 2148</span>&#160;           {</div><div class="line"><a name="l02149"></a><span class="lineno"> 2149</span>&#160;             CERR &lt;&lt;</div><div class="line"><a name="l02150"></a><span class="lineno"> 2150</span>&#160;<span class="stringliteral">&quot;\n&quot;</span></div><div class="line"><a name="l02151"></a><span class="lineno"> 2151</span>&#160;<span class="stringliteral">&quot;*** SORRY! An error occured while reading the )SI stack of the )SAVEd\n&quot;</span></div><div class="line"><a name="l02152"></a><span class="lineno"> 2152</span>&#160;<span class="stringliteral">&quot;    workspace. The )SI stack was reconstructed to the extent possible.\n&quot;</span></div><div class="line"><a name="l02153"></a><span class="lineno"> 2153</span>&#160;<span class="stringliteral">&quot;    We stronly recommend to perform )SIC and then )DUMP the workspace under\n&quot;</span></div><div class="line"><a name="l02154"></a><span class="lineno"> 2154</span>&#160;<span class="stringliteral">&quot;    a different name.\n&quot;</span> &lt;&lt; endl;</div><div class="line"><a name="l02155"></a><span class="lineno"> 2155</span>&#160;</div><div class="line"><a name="l02156"></a><span class="lineno"> 2156</span>&#160;             <span class="comment">// skip rest of &lt;StateIndicator&gt;</span></div><div class="line"><a name="l02157"></a><span class="lineno"> 2157</span>&#160;             <span class="comment">//</span></div><div class="line"><a name="l02158"></a><span class="lineno"> 2158</span>&#160;             <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;/StateIndicator&quot;</span>);</div><div class="line"><a name="l02159"></a><span class="lineno"> 2159</span>&#160;             <span class="keywordflow">return</span>;</div><div class="line"><a name="l02160"></a><span class="lineno"> 2160</span>&#160;           }</div><div class="line"><a name="l02161"></a><span class="lineno"> 2161</span>&#160;</div><div class="line"><a name="l02162"></a><span class="lineno"> 2162</span>&#160;        <span class="comment">// the parsers loop eats the terminating /SI-entry</span></div><div class="line"><a name="l02163"></a><span class="lineno"> 2163</span>&#160;      }</div><div class="line"><a name="l02164"></a><span class="lineno"> 2164</span>&#160;</div><div class="line"><a name="l02165"></a><span class="lineno"> 2165</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02166"></a><span class="lineno"> 2166</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/StateIndicator&quot;</span>, LOC);</div><div class="line"><a name="l02167"></a><span class="lineno"> 2167</span>&#160;}</div><div class="line"><a name="l02168"></a><span class="lineno"> 2168</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02169"></a><span class="lineno"> 2169</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02170"></a><span class="lineno"> 2170</span>&#160;<a class="code" href="classXML__Loading__Archive.html#adfa844fcc401d3c335cafa5abda2f35d">XML_Loading_Archive::read_SI_entry</a>(<span class="keywordtype">int</span> lev)</div><div class="line"><a name="l02171"></a><span class="lineno"> 2171</span>&#160;{</div><div class="line"><a name="l02172"></a><span class="lineno"> 2172</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> level = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;level&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02173"></a><span class="lineno"> 2173</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> pc = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;pc&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02174"></a><span class="lineno"> 2174</span>&#160;</div><div class="line"><a name="l02175"></a><span class="lineno"> 2175</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;    read_SI_entry() level=&quot;</span> &lt;&lt; level &lt;&lt; endl;</div><div class="line"><a name="l02176"></a><span class="lineno"> 2176</span>&#160;</div><div class="line"><a name="l02177"></a><span class="lineno"> 2177</span>&#160;<a class="code" href="classExecutable.html">Executable</a> * exec = 0;</div><div class="line"><a name="l02178"></a><span class="lineno"> 2178</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02179"></a><span class="lineno"> 2179</span>&#160;   <span class="keywordflow">if</span>      (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Execute&quot;</span>))        exec = <a class="code" href="classXML__Loading__Archive.html#a6a78e55137388c3ba253e27d6e98a1c6">read_Execute</a>();</div><div class="line"><a name="l02180"></a><span class="lineno"> 2180</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;Statements&quot;</span>))     exec = <a class="code" href="classXML__Loading__Archive.html#a319259c8e532c47946deaf6f8afee8f4">read_Statement</a>();</div><div class="line"><a name="l02181"></a><span class="lineno"> 2181</span>&#160;   <span class="keywordflow">else</span> <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;UserFunction&quot;</span>))   exec = <a class="code" href="classXML__Loading__Archive.html#a7823097bb94ced4a46e153e77a919b45">read_UserFunction</a>();</div><div class="line"><a name="l02182"></a><span class="lineno"> 2182</span>&#160;   <span class="keywordflow">else</span>    Assert(0 &amp;&amp; <span class="stringliteral">&quot;Bad tag at &quot;</span> LOC); </div><div class="line"><a name="l02183"></a><span class="lineno"> 2183</span>&#160;</div><div class="line"><a name="l02184"></a><span class="lineno"> 2184</span>&#160;   Assert(lev == level);</div><div class="line"><a name="l02185"></a><span class="lineno"> 2185</span>&#160;   Assert(exec);</div><div class="line"><a name="l02186"></a><span class="lineno"> 2186</span>&#160;</div><div class="line"><a name="l02187"></a><span class="lineno"> 2187</span>&#160;   <a class="code" href="classWorkspace.html#a1d227be0952fda0d4c1e9f45e60e83e0">Workspace::push_SI</a>(exec, LOC);</div><div class="line"><a name="l02188"></a><span class="lineno"> 2188</span>&#160;<a class="code" href="classStateIndicator.html">StateIndicator</a> * si = <a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>();</div><div class="line"><a name="l02189"></a><span class="lineno"> 2189</span>&#160;   Assert(si);</div><div class="line"><a name="l02190"></a><span class="lineno"> 2190</span>&#160;   si-&gt;<a class="code" href="classStateIndicator.html#abab6fb3f97723c662eaadf1f28b0f718">set_PC</a>(Function_PC(pc));</div><div class="line"><a name="l02191"></a><span class="lineno"> 2191</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a7381cad28d73cdca8a76bf741921c63d">read_Parser</a>(*si, lev);</div><div class="line"><a name="l02192"></a><span class="lineno"> 2192</span>&#160;</div><div class="line"><a name="l02193"></a><span class="lineno"> 2193</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l02194"></a><span class="lineno"> 2194</span>&#160;       {</div><div class="line"><a name="l02195"></a><span class="lineno"> 2195</span>&#160;         <span class="comment">// skip old EOC tags</span></div><div class="line"><a name="l02196"></a><span class="lineno"> 2196</span>&#160;         <span class="comment">//</span></div><div class="line"><a name="l02197"></a><span class="lineno"> 2197</span>&#160;         <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02198"></a><span class="lineno"> 2198</span>&#160;         <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;/SI-entry&quot;</span>))   <span class="keywordflow">break</span>;</div><div class="line"><a name="l02199"></a><span class="lineno"> 2199</span>&#160;       }</div><div class="line"><a name="l02200"></a><span class="lineno"> 2200</span>&#160;}</div><div class="line"><a name="l02201"></a><span class="lineno"> 2201</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02202"></a><span class="lineno"> 2202</span>&#160;<a class="code" href="classExecutable.html">Executable</a> *</div><div class="line"><a name="l02203"></a><span class="lineno"> 2203</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a6a78e55137388c3ba253e27d6e98a1c6">XML_Loading_Archive::read_Execute</a>()</div><div class="line"><a name="l02204"></a><span class="lineno"> 2204</span>&#160;{</div><div class="line"><a name="l02205"></a><span class="lineno"> 2205</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02206"></a><span class="lineno"> 2206</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;UCS&quot;</span>, LOC);</div><div class="line"><a name="l02207"></a><span class="lineno"> 2207</span>&#160;</div><div class="line"><a name="l02208"></a><span class="lineno"> 2208</span>&#160;<span class="keyword">const</span> UTF8 * uni = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;uni&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02209"></a><span class="lineno"> 2209</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> text;</div><div class="line"><a name="l02210"></a><span class="lineno"> 2210</span>&#160;   <span class="keywordflow">while</span> (*uni != <span class="charliteral">&#39;&quot;&#39;</span>)   <a class="code" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">read_chars</a>(text, uni);</div><div class="line"><a name="l02211"></a><span class="lineno"> 2211</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02212"></a><span class="lineno"> 2212</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/Execute&quot;</span>, LOC);</div><div class="line"><a name="l02213"></a><span class="lineno"> 2213</span>&#160;</div><div class="line"><a name="l02214"></a><span class="lineno"> 2214</span>&#160;<a class="code" href="classExecuteList.html">ExecuteList</a> * exec = <a class="code" href="classExecuteList.html#a6f8688070be985996a46dad98ee3d2f9">ExecuteList::fix</a>(text, LOC);</div><div class="line"><a name="l02215"></a><span class="lineno"> 2215</span>&#160;   Assert(exec);</div><div class="line"><a name="l02216"></a><span class="lineno"> 2216</span>&#160;   <span class="keywordflow">return</span> exec;</div><div class="line"><a name="l02217"></a><span class="lineno"> 2217</span>&#160;}</div><div class="line"><a name="l02218"></a><span class="lineno"> 2218</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02219"></a><span class="lineno"> 2219</span>&#160;<a class="code" href="classExecutable.html">Executable</a> *</div><div class="line"><a name="l02220"></a><span class="lineno"> 2220</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a319259c8e532c47946deaf6f8afee8f4">XML_Loading_Archive::read_Statement</a>()</div><div class="line"><a name="l02221"></a><span class="lineno"> 2221</span>&#160;{</div><div class="line"><a name="l02222"></a><span class="lineno"> 2222</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02223"></a><span class="lineno"> 2223</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;UCS&quot;</span>, LOC);</div><div class="line"><a name="l02224"></a><span class="lineno"> 2224</span>&#160;<span class="keyword">const</span> UTF8 * uni = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;uni&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02225"></a><span class="lineno"> 2225</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> text;</div><div class="line"><a name="l02226"></a><span class="lineno"> 2226</span>&#160;   <span class="keywordflow">while</span> (*uni != <span class="charliteral">&#39;&quot;&#39;</span>)   <a class="code" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">read_chars</a>(text, uni);</div><div class="line"><a name="l02227"></a><span class="lineno"> 2227</span>&#160;</div><div class="line"><a name="l02228"></a><span class="lineno"> 2228</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02229"></a><span class="lineno"> 2229</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/Statements&quot;</span>, LOC);</div><div class="line"><a name="l02230"></a><span class="lineno"> 2230</span>&#160;</div><div class="line"><a name="l02231"></a><span class="lineno"> 2231</span>&#160;<a class="code" href="classStatementList.html">StatementList</a> * exec = <a class="code" href="classStatementList.html#a20b0b6ca4bd952856e75bdecc7fc110a">StatementList::fix</a>(text, LOC);</div><div class="line"><a name="l02232"></a><span class="lineno"> 2232</span>&#160;   Assert(exec);</div><div class="line"><a name="l02233"></a><span class="lineno"> 2233</span>&#160;   <span class="keywordflow">return</span> exec;</div><div class="line"><a name="l02234"></a><span class="lineno"> 2234</span>&#160;}</div><div class="line"><a name="l02235"></a><span class="lineno"> 2235</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02236"></a><span class="lineno"> 2236</span>&#160;<a class="code" href="classExecutable.html">Executable</a> *</div><div class="line"><a name="l02237"></a><span class="lineno"> 2237</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a7823097bb94ced4a46e153e77a919b45">XML_Loading_Archive::read_UserFunction</a>()</div><div class="line"><a name="l02238"></a><span class="lineno"> 2238</span>&#160;{</div><div class="line"><a name="l02239"></a><span class="lineno"> 2239</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> macro_num = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;macro-num&quot;</span>, <span class="keyword">true</span>, 10);</div><div class="line"><a name="l02240"></a><span class="lineno"> 2240</span>&#160;   <span class="keywordflow">if</span> (macro_num != -1)</div><div class="line"><a name="l02241"></a><span class="lineno"> 2241</span>&#160;      <span class="keywordflow">return</span> <a class="code" href="classMacro.html#a89933a99c596869c61a077dbad886dc8">Macro::get_macro</a>(<a class="code" href="classMacro.html#afaaea363cb2b900ee4bb374994285141">Macro::Macro_num</a>(macro_num));</div><div class="line"><a name="l02242"></a><span class="lineno"> 2242</span>&#160;</div><div class="line"><a name="l02243"></a><span class="lineno"> 2243</span>&#160;<span class="keyword">const</span> UTF8 * lambda_name = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;lambda-name&quot;</span>, <span class="keyword">true</span>);</div><div class="line"><a name="l02244"></a><span class="lineno"> 2244</span>&#160;   <span class="keywordflow">if</span> (lambda_name)   <span class="keywordflow">return</span> <a class="code" href="classXML__Loading__Archive.html#a47c3635d861946a293de143bdda6e7d2">read_lambda</a>(lambda_name);</div><div class="line"><a name="l02245"></a><span class="lineno"> 2245</span>&#160;</div><div class="line"><a name="l02246"></a><span class="lineno"> 2246</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> level     = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;symbol-level&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02247"></a><span class="lineno"> 2247</span>&#160;<span class="keyword">const</span> UTF8 * name   = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;ufun-name&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02248"></a><span class="lineno"> 2248</span>&#160;<span class="keyword">const</span> UTF8 * n  = name;</div><div class="line"><a name="l02249"></a><span class="lineno"> 2249</span>&#160;   <span class="keywordflow">while</span> (*n != <span class="charliteral">&#39;&quot;&#39;</span>)   ++n;</div><div class="line"><a name="l02250"></a><span class="lineno"> 2250</span>&#160;<a class="code" href="classUTF8__string.html">UTF8_string</a> name_UTF(name, n - name);</div><div class="line"><a name="l02251"></a><span class="lineno"> 2251</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> name_UCS(name_UTF);</div><div class="line"><a name="l02252"></a><span class="lineno"> 2252</span>&#160;</div><div class="line"><a name="l02253"></a><span class="lineno"> 2253</span>&#160;<a class="code" href="classSymbol.html">Symbol</a> * symbol = <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(name_UCS);</div><div class="line"><a name="l02254"></a><span class="lineno"> 2254</span>&#160;   Assert(symbol);</div><div class="line"><a name="l02255"></a><span class="lineno"> 2255</span>&#160;   Assert(level &gt;= 0);</div><div class="line"><a name="l02256"></a><span class="lineno"> 2256</span>&#160;   Assert(level &lt; symbol-&gt;value_stack_size());</div><div class="line"><a name="l02257"></a><span class="lineno"> 2257</span>&#160;<a class="code" href="classValueStackItem.html">ValueStackItem</a> &amp; vsi = (*symbol)[level];</div><div class="line"><a name="l02258"></a><span class="lineno"> 2258</span>&#160;   Assert(vsi.<a class="code" href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">name_class</a> == NC_FUNCTION);</div><div class="line"><a name="l02259"></a><span class="lineno"> 2259</span>&#160;<a class="code" href="classFunction.html">Function</a> * fun = vsi.<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#af30375052e9fc2151e49a19a63a43bf4">function</a>;</div><div class="line"><a name="l02260"></a><span class="lineno"> 2260</span>&#160;   Assert(fun);</div><div class="line"><a name="l02261"></a><span class="lineno"> 2261</span>&#160;<a class="code" href="classUserFunction.html">UserFunction</a> * ufun = fun-&gt;<a class="code" href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">get_ufun1</a>();</div><div class="line"><a name="l02262"></a><span class="lineno"> 2262</span>&#160;   Assert(fun == ufun);</div><div class="line"><a name="l02263"></a><span class="lineno"> 2263</span>&#160;</div><div class="line"><a name="l02264"></a><span class="lineno"> 2264</span>&#160;   <span class="keywordflow">return</span> ufun;</div><div class="line"><a name="l02265"></a><span class="lineno"> 2265</span>&#160;}</div><div class="line"><a name="l02266"></a><span class="lineno"> 2266</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02267"></a><span class="lineno"> 2267</span>&#160;<a class="code" href="classExecutable.html">Executable</a> *</div><div class="line"><a name="l02268"></a><span class="lineno"> 2268</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a47c3635d861946a293de143bdda6e7d2">XML_Loading_Archive::read_lambda</a>(<span class="keyword">const</span> UTF8 * lambda_name)</div><div class="line"><a name="l02269"></a><span class="lineno"> 2269</span>&#160;{</div><div class="line"><a name="l02270"></a><span class="lineno"> 2270</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> lambda = <a class="code" href="classXML__Loading__Archive.html#ac4cdadb93d62fcd862579b84d3556804">read_UCS</a>();</div><div class="line"><a name="l02271"></a><span class="lineno"> 2271</span>&#160;</div><div class="line"><a name="l02272"></a><span class="lineno"> 2272</span>&#160;<a class="code" href="classSymbol.html">Symbol</a> dummy(ID_No_ID);</div><div class="line"><a name="l02273"></a><span class="lineno"> 2273</span>&#160;<a class="code" href="classUserFunction.html">UserFunction</a> * ufun = <a class="code" href="classUserFunction.html#a3fb5d002175b6e8a7adf754159583ee9">UserFunction::fix_lambda</a>(dummy, lambda);</div><div class="line"><a name="l02274"></a><span class="lineno"> 2274</span>&#160;   Assert(ufun);</div><div class="line"><a name="l02275"></a><span class="lineno"> 2275</span>&#160;   ufun-&gt;<a class="code" href="classExecutable.html#a5f1a0c24eb29a98e47988c5ce370bded">increment_refcount</a>(LOC);   <span class="comment">// since we push it below</span></div><div class="line"><a name="l02276"></a><span class="lineno"> 2276</span>&#160;</div><div class="line"><a name="l02277"></a><span class="lineno"> 2277</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02278"></a><span class="lineno"> 2278</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/UserFunction&quot;</span>, LOC);</div><div class="line"><a name="l02279"></a><span class="lineno"> 2279</span>&#160;   <span class="keywordflow">return</span> ufun;</div><div class="line"><a name="l02280"></a><span class="lineno"> 2280</span>&#160;}</div><div class="line"><a name="l02281"></a><span class="lineno"> 2281</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02282"></a><span class="lineno"> 2282</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a></div><div class="line"><a name="l02283"></a><span class="lineno"> 2283</span>&#160;<a class="code" href="classXML__Loading__Archive.html#ac4cdadb93d62fcd862579b84d3556804">XML_Loading_Archive::read_UCS</a>()</div><div class="line"><a name="l02284"></a><span class="lineno"> 2284</span>&#160;{</div><div class="line"><a name="l02285"></a><span class="lineno"> 2285</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">skip_to_tag</a>(<span class="stringliteral">&quot;UCS&quot;</span>);</div><div class="line"><a name="l02286"></a><span class="lineno"> 2286</span>&#160;<span class="keyword">const</span> UTF8 * uni = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;uni&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02287"></a><span class="lineno"> 2287</span>&#160;<a class="code" href="classUCS__string.html">UCS_string</a> text;</div><div class="line"><a name="l02288"></a><span class="lineno"> 2288</span>&#160;   <span class="keywordflow">while</span> (*uni != <span class="charliteral">&#39;&quot;&#39;</span>)   <a class="code" href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">read_chars</a>(text, uni);</div><div class="line"><a name="l02289"></a><span class="lineno"> 2289</span>&#160;   <span class="keywordflow">return</span> text;</div><div class="line"><a name="l02290"></a><span class="lineno"> 2290</span>&#160;}</div><div class="line"><a name="l02291"></a><span class="lineno"> 2291</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02292"></a><span class="lineno"> 2292</span>&#160;<span class="keywordtype">void</span></div><div class="line"><a name="l02293"></a><span class="lineno"> 2293</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a7381cad28d73cdca8a76bf741921c63d">XML_Loading_Archive::read_Parser</a>(<a class="code" href="classStateIndicator.html">StateIndicator</a> &amp; si, <span class="keywordtype">int</span> lev)</div><div class="line"><a name="l02294"></a><span class="lineno"> 2294</span>&#160;{</div><div class="line"><a name="l02295"></a><span class="lineno"> 2295</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02296"></a><span class="lineno"> 2296</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;Parser&quot;</span>, LOC);</div><div class="line"><a name="l02297"></a><span class="lineno"> 2297</span>&#160;</div><div class="line"><a name="l02298"></a><span class="lineno"> 2298</span>&#160;   Log(LOG_archive)   CERR &lt;&lt; <span class="stringliteral">&quot;        read_Parser() level=&quot;</span> &lt;&lt; lev &lt;&lt; endl;</div><div class="line"><a name="l02299"></a><span class="lineno"> 2299</span>&#160;</div><div class="line"><a name="l02300"></a><span class="lineno"> 2300</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> stack_size = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;size&quot;</span>,           <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02301"></a><span class="lineno"> 2301</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> ass_state  = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;assign-pending&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02302"></a><span class="lineno"> 2302</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> lah_high   = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;lookahead-high&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02303"></a><span class="lineno"> 2303</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> action     = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;action&quot;</span>,         <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02304"></a><span class="lineno"> 2304</span>&#160;</div><div class="line"><a name="l02305"></a><span class="lineno"> 2305</span>&#160;<a class="code" href="classPrefix.html">Prefix</a> &amp; parser = si.<a class="code" href="classStateIndicator.html#a4c2ceda2ab0c6a27b906f268e2ae229c">current_stack</a>;</div><div class="line"><a name="l02306"></a><span class="lineno"> 2306</span>&#160;</div><div class="line"><a name="l02307"></a><span class="lineno"> 2307</span>&#160;   parser.<a class="code" href="classPrefix.html#a6161ea4f341e55bfdfa6c51e1d15e9e9">set_assign_state</a>(Assign_state(ass_state));</div><div class="line"><a name="l02308"></a><span class="lineno"> 2308</span>&#160;   parser.<a class="code" href="classPrefix.html#abbfeb353dfb63b9e7701625f7e8da2c0">action</a> = R_action(action);</div><div class="line"><a name="l02309"></a><span class="lineno"> 2309</span>&#160;   parser.<a class="code" href="classPrefix.html#a259b788120fe1caad9e50f1e7c532910">lookahead_high</a> = Function_PC(lah_high);</div><div class="line"><a name="l02310"></a><span class="lineno"> 2310</span>&#160;</div><div class="line"><a name="l02311"></a><span class="lineno"> 2311</span>&#160;   <span class="keywordflow">for</span> (;;)</div><div class="line"><a name="l02312"></a><span class="lineno"> 2312</span>&#160;       {</div><div class="line"><a name="l02313"></a><span class="lineno"> 2313</span>&#160;         <a class="code" href="structToken__loc.html">Token_loc</a> tl;</div><div class="line"><a name="l02314"></a><span class="lineno"> 2314</span>&#160;         <span class="keyword">const</span> <span class="keywordtype">bool</span> success = <a class="code" href="classXML__Loading__Archive.html#a619b73db295d1c88790d671a9ce7fef4">read_Token</a>(tl);</div><div class="line"><a name="l02315"></a><span class="lineno"> 2315</span>&#160;         <span class="keywordflow">if</span> (!success)   <span class="keywordflow">break</span>;</div><div class="line"><a name="l02316"></a><span class="lineno"> 2316</span>&#160;</div><div class="line"><a name="l02317"></a><span class="lineno"> 2317</span>&#160;         <span class="keywordflow">if</span> (parser.<a class="code" href="classPrefix.html#a07a35c8b69a8c9f685225e2a2586a2fd">size</a>() &lt; stack_size)   parser.<a class="code" href="classPrefix.html#a7820ecce4dcb55d04c80785c4143fe02">push</a>(tl);</div><div class="line"><a name="l02318"></a><span class="lineno"> 2318</span>&#160;         <span class="keywordflow">else</span>                              parser.<a class="code" href="classPrefix.html#a67b7ab1b67761fb4901127f89def43fc">saved_lookahead</a>.<a class="code" href="structToken__loc.html#ae816f5a75e37eabd65d1837068023865">copy</a>(tl, LOC);</div><div class="line"><a name="l02319"></a><span class="lineno"> 2319</span>&#160;       }</div><div class="line"><a name="l02320"></a><span class="lineno"> 2320</span>&#160;</div><div class="line"><a name="l02321"></a><span class="lineno"> 2321</span>&#160;   Log(LOG_archive)</div><div class="line"><a name="l02322"></a><span class="lineno"> 2322</span>&#160;      {</div><div class="line"><a name="l02323"></a><span class="lineno"> 2323</span>&#160;         CERR &lt;&lt; <span class="stringliteral">&quot;        &quot;</span>;</div><div class="line"><a name="l02324"></a><span class="lineno"> 2324</span>&#160;         parser.<a class="code" href="classPrefix.html#a810037eaa8e8141565a0aa3e8b5b3d53">print_stack</a>(CERR, LOC);</div><div class="line"><a name="l02325"></a><span class="lineno"> 2325</span>&#160;      }</div><div class="line"><a name="l02326"></a><span class="lineno"> 2326</span>&#160;</div><div class="line"><a name="l02327"></a><span class="lineno"> 2327</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;/Parser&quot;</span>, LOC);</div><div class="line"><a name="l02328"></a><span class="lineno"> 2328</span>&#160;}</div><div class="line"><a name="l02329"></a><span class="lineno"> 2329</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02330"></a><span class="lineno"> 2330</span>&#160;<span class="keywordtype">bool</span></div><div class="line"><a name="l02331"></a><span class="lineno"> 2331</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a619b73db295d1c88790d671a9ce7fef4">XML_Loading_Archive::read_Token</a>(<a class="code" href="structToken__loc.html">Token_loc</a> &amp; tloc)</div><div class="line"><a name="l02332"></a><span class="lineno"> 2332</span>&#160;{</div><div class="line"><a name="l02333"></a><span class="lineno"> 2333</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">next_tag</a>(LOC);</div><div class="line"><a name="l02334"></a><span class="lineno"> 2334</span>&#160;   <span class="keywordflow">if</span> (<a class="code" href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">is_tag</a>(<span class="stringliteral">&quot;/Parser&quot;</span>))   <span class="keywordflow">return</span> <span class="keyword">false</span>;</div><div class="line"><a name="l02335"></a><span class="lineno"> 2335</span>&#160;   <a class="code" href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">expect_tag</a>(<span class="stringliteral">&quot;Token&quot;</span>, LOC);</div><div class="line"><a name="l02336"></a><span class="lineno"> 2336</span>&#160;</div><div class="line"><a name="l02337"></a><span class="lineno"> 2337</span>&#160;   tloc.<a class="code" href="structToken__loc.html#a511eae32c6a6c064243c8c6f0ac6dc54">pc</a>  = Function_PC(<a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;pc&quot;</span>, <span class="keyword">false</span>, 10));</div><div class="line"><a name="l02338"></a><span class="lineno"> 2338</span>&#160;</div><div class="line"><a name="l02339"></a><span class="lineno"> 2339</span>&#160;<span class="keyword">const</span> TokenTag tag = TokenTag(<a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;tag&quot;</span>, <span class="keyword">false</span>, 16));</div><div class="line"><a name="l02340"></a><span class="lineno"> 2340</span>&#160;</div><div class="line"><a name="l02341"></a><span class="lineno"> 2341</span>&#160;   <span class="keywordflow">switch</span>(tag &amp; TV_MASK)   <span class="comment">// cannot call get_ValueType() yet</span></div><div class="line"><a name="l02342"></a><span class="lineno"> 2342</span>&#160;      {</div><div class="line"><a name="l02343"></a><span class="lineno"> 2343</span>&#160;        <span class="keywordflow">case</span> TV_NONE: </div><div class="line"><a name="l02344"></a><span class="lineno"> 2344</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag);</div><div class="line"><a name="l02345"></a><span class="lineno"> 2345</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02346"></a><span class="lineno"> 2346</span>&#160;</div><div class="line"><a name="l02347"></a><span class="lineno"> 2347</span>&#160;        <span class="keywordflow">case</span> TV_CHAR:</div><div class="line"><a name="l02348"></a><span class="lineno"> 2348</span>&#160;             {</div><div class="line"><a name="l02349"></a><span class="lineno"> 2349</span>&#160;               <span class="keyword">const</span> Unicode uni = Unicode(<a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;char&quot;</span>, <span class="keyword">false</span>, 10));</div><div class="line"><a name="l02350"></a><span class="lineno"> 2350</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, uni);</div><div class="line"><a name="l02351"></a><span class="lineno"> 2351</span>&#160;             }</div><div class="line"><a name="l02352"></a><span class="lineno"> 2352</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02353"></a><span class="lineno"> 2353</span>&#160;</div><div class="line"><a name="l02354"></a><span class="lineno"> 2354</span>&#160;        <span class="keywordflow">case</span> TV_INT:   </div><div class="line"><a name="l02355"></a><span class="lineno"> 2355</span>&#160;             {</div><div class="line"><a name="l02356"></a><span class="lineno"> 2356</span>&#160;               <span class="keyword">const</span> int64_t ival = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;int&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02357"></a><span class="lineno"> 2357</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, ival);</div><div class="line"><a name="l02358"></a><span class="lineno"> 2358</span>&#160;             }</div><div class="line"><a name="l02359"></a><span class="lineno"> 2359</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02360"></a><span class="lineno"> 2360</span>&#160;</div><div class="line"><a name="l02361"></a><span class="lineno"> 2361</span>&#160;        <span class="keywordflow">case</span> TV_FLT:   </div><div class="line"><a name="l02362"></a><span class="lineno"> 2362</span>&#160;             {</div><div class="line"><a name="l02363"></a><span class="lineno"> 2363</span>&#160;               <span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> val = <a class="code" href="classXML__Loading__Archive.html#a1acad23f43b2ceb1287f378c3e001d33">find_float_attr</a>(<span class="stringliteral">&quot;float&quot;</span>);</div><div class="line"><a name="l02364"></a><span class="lineno"> 2364</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, val);</div><div class="line"><a name="l02365"></a><span class="lineno"> 2365</span>&#160;             }</div><div class="line"><a name="l02366"></a><span class="lineno"> 2366</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02367"></a><span class="lineno"> 2367</span>&#160;</div><div class="line"><a name="l02368"></a><span class="lineno"> 2368</span>&#160;        <span class="keywordflow">case</span> TV_CPX:</div><div class="line"><a name="l02369"></a><span class="lineno"> 2369</span>&#160;             {</div><div class="line"><a name="l02370"></a><span class="lineno"> 2370</span>&#160;               <span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> real = <a class="code" href="classXML__Loading__Archive.html#a1acad23f43b2ceb1287f378c3e001d33">find_float_attr</a>(<span class="stringliteral">&quot;real&quot;</span>);</div><div class="line"><a name="l02371"></a><span class="lineno"> 2371</span>&#160;               <span class="keyword">const</span> <a class="code" href="classAPL__Float.html">APL_Float</a> imag = <a class="code" href="classXML__Loading__Archive.html#a1acad23f43b2ceb1287f378c3e001d33">find_float_attr</a>(<span class="stringliteral">&quot;imag&quot;</span>);</div><div class="line"><a name="l02372"></a><span class="lineno"> 2372</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, real, imag);</div><div class="line"><a name="l02373"></a><span class="lineno"> 2373</span>&#160;             }</div><div class="line"><a name="l02374"></a><span class="lineno"> 2374</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02375"></a><span class="lineno"> 2375</span>&#160;</div><div class="line"><a name="l02376"></a><span class="lineno"> 2376</span>&#160;        <span class="keywordflow">case</span> TV_SYM:   </div><div class="line"><a name="l02377"></a><span class="lineno"> 2377</span>&#160;             {</div><div class="line"><a name="l02378"></a><span class="lineno"> 2378</span>&#160;               <span class="keyword">const</span> UTF8 * sym_name = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;sym&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02379"></a><span class="lineno"> 2379</span>&#160;               <span class="keyword">const</span> UTF8 * end = sym_name;</div><div class="line"><a name="l02380"></a><span class="lineno"> 2380</span>&#160;               <span class="keywordflow">while</span> (*end != <span class="charliteral">&#39;&quot;&#39;</span>)   ++end;</div><div class="line"><a name="l02381"></a><span class="lineno"> 2381</span>&#160;               <a class="code" href="classUTF8__string.html">UTF8_string</a> name_UTF(sym_name, end - sym_name);</div><div class="line"><a name="l02382"></a><span class="lineno"> 2382</span>&#160;               <a class="code" href="classUCS__string.html">UCS_string</a> name_UCS(name_UTF);</div><div class="line"><a name="l02383"></a><span class="lineno"> 2383</span>&#160;</div><div class="line"><a name="l02384"></a><span class="lineno"> 2384</span>&#160;               <a class="code" href="classSymbol.html">Symbol</a> * symbol = <a class="code" href="classAvec.html#a88cc8af75e4a2c4d8a1d382637ca07b4">Avec::is_quad</a>(name_UCS[0])</div><div class="line"><a name="l02385"></a><span class="lineno"> 2385</span>&#160;                               ? <a class="code" href="classWorkspace.html#ad59928bcb6527147b5c5ca3e34106fe3">Workspace::lookup_existing_symbol</a>(name_UCS)</div><div class="line"><a name="l02386"></a><span class="lineno"> 2386</span>&#160;                               : <a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(name_UCS);</div><div class="line"><a name="l02387"></a><span class="lineno"> 2387</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, symbol);</div><div class="line"><a name="l02388"></a><span class="lineno"> 2388</span>&#160;             }</div><div class="line"><a name="l02389"></a><span class="lineno"> 2389</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02390"></a><span class="lineno"> 2390</span>&#160;</div><div class="line"><a name="l02391"></a><span class="lineno"> 2391</span>&#160;        <span class="keywordflow">case</span> TV_LIN:   </div><div class="line"><a name="l02392"></a><span class="lineno"> 2392</span>&#160;             {</div><div class="line"><a name="l02393"></a><span class="lineno"> 2393</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">int</span> ival = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;line&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02394"></a><span class="lineno"> 2394</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, Function_Line(ival));</div><div class="line"><a name="l02395"></a><span class="lineno"> 2395</span>&#160;             }</div><div class="line"><a name="l02396"></a><span class="lineno"> 2396</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02397"></a><span class="lineno"> 2397</span>&#160;</div><div class="line"><a name="l02398"></a><span class="lineno"> 2398</span>&#160;        <span class="keywordflow">case</span> TV_VAL:   </div><div class="line"><a name="l02399"></a><span class="lineno"> 2399</span>&#160;             {</div><div class="line"><a name="l02400"></a><span class="lineno"> 2400</span>&#160;               <span class="keyword">const</span> <span class="keywordtype">int</span> vid = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(<span class="stringliteral">&quot;vid&quot;</span>, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02401"></a><span class="lineno"> 2401</span>&#160;               Assert(vid &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l02402"></a><span class="lineno"> 2402</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, <a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid]);</div><div class="line"><a name="l02403"></a><span class="lineno"> 2403</span>&#160;             }</div><div class="line"><a name="l02404"></a><span class="lineno"> 2404</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02405"></a><span class="lineno"> 2405</span>&#160;</div><div class="line"><a name="l02406"></a><span class="lineno"> 2406</span>&#160;        <span class="keywordflow">case</span> TV_INDEX: </div><div class="line"><a name="l02407"></a><span class="lineno"> 2407</span>&#160;             {</div><div class="line"><a name="l02408"></a><span class="lineno"> 2408</span>&#160;               <span class="keyword">const</span> UTF8 * vids = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(<span class="stringliteral">&quot;index&quot;</span>, <span class="keyword">false</span>);</div><div class="line"><a name="l02409"></a><span class="lineno"> 2409</span>&#160;               <a class="code" href="classIndexExpr.html">IndexExpr</a> &amp; idx = *<span class="keyword">new</span> <a class="code" href="classIndexExpr.html">IndexExpr</a>(ASS_none, LOC);</div><div class="line"><a name="l02410"></a><span class="lineno"> 2410</span>&#160;               <span class="keywordflow">while</span> (*vids != <span class="charliteral">&#39;&quot;&#39;</span>)</div><div class="line"><a name="l02411"></a><span class="lineno"> 2411</span>&#160;                  {</div><div class="line"><a name="l02412"></a><span class="lineno"> 2412</span>&#160;                    <span class="keywordflow">if</span> (*vids == <span class="charliteral">&#39;,&#39;</span>)   ++vids;</div><div class="line"><a name="l02413"></a><span class="lineno"> 2413</span>&#160;                    <span class="keywordflow">if</span> (*vids == <span class="charliteral">&#39;-&#39;</span>)   <span class="comment">// elided index</span></div><div class="line"><a name="l02414"></a><span class="lineno"> 2414</span>&#160;                       {</div><div class="line"><a name="l02415"></a><span class="lineno"> 2415</span>&#160;                         idx.<a class="code" href="classIndexExpr.html#a1bd33ce5378cb146d9bcfb2cf80c52c7">add</a>(<a class="code" href="classValue__P.html">Value_P</a>());</div><div class="line"><a name="l02416"></a><span class="lineno"> 2416</span>&#160;                       }</div><div class="line"><a name="l02417"></a><span class="lineno"> 2417</span>&#160;                    <span class="keywordflow">else</span>                <span class="comment">// value</span></div><div class="line"><a name="l02418"></a><span class="lineno"> 2418</span>&#160;                       {</div><div class="line"><a name="l02419"></a><span class="lineno"> 2419</span>&#160;                         <span class="keywordtype">char</span> * end = 0;</div><div class="line"><a name="l02420"></a><span class="lineno"> 2420</span>&#160;                         Assert1(*vids == <span class="charliteral">&#39;v&#39;</span>);   ++vids;</div><div class="line"><a name="l02421"></a><span class="lineno"> 2421</span>&#160;                         Assert1(*vids == <span class="charliteral">&#39;i&#39;</span>);   ++vids;</div><div class="line"><a name="l02422"></a><span class="lineno"> 2422</span>&#160;                         Assert1(*vids == <span class="charliteral">&#39;d&#39;</span>);   ++vids;</div><div class="line"><a name="l02423"></a><span class="lineno"> 2423</span>&#160;                         Assert1(*vids == <span class="charliteral">&#39;_&#39;</span>);   ++vids;</div><div class="line"><a name="l02424"></a><span class="lineno"> 2424</span>&#160;                         <span class="keyword">const</span> <span class="keywordtype">int</span> vid = strtoll(charP(vids), &amp;end, 10);</div><div class="line"><a name="l02425"></a><span class="lineno"> 2425</span>&#160;                         Assert(vid &lt; <span class="keywordtype">int</span>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>.size()));</div><div class="line"><a name="l02426"></a><span class="lineno"> 2426</span>&#160;                         idx.<a class="code" href="classIndexExpr.html#a1bd33ce5378cb146d9bcfb2cf80c52c7">add</a>(<a class="code" href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">values</a>[vid]);</div><div class="line"><a name="l02427"></a><span class="lineno"> 2427</span>&#160;                         vids = utf8P(end);</div><div class="line"><a name="l02428"></a><span class="lineno"> 2428</span>&#160;                       }</div><div class="line"><a name="l02429"></a><span class="lineno"> 2429</span>&#160;                  }</div><div class="line"><a name="l02430"></a><span class="lineno"> 2430</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, idx);</div><div class="line"><a name="l02431"></a><span class="lineno"> 2431</span>&#160;             }</div><div class="line"><a name="l02432"></a><span class="lineno"> 2432</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02433"></a><span class="lineno"> 2433</span>&#160;</div><div class="line"><a name="l02434"></a><span class="lineno"> 2434</span>&#160;        <span class="keywordflow">case</span> TV_FUN:</div><div class="line"><a name="l02435"></a><span class="lineno"> 2435</span>&#160;             {</div><div class="line"><a name="l02436"></a><span class="lineno"> 2436</span>&#160;               <a class="code" href="classFunction.html">Function</a> * fun = <a class="code" href="classXML__Loading__Archive.html#a2d6bd9ac2758a86eb86ff5f754d96ceb">read_Function_name</a>(<span class="stringliteral">&quot;ufun-name&quot;</span>,</div><div class="line"><a name="l02437"></a><span class="lineno"> 2437</span>&#160;                                                   <span class="stringliteral">&quot;symbol-level&quot;</span>,</div><div class="line"><a name="l02438"></a><span class="lineno"> 2438</span>&#160;                                                   <span class="stringliteral">&quot;fun-id&quot;</span>);</div><div class="line"><a name="l02439"></a><span class="lineno"> 2439</span>&#160;               Assert(fun);</div><div class="line"><a name="l02440"></a><span class="lineno"> 2440</span>&#160;               <span class="keyword">new</span> (&amp;tloc.<a class="code" href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">tok</a>) <a class="code" href="classToken.html">Token</a>(tag, fun);</div><div class="line"><a name="l02441"></a><span class="lineno"> 2441</span>&#160;             }</div><div class="line"><a name="l02442"></a><span class="lineno"> 2442</span>&#160;             <span class="keywordflow">break</span>;</div><div class="line"><a name="l02443"></a><span class="lineno"> 2443</span>&#160;</div><div class="line"><a name="l02444"></a><span class="lineno"> 2444</span>&#160;        <span class="keywordflow">default</span>: FIXME;</div><div class="line"><a name="l02445"></a><span class="lineno"> 2445</span>&#160;      }</div><div class="line"><a name="l02446"></a><span class="lineno"> 2446</span>&#160;</div><div class="line"><a name="l02447"></a><span class="lineno"> 2447</span>&#160;   <span class="keywordflow">return</span> <span class="keyword">true</span>;</div><div class="line"><a name="l02448"></a><span class="lineno"> 2448</span>&#160;}</div><div class="line"><a name="l02449"></a><span class="lineno"> 2449</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02450"></a><span class="lineno"> 2450</span>&#160;<a class="code" href="classFunction.html">Function</a> *</div><div class="line"><a name="l02451"></a><span class="lineno"> 2451</span>&#160;<a class="code" href="classXML__Loading__Archive.html#a2d6bd9ac2758a86eb86ff5f754d96ceb">XML_Loading_Archive::read_Function_name</a>(<span class="keyword">const</span> <span class="keywordtype">char</span> * name_attr,</div><div class="line"><a name="l02452"></a><span class="lineno"> 2452</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">char</span> * level_attr,</div><div class="line"><a name="l02453"></a><span class="lineno"> 2453</span>&#160;                                        <span class="keyword">const</span> <span class="keywordtype">char</span> * id_attr)</div><div class="line"><a name="l02454"></a><span class="lineno"> 2454</span>&#160;{</div><div class="line"><a name="l02455"></a><span class="lineno"> 2455</span>&#160;<span class="keyword">const</span> UTF8 * fun_name = <a class="code" href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">find_attr</a>(name_attr, <span class="keyword">true</span>);</div><div class="line"><a name="l02456"></a><span class="lineno"> 2456</span>&#160;</div><div class="line"><a name="l02457"></a><span class="lineno"> 2457</span>&#160;   <span class="keywordflow">if</span> (fun_name)   <span class="comment">// user defined function</span></div><div class="line"><a name="l02458"></a><span class="lineno"> 2458</span>&#160;      {</div><div class="line"><a name="l02459"></a><span class="lineno"> 2459</span>&#160;        <span class="keyword">const</span> <span class="keywordtype">int</span> level = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(level_attr, <span class="keyword">false</span>, 10);</div><div class="line"><a name="l02460"></a><span class="lineno"> 2460</span>&#160;        <span class="keyword">const</span> UTF8 * end = fun_name;</div><div class="line"><a name="l02461"></a><span class="lineno"> 2461</span>&#160;        <span class="keywordflow">while</span> (*end != <span class="charliteral">&#39;&quot;&#39;</span>)   ++end;</div><div class="line"><a name="l02462"></a><span class="lineno"> 2462</span>&#160;        <a class="code" href="classUTF8__string.html">UTF8_string</a> name_UTF(fun_name, end - fun_name);</div><div class="line"><a name="l02463"></a><span class="lineno"> 2463</span>&#160;        <a class="code" href="classUCS__string.html">UCS_string</a> name_UCS(name_UTF);</div><div class="line"><a name="l02464"></a><span class="lineno"> 2464</span>&#160;        <span class="keywordflow">if</span> (name_UCS == <a class="code" href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a>(ID_LAMBDA))</div><div class="line"><a name="l02465"></a><span class="lineno"> 2465</span>&#160;           {</div><div class="line"><a name="l02466"></a><span class="lineno"> 2466</span>&#160;             Assert(level == -1);</div><div class="line"><a name="l02467"></a><span class="lineno"> 2467</span>&#160;             <span class="keywordflow">return</span> <a class="code" href="classXML__Loading__Archive.html#add4673c6dc5cb2e75be26359693dd889">find_lambda</a>(name_UCS);</div><div class="line"><a name="l02468"></a><span class="lineno"> 2468</span>&#160;           }</div><div class="line"><a name="l02469"></a><span class="lineno"> 2469</span>&#160;</div><div class="line"><a name="l02470"></a><span class="lineno"> 2470</span>&#160;        <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a> &amp; symbol = *<a class="code" href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a>(name_UCS);</div><div class="line"><a name="l02471"></a><span class="lineno"> 2471</span>&#160;</div><div class="line"><a name="l02472"></a><span class="lineno"> 2472</span>&#160;        Assert(level &gt;= 0);</div><div class="line"><a name="l02473"></a><span class="lineno"> 2473</span>&#160;        Assert(level &lt; symbol.<a class="code" href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">value_stack_size</a>());</div><div class="line"><a name="l02474"></a><span class="lineno"> 2474</span>&#160;        <span class="keyword">const</span> <a class="code" href="classValueStackItem.html">ValueStackItem</a> &amp; vsi = symbol[level];</div><div class="line"><a name="l02475"></a><span class="lineno"> 2475</span>&#160;        Assert(vsi.name_class == NC_FUNCTION);</div><div class="line"><a name="l02476"></a><span class="lineno"> 2476</span>&#160;        <a class="code" href="classFunction.html">Function</a> * fun = vsi.sym_val.function;</div><div class="line"><a name="l02477"></a><span class="lineno"> 2477</span>&#160;        Assert(fun);</div><div class="line"><a name="l02478"></a><span class="lineno"> 2478</span>&#160;        <span class="keywordflow">return</span> fun;</div><div class="line"><a name="l02479"></a><span class="lineno"> 2479</span>&#160;      }</div><div class="line"><a name="l02480"></a><span class="lineno"> 2480</span>&#160;</div><div class="line"><a name="l02481"></a><span class="lineno"> 2481</span>&#160;<span class="keyword">const</span> <span class="keywordtype">int</span> fun_id = <a class="code" href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">find_int_attr</a>(id_attr, <span class="keyword">true</span>, 16);</div><div class="line"><a name="l02482"></a><span class="lineno"> 2482</span>&#160;   <span class="keywordflow">if</span> (fun_id != -1)</div><div class="line"><a name="l02483"></a><span class="lineno"> 2483</span>&#160;      {</div><div class="line"><a name="l02484"></a><span class="lineno"> 2484</span>&#160;        <a class="code" href="classFunction.html">Function</a> * sysfun = <a class="code" href="classID.html#a3241389cbeefaf59830ba5f75cf56378">ID::get_system_function</a>(Id(fun_id));</div><div class="line"><a name="l02485"></a><span class="lineno"> 2485</span>&#160;        Assert(sysfun);</div><div class="line"><a name="l02486"></a><span class="lineno"> 2486</span>&#160;        <span class="keywordflow">return</span> sysfun;</div><div class="line"><a name="l02487"></a><span class="lineno"> 2487</span>&#160;      }</div><div class="line"><a name="l02488"></a><span class="lineno"> 2488</span>&#160;</div><div class="line"><a name="l02489"></a><span class="lineno"> 2489</span>&#160;   <span class="comment">// not found. This can happen when the function is optional.</span></div><div class="line"><a name="l02490"></a><span class="lineno"> 2490</span>&#160;   <span class="comment">//</span></div><div class="line"><a name="l02491"></a><span class="lineno"> 2491</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02492"></a><span class="lineno"> 2492</span>&#160;}</div><div class="line"><a name="l02493"></a><span class="lineno"> 2493</span>&#160;<span class="comment">//-----------------------------------------------------------------------------</span></div><div class="line"><a name="l02494"></a><span class="lineno"> 2494</span>&#160;<a class="code" href="classFunction.html">Function</a> *</div><div class="line"><a name="l02495"></a><span class="lineno"> 2495</span>&#160;<a class="code" href="classXML__Loading__Archive.html#add4673c6dc5cb2e75be26359693dd889">XML_Loading_Archive::find_lambda</a>(<span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; lambda)</div><div class="line"><a name="l02496"></a><span class="lineno"> 2496</span>&#160;{</div><div class="line"><a name="l02497"></a><span class="lineno"> 2497</span>&#160;<span class="keyword">const</span> <a class="code" href="classStateIndicator.html">StateIndicator</a> &amp; si = *<a class="code" href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a>();</div><div class="line"><a name="l02498"></a><span class="lineno"> 2498</span>&#160;<span class="keyword">const</span> <a class="code" href="classExecutable.html">Executable</a> &amp; exec = *si.<a class="code" href="classStateIndicator.html#a8923e217fa9bf331dd84cc15487dd177">get_executable</a>();</div><div class="line"><a name="l02499"></a><span class="lineno"> 2499</span>&#160;<span class="keyword">const</span> <a class="code" href="classToken__string.html">Token_string</a> &amp; body = exec.<a class="code" href="classExecutable.html#a5085ae774705082dc077ed81863a8469">get_body</a>();</div><div class="line"><a name="l02500"></a><span class="lineno"> 2500</span>&#160;</div><div class="line"><a name="l02501"></a><span class="lineno"> 2501</span>&#160;   loop(b, body.size())</div><div class="line"><a name="l02502"></a><span class="lineno"> 2502</span>&#160;      {</div><div class="line"><a name="l02503"></a><span class="lineno"> 2503</span>&#160;        <span class="keyword">const</span> <a class="code" href="classToken.html">Token</a> &amp; tok = body[b];</div><div class="line"><a name="l02504"></a><span class="lineno"> 2504</span>&#160;        <span class="keywordflow">if</span> (tok.<a class="code" href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">get_ValueType</a>() == TV_SYM)</div><div class="line"><a name="l02505"></a><span class="lineno"> 2505</span>&#160;           {</div><div class="line"><a name="l02506"></a><span class="lineno"> 2506</span>&#160;             <span class="keyword">const</span> <a class="code" href="classSymbol.html">Symbol</a> * sym = tok.<a class="code" href="classToken.html#aa92af5604449cd8c22b35297f07d5b9d">get_sym_ptr</a>();</div><div class="line"><a name="l02507"></a><span class="lineno"> 2507</span>&#160;             Assert(sym);</div><div class="line"><a name="l02508"></a><span class="lineno"> 2508</span>&#160;             loop(v, sym-&gt;<a class="code" href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">value_stack_size</a>())</div><div class="line"><a name="l02509"></a><span class="lineno"> 2509</span>&#160;                {</div><div class="line"><a name="l02510"></a><span class="lineno"> 2510</span>&#160;                  <span class="keyword">const</span> <a class="code" href="classValueStackItem.html">ValueStackItem</a> &amp; vs = (*sym)[v];</div><div class="line"><a name="l02511"></a><span class="lineno"> 2511</span>&#160;                  <span class="keywordflow">if</span> (vs.<a class="code" href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">name_class</a> == NC_FUNCTION ||</div><div class="line"><a name="l02512"></a><span class="lineno"> 2512</span>&#160;                      vs.<a class="code" href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">name_class</a> == NC_OPERATOR)</div><div class="line"><a name="l02513"></a><span class="lineno"> 2513</span>&#160;                     {</div><div class="line"><a name="l02514"></a><span class="lineno"> 2514</span>&#160;                       <span class="keywordflow">if</span> (vs.<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#af30375052e9fc2151e49a19a63a43bf4">function</a>-&gt;<a class="code" href="classNamedObject.html#adf8b778a154d1d6e35c7d8a169aaaeb5">get_name</a>() == lambda)</div><div class="line"><a name="l02515"></a><span class="lineno"> 2515</span>&#160;                          {</div><div class="line"><a name="l02516"></a><span class="lineno"> 2516</span>&#160;                            <span class="keywordflow">return</span> vs.<a class="code" href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">sym_val</a>.<a class="code" href="unionValueStackItem_1_1__sym__val.html#af30375052e9fc2151e49a19a63a43bf4">function</a>;</div><div class="line"><a name="l02517"></a><span class="lineno"> 2517</span>&#160;                          }</div><div class="line"><a name="l02518"></a><span class="lineno"> 2518</span>&#160;                     }</div><div class="line"><a name="l02519"></a><span class="lineno"> 2519</span>&#160;                }</div><div class="line"><a name="l02520"></a><span class="lineno"> 2520</span>&#160;             <span class="keywordflow">continue</span>;   <span class="comment">// not found</span></div><div class="line"><a name="l02521"></a><span class="lineno"> 2521</span>&#160;           }</div><div class="line"><a name="l02522"></a><span class="lineno"> 2522</span>&#160;        <span class="keywordflow">else</span> <span class="keywordflow">if</span> (tok.<a class="code" href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">get_ValueType</a>() != TV_FUN)   <span class="keywordflow">continue</span>;</div><div class="line"><a name="l02523"></a><span class="lineno"> 2523</span>&#160;</div><div class="line"><a name="l02524"></a><span class="lineno"> 2524</span>&#160;        <a class="code" href="classFunction.html">Function</a> * fun = tok.<a class="code" href="classToken.html#af613f4df5fa00a0c8fa4de162284171c">get_function</a>();</div><div class="line"><a name="l02525"></a><span class="lineno"> 2525</span>&#160;        Assert1(fun);</div><div class="line"><a name="l02526"></a><span class="lineno"> 2526</span>&#160;        <span class="keyword">const</span> <a class="code" href="classUserFunction.html">UserFunction</a> * ufun = fun-&gt;<a class="code" href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">get_ufun1</a>();</div><div class="line"><a name="l02527"></a><span class="lineno"> 2527</span>&#160;        <span class="keywordflow">if</span> (!ufun)   <span class="keywordflow">continue</span>;   <span class="comment">// not a user defined function</span></div><div class="line"><a name="l02528"></a><span class="lineno"> 2528</span>&#160;</div><div class="line"><a name="l02529"></a><span class="lineno"> 2529</span>&#160;        <span class="keyword">const</span> <a class="code" href="classUCS__string.html">UCS_string</a> &amp; fname = ufun-&gt;<a class="code" href="classUserFunction.html#a59a4ca14c199edd678c1f10ba95e2f43">get_name</a>();</div><div class="line"><a name="l02530"></a><span class="lineno"> 2530</span>&#160;        <span class="keywordflow">if</span> (fname == lambda)   <span class="keywordflow">return</span> fun;</div><div class="line"><a name="l02531"></a><span class="lineno"> 2531</span>&#160;      }</div><div class="line"><a name="l02532"></a><span class="lineno"> 2532</span>&#160;</div><div class="line"><a name="l02533"></a><span class="lineno"> 2533</span>&#160;   CERR &lt;&lt; <span class="stringliteral">&quot;find_lambda() failed for &quot;</span> &lt;&lt; lambda</div><div class="line"><a name="l02534"></a><span class="lineno"> 2534</span>&#160;        &lt;&lt; <span class="stringliteral">&quot; at )SI level=&quot;</span> &lt;&lt; si.<a class="code" href="classStateIndicator.html#aa60ca9df0350c7b2e4c0825f061f300e">get_level</a>() &lt;&lt; endl;</div><div class="line"><a name="l02535"></a><span class="lineno"> 2535</span>&#160;   <span class="keywordflow">return</span> 0;</div><div class="line"><a name="l02536"></a><span class="lineno"> 2536</span>&#160;}</div><div class="line"><a name="l02537"></a><span class="lineno"> 2537</span>&#160;<span class="comment">//=============================================================================</span></div><div class="line"><a name="l02538"></a><span class="lineno"> 2538</span>&#160;</div><div class="ttc" id="classComplexCell_html"><div class="ttname"><a href="classComplexCell.html">ComplexCell</a></div><div class="ttdoc">A celkl containing one complex numbver. </div><div class="ttdef"><b>Definition:</b> <a href="ComplexCell_8hh_source.html#l00034">ComplexCell.hh:34</a></div></div>
<div class="ttc" id="classWorkspace_html_a016ae4cac389b19f735b3c70a17cc508"><div class="ttname"><a href="classWorkspace.html#a016ae4cac389b19f735b3c70a17cc508">Workspace::set_WS_name</a></div><div class="ttdeci">static void set_WS_name(const UCS_string &amp;new_name)</div><div class="ttdoc">set the name of the current workspace. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00170">Workspace.hh:170</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a40ab403b1e7dd05196c9b36c8678a140"><div class="ttname"><a href="classXML__Saving__Archive.html#a40ab403b1e7dd05196c9b36c8678a140">XML_Saving_Archive::save_Function</a></div><div class="ttdeci">void save_Function(const Function &amp;fun)</div><div class="ttdoc">write user-defined function fun </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00274">Archive.cc:274</a></div></div>
<div class="ttc" id="classShape_html_aeb018b67601d3f1c4bea3d2c2b877b7e"><div class="ttname"><a href="classShape.html#aeb018b67601d3f1c4bea3d2c2b877b7e">Shape::add_shape_item</a></div><div class="ttdeci">void add_shape_item(ShapeItem len)</div><div class="ttdoc">add a dimension of length len at the end </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8hh_source.html#l00157">Shape.hh:157</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a619b73db295d1c88790d671a9ce7fef4"><div class="ttname"><a href="classXML__Loading__Archive.html#a619b73db295d1c88790d671a9ce7fef4">XML_Loading_Archive::read_Token</a></div><div class="ttdeci">bool read_Token(Token_loc &amp;tloc)</div><div class="ttdoc">read a token </div></div>
<div class="ttc" id="classWorkspace_html_a057e0d77702810d071560c7b72c2f8d6"><div class="ttname"><a href="classWorkspace.html#a057e0d77702810d071560c7b72c2f8d6">Workspace::SI_top</a></div><div class="ttdeci">static StateIndicator * SI_top()</div><div class="ttdoc">the top of the SI stack (the SI pushed last) </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00117">Workspace.hh:117</a></div></div>
<div class="ttc" id="classPrefix_html_a810037eaa8e8141565a0aa3e8b5b3d53"><div class="ttname"><a href="classPrefix.html#a810037eaa8e8141565a0aa3e8b5b3d53">Prefix::print_stack</a></div><div class="ttdeci">void print_stack(ostream &amp;out, const char *loc) const</div><div class="ttdoc">print the current stack </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8cc_source.html#l00264">Prefix.cc:264</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a2d6bd9ac2758a86eb86ff5f754d96ceb"><div class="ttname"><a href="classXML__Loading__Archive.html#a2d6bd9ac2758a86eb86ff5f754d96ceb">XML_Loading_Archive::read_Function_name</a></div><div class="ttdeci">Function * read_Function_name(const char *ufun_name, const char *si_level, const char *sysfun_id)</div><div class="ttdoc">read a system function with attribute id_prefix-id or a user defined functions with attributes &amp;#39;ufun_...</div></div>
<div class="ttc" id="classXML__Loading__Archive_html_adfacb8b8819a144ee0a4657f19b6ec50"><div class="ttname"><a href="classXML__Loading__Archive.html#adfacb8b8819a144ee0a4657f19b6ec50">XML_Loading_Archive::data</a></div><div class="ttdeci">const UTF8 * data</div><div class="ttdoc">the next char </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00365">Archive.hh:365</a></div></div>
<div class="ttc" id="classWorkspace_html_acfbfb5e8411b77e43b090b4c27d1263f"><div class="ttname"><a href="classWorkspace.html#acfbfb5e8411b77e43b090b4c27d1263f">Workspace::get_v_OMEGA</a></div><div class="ttdeci">static OMEGA &amp; get_v_OMEGA()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00051">Workspace.hh:51</a></div></div>
<div class="ttc" id="classExecutable_html_a420233b14fb8b368f6205540bd290cb9"><div class="ttname"><a href="classExecutable.html#a420233b14fb8b368f6205540bd290cb9">Executable::get_ufun</a></div><div class="ttdeci">virtual const UserFunction * get_ufun() const</div><div class="ttdoc">return a UserFunction * (if this is one) or else 0. </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00074">Executable.hh:74</a></div></div>
<div class="ttc" id="classValue_html_a0cc27364712e6ae2195b15ec54f516a2"><div class="ttname"><a href="classValue.html#a0cc27364712e6ae2195b15ec54f516a2">Value::get_offset</a></div><div class="ttdeci">ShapeItem get_offset(const Cell *cell) const</div><div class="ttdoc">return the position of cell in the ravel of this value. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00203">Value.hh:203</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ac4cdadb93d62fcd862579b84d3556804"><div class="ttname"><a href="classXML__Loading__Archive.html#ac4cdadb93d62fcd862579b84d3556804">XML_Loading_Archive::read_UCS</a></div><div class="ttdeci">UCS_string read_UCS()</div><div class="ttdoc">read an UCS string </div></div>
<div class="ttc" id="classWorkspace_html_a3192783e589c4ba7b79e3b85c1593ca4"><div class="ttname"><a href="classWorkspace.html#a3192783e589c4ba7b79e3b85c1593ca4">Workspace::get_v_LAMBDA</a></div><div class="ttdeci">static LAMBDA &amp; get_v_LAMBDA()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00049">Workspace.hh:49</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a6fedb7030e4a251354c6d5cc6c9261ab"><div class="ttname"><a href="classXML__Loading__Archive.html#a6fedb7030e4a251354c6d5cc6c9261ab">XML_Loading_Archive::read_Label</a></div><div class="ttdeci">void read_Label(int d, Symbol &amp;symbol)</div><div class="ttdoc">read next Label element </div></div>
<div class="ttc" id="classFunction_html"><div class="ttname"><a href="classFunction.html">Function</a></div><div class="ttdoc">Base class for all APL functions and operators (system or defined) </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00048">Function.hh:48</a></div></div>
<div class="ttc" id="classCell_html"><div class="ttname"><a href="classCell.html">Cell</a></div><div class="ttdoc">The base class for all Cells. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00054">Cell.hh:54</a></div></div>
<div class="ttc" id="classToken_html_a74ebddaf8dce2b11c59cddfb61594816"><div class="ttname"><a href="classToken.html#a74ebddaf8dce2b11c59cddfb61594816">Token::get_cpx_imag</a></div><div class="ttdeci">APL_Float get_cpx_imag() const</div><div class="ttdoc">return the complex imag value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00183">Token.hh:183</a></div></div>
<div class="ttc" id="classUCS__string_html_a3b92321d846e064514c29486acdee4e6"><div class="ttname"><a href="classUCS__string.html#a3b92321d846e064514c29486acdee4e6">UCS_string::size</a></div><div class="ttdeci">ShapeItem size() const</div><div class="ttdoc">overload basic_string::size() so that it returns a signed length </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00330">UCS_string.hh:330</a></div></div>
<div class="ttc" id="classExecutable_html_acc35b347a5624e399f271c27778a2dbb"><div class="ttname"><a href="classExecutable.html#acc35b347a5624e399f271c27778a2dbb">Executable::get_line</a></div><div class="ttdeci">virtual Function_Line get_line(Function_PC pc) const</div><div class="ttdoc">get the line number for pc </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00086">Executable.hh:86</a></div></div>
<div class="ttc" id="classToken_html_a9721c23968d7272edd1abae91ba77193"><div class="ttname"><a href="classToken.html#a9721c23968d7272edd1abae91ba77193">Token::get_int_val</a></div><div class="ttdeci">int64_t get_int_val() const</div><div class="ttdoc">return the integer value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00153">Token.hh:153</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a475b4572fea93849b155009d78afbd66"><div class="ttname"><a href="classXML__Loading__Archive.html#a475b4572fea93849b155009d78afbd66">XML_Loading_Archive::read_Value</a></div><div class="ttdeci">void read_Value()</div><div class="ttdoc">read next Value element, return true on success </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01455">Archive.cc:1455</a></div></div>
<div class="ttc" id="classWorkspace_html_a85160b618521a453657a892f454323d4"><div class="ttname"><a href="classWorkspace.html#a85160b618521a453657a892f454323d4">Workspace::unmark_all_values</a></div><div class="ttdeci">static void unmark_all_values()</div><div class="ttdoc">clear the marked flag in all values known in this workspace </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00452">Workspace.cc:452</a></div></div>
<div class="ttc" id="classUCS__string_html"><div class="ttname"><a href="classUCS__string.html">UCS_string</a></div><div class="ttdoc">A string of Unicode characters (32-bit) </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00047">UCS_string.hh:47</a></div></div>
<div class="ttc" id="classValue_html_a89120a742c078918d1a5d84ec742e69c"><div class="ttname"><a href="classValue.html#a89120a742c078918d1a5d84ec742e69c">Value::get_ravel</a></div><div class="ttdeci">Cell &amp; get_ravel(ShapeItem idx)</div><div class="ttdoc">return the idx&amp;#39;th element of the ravel. </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00254">Value.hh:254</a></div></div>
<div class="ttc" id="classWorkspace_html_a915b42f50823c4c469c1b52ad9e1f529"><div class="ttname"><a href="classWorkspace.html#a915b42f50823c4c469c1b52ad9e1f529">Workspace::get_symbol_table</a></div><div class="ttdeci">static const SymbolTable &amp; get_symbol_table()</div><div class="ttdoc">return the symbol table of the current workspace. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00158">Workspace.hh:158</a></div></div>
<div class="ttc" id="classCell_html_ab940e21b6212fbd1bfa8de9f99d090ea"><div class="ttname"><a href="classCell.html#ab940e21b6212fbd1bfa8de9f99d090ea">Cell::get_char_value</a></div><div class="ttdeci">virtual Unicode get_char_value() const</div><div class="ttdoc">Return the character value of a cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00108">Cell.hh:108</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a7c5dbf639d8ffda3ed1478a7004ba357"><div class="ttname"><a href="classXML__Saving__Archive.html#a7c5dbf639d8ffda3ed1478a7004ba357">XML_Saving_Archive::save_UCS</a></div><div class="ttdeci">void save_UCS(const UCS_string &amp;str)</div><div class="ttdoc">write UCS_string str </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00136">Archive.cc:136</a></div></div>
<div class="ttc" id="classValue_html_ae90fe6c7d36e56f4768abbc0628c7b06"><div class="ttname"><a href="classValue.html#ae90fe6c7d36e56f4768abbc0628c7b06">Value::mark_all_dynamic_values</a></div><div class="ttdeci">static void mark_all_dynamic_values()</div><div class="ttdoc">mark all values, except static values </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cc_source.html#l00560">Value.cc:560</a></div></div>
<div class="ttc" id="classToken_html_a205e0b499e06999ff91c272ff28c9013"><div class="ttname"><a href="classToken.html#a205e0b499e06999ff91c272ff28c9013">Token::get_apl_val</a></div><div class="ttdeci">Value_P get_apl_val() const</div><div class="ttdoc">return the Value_P value of this token. The token could be TOK_NO_VALUE; in that case VALUE_ERROR is ...</div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00204">Token.hh:204</a></div></div>
<div class="ttc" id="classToken__string_html"><div class="ttname"><a href="classToken__string.html">Token_string</a></div><div class="ttdoc">A sequence of Token. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00316">Token.hh:316</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_ad389ad3f93e77ff31be67eb2f5ebb9fd"><div class="ttname"><a href="classXML__Saving__Archive.html#ad389ad3f93e77ff31be67eb2f5ebb9fd">XML_Saving_Archive::save_shape</a></div><div class="ttdeci">XML_Saving_Archive &amp; save_shape(Vid vid)</div><div class="ttdoc">write Value v except its ravel </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00150">Archive.cc:150</a></div></div>
<div class="ttc" id="classCell_html_af8746e4049278c9a46f25e6ee0d71fcc"><div class="ttname"><a href="classCell.html#af8746e4049278c9a46f25e6ee0d71fcc">Cell::is_lval_cell</a></div><div class="ttdeci">virtual bool is_lval_cell() const</div><div class="ttdoc">Return true iff this cell is a pointer to a cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00205">Cell.hh:205</a></div></div>
<div class="ttc" id="classIndexExpr_html_a7cb8dc69ee2b77d786296d674f459f46"><div class="ttname"><a href="classIndexExpr.html#a7cb8dc69ee2b77d786296d674f459f46">IndexExpr::value_count</a></div><div class="ttdeci">uRank value_count() const</div><div class="ttdoc">return the number of values (= number of semicolons + 1) </div><div class="ttdef"><b>Definition:</b> <a href="IndexExpr_8hh_source.html#l00056">IndexExpr.hh:56</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a2900d8fb91f519a9f6e5072e5fd6e746"><div class="ttname"><a href="classXML__Loading__Archive.html#a2900d8fb91f519a9f6e5072e5fd6e746">XML_Loading_Archive::values</a></div><div class="ttdeci">std::vector&lt; Value_P &gt; values</div><div class="ttdoc">all values in the workspace </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00380">Archive.hh:380</a></div></div>
<div class="ttc" id="classFunction_html_adbd055c988c2284dc98bdfacea3268aa"><div class="ttname"><a href="classFunction.html#adbd055c988c2284dc98bdfacea3268aa">Function::get_ufun1</a></div><div class="ttdeci">virtual UserFunction * get_ufun1()</div><div class="ttdoc">return a pointer to this UserFunction (if it is one) </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00138">Function.hh:138</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ad2f1d88070976eab8a41f0fdcd1e0ec1"><div class="ttname"><a href="classXML__Loading__Archive.html#ad2f1d88070976eab8a41f0fdcd1e0ec1">XML_Loading_Archive::read_StateIndicator</a></div><div class="ttdeci">void read_StateIndicator()</div><div class="ttdoc">read next StateIndicator element </div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a2a4f7a3fff06dfd2351348bf26fc90a3"><div class="ttname"><a href="classXML__Loading__Archive.html#a2a4f7a3fff06dfd2351348bf26fc90a3">XML_Loading_Archive::read_SymbolTable</a></div><div class="ttdeci">void read_SymbolTable()</div><div class="ttdoc">read next Symbol element </div></div>
<div class="ttc" id="classPrefix_html_a7820ecce4dcb55d04c80785c4143fe02"><div class="ttname"><a href="classPrefix.html#a7820ecce4dcb55d04c80785c4143fe02">Prefix::push</a></div><div class="ttdeci">void push(const Token_loc &amp;tl)</div><div class="ttdoc">store one more token </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00186">Prefix.hh:186</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a02c56f13960c2355d285da61356e5dff"><div class="ttname"><a href="classXML__Loading__Archive.html#a02c56f13960c2355d285da61356e5dff">XML_Loading_Archive::have_allowed_objects</a></div><div class="ttdeci">bool have_allowed_objects</div><div class="ttdoc">true for selective copy (COPY with symbol names) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00398">Archive.hh:398</a></div></div>
<div class="ttc" id="classWorkspace_html_ad7fbbc3aa92594aa2af21f27d4297e39"><div class="ttname"><a href="classWorkspace.html#ad7fbbc3aa92594aa2af21f27d4297e39">Workspace::get_v_ALPHA_U</a></div><div class="ttdeci">static ALPHA_U &amp; get_v_ALPHA_U()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00053">Workspace.hh:53</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a051771a3e2340dc74c070d4c8b5a627a"><div class="ttname"><a href="classXML__Loading__Archive.html#a051771a3e2340dc74c070d4c8b5a627a">XML_Loading_Archive::protection</a></div><div class="ttdeci">bool protection</div><div class="ttdoc">true for )PCOPY, false for )COPY and )LOAD </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00386">Archive.hh:386</a></div></div>
<div class="ttc" id="classSymbolTable_html_a96e1d725bb82c9c25d33d444bfb1cb2d"><div class="ttname"><a href="classSymbolTable.html#a96e1d725bb82c9c25d33d444bfb1cb2d">SymbolTable::get_all_symbols</a></div><div class="ttdeci">std::vector&lt; const Symbol * &gt; get_all_symbols() const</div><div class="ttdoc">return all symbols (including erased symbols) </div><div class="ttdef"><b>Definition:</b> <a href="SymbolTable_8cc_source.html#l00436">SymbolTable.cc:436</a></div></div>
<div class="ttc" id="classExecuteList_html"><div class="ttname"><a href="classExecuteList.html">ExecuteList</a></div><div class="ttdoc">The token of an execute expression â&amp;#39;...&amp;#39;. </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00207">Executable.hh:207</a></div></div>
<div class="ttc" id="classCell_html_a87287b9b88b2ee6b92c11aadabe6d557"><div class="ttname"><a href="classCell.html#a87287b9b88b2ee6b92c11aadabe6d557">Cell::get_lval_value</a></div><div class="ttdeci">virtual Cell * get_lval_value() const</div><div class="ttdoc">Return the APL value of a cell (Asserts for non-lval cells) </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00129">Cell.hh:129</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a1019a371e3f70c855f8af07d42f49c7c"><div class="ttname"><a href="classXML__Saving__Archive.html#a1019a371e3f70c855f8af07d42f49c7c">XML_Saving_Archive::save_Symbol</a></div><div class="ttdeci">void save_Symbol(const Symbol &amp;sym)</div><div class="ttdoc">write Symbol sym </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00481">Archive.cc:481</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a44bf13ce1569bd63ad5de5e460ed3ace"><div class="ttname"><a href="classXML__Loading__Archive.html#a44bf13ce1569bd63ad5de5e460ed3ace">XML_Loading_Archive::skip_to_tag</a></div><div class="ttdeci">bool skip_to_tag(const char *tag)</div><div class="ttdoc">skip to tag tag, return EOF if end of file </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01076">Archive.cc:1076</a></div></div>
<div class="ttc" id="classStatementList_html_a20b0b6ca4bd952856e75bdecc7fc110a"><div class="ttname"><a href="classStatementList.html#a20b0b6ca4bd952856e75bdecc7fc110a">StatementList::fix</a></div><div class="ttdeci">static StatementList * fix(const UCS_string &amp;data, const char *loc)</div><div class="ttdoc">compute body token from text data </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8cc_source.html#l00926">Executable.cc:926</a></div></div>
<div class="ttc" id="classSymbolTable_html"><div class="ttname"><a href="classSymbolTable.html">SymbolTable</a></div><div class="ttdoc">The table containing all user defined symbols. </div><div class="ttdef"><b>Definition:</b> <a href="SymbolTable_8hh_source.html#l00129">SymbolTable.hh:129</a></div></div>
<div class="ttc" id="classSymbol_html_a0b44c13f715cdbc9f13d33a6b4e41317"><div class="ttname"><a href="classSymbol.html#a0b44c13f715cdbc9f13d33a6b4e41317">Symbol::push_function</a></div><div class="ttdeci">virtual void push_function(Function *function)</div><div class="ttdoc">push a function onto the stack of this Symbol </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00431">Symbol.cc:431</a></div></div>
<div class="ttc" id="classDynamicObject_html_a8898a428fcd929eb8ec256d98620a7ff"><div class="ttname"><a href="classDynamicObject.html#a8898a428fcd929eb8ec256d98620a7ff">DynamicObject::get_all_values</a></div><div class="ttdeci">static const DynamicObject * get_all_values()</div><div class="ttdoc">return a pointer to all allocated Values </div><div class="ttdef"><b>Definition:</b> <a href="DynamicObject_8hh_source.html#l00116">DynamicObject.hh:116</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a8e01c9a6f2d47255baf2ccafbb0a41f4"><div class="ttname"><a href="classXML__Loading__Archive.html#a8e01c9a6f2d47255baf2ccafbb0a41f4">XML_Loading_Archive::copying</a></div><div class="ttdeci">bool copying</div><div class="ttdoc">true for )COPY and )PCOPY, false for )LOAD </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00383">Archive.hh:383</a></div></div>
<div class="ttc" id="structToken__loc_html_ae816f5a75e37eabd65d1837068023865"><div class="ttname"><a href="structToken__loc.html#ae816f5a75e37eabd65d1837068023865">Token_loc::copy</a></div><div class="ttdeci">void copy(const Token_loc &amp;other, const char *loc)</div><div class="ttdoc">copy this Token_loc to other </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00367">Token.hh:367</a></div></div>
<div class="ttc" id="classPrefix_html_a07a35c8b69a8c9f685225e2a2586a2fd"><div class="ttname"><a href="classPrefix.html#a07a35c8b69a8c9f685225e2a2586a2fd">Prefix::size</a></div><div class="ttdeci">int size() const</div><div class="ttdoc">return the number of token currently in the FIFO </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00130">Prefix.hh:130</a></div></div>
<div class="ttc" id="classValueStackItem_html"><div class="ttname"><a href="classValueStackItem.html">ValueStackItem</a></div><div class="ttdoc">One entry in the value stack of a Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00041">Symbol.hh:41</a></div></div>
<div class="ttc" id="namespacestd_html"><div class="ttname"><a href="namespacestd.html">std</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ad200f5b98b9cf3e903ccf714a56a1d0f"><div class="ttname"><a href="classXML__Loading__Archive.html#ad200f5b98b9cf3e903ccf714a56a1d0f">XML_Loading_Archive::read_Ravel</a></div><div class="ttdeci">void read_Ravel()</div><div class="ttdoc">read next Ravel element </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01712">Archive.cc:1712</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a8b0a3a2f1f9c91af785edf994b4fa48d"><div class="ttname"><a href="classXML__Saving__Archive.html#a8b0a3a2f1f9c91af785edf994b4fa48d">XML_Saving_Archive::xml_allowed</a></div><div class="ttdeci">static bool xml_allowed(Unicode uni)</div><div class="ttdoc">return true if uni prints nicely and is allowed in XML &quot;...&quot; strings </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00063">Archive.cc:63</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ac33cf45160129fd2365367a778bfdd02"><div class="ttname"><a href="classXML__Loading__Archive.html#ac33cf45160129fd2365367a778bfdd02">XML_Loading_Archive::read_Shared_Variable</a></div><div class="ttdeci">void read_Shared_Variable(int d, Symbol &amp;symbol)</div><div class="ttdoc">read next Shared-Variable element </div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a2dce39a2eb0bb8bc55d0306606bb86d6"><div class="ttname"><a href="classXML__Loading__Archive.html#a2dce39a2eb0bb8bc55d0306606bb86d6">XML_Loading_Archive::reset</a></div><div class="ttdeci">void reset()</div><div class="ttdoc">reset archive to the start position </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01068">Archive.cc:1068</a></div></div>
<div class="ttc" id="classSymbol_html_a83e2d86a6fd77a7f6bd5bdaba17dfab4"><div class="ttname"><a href="classSymbol.html#a83e2d86a6fd77a7f6bd5bdaba17dfab4">Symbol::pop</a></div><div class="ttdeci">virtual void pop()</div><div class="ttdoc">Pop latest entry from the stack of this Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00364">Symbol.cc:364</a></div></div>
<div class="ttc" id="classExecuteList_html_a6f8688070be985996a46dad98ee3d2f9"><div class="ttname"><a href="classExecuteList.html#a6f8688070be985996a46dad98ee3d2f9">ExecuteList::fix</a></div><div class="ttdeci">static ExecuteList * fix(const UCS_string &amp;data, const char *loc)</div><div class="ttdoc">compute body token from text data </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8cc_source.html#l00869">Executable.cc:869</a></div></div>
<div class="ttc" id="classFloatCell_html"><div class="ttname"><a href="classFloatCell.html">FloatCell</a></div><div class="ttdoc">A Cell containing a single floating point (or rational) value. </div><div class="ttdef"><b>Definition:</b> <a href="FloatCell_8hh_source.html#l00039">FloatCell.hh:39</a></div></div>
<div class="ttc" id="classValue__P__Base_html_a704ff85f35cdb60648f59a48f0a15bdb"><div class="ttname"><a href="classValue__P__Base.html#a704ff85f35cdb60648f59a48f0a15bdb">Value_P_Base::getref</a></div><div class="ttdeci">const Value &amp; getref() const</div><div class="ttdoc">return a const reference of the Value </div><div class="ttdef"><b>Definition:</b> <a href="Value__P_8hh_source.html#l00084">Value_P.hh:84</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a28b4a906759f6035d41007056b0f4498"><div class="ttname"><a href="classXML__Loading__Archive.html#a28b4a906759f6035d41007056b0f4498">XML_Loading_Archive::read_Command</a></div><div class="ttdeci">void read_Command()</div><div class="ttdoc">read next Command element </div></div>
<div class="ttc" id="structToken__loc_html"><div class="ttname"><a href="structToken__loc.html">Token_loc</a></div><div class="ttdoc">A Token and its location information (position in a Token_string) </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00348">Token.hh:348</a></div></div>
<div class="ttc" id="classUserFunction_html_ac2cf5908480af0d1d0cd4cd6dccd5bd2"><div class="ttname"><a href="classUserFunction.html#ac2cf5908480af0d1d0cd4cd6dccd5bd2">UserFunction::get_macnum</a></div><div class="ttdeci">virtual int get_macnum() const</div><div class="ttdoc">return the macro number (if this function is one) or -1 </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8hh_source.html#l00051">UserFunction.hh:51</a></div></div>
<div class="ttc" id="classPrefix_html_a32e238464846f32c7954f72feb3a473b"><div class="ttname"><a href="classPrefix.html#a32e238464846f32c7954f72feb3a473b">Prefix::at</a></div><div class="ttdeci">Token_loc &amp; at(int idx)</div><div class="ttdoc">return the idx&amp;#39;th Token_loc (from put position) </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00289">Prefix.hh:289</a></div></div>
<div class="ttc" id="classExecutable_html_a02b3dd7f7dbb3c3e099e3ab553034baa"><div class="ttname"><a href="classExecutable.html#a02b3dd7f7dbb3c3e099e3ab553034baa">Executable::get_parse_mode</a></div><div class="ttdeci">ParseMode get_parse_mode() const</div><div class="ttdoc">the parse mode of this Executable </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00055">Executable.hh:55</a></div></div>
<div class="ttc" id="classUserFunction_html_a25e0645f3e9caa68e1b7a35ffed1bfeb"><div class="ttname"><a href="classUserFunction.html#a25e0645f3e9caa68e1b7a35ffed1bfeb">UserFunction::fix</a></div><div class="ttdeci">static UserFunction * fix(const UCS_string &amp;text, int &amp;err_line, bool keep_existing, const char *loc, const UTF8_string &amp;creator, bool tolerant)</div><div class="ttdoc">create a user defined function according to data of length len in workspace w. </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8cc_source.html#l01031">UserFunction.cc:1031</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_aeacc5a4f0951f36624045b6831ff09c2"><div class="ttname"><a href="classXML__Loading__Archive.html#aeacc5a4f0951f36624045b6831ff09c2">XML_Loading_Archive::parents</a></div><div class="ttdeci">std::vector&lt; int &gt; parents</div><div class="ttdoc">parents[vid] os the parent of vid, or -1 if vid is a top-level value </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00408">Archive.hh:408</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ac088635672e79a9c3f9079eff4046bd9"><div class="ttname"><a href="classXML__Loading__Archive.html#ac088635672e79a9c3f9079eff4046bd9">XML_Loading_Archive::file_is_complete</a></div><div class="ttdeci">bool file_is_complete</div><div class="ttdoc">true if file contains a &lt;\/Workspace&gt; tag at the end </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00414">Archive.hh:414</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a5c1f7b87ab7b4a1a2cfcf33513029e40"><div class="ttname"><a href="classXML__Saving__Archive.html#a5c1f7b87ab7b4a1a2cfcf33513029e40">XML_Saving_Archive::save_vstack_item</a></div><div class="ttdeci">void save_vstack_item(const ValueStackItem &amp;vsi)</div><div class="ttdoc">write ValueStackItem vsi </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00613">Archive.cc:613</a></div></div>
<div class="ttc" id="classCharCell_html"><div class="ttname"><a href="classCharCell.html">CharCell</a></div><div class="ttdoc">A Cell containing a single Unicode character. </div><div class="ttdef"><b>Definition:</b> <a href="CharCell_8hh_source.html#l00031">CharCell.hh:31</a></div></div>
<div class="ttc" id="classWorkspace_html_ada85ae535d16883c90ff907fac7a2b2c"><div class="ttname"><a href="classWorkspace.html#ada85ae535d16883c90ff907fac7a2b2c">Workspace::get_v_OMEGA_U</a></div><div class="ttdeci">static OMEGA_U &amp; get_v_OMEGA_U()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00054">Workspace.hh:54</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a161f686e1065cddaf30ab5c06f4a56a1"><div class="ttname"><a href="classXML__Saving__Archive.html#a161f686e1065cddaf30ab5c06f4a56a1">XML_Saving_Archive::find_vid</a></div><div class="ttdeci">Vid find_vid(const Value *val)</div><div class="ttdoc">return the index of val in values </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00101">Archive.cc:101</a></div></div>
<div class="ttc" id="classExecutable_html_a5085ae774705082dc077ed81863a8469"><div class="ttname"><a href="classExecutable.html#a5085ae774705082dc077ed81863a8469">Executable::get_body</a></div><div class="ttdeci">const Token_string &amp; get_body() const</div><div class="ttdoc">return the body of this executable </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00103">Executable.hh:103</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a26a97f07293abb0eb268c650c53aae8e"><div class="ttname"><a href="classXML__Loading__Archive.html#a26a97f07293abb0eb268c650c53aae8e">XML_Loading_Archive::read_chars</a></div><div class="ttdeci">void read_chars(UCS_string &amp;ucs, const UTF8 *&amp;first)</div><div class="ttdoc">read characters tagged with INI_PAD_U1 and INI_PAD_U2, until end of line </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01645">Archive.cc:1645</a></div></div>
<div class="ttc" id="classWorkspace_html_ad59928bcb6527147b5c5ca3e34106fe3"><div class="ttname"><a href="classWorkspace.html#ad59928bcb6527147b5c5ca3e34106fe3">Workspace::lookup_existing_symbol</a></div><div class="ttdeci">static Symbol * lookup_existing_symbol(const UCS_string &amp;symbol_name)</div><div class="ttdoc">lookup an existing symbol (user defined or âxx). </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00306">Workspace.cc:306</a></div></div>
<div class="ttc" id="classPrefix_html_a67b7ab1b67761fb4901127f89def43fc"><div class="ttname"><a href="classPrefix.html#a67b7ab1b67761fb4901127f89def43fc">Prefix::saved_lookahead</a></div><div class="ttdeci">Token_loc saved_lookahead</div><div class="ttdoc">the X token (leftmost token in MISC phrase, if any) </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00312">Prefix.hh:312</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a59a9b9839c3a2087ce5a350b3b9a9c06"><div class="ttname"><a href="classXML__Loading__Archive.html#a59a9b9839c3a2087ce5a350b3b9a9c06">XML_Loading_Archive::print_tag</a></div><div class="ttdeci">void print_tag(ostream &amp;out) const</div><div class="ttdoc">print current tag </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01154">Archive.cc:1154</a></div></div>
<div class="ttc" id="structCommand_1_1user__command_html_a029fa3ff3d4761a800781dc976ce9f46"><div class="ttname"><a href="structCommand_1_1user__command.html#a029fa3ff3d4761a800781dc976ce9f46">Command::user_command::apl_function</a></div><div class="ttdeci">UCS_string apl_function</div><div class="ttdoc">APL function implementing the command. </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00084">Command.hh:84</a></div></div>
<div class="ttc" id="classExecutable_html_a5f1a0c24eb29a98e47988c5ce370bded"><div class="ttname"><a href="classExecutable.html#a5f1a0c24eb29a98e47988c5ce370bded">Executable::increment_refcount</a></div><div class="ttdeci">void increment_refcount(const char *loc)</div><div class="ttdoc">increment the reference counter </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8cc_source.html#l00828">Executable.cc:828</a></div></div>
<div class="ttc" id="classValueStackItem_html_adf006d2f3cd365049f89a2f5479af6b5"><div class="ttname"><a href="classValueStackItem.html#adf006d2f3cd365049f89a2f5479af6b5">ValueStackItem::apl_val</a></div><div class="ttdeci">Value_P apl_val</div><div class="ttdoc">the (current) value of this symbol (if variable) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00083">Symbol.hh:83</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_add4673c6dc5cb2e75be26359693dd889"><div class="ttname"><a href="classXML__Loading__Archive.html#add4673c6dc5cb2e75be26359693dd889">XML_Loading_Archive::find_lambda</a></div><div class="ttdeci">Function * find_lambda(const UCS_string &amp;lambda)</div><div class="ttdoc">find a lambda in the current SI entry </div></div>
<div class="ttc" id="classStatementList_html"><div class="ttname"><a href="classStatementList.html">StatementList</a></div><div class="ttdoc">The token of an statement list cmd â cmd ... â cmd. </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00230">Executable.hh:230</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_ae0384623223c3d4e87ea98f2ec0adf5c"><div class="ttname"><a href="classXML__Saving__Archive.html#ae0384623223c3d4e87ea98f2ec0adf5c">XML_Saving_Archive::emit_cell</a></div><div class="ttdeci">void emit_cell(const Cell &amp;cell, int &amp;space)</div><div class="ttdoc">emit one ravel cell cell </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00196">Archive.cc:196</a></div></div>
<div class="ttc" id="classStateIndicator_html"><div class="ttname"><a href="classStateIndicator.html">StateIndicator</a></div><div class="ttdoc">One entry of the state indicator (SI) of the APL interpreter. </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00040">StateIndicator.hh:40</a></div></div>
<div class="ttc" id="unionValueStackItem_1_1__sym__val_html_af30375052e9fc2151e49a19a63a43bf4"><div class="ttname"><a href="unionValueStackItem_1_1__sym__val.html#af30375052e9fc2151e49a19a63a43bf4">ValueStackItem::_sym_val::function</a></div><div class="ttdeci">Function * function</div><div class="ttdoc">if Symbol is a function </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00074">Symbol.hh:74</a></div></div>
<div class="ttc" id="classWorkspace_html_a24d1064a95b346bac85d5b2423c7148c"><div class="ttname"><a href="classWorkspace.html#a24d1064a95b346bac85d5b2423c7148c">Workspace::get_user_commands</a></div><div class="ttdeci">static vector&lt; Command::user_command &gt; &amp; get_user_commands()</div><div class="ttdoc">Return all user-defined commands. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00174">Workspace.hh:174</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a8bd29aeafec52ab250cc219be69c7560"><div class="ttname"><a href="classXML__Loading__Archive.html#a8bd29aeafec52ab250cc219be69c7560">XML_Loading_Archive::where</a></div><div class="ttdeci">void where(ostream &amp;out)</div><div class="ttdoc">show some characters starting at the current position </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01099">Archive.cc:1099</a></div></div>
<div class="ttc" id="classNativeFunction_html_a07ab61a74e4a64f38424a2bbd0c6b38b"><div class="ttname"><a href="classNativeFunction.html#a07ab61a74e4a64f38424a2bbd0c6b38b">NativeFunction::fix</a></div><div class="ttdeci">static NativeFunction * fix(const UCS_string &amp;so_name, const UCS_string &amp;apl_name)</div><div class="ttdoc">âFX a native funtion from a shared library (dlopen) handle </div><div class="ttdef"><b>Definition:</b> <a href="NativeFunction_8cc_source.html#l00357">NativeFunction.cc:357</a></div></div>
<div class="ttc" id="classStateIndicator_html_a2d4915de712ba06900582f0918f053a8"><div class="ttname"><a href="classStateIndicator.html#a2d4915de712ba06900582f0918f053a8">StateIndicator::get_parent</a></div><div class="ttdeci">StateIndicator * get_parent() const</div><div class="ttdoc">return the SI that has called this one </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00185">StateIndicator.hh:185</a></div></div>
<div class="ttc" id="classIndexExpr_html_a1bd33ce5378cb146d9bcfb2cf80c52c7"><div class="ttname"><a href="classIndexExpr.html#a1bd33ce5378cb146d9bcfb2cf80c52c7">IndexExpr::add</a></div><div class="ttdeci">void add(Value_P val)</div><div class="ttdoc">append a value. </div><div class="ttdef"><b>Definition:</b> <a href="IndexExpr_8hh_source.html#l00049">IndexExpr.hh:49</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a7e840365086a663e8ed80f4c59eb3a19"><div class="ttname"><a href="classXML__Loading__Archive.html#a7e840365086a663e8ed80f4c59eb3a19">XML_Loading_Archive::~XML_Loading_Archive</a></div><div class="ttdeci">~XML_Loading_Archive()</div><div class="ttdoc">destructor (unmap()s file). </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01061">Archive.cc:1061</a></div></div>
<div class="ttc" id="classStateIndicator_html_a4c2ceda2ab0c6a27b906f268e2ae229c"><div class="ttname"><a href="classStateIndicator.html#a4c2ceda2ab0c6a27b906f268e2ae229c">StateIndicator::current_stack</a></div><div class="ttdeci">Prefix current_stack</div><div class="ttdoc">the current-stack of this context. </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00211">StateIndicator.hh:211</a></div></div>
<div class="ttc" id="classUserFunction_html_a3fb5d002175b6e8a7adf754159583ee9"><div class="ttname"><a href="classUserFunction.html#a3fb5d002175b6e8a7adf754159583ee9">UserFunction::fix_lambda</a></div><div class="ttdeci">static UserFunction * fix_lambda(Symbol &amp;var, const UCS_string &amp;text)</div><div class="ttdoc">(re-)create a lambda </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8cc_source.html#l01127">UserFunction.cc:1127</a></div></div>
<div class="ttc" id="classValueStackItem_html_aa7df380849cb4bb49c76a5c79acd0b01"><div class="ttname"><a href="classValueStackItem.html#aa7df380849cb4bb49c76a5c79acd0b01">ValueStackItem::name_class</a></div><div class="ttdeci">NameClass name_class</div><div class="ttdoc">the (current) name class (like âNC, unless shared variable) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00086">Symbol.hh:86</a></div></div>
<div class="ttc" id="classSymbol_html_a26e1c2223b6377aca652d1a7102b417b"><div class="ttname"><a href="classSymbol.html#a26e1c2223b6377aca652d1a7102b417b">Symbol::push</a></div><div class="ttdeci">virtual void push()</div><div class="ttdoc">Push an undefined entry onto the stack of this Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00403">Symbol.cc:403</a></div></div>
<div class="ttc" id="structXML__Saving__Archive_1_1__val__par_html_a6d5a79370470ee36bcbf545706e09184"><div class="ttname"><a href="structXML__Saving__Archive_1_1__val__par.html#a6d5a79370470ee36bcbf545706e09184">XML_Saving_Archive::_val_par::_val</a></div><div class="ttdeci">const Value * _val</div><div class="ttdoc">the value </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00128">Archive.hh:128</a></div></div>
<div class="ttc" id="classPrefix_html_a259b788120fe1caad9e50f1e7c532910"><div class="ttname"><a href="classPrefix.html#a259b788120fe1caad9e50f1e7c532910">Prefix::lookahead_high</a></div><div class="ttdeci">Function_PC lookahead_high</div><div class="ttdoc">the highest PC seen in the current statement </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00324">Prefix.hh:324</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_aa277539e63e84953fa49069c6d51ea47"><div class="ttname"><a href="classXML__Loading__Archive.html#aa277539e63e84953fa49069c6d51ea47">XML_Loading_Archive::read_Commands</a></div><div class="ttdeci">void read_Commands()</div><div class="ttdoc">read all user-defined commands </div></div>
<div class="ttc" id="classToken_html_abbcd765b2cb1c9da24d762ca451eefa4"><div class="ttname"><a href="classToken.html#abbcd765b2cb1c9da24d762ca451eefa4">Token::get_flt_val</a></div><div class="ttdeci">APL_Float get_flt_val() const</div><div class="ttdoc">return the float value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00175">Token.hh:175</a></div></div>
<div class="ttc" id="classDynamicObject_html"><div class="ttname"><a href="classDynamicObject.html">DynamicObject</a></div><div class="ttdoc">A Value or an IndexExpr. </div><div class="ttdef"><b>Definition:</b> <a href="DynamicObject_8hh_source.html#l00041">DynamicObject.hh:41</a></div></div>
<div class="ttc" id="classUserFunction_html_a33987249eae73499f4213d3c63a101ec"><div class="ttname"><a href="classUserFunction.html#a33987249eae73499f4213d3c63a101ec">UserFunction::canonical</a></div><div class="ttdeci">virtual UCS_string canonical(bool with_lines) const</div><div class="ttdoc">Quad_CR of this function. </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8cc_source.html#l01347">UserFunction.cc:1347</a></div></div>
<div class="ttc" id="classUCS__string_html_a59758db55104daa7d4d72933412f86e3"><div class="ttname"><a href="classUCS__string.html#a59758db55104daa7d4d72933412f86e3">UCS_string::starts_iwith</a></div><div class="ttdeci">bool starts_iwith(const char *prefix) const</div><div class="ttdoc">return true if this starts with prefix (ASCII, case insensitive). </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00607">UCS_string.cc:607</a></div></div>
<div class="ttc" id="classLvalCell_html"><div class="ttname"><a href="classLvalCell.html">LvalCell</a></div><div class="ttdoc">A cell pointing to another cell (which shall be updated) </div><div class="ttdef"><b>Definition:</b> <a href="LvalCell_8hh_source.html#l00032">LvalCell.hh:32</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a7823097bb94ced4a46e153e77a919b45"><div class="ttname"><a href="classXML__Loading__Archive.html#a7823097bb94ced4a46e153e77a919b45">XML_Loading_Archive::read_UserFunction</a></div><div class="ttdeci">Executable * read_UserFunction()</div><div class="ttdoc">read a user defined Executable </div></div>
<div class="ttc" id="classPrefix_html_a6161ea4f341e55bfdfa6c51e1d15e9e9"><div class="ttname"><a href="classPrefix.html#a6161ea4f341e55bfdfa6c51e1d15e9e9">Prefix::set_assign_state</a></div><div class="ttdeci">void set_assign_state(Assign_state new_state)</div><div class="ttdoc">set the current assignment state </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00169">Prefix.hh:169</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a4180cae61394cb08ba070c7ecd138ea5"><div class="ttname"><a href="classXML__Loading__Archive.html#a4180cae61394cb08ba070c7ecd138ea5">XML_Loading_Archive::vids_COPY</a></div><div class="ttdeci">std::vector&lt; int &gt; vids_COPY</div><div class="ttdoc">the vids to be copied (empty if all) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00392">Archive.hh:392</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a2794bca6a47030fdb69759aacb80eb33"><div class="ttname"><a href="classXML__Loading__Archive.html#a2794bca6a47030fdb69759aacb80eb33">XML_Loading_Archive::where_att</a></div><div class="ttdeci">void where_att(ostream &amp;out)</div><div class="ttdoc">show attributes of current tag </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01108">Archive.cc:1108</a></div></div>
<div class="ttc" id="classLvalCell_html_ab78f3147b19c684e4a02381fd857bc16"><div class="ttname"><a href="classLvalCell.html#ab78f3147b19c684e4a02381fd857bc16">LvalCell::get_cell_owner</a></div><div class="ttdeci">Value * get_cell_owner() const</div><div class="ttdoc">return the owner of the cell pointed to </div><div class="ttdef"><b>Definition:</b> <a href="LvalCell_8hh_source.html#l00052">LvalCell.hh:52</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ad8cf599287f50b63ee67539509c6dce1"><div class="ttname"><a href="classXML__Loading__Archive.html#ad8cf599287f50b63ee67539509c6dce1">XML_Loading_Archive::expect_tag</a></div><div class="ttdeci">void expect_tag(const char *prefix, const char *loc) const</div><div class="ttdoc">check that is_tag(prefix) is true and print error info if not </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01141">Archive.cc:1141</a></div></div>
<div class="ttc" id="classToken_html_aaeae570a5fa2e6a83ca2b824c6013ef9"><div class="ttname"><a href="classToken.html#aaeae570a5fa2e6a83ca2b824c6013ef9">Token::get_char_val</a></div><div class="ttdeci">Unicode get_char_val() const</div><div class="ttdoc">return the Unicode value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00149">Token.hh:149</a></div></div>
<div class="ttc" id="classCell_html_a9a0028fd74f00deb001a8062a55916c6"><div class="ttname"><a href="classCell.html#a9a0028fd74f00deb001a8062a55916c6">Cell::get_real_value</a></div><div class="ttdeci">virtual APL_Float get_real_value() const</div><div class="ttdoc">Return the real part of a cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00117">Cell.hh:117</a></div></div>
<div class="ttc" id="classCell_html_a6ff584df467249c47c95570553d1f05e"><div class="ttname"><a href="classCell.html#a6ff584df467249c47c95570553d1f05e">Cell::init_from_value</a></div><div class="ttdeci">void init_from_value(Value *value, Value &amp;cell_owner, const char *loc)</div><div class="ttdoc">init this Cell from value. If value is a scalar then its first element is used (and value is erased)...</div><div class="ttdef"><b>Definition:</b> <a href="Cell_8cc_source.html#l00044">Cell.cc:44</a></div></div>
<div class="ttc" id="classIndexExpr_html_a2b6175a58b688ad2f64b6bbafdda67c6"><div class="ttname"><a href="classIndexExpr.html#a2b6175a58b688ad2f64b6bbafdda67c6">IndexExpr::values</a></div><div class="ttdeci">Value_P values[MAX_RANK]</div><div class="ttdoc">The values (0 = elided index as in [] or [;]. </div><div class="ttdef"><b>Definition:</b> <a href="IndexExpr_8hh_source.html#l00046">IndexExpr.hh:46</a></div></div>
<div class="ttc" id="classHeapsort_html_a9b74961df9e87b6a9888924a6a1e2d85"><div class="ttname"><a href="classHeapsort.html#a9b74961df9e87b6a9888924a6a1e2d85">Heapsort::sort</a></div><div class="ttdeci">static void sort(T *a, int64_t heapsize, const void *comp_arg, greater_fun gf)</div><div class="ttdoc">sort a according to gf </div><div class="ttdef"><b>Definition:</b> <a href="Heapsort_8hh_source.html#l00040">Heapsort.hh:40</a></div></div>
<div class="ttc" id="classAvec_html_a0641640e6b1cc18a1e4c525dcf5e83a4"><div class="ttname"><a href="classAvec.html#a0641640e6b1cc18a1e4c525dcf5e83a4">Avec::map_alternative_char</a></div><div class="ttdeci">static CHT_Index map_alternative_char(Unicode alt_av)</div><div class="ttdoc">Find return position of alt_av, or Invalid_AV if not found. </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8cc_source.html#l00246">Avec.cc:246</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a3bc62d82baa6be004398f70faa1b3e8b"><div class="ttname"><a href="classXML__Saving__Archive.html#a3bc62d82baa6be004398f70faa1b3e8b">XML_Saving_Archive::save_SI_entry</a></div><div class="ttdeci">void save_SI_entry(const StateIndicator &amp;si)</div><div class="ttdoc">write StateIndicator entry si </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00406">Archive.cc:406</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a6e040d3332aece6bdb83933dfdba6bb1"><div class="ttname"><a href="classXML__Loading__Archive.html#a6e040d3332aece6bdb83933dfdba6bb1">XML_Loading_Archive::end_attr</a></div><div class="ttdeci">const UTF8 * end_attr</div><div class="ttdoc">the end of attributes </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00374">Archive.hh:374</a></div></div>
<div class="ttc" id="classValue__P__Base_html_a64e77a99509cdb6ecbe4cf273a2e7694"><div class="ttname"><a href="classValue__P__Base.html#a64e77a99509cdb6ecbe4cf273a2e7694">Value_P_Base::get</a></div><div class="ttdeci">const Value * get() const</div><div class="ttdoc">return a const pointer to the Value </div><div class="ttdef"><b>Definition:</b> <a href="Value__P_8hh_source.html#l00076">Value_P.hh:76</a></div></div>
<div class="ttc" id="classFunction_html_a1e71e36e1f81d6963d1ebba0b67495b3"><div class="ttname"><a href="classFunction.html#a1e71e36e1f81d6963d1ebba0b67495b3">Function::get_exec_properties</a></div><div class="ttdeci">virtual const int * get_exec_properties() const</div><div class="ttdoc">return the execution properties (3 âAT) for this function </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00128">Function.hh:128</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a1b1ca89a2511ad238680e25ea1fa6c03"><div class="ttname"><a href="classXML__Loading__Archive.html#a1b1ca89a2511ad238680e25ea1fa6c03">XML_Loading_Archive::reading_vids</a></div><div class="ttdeci">bool reading_vids</div><div class="ttdoc">true if reading vids (preparation for )COPY or )PCOPY) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00389">Archive.hh:389</a></div></div>
<div class="ttc" id="classPrefix_html_afdd4d7c0aa09d4bc4c9d8588d3872bd6"><div class="ttname"><a href="classPrefix.html#afdd4d7c0aa09d4bc4c9d8588d3872bd6">Prefix::get_assign_state</a></div><div class="ttdeci">Assign_state get_assign_state() const</div><div class="ttdoc">return the current assignment state </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00165">Prefix.hh:165</a></div></div>
<div class="ttc" id="classValue_html_aa7a89fbbca076c1c0c1a579702bf5ff1"><div class="ttname"><a href="classValue.html#aa7a89fbbca076c1c0c1a579702bf5ff1">Value::get_flags</a></div><div class="ttdeci">ValueFlags get_flags() const</div><div class="ttdoc">return the current flags </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00519">Value.hh:519</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a3da33c8ba02d437ae1803eac0464c945"><div class="ttname"><a href="classXML__Saving__Archive.html#a3da33c8ba02d437ae1803eac0464c945">XML_Saving_Archive::decr</a></div><div class="ttdeci">static const char * decr(int &amp;space, const char *str)</div><div class="ttdoc">decrement space by length of str and return str </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00085">Archive.cc:85</a></div></div>
<div class="ttc" id="classUCS__string_html_a0484e41b5bfb14e6ec82c5fd7217df56"><div class="ttname"><a href="classUCS__string.html#a0484e41b5bfb14e6ec82c5fd7217df56">UCS_string::append</a></div><div class="ttdeci">void append(const UCS_string &amp;other)</div><div class="ttdoc">append UCS_string other to this string </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8hh_source.html#l00255">UCS_string.hh:255</a></div></div>
<div class="ttc" id="classSymbol_html_a044ed60a7206b0375b538b286c2d1efe"><div class="ttname"><a href="classSymbol.html#a044ed60a7206b0375b538b286c2d1efe">Symbol::get_ufun_depth</a></div><div class="ttdeci">int get_ufun_depth(const UserFunction *ufun)</div><div class="ttdoc">return the depth (global == 0) of ufun on the stack. Use the largest depth if ufun is pushed multiple...</div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00466">Symbol.cc:466</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a0075b59e28b60c22aea8c3f47c108fd7"><div class="ttname"><a href="classXML__Saving__Archive.html#a0075b59e28b60c22aea8c3f47c108fd7">XML_Saving_Archive::Vid</a></div><div class="ttdeci">Vid</div><div class="ttdoc">an index for values </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00069">Archive.hh:69</a></div></div>
<div class="ttc" id="classWorkspace_html_a5ebd29d8c860b589b9f1d8118a949514"><div class="ttname"><a href="classWorkspace.html#a5ebd29d8c860b589b9f1d8118a949514">Workspace::more_error</a></div><div class="ttdeci">static UCS_string &amp; more_error()</div><div class="ttdoc">return reference to more info about last error </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00138">Workspace.hh:138</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a5090b77f6e3f2b8367964ffcbc65a524"><div class="ttname"><a href="classXML__Loading__Archive.html#a5090b77f6e3f2b8367964ffcbc65a524">XML_Loading_Archive::attributes</a></div><div class="ttdeci">const UTF8 * attributes</div><div class="ttdoc">the attributes of the current tag </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00371">Archive.hh:371</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a2e7aed9883aa106937d3d9313163e10b"><div class="ttname"><a href="classXML__Loading__Archive.html#a2e7aed9883aa106937d3d9313163e10b">XML_Loading_Archive::read_Function</a></div><div class="ttdeci">void read_Function(int d, Symbol &amp;symbol)</div><div class="ttdoc">read next Function element </div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a3ea748a15d0a90fe9a32c362b14da7fd"><div class="ttname"><a href="classXML__Loading__Archive.html#a3ea748a15d0a90fe9a32c362b14da7fd">XML_Loading_Archive::read_Workspace</a></div><div class="ttdeci">void read_Workspace(bool silent)</div><div class="ttdoc">read an entire workspace, throw DOMAIN_ERROR on failure </div></div>
<div class="ttc" id="classValue_html_ac5b54e3a13cab0837442f1575b3299a5"><div class="ttname"><a href="classValue.html#ac5b54e3a13cab0837442f1575b3299a5">Value::nz_element_count</a></div><div class="ttdeci">ShapeItem nz_element_count() const</div><div class="ttdoc">return the number of elements, but at least 1 (for the prototype). </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00167">Value.hh:167</a></div></div>
<div class="ttc" id="classValue__P_html"><div class="ttname"><a href="classValue__P.html">Value_P</a></div><div class="ttdoc">A Value smart * (constructors) </div><div class="ttdef"><b>Definition:</b> <a href="Value__P_8hh_source.html#l00108">Value_P.hh:108</a></div></div>
<div class="ttc" id="unionValueStackItem_1_1__sym__val_html_a315fb71a75aeb00281e49d799d38b917"><div class="ttname"><a href="unionValueStackItem_1_1__sym__val.html#a315fb71a75aeb00281e49d799d38b917">ValueStackItem::_sym_val::label</a></div><div class="ttdeci">Function_Line label</div><div class="ttdoc">if Symbol is a label </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00075">Symbol.hh:75</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_acc327395cab545ea7797d92f5c931cab"><div class="ttname"><a href="classXML__Saving__Archive.html#acc327395cab545ea7797d92f5c931cab">XML_Saving_Archive::save</a></div><div class="ttdeci">XML_Saving_Archive &amp; save()</div><div class="ttdoc">write entire workspace </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00665">Archive.cc:665</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a1acad23f43b2ceb1287f378c3e001d33"><div class="ttname"><a href="classXML__Loading__Archive.html#a1acad23f43b2ceb1287f378c3e001d33">XML_Loading_Archive::find_float_attr</a></div><div class="ttdeci">APL_Float find_float_attr(const char *att_name)</div><div class="ttdoc">return floating point value of attribute att_name </div></div>
<div class="ttc" id="structCommand_1_1user__command_html_a81974e387324da0e19443e8ea5cc26c7"><div class="ttname"><a href="structCommand_1_1user__command.html#a81974e387324da0e19443e8ea5cc26c7">Command::user_command::mode</a></div><div class="ttdeci">int mode</div><div class="ttdoc">how left arg of apl_function is computed </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00085">Command.hh:85</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_aab446d446b66c86f1b03130dd7dac439"><div class="ttname"><a href="classXML__Loading__Archive.html#aab446d446b66c86f1b03130dd7dac439">XML_Loading_Archive::line_no</a></div><div class="ttdeci">int line_no</div><div class="ttdoc">the current line </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00359">Archive.hh:359</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a66cf20b8d9b8ada0838c506e4a2fd798"><div class="ttname"><a href="classXML__Saving__Archive.html#a66cf20b8d9b8ada0838c506e4a2fd798">XML_Saving_Archive::save_Function_name</a></div><div class="ttdeci">int save_Function_name(const char *ufun_prefix, const char *level_prefix, const char *id_prefix, const Function &amp;fun)</div><div class="ttdoc">write either the name and SI-level of user-defined function or the id of a system function...</div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00297">Archive.cc:297</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a987f28e4f3139e5f1c96913468ea3057"><div class="ttname"><a href="classXML__Loading__Archive.html#a987f28e4f3139e5f1c96913468ea3057">XML_Loading_Archive::next_tag</a></div><div class="ttdeci">bool next_tag(const char *loc)</div><div class="ttdoc">move to next tag, return true if EOF </div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ac55dc91bb76192278fdc070f2d3cf1fe"><div class="ttname"><a href="classXML__Loading__Archive.html#ac55dc91bb76192278fdc070f2d3cf1fe">XML_Loading_Archive::fd</a></div><div class="ttdeci">int fd</div><div class="ttdoc">the file descriptor for the mmap()ed workspace.xml file </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00344">Archive.hh:344</a></div></div>
<div class="ttc" id="classUserFunction_html_a59a4ca14c199edd678c1f10ba95e2f43"><div class="ttname"><a href="classUserFunction.html#a59a4ca14c199edd678c1f10ba95e2f43">UserFunction::get_name</a></div><div class="ttdeci">virtual UCS_string get_name() const</div><div class="ttdoc">return the name of this function </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8hh_source.html#l00130">UserFunction.hh:130</a></div></div>
<div class="ttc" id="classCell_html_ad165f9ab69abf46b2cf44d301a700a1c"><div class="ttname"><a href="classCell.html#ad165f9ab69abf46b2cf44d301a700a1c">Cell::get_int_value</a></div><div class="ttdeci">virtual APL_Integer get_int_value() const</div><div class="ttdoc">Return the integer value of a cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00114">Cell.hh:114</a></div></div>
<div class="ttc" id="classIntCell_html"><div class="ttname"><a href="classIntCell.html">IntCell</a></div><div class="ttdoc">A cell containing a single Integer value. </div><div class="ttdef"><b>Definition:</b> <a href="IntCell_8hh_source.html#l00034">IntCell.hh:34</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a512c6c10453c3658699214014907996e"><div class="ttname"><a href="classXML__Loading__Archive.html#a512c6c10453c3658699214014907996e">XML_Loading_Archive::file_start</a></div><div class="ttdeci">const char * file_start</div><div class="ttdoc">the start of the file </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00353">Archive.hh:353</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a92142d2fec9d5a49667566e0bb86f55c"><div class="ttname"><a href="classXML__Saving__Archive.html#a92142d2fec9d5a49667566e0bb86f55c">XML_Saving_Archive::save_symtab</a></div><div class="ttdeci">void save_symtab(const SymbolTable &amp;symtab)</div><div class="ttdoc">write SymbolTable symtab </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00356">Archive.cc:356</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a792fe70c4d59b79b9f1da76945377e35"><div class="ttname"><a href="classXML__Saving__Archive.html#a792fe70c4d59b79b9f1da76945377e35">XML_Saving_Archive::emit_unicode</a></div><div class="ttdeci">void emit_unicode(Unicode uni, int &amp;space)</div><div class="ttdoc">emit one unicode character (inside &quot;...&quot;) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00110">Archive.cc:110</a></div></div>
<div class="ttc" id="classSymbol_html_a34b203a4879ba48c148f0c271cd029a2"><div class="ttname"><a href="classSymbol.html#a34b203a4879ba48c148f0c271cd029a2">Symbol::is_erased</a></div><div class="ttdeci">bool is_erased() const</div><div class="ttdoc">return true, iff this Symbol is not used (i.e. erased) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00206">Symbol.hh:206</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a970e38bdfc09eb7dea1fc8746cb9c01f"><div class="ttname"><a href="classXML__Loading__Archive.html#a970e38bdfc09eb7dea1fc8746cb9c01f">XML_Loading_Archive::tag_name</a></div><div class="ttdeci">const UTF8 * tag_name</div><div class="ttdoc">the name of the current tag, e.g. &quot;Symbol&quot; or &quot;/Symbol&quot; </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00368">Archive.hh:368</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a82e8b22e8f1ddc37a678108a89ae2e92"><div class="ttname"><a href="classXML__Loading__Archive.html#a82e8b22e8f1ddc37a678108a89ae2e92">XML_Loading_Archive::map_length</a></div><div class="ttdeci">size_t map_length</div><div class="ttdoc">the length of the file (for mmap()) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00350">Archive.hh:350</a></div></div>
<div class="ttc" id="classWorkspace_html_a441d5cd1b3abd5a455093e10c1ff966d"><div class="ttname"><a href="classWorkspace.html#a441d5cd1b3abd5a455093e10c1ff966d">Workspace::get_v_CHI</a></div><div class="ttdeci">static CHI &amp; get_v_CHI()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00052">Workspace.hh:52</a></div></div>
<div class="ttc" id="classCommand_html_af5d73db57801b2363c954b402f19186d"><div class="ttname"><a href="classCommand.html#af5d73db57801b2363c954b402f19186d">Command::cmd_CHECK</a></div><div class="ttdeci">static void cmd_CHECK(ostream &amp;out)</div><div class="ttdoc">check workspace integrity (stale Value and IndexExpr objects, etc) </div><div class="ttdef"><b>Definition:</b> <a href="Command_8cc_source.html#l00650">Command.cc:650</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a7eee7a67f5b415fc9dba9d604f67dcd6"><div class="ttname"><a href="classXML__Loading__Archive.html#a7eee7a67f5b415fc9dba9d604f67dcd6">XML_Loading_Archive::allowed_objects</a></div><div class="ttdeci">UCS_string_vector allowed_objects</div><div class="ttdoc">the names of objects (empty if all) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00395">Archive.hh:395</a></div></div>
<div class="ttc" id="classFunction_html_af2588ccbf97a2a9ad1a2169c04b63bf4"><div class="ttname"><a href="classFunction.html#af2588ccbf97a2a9ad1a2169c04b63bf4">Function::is_derived</a></div><div class="ttdeci">virtual bool is_derived() const</div><div class="ttdoc">return true iff this function is a derived function </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00082">Function.hh:82</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a3a8c16532bbdfbb3901be3e38b6a1cdb"><div class="ttname"><a href="classXML__Loading__Archive.html#a3a8c16532bbdfbb3901be3e38b6a1cdb">XML_Loading_Archive::file_end</a></div><div class="ttdeci">const UTF8 * file_end</div><div class="ttdoc">the end of the file </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00377">Archive.hh:377</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a6a78e55137388c3ba253e27d6e98a1c6"><div class="ttname"><a href="classXML__Loading__Archive.html#a6a78e55137388c3ba253e27d6e98a1c6">XML_Loading_Archive::read_Execute</a></div><div class="ttdeci">Executable * read_Execute()</div><div class="ttdoc">read â Executable </div></div>
<div class="ttc" id="classCell_html_a3af019707c56a0fb40fce2d370af8307"><div class="ttname"><a href="classCell.html#a3af019707c56a0fb40fce2d370af8307">Cell::get_pointer_value</a></div><div class="ttdeci">virtual Value_P get_pointer_value() const</div><div class="ttdoc">Return the APL value of a cell (Asserts for non-pointer cells) </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00126">Cell.hh:126</a></div></div>
<div class="ttc" id="classID_html_af1bb0741450971c1882af59af87eef29"><div class="ttname"><a href="classID.html#af1bb0741450971c1882af59af87eef29">ID::get_name_UCS</a></div><div class="ttdeci">static UCS_string get_name_UCS(Id id)</div><div class="ttdoc">return the printable name for id as UCS_string </div><div class="ttdef"><b>Definition:</b> <a href="Id_8cc_source.html#l00089">Id.cc:89</a></div></div>
<div class="ttc" id="classCell_html_a63b030d0f3c3d2c8c1d742b5a0ba2212"><div class="ttname"><a href="classCell.html#a63b030d0f3c3d2c8c1d742b5a0ba2212">Cell::cFloatCell</a></div><div class="ttdeci">virtual const FloatCell &amp; cFloatCell() const</div><div class="ttdoc">downcast to const FloatCell </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00484">Cell.hh:484</a></div></div>
<div class="ttc" id="classWorkspace_html_a1d227be0952fda0d4c1e9f45e60e83e0"><div class="ttname"><a href="classWorkspace.html#a1d227be0952fda0d4c1e9f45e60e83e0">Workspace::push_SI</a></div><div class="ttdeci">static void push_SI(Executable *fun, const char *loc)</div><div class="ttdoc">Create a new SI-entry on the SI stack. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8cc_source.html#l00076">Workspace.cc:76</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a319259c8e532c47946deaf6f8afee8f4"><div class="ttname"><a href="classXML__Loading__Archive.html#a319259c8e532c47946deaf6f8afee8f4">XML_Loading_Archive::read_Statement</a></div><div class="ttdeci">Executable * read_Statement()</div><div class="ttdoc">read â Executable </div></div>
<div class="ttc" id="classAPL__Float_html"><div class="ttname"><a href="classAPL__Float.html">APL_Float</a></div><div class="ttdoc">a non-rational APL floating point value </div><div class="ttdef"><b>Definition:</b> <a href="APL__Float__as__class_8hh_source.html#l00141">APL_Float_as_class.hh:141</a></div></div>
<div class="ttc" id="classValue_html_a84cb4f9a86540d04c52bfae177a97bc8"><div class="ttname"><a href="classValue.html#a84cb4f9a86540d04c52bfae177a97bc8">Value::is_marked</a></div><div class="ttdeci">bool is_marked() const</div><div class="ttdoc">true if Value flag marked is set </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00449">Value.hh:449</a></div></div>
<div class="ttc" id="classFunction_html_a4d6d6e2b3c6306fbca9a537d6652daee"><div class="ttname"><a href="classFunction.html#a4d6d6e2b3c6306fbca9a537d6652daee">Function::set_creation_time</a></div><div class="ttdeci">void set_creation_time(APL_time_us t)</div><div class="ttdoc">set the time when the function was created (0 for built-in functions) </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00124">Function.hh:124</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a75730a7dd5af9238d0d1aa223a54060e"><div class="ttname"><a href="classXML__Loading__Archive.html#a75730a7dd5af9238d0d1aa223a54060e">XML_Loading_Archive::read_Symbol</a></div><div class="ttdeci">void read_Symbol()</div><div class="ttdoc">read next Symbol element </div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a7be3cd4709e0783821a20738ee44433f"><div class="ttname"><a href="classXML__Saving__Archive.html#a7be3cd4709e0783821a20738ee44433f">XML_Saving_Archive::emit_token_val</a></div><div class="ttdeci">void emit_token_val(const Token &amp;tok)</div><div class="ttdoc">emit a token value up to (excluding) the &amp;#39;&gt;&amp;#39; of the end token </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00535">Archive.cc:535</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a45c9b23463cf5379d2788af1789a62f0"><div class="ttname"><a href="classXML__Loading__Archive.html#a45c9b23463cf5379d2788af1789a62f0">XML_Loading_Archive::read_vids</a></div><div class="ttdeci">void read_vids()</div><div class="ttdoc">read vids of top-level variables </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01088">Archive.cc:1088</a></div></div>
<div class="ttc" id="classToken_html_a785302e067658aeeeb65a45815b9d9da"><div class="ttname"><a href="classToken.html#a785302e067658aeeeb65a45815b9d9da">Token::get_fun_line</a></div><div class="ttdeci">Function_Line get_fun_line() const</div><div class="ttdoc">return the Function_Line value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00191">Token.hh:191</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ad0c398f273df586ef1a2cb9b87b9cb41"><div class="ttname"><a href="classXML__Loading__Archive.html#ad0c398f273df586ef1a2cb9b87b9cb41">XML_Loading_Archive::find_attr</a></div><div class="ttdeci">const UTF8 * find_attr(const char *att_name, bool optional)</div><div class="ttdoc">find attribute att_name and return a pointer to its value if found) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01160">Archive.cc:1160</a></div></div>
<div class="ttc" id="classFunction_html_ac4a44eddbd86c8278f240ec95c5f1553"><div class="ttname"><a href="classFunction.html#ac4a44eddbd86c8278f240ec95c5f1553">Function::is_native</a></div><div class="ttdeci">virtual bool is_native() const</div><div class="ttdoc">return true iff this is a native function </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00073">Function.hh:73</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_afb3ef30dff883e356ba2441184ae3a5b"><div class="ttname"><a href="classXML__Loading__Archive.html#afb3ef30dff883e356ba2441184ae3a5b">XML_Loading_Archive::XML_Loading_Archive</a></div><div class="ttdeci">XML_Loading_Archive(const char *_filename, int &amp;dump_fd)</div><div class="ttdoc">constructor: remember file name and workspace </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00991">Archive.cc:991</a></div></div>
<div class="ttc" id="classSymbol_html_a126fc214ca7a2e2d364e0982a36b2ace"><div class="ttname"><a href="classSymbol.html#a126fc214ca7a2e2d364e0982a36b2ace">Symbol::get_name</a></div><div class="ttdeci">virtual UCS_string get_name() const</div><div class="ttdoc">The name of this Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00214">Symbol.hh:214</a></div></div>
<div class="ttc" id="classUserFunction_html_a248155b050f1f573367a08dea602a10c"><div class="ttname"><a href="classUserFunction.html#a248155b050f1f573367a08dea602a10c">UserFunction::set_exec_properties</a></div><div class="ttdeci">void set_exec_properties(const int *props)</div><div class="ttdoc">set execution properties (as per A âFX) </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8hh_source.html#l00123">UserFunction.hh:123</a></div></div>
<div class="ttc" id="classAvec_html_a88cc8af75e4a2c4d8a1d382637ca07b4"><div class="ttname"><a href="classAvec.html#a88cc8af75e4a2c4d8a1d382637ca07b4">Avec::is_quad</a></div><div class="ttdeci">static bool is_quad(Unicode uni)</div><div class="ttdoc">return true if unicode uni is a quad (â or â¯) </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8hh_source.html#l00123">Avec.hh:123</a></div></div>
<div class="ttc" id="classToken_html_a1a31afbb07e3f1dbb86d5f872ce5c297"><div class="ttname"><a href="classToken.html#a1a31afbb07e3f1dbb86d5f872ce5c297">Token::get_ValueType</a></div><div class="ttdeci">TokenValueType get_ValueType() const</div><div class="ttdoc">return the TokenValueType of this token. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00134">Token.hh:134</a></div></div>
<div class="ttc" id="classValueStackItem_html_a739208eba9367a492a89ff2a2e5b1796"><div class="ttname"><a href="classValueStackItem.html#a739208eba9367a492a89ff2a2e5b1796">ValueStackItem::sym_val</a></div><div class="ttdeci">_sym_val sym_val</div><div class="ttdoc">the (current) value of this symbol (unless variable) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00080">Symbol.hh:80</a></div></div>
<div class="ttc" id="classStateIndicator_html_a8923e217fa9bf331dd84cc15487dd177"><div class="ttname"><a href="classStateIndicator.html#a8923e217fa9bf331dd84cc15487dd177">StateIndicator::get_executable</a></div><div class="ttdeci">Executable * get_executable()</div><div class="ttdoc">return pointer to the current user function, statements, or execute </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00076">StateIndicator.hh:76</a></div></div>
<div class="ttc" id="structCommand_1_1user__command_html"><div class="ttname"><a href="structCommand_1_1user__command.html">Command::user_command</a></div><div class="ttdoc">one user defined command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00081">Command.hh:81</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_abb05032bb86e9f391d5c56d5d22eef30"><div class="ttname"><a href="classXML__Loading__Archive.html#abb05032bb86e9f391d5c56d5d22eef30">XML_Loading_Archive::map_start</a></div><div class="ttdeci">void * map_start</div><div class="ttdoc">the start of the file (for mmap()) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00347">Archive.hh:347</a></div></div>
<div class="ttc" id="classWorkspace_html_ace4fff7bb6714da724d964c5aa9c5503"><div class="ttname"><a href="classWorkspace.html#ace4fff7bb6714da724d964c5aa9c5503">Workspace::get_WS_name</a></div><div class="ttdeci">static const UCS_string &amp; get_WS_name()</div><div class="ttdoc">return the name of the current workspace. </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00166">Workspace.hh:166</a></div></div>
<div class="ttc" id="classToken_html_a13e8b65088f8a7d103772acc6cfb5140"><div class="ttname"><a href="classToken.html#a13e8b65088f8a7d103772acc6cfb5140">Token::get_tag</a></div><div class="ttdeci">const TokenTag get_tag() const</div><div class="ttdoc">return the tag of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00146">Token.hh:146</a></div></div>
<div class="ttc" id="classUTF8__string_html_a27a630b44bca173fe9ea5005bcb3e460"><div class="ttname"><a href="classUTF8__string.html#a27a630b44bca173fe9ea5005bcb3e460">UTF8_string::toUni</a></div><div class="ttdeci">static Unicode toUni(const UTF8 *string, int &amp;len, bool verbose)</div><div class="ttdoc">convert the first char in UTF8-encoded string to Unicode, setting len to the number of bytes in the U...</div><div class="ttdef"><b>Definition:</b> <a href="UTF8__string_8cc_source.html#l00157">UTF8_string.cc:157</a></div></div>
<div class="ttc" id="classToken_html_a2a53219afbfd9ec64b5dd449c225ed68"><div class="ttname"><a href="classToken.html#a2a53219afbfd9ec64b5dd449c225ed68">Token::get_cpx_real</a></div><div class="ttdeci">APL_Float get_cpx_real() const</div><div class="ttdoc">return the complex real value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00179">Token.hh:179</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_adb5a5f67fc6ceffb3260e61b5fe9994c"><div class="ttname"><a href="classXML__Loading__Archive.html#adb5a5f67fc6ceffb3260e61b5fe9994c">XML_Loading_Archive::is_tag</a></div><div class="ttdeci">bool is_tag(const char *prefix) const</div><div class="ttdoc">return true iff tagname starts with prefix </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01135">Archive.cc:1135</a></div></div>
<div class="ttc" id="classValue_html_aeb50afe8b59d1321fc03d8a2626c8613"><div class="ttname"><a href="classValue.html#aeb50afe8b59d1321fc03d8a2626c8613">Value::get_shape_item</a></div><div class="ttdeci">ShapeItem get_shape_item(Rank r) const</div><div class="ttdoc">return the r&amp;#39;th shape element of this value </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00179">Value.hh:179</a></div></div>
<div class="ttc" id="classQuad__TZ_html_aca7ab6c3b090bca821fc85536b6a67c1"><div class="ttname"><a href="classQuad__TZ.html#aca7ab6c3b090bca821fc85536b6a67c1">Quad_TZ::get_offset</a></div><div class="ttdeci">int64_t get_offset() const</div><div class="ttdoc">return the offset from GMT of the current timezone (in seconds). we make this int64_t rather than int...</div><div class="ttdef"><b>Definition:</b> <a href="SystemVariable_8hh_source.html#l00632">SystemVariable.hh:632</a></div></div>
<div class="ttc" id="classToken_html_a218560fb5b8bb15e75a3f7e907115e07"><div class="ttname"><a href="classToken.html#a218560fb5b8bb15e75a3f7e907115e07">Token::get_index_val</a></div><div class="ttdeci">IndexExpr &amp; get_index_val() const</div><div class="ttdoc">return the IndexExpr value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00232">Token.hh:232</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_ab1e1e0d523a391379f41e5e8efa7ff66"><div class="ttname"><a href="classXML__Saving__Archive.html#ab1e1e0d523a391379f41e5e8efa7ff66">XML_Saving_Archive::do_indent</a></div><div class="ttdeci">int do_indent()</div><div class="ttdoc">indent by indent levels, return space left on line </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00092">Archive.cc:92</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a7a5012ead73b1bd89de4c8537da01ef6"><div class="ttname"><a href="classXML__Loading__Archive.html#a7a5012ead73b1bd89de4c8537da01ef6">XML_Loading_Archive::line_start</a></div><div class="ttdeci">const UTF8 * line_start</div><div class="ttdoc">the start of the current line </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00356">Archive.hh:356</a></div></div>
<div class="ttc" id="classValue_html_a5ac7131d2f89d0bc8b8907d960cbd125"><div class="ttname"><a href="classValue.html#a5ac7131d2f89d0bc8b8907d960cbd125">Value::get_rank</a></div><div class="ttdeci">uRank get_rank() const</div><div class="ttdoc">return the rank of this value </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00171">Value.hh:171</a></div></div>
<div class="ttc" id="classStateIndicator_html_abab6fb3f97723c662eaadf1f28b0f718"><div class="ttname"><a href="classStateIndicator.html#abab6fb3f97723c662eaadf1f28b0f718">StateIndicator::set_PC</a></div><div class="ttdeci">void set_PC(Function_PC new_pc)</div><div class="ttdoc">set the current PC </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00091">StateIndicator.hh:91</a></div></div>
<div class="ttc" id="classValue_html"><div class="ttname"><a href="classValue.html">Value</a></div><div class="ttdoc">An APL Value (essentially a Shape and a ravel) </div><div class="ttdef"><b>Definition:</b> <a href="Value_8hh_source.html#l00056">Value.hh:56</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_aa94a5825fbb0c3c7d5d894a3d8430221"><div class="ttname"><a href="classXML__Loading__Archive.html#aa94a5825fbb0c3c7d5d894a3d8430221">XML_Loading_Archive::read_Cells</a></div><div class="ttdeci">void read_Cells(Cell *&amp;cell, Value &amp;cell_owner, const UTF8 *&amp;first)</div><div class="ttdoc">read cell(s) starting at cell from string starting at first to number of cells read ...</div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01522">Archive.cc:1522</a></div></div>
<div class="ttc" id="structToken__loc_html_aebf5051dccb240685ec2dd6c39195a64"><div class="ttname"><a href="structToken__loc.html#aebf5051dccb240685ec2dd6c39195a64">Token_loc::tok</a></div><div class="ttdeci">Token tok</div><div class="ttdoc">the token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00374">Token.hh:374</a></div></div>
<div class="ttc" id="classValue_html_a38979fd196c826557e1614fa0514bbaa"><div class="ttname"><a href="classValue.html#a38979fd196c826557e1614fa0514bbaa">Value::erase_stale</a></div><div class="ttdeci">static int erase_stale(const char *loc)</div><div class="ttdoc">erase stale values </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cc_source.html#l00611">Value.cc:611</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html"><div class="ttname"><a href="classXML__Saving__Archive.html">XML_Saving_Archive</a></div><div class="ttdoc">a helper class for saving an APL workspace </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00053">Archive.hh:53</a></div></div>
<div class="ttc" id="classUTF8__string_html"><div class="ttname"><a href="classUTF8__string.html">UTF8_string</a></div><div class="ttdoc">an UTF8 encoded Unicode (RFC 3629) string </div><div class="ttdef"><b>Definition:</b> <a href="UTF8__string_8hh_source.html#l00048">UTF8_string.hh:48</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a7381cad28d73cdca8a76bf741921c63d"><div class="ttname"><a href="classXML__Loading__Archive.html#a7381cad28d73cdca8a76bf741921c63d">XML_Loading_Archive::read_Parser</a></div><div class="ttdeci">void read_Parser(StateIndicator &amp;si, int lev)</div><div class="ttdoc">read parsers in SI entry </div></div>
<div class="ttc" id="classMacro_html_afaaea363cb2b900ee4bb374994285141"><div class="ttname"><a href="classMacro.html#afaaea363cb2b900ee4bb374994285141">Macro::Macro_num</a></div><div class="ttdeci">Macro_num</div><div class="ttdoc">the unique number of a macro </div><div class="ttdef"><b>Definition:</b> <a href="Macro_8hh_source.html#l00032">Macro.hh:32</a></div></div>
<div class="ttc" id="classToken_html_af613f4df5fa00a0c8fa4de162284171c"><div class="ttname"><a href="classToken.html#af613f4df5fa00a0c8fa4de162284171c">Token::get_function</a></div><div class="ttdeci">Function * get_function() const</div><div class="ttdoc">return the Function * value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00240">Token.hh:240</a></div></div>
<div class="ttc" id="classIndexExpr_html"><div class="ttname"><a href="classIndexExpr.html">IndexExpr</a></div><div class="ttdoc">The interal representation of some APL index [A1;A2;...;An]. </div><div class="ttdef"><b>Definition:</b> <a href="IndexExpr_8hh_source.html#l00033">IndexExpr.hh:33</a></div></div>
<div class="ttc" id="structCommand_1_1user__command_html_a464103ea3f5203247f3bedeace167ed4"><div class="ttname"><a href="structCommand_1_1user__command.html#a464103ea3f5203247f3bedeace167ed4">Command::user_command::prefix</a></div><div class="ttdeci">UCS_string prefix</div><div class="ttdoc">the first characters of the command </div><div class="ttdef"><b>Definition:</b> <a href="Command_8hh_source.html#l00083">Command.hh:83</a></div></div>
<div class="ttc" id="classSymbol_html"><div class="ttname"><a href="classSymbol.html">Symbol</a></div><div class="ttdoc">Base class for variables, defined functions, and distinguished names. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00090">Symbol.hh:90</a></div></div>
<div class="ttc" id="structXML__Saving__Archive_1_1__val__par_html_aa244b5ee23bfb8318a5267cc3e48221b"><div class="ttname"><a href="structXML__Saving__Archive_1_1__val__par.html#aa244b5ee23bfb8318a5267cc3e48221b">XML_Saving_Archive::_val_par::compare_val_par1</a></div><div class="ttdeci">static int compare_val_par1(const void *key, const void *B)</div><div class="ttdoc">compare function for bsearch() </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00658">Archive.cc:658</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_adfa844fcc401d3c335cafa5abda2f35d"><div class="ttname"><a href="classXML__Loading__Archive.html#adfa844fcc401d3c335cafa5abda2f35d">XML_Loading_Archive::read_SI_entry</a></div><div class="ttdeci">void read_SI_entry(int level)</div><div class="ttdoc">read next StateIndicator entry </div></div>
<div class="ttc" id="classExecutable_html"><div class="ttname"><a href="classExecutable.html">Executable</a></div><div class="ttdoc">Base class for ExecuteList, StatementList, and UserFunction. </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00040">Executable.hh:40</a></div></div>
<div class="ttc" id="classNativeFunction_html"><div class="ttname"><a href="classNativeFunction.html">NativeFunction</a></div><div class="ttdoc">A user-defined function written in C++. </div><div class="ttdef"><b>Definition:</b> <a href="NativeFunction_8hh_source.html#l00035">NativeFunction.hh:35</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a91f354b394601f7dc6369c6485670e5f"><div class="ttname"><a href="classXML__Saving__Archive.html#a91f354b394601f7dc6369c6485670e5f">XML_Saving_Archive::save_Ravel</a></div><div class="ttdeci">XML_Saving_Archive &amp; save_Ravel(Vid vid)</div><div class="ttdoc">write ravel of Value v </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00170">Archive.cc:170</a></div></div>
<div class="ttc" id="classID_html_a3241389cbeefaf59830ba5f75cf56378"><div class="ttname"><a href="classID.html#a3241389cbeefaf59830ba5f75cf56378">ID::get_system_function</a></div><div class="ttdeci">static Function * get_system_function(Id id)</div><div class="ttdoc">If id is the ID of primitive function, primitive operator, or quad function, then return a pointer to...</div><div class="ttdef"><b>Definition:</b> <a href="Id_8cc_source.html#l00135">Id.cc:135</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_af9d935a599af0ad9cfba39555312899e"><div class="ttname"><a href="classXML__Saving__Archive.html#af9d935a599af0ad9cfba39555312899e">XML_Saving_Archive::save_Parser</a></div><div class="ttdeci">void save_Parser(const Prefix &amp;pfp)</div><div class="ttdoc">write Prefix pfp </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00330">Archive.cc:330</a></div></div>
<div class="ttc" id="classUserFunction_html"><div class="ttname"><a href="classUserFunction.html">UserFunction</a></div><div class="ttdoc">One user-defined function. </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8hh_source.html#l00036">UserFunction.hh:36</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a0892b3f304e6f3bd5f940b882dd8318b"><div class="ttname"><a href="classXML__Saving__Archive.html#a0892b3f304e6f3bd5f940b882dd8318b">XML_Saving_Archive::save_user_commands</a></div><div class="ttdeci">void save_user_commands(const std::vector&lt; Command::user_command &gt; &amp;cmds)</div><div class="ttdoc">write all user defined commands </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00499">Archive.cc:499</a></div></div>
<div class="ttc" id="classCell_html_a0e6b9239fa77e3222f32400d51c8f114"><div class="ttname"><a href="classCell.html#a0e6b9239fa77e3222f32400d51c8f114">Cell::get_imag_value</a></div><div class="ttdeci">virtual APL_Float get_imag_value() const</div><div class="ttdoc">Return the imaginary part of a cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00120">Cell.hh:120</a></div></div>
<div class="ttc" id="classPrefix_html"><div class="ttname"><a href="classPrefix.html">Prefix</a></div><div class="ttdoc">a class for reducing all statements of an Executable </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00057">Prefix.hh:57</a></div></div>
<div class="ttc" id="classSymbol_html_a8bb62c2d692cba8527325bdd723695fb"><div class="ttname"><a href="classSymbol.html#a8bb62c2d692cba8527325bdd723695fb">Symbol::push_label</a></div><div class="ttdeci">virtual void push_label(Function_Line label)</div><div class="ttdoc">push a label onto the stack of this Symbol </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00417">Symbol.cc:417</a></div></div>
<div class="ttc" id="classPrefix_html_ab2d9dce194de98e40b6f1bbec063be71"><div class="ttname"><a href="classPrefix.html#ab2d9dce194de98e40b6f1bbec063be71">Prefix::get_lookahead_high</a></div><div class="ttdeci">Function_PC get_lookahead_high() const</div><div class="ttdoc">return the highest PC seen in the current statement </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00173">Prefix.hh:173</a></div></div>
<div class="ttc" id="classUCS__string__vector_html_a65567680f61c6cf35a211fc7e8ae21ae"><div class="ttname"><a href="classUCS__string__vector.html#a65567680f61c6cf35a211fc7e8ae21ae">UCS_string_vector::contains</a></div><div class="ttdeci">bool contains(const UCS_string &amp;ucs) const</div><div class="ttdoc">return true iff one of the strings is equal to ucs </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string__vector_8hh_source.html#l00040">UCS_string_vector.hh:40</a></div></div>
<div class="ttc" id="classMacro_html_a89933a99c596869c61a077dbad886dc8"><div class="ttname"><a href="classMacro.html#a89933a99c596869c61a077dbad886dc8">Macro::get_macro</a></div><div class="ttdeci">static Macro * get_macro(Macro_num num)</div><div class="ttdoc">return the macro with macro_number num </div><div class="ttdef"><b>Definition:</b> <a href="Macro_8cc_source.html#l00052">Macro.cc:52</a></div></div>
<div class="ttc" id="classCell_html_a38a6a25f0ad091f35e3d9abfe5608a50"><div class="ttname"><a href="classCell.html#a38a6a25f0ad091f35e3d9abfe5608a50">Cell::get_cell_type</a></div><div class="ttdeci">virtual CellType get_cell_type() const</div><div class="ttdoc">return the type of this cell </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00266">Cell.hh:266</a></div></div>
<div class="ttc" id="structToken__loc_html_a511eae32c6a6c064243c8c6f0ac6dc54"><div class="ttname"><a href="structToken__loc.html#a511eae32c6a6c064243c8c6f0ac6dc54">Token_loc::pc</a></div><div class="ttdeci">Function_PC pc</div><div class="ttdoc">the PC of the leftmost (highest PC) token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00377">Token.hh:377</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a1233bd12e879f5670f4a234e0f37b7aa"><div class="ttname"><a href="classXML__Loading__Archive.html#a1233bd12e879f5670f4a234e0f37b7aa">XML_Loading_Archive::read_Variable</a></div><div class="ttdeci">void read_Variable(int d, Symbol &amp;symbol)</div><div class="ttdoc">read next Variable element </div></div>
<div class="ttc" id="classFunction_html_a2ea41f5c122b8b9ad7a32b742b3ce4a0"><div class="ttname"><a href="classFunction.html#a2ea41f5c122b8b9ad7a32b742b3ce4a0">Function::get_creation_time</a></div><div class="ttdeci">APL_time_us get_creation_time() const</div><div class="ttdoc">GMT when this function was created; 0 for system functions. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00120">Function.hh:120</a></div></div>
<div class="ttc" id="structXML__Saving__Archive_1_1__val__par_html_a350b32abe9e5057cfcb2c741b22b7da0"><div class="ttname"><a href="structXML__Saving__Archive_1_1__val__par.html#a350b32abe9e5057cfcb2c741b22b7da0">XML_Saving_Archive::_val_par::compare_val_par</a></div><div class="ttdeci">static bool compare_val_par(const _val_par &amp;A, const _val_par &amp;B, const void *)</div><div class="ttdoc">compare function for Heapsort::sort() </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00651">Archive.cc:651</a></div></div>
<div class="ttc" id="classUCS__string_html_a5776e51c6faa53537409322cd0ebf07a"><div class="ttname"><a href="classUCS__string.html#a5776e51c6faa53537409322cd0ebf07a">UCS_string::append_number</a></div><div class="ttdeci">void append_number(ShapeItem num)</div><div class="ttdoc">append number (in ASCII encoding like d) to this string </div><div class="ttdef"><b>Definition:</b> <a href="UCS__string_8cc_source.html#l00833">UCS_string.cc:833</a></div></div>
<div class="ttc" id="classWorkspace_html_a34c064c6760d7bfcc10e68700defe327"><div class="ttname"><a href="classWorkspace.html#a34c064c6760d7bfcc10e68700defe327">Workspace::get_v_Quad_TZ</a></div><div class="ttdeci">static Quad_TZ &amp; get_v_Quad_TZ()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00045">Workspace.hh:45</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ab000726e8f5db4742338a6844c899541"><div class="ttname"><a href="classXML__Loading__Archive.html#ab000726e8f5db4742338a6844c899541">XML_Loading_Archive::find_int_attr</a></div><div class="ttdeci">int64_t find_int_attr(const char *att_name, bool optional, int base)</div><div class="ttdoc">return integer value of attribute att_name </div></div>
<div class="ttc" id="classToken_html"><div class="ttname"><a href="classToken.html">Token</a></div><div class="ttdoc">One atom of an APL function or expression. </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00045">Token.hh:45</a></div></div>
<div class="ttc" id="classValue_html_a69a8e1aa89135b7ae26d26516524bfe1"><div class="ttname"><a href="classValue.html#a69a8e1aa89135b7ae26d26516524bfe1">Value::unmark</a></div><div class="ttdeci">void unmark() const</div><div class="ttdoc">clear marked flag on this value and its nested sub-values </div><div class="ttdef"><b>Definition:</b> <a href="Value_8cc_source.html#l00570">Value.cc:570</a></div></div>
<div class="ttc" id="classXML__Saving__Archive_html_a2595cc03a54882176e3d9bddd9bbff60"><div class="ttname"><a href="classXML__Saving__Archive.html#a2595cc03a54882176e3d9bddd9bbff60">XML_Saving_Archive::save_token_loc</a></div><div class="ttdeci">void save_token_loc(const Token_loc &amp;tloc)</div><div class="ttdoc">write Token_loc tloc </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l00524">Archive.cc:524</a></div></div>
<div class="ttc" id="classPrefix_html_abbfeb353dfb63b9e7701625f7e8da2c0"><div class="ttname"><a href="classPrefix.html#abbfeb353dfb63b9e7701625f7e8da2c0">Prefix::action</a></div><div class="ttdeci">R_action action</div><div class="ttdoc">the action to be taken after returning from a reduce_XXX() function </div><div class="ttdef"><b>Definition:</b> <a href="Prefix_8hh_source.html#l00330">Prefix.hh:330</a></div></div>
<div class="ttc" id="classWorkspace_html_ab0188eca4a9e7dd492e042f87ea69ba7"><div class="ttname"><a href="classWorkspace.html#ab0188eca4a9e7dd492e042f87ea69ba7">Workspace::lookup_symbol</a></div><div class="ttdeci">static Symbol * lookup_symbol(const UCS_string &amp;symbol_name)</div><div class="ttdoc">lookup an existing user defined symbol. If not found, create one (unless this would be a quad symbol)...</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00126">Workspace.hh:126</a></div></div>
<div class="ttc" id="classToken_html_aa92af5604449cd8c22b35297f07d5b9d"><div class="ttname"><a href="classToken.html#aa92af5604449cd8c22b35297f07d5b9d">Token::get_sym_ptr</a></div><div class="ttdeci">Symbol * get_sym_ptr() const</div><div class="ttdoc">return the Symbol * value of this token </div><div class="ttdef"><b>Definition:</b> <a href="Token_8hh_source.html#l00187">Token.hh:187</a></div></div>
<div class="ttc" id="classExecutable_html_a426a4201fb401213c4e13b3f27d35284"><div class="ttname"><a href="classExecutable.html#a426a4201fb401213c4e13b3f27d35284">Executable::get_text</a></div><div class="ttdeci">const UCS_string &amp; get_text(int l) const</div><div class="ttdoc">return function line n (0 = header line) </div><div class="ttdef"><b>Definition:</b> <a href="Executable_8hh_source.html#l00111">Executable.hh:111</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a25c408dc73f2e4ee01c6d42f70664263"><div class="ttname"><a href="classXML__Loading__Archive.html#a25c408dc73f2e4ee01c6d42f70664263">XML_Loading_Archive::filename</a></div><div class="ttdeci">const char * filename</div><div class="ttdoc">the file name from which this archive was read </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00411">Archive.hh:411</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a47c3635d861946a293de143bdda6e7d2"><div class="ttname"><a href="classXML__Loading__Archive.html#a47c3635d861946a293de143bdda6e7d2">XML_Loading_Archive::read_lambda</a></div><div class="ttdeci">Executable * read_lambda(const UTF8 *lambda_name)</div><div class="ttdoc">read a lambda </div></div>
<div class="ttc" id="classNamedObject_html_a3ff29d3b8f3eed6c55f535e1af8dbc91"><div class="ttname"><a href="classNamedObject.html#a3ff29d3b8f3eed6c55f535e1af8dbc91">NamedObject::get_Id</a></div><div class="ttdeci">Id get_Id() const</div><div class="ttdoc">return the Id of this object (ID_USER_SYMBOL for user defined objects) </div><div class="ttdef"><b>Definition:</b> <a href="NamedObject_8hh_source.html#l00088">NamedObject.hh:88</a></div></div>
<div class="ttc" id="classWorkspace_html_a04a668922bc9c899a92ab14873493199"><div class="ttname"><a href="classWorkspace.html#a04a668922bc9c899a92ab14873493199">Workspace::get_v_ALPHA</a></div><div class="ttdeci">static ALPHA &amp; get_v_ALPHA()</div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00050">Workspace.hh:50</a></div></div>
<div class="ttc" id="unionValueStackItem_1_1__sym__val_html_a68048ce9a0b919362f188c4c2d3cbd8a"><div class="ttname"><a href="unionValueStackItem_1_1__sym__val.html#a68048ce9a0b919362f188c4c2d3cbd8a">ValueStackItem::_sym_val::sv_key</a></div><div class="ttdeci">SV_key sv_key</div><div class="ttdoc">if Symbol is a shared variable </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00076">Symbol.hh:76</a></div></div>
<div class="ttc" id="classCell_html_ae98b3988a7fa52c6c157b4911b043dde"><div class="ttname"><a href="classCell.html#ae98b3988a7fa52c6c157b4911b043dde">Cell::is_pointer_cell</a></div><div class="ttdeci">virtual bool is_pointer_cell() const</div><div class="ttdoc">Return true iff this cell is a pointer (to a sub-array) cell. </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00201">Cell.hh:201</a></div></div>
<div class="ttc" id="classFunction_html_a5d1ea5b6f6267431f7ca2773fa0955b9"><div class="ttname"><a href="classFunction.html#a5d1ea5b6f6267431f7ca2773fa0955b9">Function::canonical</a></div><div class="ttdeci">virtual UCS_string canonical(bool with_lines) const</div><div class="ttdoc">Quad_CR of this function. </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00227">Function.hh:227</a></div></div>
<div class="ttc" id="classStateIndicator_html_a93fdf9b10d3c4253c3d79e018c799fcb"><div class="ttname"><a href="classStateIndicator.html#a93fdf9b10d3c4253c3d79e018c799fcb">StateIndicator::get_PC</a></div><div class="ttdeci">Function_PC get_PC() const</div><div class="ttdoc">return the current PC </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00087">StateIndicator.hh:87</a></div></div>
<div class="ttc" id="classWorkspace_html_a64cef901fd41c19f4521bdd1175d0be7"><div class="ttname"><a href="classWorkspace.html#a64cef901fd41c19f4521bdd1175d0be7">Workspace::SI_entry_count</a></div><div class="ttdeci">static int SI_entry_count()</div><div class="ttdoc">the number of SI entries </div><div class="ttdef"><b>Definition:</b> <a href="Workspace_8hh_source.html#l00113">Workspace.hh:113</a></div></div>
<div class="ttc" id="classCell_html_a06ef9c7f3c6bda37c480412a2bca2e9b"><div class="ttname"><a href="classCell.html#a06ef9c7f3c6bda37c480412a2bca2e9b">Cell::cLvalCell</a></div><div class="ttdeci">virtual const LvalCell &amp; cLvalCell() const</div><div class="ttdoc">downcast to const LvalCell </div><div class="ttdef"><b>Definition:</b> <a href="Cell_8hh_source.html#l00496">Cell.hh:496</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a323736803868a3ec3ac5158038d5c615"><div class="ttname"><a href="classXML__Loading__Archive.html#a323736803868a3ec3ac5158038d5c615">XML_Loading_Archive::read_unused_name</a></div><div class="ttdeci">void read_unused_name(int d, Symbol &amp;symbol)</div><div class="ttdoc">read next unused-name element </div></div>
<div class="ttc" id="classSymbol_html_ada4b68d3cdfdd1ec7228cb65ef9a1062"><div class="ttname"><a href="classSymbol.html#ada4b68d3cdfdd1ec7228cb65ef9a1062">Symbol::value_stack_size</a></div><div class="ttdeci">const int value_stack_size() const</div><div class="ttdoc">return the size of the value stack </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00237">Symbol.hh:237</a></div></div>
<div class="ttc" id="classNamedObject_html_adf8b778a154d1d6e35c7d8a169aaaeb5"><div class="ttname"><a href="classNamedObject.html#adf8b778a154d1d6e35c7d8a169aaaeb5">NamedObject::get_name</a></div><div class="ttdeci">virtual UCS_string get_name() const</div><div class="ttdoc">return the name of the named object </div><div class="ttdef"><b>Definition:</b> <a href="NamedObject_8hh_source.html#l00068">NamedObject.hh:68</a></div></div>
<div class="ttc" id="classStateIndicator_html_aa60ca9df0350c7b2e4c0825f061f300e"><div class="ttname"><a href="classStateIndicator.html#aa60ca9df0350c7b2e4c0825f061f300e">StateIndicator::get_level</a></div><div class="ttdeci">SI_level get_level() const</div><div class="ttdoc">return the nesting level (oldest SI has level 0, next has level 1, ...) </div><div class="ttdef"><b>Definition:</b> <a href="StateIndicator_8hh_source.html#l00102">StateIndicator.hh:102</a></div></div>
<div class="ttc" id="structXML__Saving__Archive_1_1__val__par_html"><div class="ttname"><a href="structXML__Saving__Archive_1_1__val__par.html">XML_Saving_Archive::_val_par</a></div><div class="ttdoc">a value and its parent (if the parent is nested) </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00113">Archive.hh:113</a></div></div>
<div class="ttc" id="classExecutable_html_a57c1ce1db5bf5710338d1b9cf84a6dfd"><div class="ttname"><a href="classExecutable.html#a57c1ce1db5bf5710338d1b9cf84a6dfd">Executable::get_name</a></div><div class="ttdeci">virtual UCS_string get_name() const =0</div><div class="ttdoc">return the name of this function, or â or â </div></div>
<div class="ttc" id="classSymbol_html_a141465ed91f80b5213b70fb8bef8dda3"><div class="ttname"><a href="classSymbol.html#a141465ed91f80b5213b70fb8bef8dda3">Symbol::is_readonly</a></div><div class="ttdeci">virtual bool is_readonly() const</div><div class="ttdoc">return true iff this variable is read-only (overloaded by RO_SystemVariable) </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8hh_source.html#l00148">Symbol.hh:148</a></div></div>
<div class="ttc" id="classFunction_html_a735c9e2d01eda71ddece9dc3c527b7b2"><div class="ttname"><a href="classFunction.html#a735c9e2d01eda71ddece9dc3c527b7b2">Function::is_macro</a></div><div class="ttdeci">virtual bool is_macro() const</div><div class="ttdoc">return true iff this function is a macro </div><div class="ttdef"><b>Definition:</b> <a href="Function_8hh_source.html#l00079">Function.hh:79</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_ac05e6074cb18f1573377837473de29df"><div class="ttname"><a href="classXML__Loading__Archive.html#ac05e6074cb18f1573377837473de29df">XML_Loading_Archive::get_uni</a></div><div class="ttdeci">bool get_uni()</div><div class="ttdoc">set current_char to next (UTF-8 encoded) char, return true if EOF </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8cc_source.html#l01123">Archive.cc:1123</a></div></div>
<div class="ttc" id="classSymbol_html_a739f019bbd3b466914ac56f3437496db"><div class="ttname"><a href="classSymbol.html#a739f019bbd3b466914ac56f3437496db">Symbol::assign</a></div><div class="ttdeci">virtual void assign(Value_P value, bool clone, const char *loc)</div><div class="ttdoc">Assign value to this Symbol. </div><div class="ttdef"><b>Definition:</b> <a href="Symbol_8cc_source.html#l00123">Symbol.cc:123</a></div></div>
<div class="ttc" id="classShape_html"><div class="ttname"><a href="classShape.html">Shape</a></div><div class="ttdoc">the shape of an APL value </div><div class="ttdef"><b>Definition:</b> <a href="Shape_8hh_source.html#l00031">Shape.hh:31</a></div></div>
<div class="ttc" id="classUserFunction_html_ac4673156caea5cc5c006a58bee8f9d25"><div class="ttname"><a href="classUserFunction.html#ac4673156caea5cc5c006a58bee8f9d25">UserFunction::is_lambda</a></div><div class="ttdeci">virtual bool is_lambda() const</div><div class="ttdoc">return true if this function is a lambda </div><div class="ttdef"><b>Definition:</b> <a href="UserFunction_8hh_source.html#l00047">UserFunction.hh:47</a></div></div>
<div class="ttc" id="classXML__Loading__Archive_html_a46e2693cedcb6b4e9574f12a862bb299"><div class="ttname"><a href="classXML__Loading__Archive.html#a46e2693cedcb6b4e9574f12a862bb299">XML_Loading_Archive::current_char</a></div><div class="ttdeci">Unicode current_char</div><div class="ttdoc">the current char </div><div class="ttdef"><b>Definition:</b> <a href="Archive_8hh_source.html#l00362">Archive.hh:362</a></div></div>
<div class="ttc" id="classAvec_html_a844e2fc3a73ef90f42e63a9c268f36b8"><div class="ttname"><a href="classAvec.html#a844e2fc3a73ef90f42e63a9c268f36b8">Avec::find_char</a></div><div class="ttdeci">static CHT_Index find_char(Unicode av)</div><div class="ttdoc">Find av in character_table. Return position or Invalid_CHT. </div><div class="ttdef"><b>Definition:</b> <a href="Avec_8cc_source.html#l00228">Avec.cc:228</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="dir_68267d1309a1af8e8297ef4c3efbcdba.html">src</a></li><li class="navelem"><b>Archive.cc</b></li>
    <li class="footer">Generated on Sun Aug 9 2020 16:43:41 for GNUAPL by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.13 </li>
  </ul>
</div>
</body>
</html>
